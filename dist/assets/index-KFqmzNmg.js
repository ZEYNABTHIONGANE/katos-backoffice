(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function nD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jy={exports:{}},Lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function sD(){if(W1)return Lu;W1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var h in i)h!=="key"&&(o[h]=i[h])}else o=i;return i=o.ref,{$$typeof:t,type:s,key:u,ref:i!==void 0?i:null,props:o}}return Lu.Fragment=e,Lu.jsx=n,Lu.jsxs=n,Lu}var Z1;function rD(){return Z1||(Z1=1,jy.exports=sD()),jy.exports}var c=rD(),Ry={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function iD(){if(J1)return qe;J1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function k(O,te,H){this.props=O,this.context=te,this.refs=j,this.updater=H||R}k.prototype.isReactComponent={},k.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function U(){}U.prototype=k.prototype;function V(O,te,H){this.props=O,this.context=te,this.refs=j,this.updater=H||R}var $=V.prototype=new U;$.constructor=V,M($,k.prototype),$.isPureReactComponent=!0;var Y=Array.isArray;function oe(){}var A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(O,te,H){var le=H.ref;return{$$typeof:t,type:O,key:te,ref:le!==void 0?le:null,props:H}}function L(O,te){return C(O.type,te,O.props)}function z(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function B(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(H){return te[H]})}var D=/\/+/g;function _e(O,te){return typeof O=="object"&&O!==null&&O.key!=null?B(""+O.key):te.toString(36)}function me(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(oe,oe):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function X(O,te,H,le,be){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var je=!1;if(O===null)je=!0;else switch(ke){case"bigint":case"string":case"number":je=!0;break;case"object":switch(O.$$typeof){case t:case e:je=!0;break;case y:return je=O._init,X(je(O._payload),te,H,le,be)}}if(je)return be=be(O),je=le===""?"."+_e(O,0):le,Y(be)?(H="",je!=null&&(H=je.replace(D,"$&/")+"/"),X(be,te,H,"",function(ds){return ds})):be!=null&&(z(be)&&(be=L(be,H+(be.key==null||O&&O.key===be.key?"":(""+be.key).replace(D,"$&/")+"/")+je)),te.push(be)),1;je=0;var Et=le===""?".":le+":";if(Y(O))for(var ft=0;ft<O.length;ft++)le=O[ft],ke=Et+_e(le,ft),je+=X(le,te,H,ke,be);else if(ft=T(O),typeof ft=="function")for(O=ft.call(O),ft=0;!(le=O.next()).done;)le=le.value,ke=Et+_e(le,ft++),je+=X(le,te,H,ke,be);else if(ke==="object"){if(typeof O.then=="function")return X(me(O),te,H,le,be);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return je}function K(O,te,H){if(O==null)return O;var le=[],be=0;return X(O,le,"","",function(ke){return te.call(H,ke,be++)}),le}function Z(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(H){(O._status===0||O._status===-1)&&(O._status=1,O._result=H)},function(H){(O._status===0||O._status===-1)&&(O._status=2,O._result=H)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var q=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ye={map:K,forEach:function(O,te,H){K(O,function(){te.apply(this,arguments)},H)},count:function(O){var te=0;return K(O,function(){te++}),te},toArray:function(O){return K(O,function(te){return te})||[]},only:function(O){if(!z(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return qe.Activity=v,qe.Children=ye,qe.Component=k,qe.Fragment=n,qe.Profiler=i,qe.PureComponent=V,qe.StrictMode=s,qe.Suspense=f,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,qe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return A.H.useMemoCache(O)}},qe.cache=function(O){return function(){return O.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(O,te,H){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var le=M({},O.props),be=O.key;if(te!=null)for(ke in te.key!==void 0&&(be=""+te.key),te)!N.call(te,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&te.ref===void 0||(le[ke]=te[ke]);var ke=arguments.length-2;if(ke===1)le.children=H;else if(1<ke){for(var je=Array(ke),Et=0;Et<ke;Et++)je[Et]=arguments[Et+2];le.children=je}return C(O.type,be,le)},qe.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},qe.createElement=function(O,te,H){var le,be={},ke=null;if(te!=null)for(le in te.key!==void 0&&(ke=""+te.key),te)N.call(te,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(be[le]=te[le]);var je=arguments.length-2;if(je===1)be.children=H;else if(1<je){for(var Et=Array(je),ft=0;ft<je;ft++)Et[ft]=arguments[ft+2];be.children=Et}if(O&&O.defaultProps)for(le in je=O.defaultProps,je)be[le]===void 0&&(be[le]=je[le]);return C(O,ke,be)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(O){return{$$typeof:h,render:O}},qe.isValidElement=z,qe.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:Z}},qe.memo=function(O,te){return{$$typeof:m,type:O,compare:te===void 0?null:te}},qe.startTransition=function(O){var te=A.T,H={};A.T=H;try{var le=O(),be=A.S;be!==null&&be(H,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(oe,q)}catch(ke){q(ke)}finally{te!==null&&H.types!==null&&(te.types=H.types),A.T=te}},qe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},qe.use=function(O){return A.H.use(O)},qe.useActionState=function(O,te,H){return A.H.useActionState(O,te,H)},qe.useCallback=function(O,te){return A.H.useCallback(O,te)},qe.useContext=function(O){return A.H.useContext(O)},qe.useDebugValue=function(){},qe.useDeferredValue=function(O,te){return A.H.useDeferredValue(O,te)},qe.useEffect=function(O,te){return A.H.useEffect(O,te)},qe.useEffectEvent=function(O){return A.H.useEffectEvent(O)},qe.useId=function(){return A.H.useId()},qe.useImperativeHandle=function(O,te,H){return A.H.useImperativeHandle(O,te,H)},qe.useInsertionEffect=function(O,te){return A.H.useInsertionEffect(O,te)},qe.useLayoutEffect=function(O,te){return A.H.useLayoutEffect(O,te)},qe.useMemo=function(O,te){return A.H.useMemo(O,te)},qe.useOptimistic=function(O,te){return A.H.useOptimistic(O,te)},qe.useReducer=function(O,te,H){return A.H.useReducer(O,te,H)},qe.useRef=function(O){return A.H.useRef(O)},qe.useState=function(O){return A.H.useState(O)},qe.useSyncExternalStore=function(O,te,H){return A.H.useSyncExternalStore(O,te,H)},qe.useTransition=function(){return A.H.useTransition()},qe.version="19.2.0",qe}var eE;function Ix(){return eE||(eE=1,Ry.exports=iD()),Ry.exports}var S=Ix();const ot=nD(S);var Iy={exports:{}},Uu={},Dy={exports:{}},My={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function aD(){return tE||(tE=1,(function(t){function e(X,K){var Z=X.length;X.push(K);e:for(;0<Z;){var q=Z-1>>>1,ye=X[q];if(0<i(ye,K))X[q]=K,X[Z]=ye,Z=q;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var K=X[0],Z=X.pop();if(Z!==K){X[0]=Z;e:for(var q=0,ye=X.length,O=ye>>>1;q<O;){var te=2*(q+1)-1,H=X[te],le=te+1,be=X[le];if(0>i(H,Z))le<ye&&0>i(be,H)?(X[q]=be,X[le]=Z,q=le):(X[q]=H,X[te]=Z,q=te);else if(le<ye&&0>i(be,Z))X[q]=be,X[le]=Z,q=le;else break e}}return K}function i(X,K){var Z=X.sortIndex-K.sortIndex;return Z!==0?Z:X.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],m=[],y=1,v=null,b=3,T=!1,R=!1,M=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function $(X){for(var K=n(m);K!==null;){if(K.callback===null)s(m);else if(K.startTime<=X)s(m),K.sortIndex=K.expirationTime,e(f,K);else break;K=n(m)}}function Y(X){if(M=!1,$(X),!R)if(n(f)!==null)R=!0,oe||(oe=!0,B());else{var K=n(m);K!==null&&me(Y,K.startTime-X)}}var oe=!1,A=-1,N=5,C=-1;function L(){return j?!0:!(t.unstable_now()-C<N)}function z(){if(j=!1,oe){var X=t.unstable_now();C=X;var K=!0;try{e:{R=!1,M&&(M=!1,U(A),A=-1),T=!0;var Z=b;try{t:{for($(X),v=n(f);v!==null&&!(v.expirationTime>X&&L());){var q=v.callback;if(typeof q=="function"){v.callback=null,b=v.priorityLevel;var ye=q(v.expirationTime<=X);if(X=t.unstable_now(),typeof ye=="function"){v.callback=ye,$(X),K=!0;break t}v===n(f)&&s(f),$(X)}else s(f);v=n(f)}if(v!==null)K=!0;else{var O=n(m);O!==null&&me(Y,O.startTime-X),K=!1}}break e}finally{v=null,b=Z,T=!1}K=void 0}}finally{K?B():oe=!1}}}var B;if(typeof V=="function")B=function(){V(z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,_e=D.port2;D.port1.onmessage=z,B=function(){_e.postMessage(null)}}else B=function(){k(z,0)};function me(X,K){A=k(function(){X(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(X){switch(b){case 1:case 2:case 3:var K=3;break;default:K=b}var Z=b;b=K;try{return X()}finally{b=Z}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(X,K){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Z=b;b=X;try{return K()}finally{b=Z}},t.unstable_scheduleCallback=function(X,K,Z){var q=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?q+Z:q):Z=q,X){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Z+ye,X={id:y++,callback:K,priorityLevel:X,startTime:Z,expirationTime:ye,sortIndex:-1},Z>q?(X.sortIndex=Z,e(m,X),n(f)===null&&X===n(m)&&(M?(U(A),A=-1):M=!0,me(Y,Z-q))):(X.sortIndex=ye,e(f,X),R||T||(R=!0,oe||(oe=!0,B()))),X},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(X){var K=b;return function(){var Z=b;b=K;try{return X.apply(this,arguments)}finally{b=Z}}}})(My)),My}var nE;function oD(){return nE||(nE=1,Dy.exports=aD()),Dy.exports}var ky={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function lD(){if(sE)return Nn;sE=1;var t=Ix();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:f,containerInfo:m,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Nn.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,y)},Nn.flushSync=function(f){var m=u.T,y=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=m,s.p=y,s.d.f()}},Nn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(f,m))},Nn.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Nn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,v=h(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:T}):y==="script"&&s.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Nn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);s.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(f)},Nn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=h(y,m.crossOrigin);s.d.L(f,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Nn.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=h(m.as,m.crossOrigin);s.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(f)},Nn.requestFormReset=function(f){s.d.r(f)},Nn.unstable_batchedUpdates=function(f,m){return f(m)},Nn.useFormState=function(f,m,y){return u.H.useFormState(f,m,y)},Nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var rE;function cD(){if(rE)return ky.exports;rE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ky.exports=lD(),ky.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function uD(){if(iE)return Uu;iE=1;var t=oD(),e=Ix(),n=cD();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function u(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(s(188))}function m(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(s(188));return a!==r?null:r}for(var l=r,d=a;;){var g=l.return;if(g===null)break;var x=g.alternate;if(x===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===l)return f(g),r;if(x===d)return f(g),a;x=x.sibling}throw Error(s(188))}if(l.return!==d.return)l=g,d=x;else{for(var _=!1,I=g.child;I;){if(I===l){_=!0,l=g,d=x;break}if(I===d){_=!0,d=g,l=x;break}I=I.sibling}if(!_){for(I=x.child;I;){if(I===l){_=!0,l=x,d=g;break}if(I===d){_=!0,d=x,l=g;break}I=I.sibling}if(!_)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:a}function y(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=y(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),V=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function _e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case M:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case Y:return"Suspense";case oe:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case V:return r.displayName||"Context";case U:return(r._context.displayName||"Context")+".Consumer";case $:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return a=r.displayName||null,a!==null?a:_e(r.type)||"Memo";case N:a=r._payload,r=r._init;try{return _e(r(a))}catch{}}return null}var me=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},q=[],ye=-1;function O(r){return{current:r}}function te(r){0>ye||(r.current=q[ye],q[ye]=null,ye--)}function H(r,a){ye++,q[ye]=r.current,r.current=a}var le=O(null),be=O(null),ke=O(null),je=O(null);function Et(r,a){switch(H(ke,a),H(be,r),H(le,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?b1(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=b1(a),r=w1(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(le),H(le,r)}function ft(){te(le),te(be),te(ke)}function ds(r){r.memoizedState!==null&&H(je,r);var a=le.current,l=w1(a,r.type);a!==l&&(H(be,r),H(le,l))}function ir(r){be.current===r&&(te(le),te(be)),je.current===r&&(te(je),ku._currentValue=Z)}var ks,Jo;function ar(r){if(ks===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ks=a&&a[1]||"",Jo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+r+Jo}var kc=!1;function Ha(r,a){if(!r||kc)return"";kc=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var ne=ae}Reflect.construct(r,[],he)}else{try{he.call()}catch(ae){ne=ae}r.call(he.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),_=x[0],I=x[1];if(_&&I){var F=_.split(`
`),ee=I.split(`
`);for(g=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;if(d===F.length||g===ee.length)for(d=F.length-1,g=ee.length-1;1<=d&&0<=g&&F[d]!==ee[g];)g--;for(;1<=d&&0<=g;d--,g--)if(F[d]!==ee[g]){if(d!==1||g!==1)do if(d--,g--,0>g||F[d]!==ee[g]){var ce=`
`+F[d].replace(" at new "," at ");return r.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",r.displayName)),ce}while(1<=d&&0<=g);break}}}finally{kc=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?ar(l):""}function Pc(r,a){switch(r.tag){case 26:case 27:case 5:return ar(r.type);case 16:return ar("Lazy");case 13:return r.child!==a&&a!==null?ar("Suspense Fallback"):ar("Suspense");case 19:return ar("SuspenseList");case 0:case 15:return Ha(r.type,!1);case 11:return Ha(r.type.render,!1);case 1:return Ha(r.type,!0);case 31:return ar("Activity");default:return""}}function Oc(r){try{var a="",l=null;do a+=Pc(r,l),l=r,r=r.return;while(r);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var $t=Object.prototype.hasOwnProperty,sn=t.unstable_scheduleCallback,Ri=t.unstable_cancelCallback,Ip=t.unstable_shouldYield,oh=t.unstable_requestPaint,Dn=t.unstable_now,Ga=t.unstable_getCurrentPriorityLevel,Vc=t.unstable_ImmediatePriority,Lc=t.unstable_UserBlockingPriority,Ii=t.unstable_NormalPriority,Dp=t.unstable_LowPriority,lh=t.unstable_IdlePriority,ch=t.log,uh=t.unstable_setDisableYieldValue,Ps=null,fn=null;function hs(r){if(typeof ch=="function"&&uh(r),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Ps,r)}catch{}}var Lt=Math.clz32?Math.clz32:hh,dh=Math.log,el=Math.LN2;function hh(r){return r>>>=0,r===0?32:31-(dh(r)/el|0)|0}var or=256,Ka=262144,Ht=4194304;function lr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cr(r,a,l){var d=r.pendingLanes;if(d===0)return 0;var g=0,x=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var I=d&134217727;return I!==0?(d=I&~x,d!==0?g=lr(d):(_&=I,_!==0?g=lr(_):l||(l=I&~r,l!==0&&(g=lr(l))))):(I=d&~x,I!==0?g=lr(I):_!==0?g=lr(_):l||(l=d&~r,l!==0&&(g=lr(l)))),g===0?0:a!==0&&a!==g&&(a&x)===0&&(x=g&-g,l=a&-a,x>=l||x===32&&(l&4194048)!==0)?a:g}function Os(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Mp(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(){var r=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),r}function ur(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function Ya(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function kp(r,a,l,d,g,x){var _=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var I=r.entanglements,F=r.expirationTimes,ee=r.hiddenUpdates;for(l=_&~l;0<l;){var ce=31-Lt(l),he=1<<ce;I[ce]=0,F[ce]=-1;var ne=ee[ce];if(ne!==null)for(ee[ce]=null,ce=0;ce<ne.length;ce++){var ae=ne[ce];ae!==null&&(ae.lane&=-536870913)}l&=~he}d!==0&&Xa(r,d,0),x!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=x&~(_&~a))}function Xa(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var d=31-Lt(a);r.entangledLanes|=a,r.entanglements[d]=r.entanglements[d]|1073741824|l&261930}function Uc(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var d=31-Lt(l),g=1<<d;g&a|r[d]&a&&(r[d]|=a),l&=~g}}function zc(r,a){var l=a&-a;return l=(l&42)!==0?1:Qa(l),(l&(r.suspendedLanes|a))!==0?0:l}function Qa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Gr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function mh(){var r=K.p;return r!==0?r:(r=window.event,r===void 0?32:$1(r.type))}function Vs(r,a){var l=K.p;try{return K.p=r,a()}finally{K.p=l}}var Ls=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Ls,cn="__reactProps$"+Ls,dr="__reactContainer$"+Ls,tl="__reactEvents$"+Ls,Pp="__reactListeners$"+Ls,ph="__reactHandles$"+Ls,gh="__reactResources$"+Ls,hr="__reactMarker$"+Ls;function nl(r){delete r[Gt],delete r[cn],delete r[tl],delete r[Pp],delete r[ph]}function fr(r){var a=r[Gt];if(a)return a;for(var l=r.parentNode;l;){if(a=l[dr]||l[Gt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=C1(r);r!==null;){if(l=r[Gt])return l;r=C1(r)}return a}r=l,l=r.parentNode}return null}function fs(r){if(r=r[Gt]||r[dr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Jn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function mr(r){var a=r[gh];return a||(a=r[gh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kt(r){r[hr]=!0}var Bc=new Set,Fc={};function pr(r,a){gr(r,a),gr(r+"Capture",a)}function gr(r,a){for(Fc[r]=a,r=0;r<a.length;r++)Bc.add(a[r])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$c={},Hc={};function yh(r){return $t.call(Hc,r)?!0:$t.call($c,r)?!1:qc.test(r)?Hc[r]=!0:($c[r]=!0,!1)}function sl(r,a,l){if(yh(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function es(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function Yt(r,a,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+d)}}function un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Di(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Gc(r,a,l){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,x=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return g.call(this)},set:function(_){l=""+_,x.call(this,_)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function mt(r){if(!r._valueTracker){var a=Di(r)?"checked":"value";r._valueTracker=Gc(r,a,""+r[a])}}function Wa(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return r&&(d=Di(r)?r.checked?"true":"false":r.value),r=d,r!==l?(a.setValue(r),!0):!1}function yr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Za=/[\n"\\]/g;function qn(r){return r.replace(Za,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function rl(r,a,l,d,g,x,_,I){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),a!=null?_==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+un(a)):r.value!==""+un(a)&&(r.value=""+un(a)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),a!=null?Kc(r,_,un(a)):l!=null?Kc(r,_,un(l)):d!=null&&r.removeAttribute("value"),g==null&&x!=null&&(r.defaultChecked=!!x),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+un(I):r.removeAttribute("name")}function xh(r,a,l,d,g,x,_,I){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),a!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){mt(r);return}l=l!=null?""+un(l):"",a=a!=null?""+un(a):l,I||a===r.value||(r.value=a),r.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=I?r.checked:!!d,r.defaultChecked=!!d,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),mt(r)}function Kc(r,a,l){a==="number"&&yr(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Mi(r,a,l,d){if(r=r.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<r.length;l++)g=a.hasOwnProperty("$"+r[l].value),r[l].selected!==g&&(r[l].selected=g),g&&d&&(r[l].defaultSelected=!0)}else{for(l=""+un(l),a=null,g=0;g<r.length;g++){if(r[g].value===l){r[g].selected=!0,d&&(r[g].defaultSelected=!0);return}a!==null||r[g].disabled||(a=r[g])}a!==null&&(a.selected=!0)}}function vh(r,a,l){if(a!=null&&(a=""+un(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+un(l):""}function ki(r,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(s(92));if(me(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=un(a),r.defaultValue=l,d=r.textContent,d===l&&d!==""&&d!==null&&(r.value=d),mt(r)}function $n(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var bh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(r,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":d?r.setProperty(a,l):typeof l!="number"||l===0||bh.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function Xc(r,a,l){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&l[g]!==d&&Yc(r,g,d)}else for(var x in a)a.hasOwnProperty(x)&&Yc(r,x,a[x])}function il(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(r){return Pi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Us(){}var Qc=null;function ms(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Oi=null,xr=null;function Ja(r){var a=fs(r);if(a&&(r=a.stateNode)){var l=r[cn]||null;e:switch(r=a.stateNode,a.type){case"input":if(rl(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==r&&d.form===r.form){var g=d[cn]||null;if(!g)throw Error(s(90));rl(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===r.form&&Wa(d)}break e;case"textarea":vh(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Mi(r,!!l.multiple,a,!1)}}}var ol=!1;function Vi(r,a,l){if(ol)return r(a,l);ol=!0;try{var d=r(a);return d}finally{if(ol=!1,(Oi!==null||xr!==null)&&(pf(),Oi&&(a=Oi,r=xr,xr=Oi=null,Ja(a),r)))for(a=0;a<r.length;a++)Ja(r[a])}}function zs(r,a){var l=r.stateNode;if(l===null)return null;var d=l[cn]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,a,typeof l));return l}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=!1;if(ps)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){eo=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{eo=!1}var vr=null,Wc=null,to=null;function Zc(){if(to)return to;var r,a=Wc,l=a.length,d,g="value"in vr?vr.value:vr.textContent,x=g.length;for(r=0;r<l&&a[r]===g[r];r++);var _=l-r;for(d=1;d<=_&&a[l-d]===g[x-d];d++);return to=g.slice(r,1<d?1-d:void 0)}function no(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Kr(){return!0}function Bs(){return!1}function mn(r){function a(l,d,g,x,_){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(l=r[I],this[I]=l?l(x):x[I]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Kr:Bs,this.isPropagationStopped=Bs,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),a}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=mn(Yr),Li=v({},Yr,{view:0,detail:0}),Jc=mn(Li),Ui,ll,wr,cl=v({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==wr&&(wr&&r.type==="mousemove"?(Ui=r.screenX-wr.screenX,ll=r.screenY-wr.screenY):ll=Ui=0,wr=r),Ui)},movementY:function(r){return"movementY"in r?r.movementY:ll}}),eu=mn(cl),so=v({},cl,{dataTransfer:0}),_h=mn(so),Eh=v({},Li,{relatedTarget:0}),ro=mn(Eh),tu=v({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Th=mn(tu),ul=v({},Yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Nh=mn(ul),Ah=v({},Yr,{data:0}),_r=mn(Ah),Sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rh(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=jh[r])?!!a[r]:!1}function zi(){return Rh}var Mn=v({},Li,{key:function(r){if(r.key){var a=Sh[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=no(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ch[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zi,charCode:function(r){return r.type==="keypress"?no(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?no(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ih=mn(Mn),Dh=v({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=mn(Dh),p=v({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zi}),w=mn(p),E=v({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=mn(E),W=v({},cl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=mn(W),xe=v({},Yr,{newState:0,oldState:0}),Ke=mn(xe),Ut=[9,13,27,32],ut=ps&&"CompositionEvent"in window,Ct=null;ps&&"documentMode"in document&&(Ct=document.documentMode);var gs=ps&&"TextEvent"in window&&!Ct,Er=ps&&(!ut||Ct&&8<Ct&&11>=Ct),Fs=" ",qs=!1;function io(r,a){switch(r){case"keyup":return Ut.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var hl=!1;function AR(r,a){switch(r){case"compositionend":return dl(a);case"keypress":return a.which!==32?null:(qs=!0,Fs);case"textInput":return r=a.data,r===Fs&&qs?null:r;default:return null}}function SR(r,a){if(hl)return r==="compositionend"||!ut&&io(r,a)?(r=Zc(),to=Wc=vr=null,hl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Er&&a.locale!=="ko"?null:a.data;default:return null}}var CR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ib(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!CR[r.type]:a==="textarea"}function Db(r,a,l,d){Oi?xr?xr.push(d):xr=[d]:Oi=d,a=_f(a,"onChange"),0<a.length&&(l=new br("onChange","change",null,l,d),r.push({event:l,listeners:a}))}var nu=null,su=null;function jR(r){m1(r,0)}function Mh(r){var a=Jn(r);if(Wa(a))return r}function Mb(r,a){if(r==="change")return a}var kb=!1;if(ps){var Op;if(ps){var Vp="oninput"in document;if(!Vp){var Pb=document.createElement("div");Pb.setAttribute("oninput","return;"),Vp=typeof Pb.oninput=="function"}Op=Vp}else Op=!1;kb=Op&&(!document.documentMode||9<document.documentMode)}function Ob(){nu&&(nu.detachEvent("onpropertychange",Vb),su=nu=null)}function Vb(r){if(r.propertyName==="value"&&Mh(su)){var a=[];Db(a,su,r,ms(r)),Vi(jR,a)}}function RR(r,a,l){r==="focusin"?(Ob(),nu=a,su=l,nu.attachEvent("onpropertychange",Vb)):r==="focusout"&&Ob()}function IR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Mh(su)}function DR(r,a){if(r==="click")return Mh(a)}function MR(r,a){if(r==="input"||r==="change")return Mh(a)}function kR(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var ts=typeof Object.is=="function"?Object.is:kR;function ru(r,a){if(ts(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!$t.call(a,g)||!ts(r[g],a[g]))return!1}return!0}function Lb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ub(r,a){var l=Lb(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=a&&d>=a)return{node:l,offset:a-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Lb(l)}}function zb(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?zb(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Bb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=yr(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=yr(r.document)}return a}function Lp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var PR=ps&&"documentMode"in document&&11>=document.documentMode,fl=null,Up=null,iu=null,zp=!1;function Fb(r,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zp||fl==null||fl!==yr(d)||(d=fl,"selectionStart"in d&&Lp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),iu&&ru(iu,d)||(iu=d,d=_f(Up,"onSelect"),0<d.length&&(a=new br("onSelect","select",null,a,l),r.push({event:a,listeners:d}),a.target=fl)))}function ao(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var ml={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},Bp={},qb={};ps&&(qb=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function oo(r){if(Bp[r])return Bp[r];if(!ml[r])return r;var a=ml[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in qb)return Bp[r]=a[l];return r}var $b=oo("animationend"),Hb=oo("animationiteration"),Gb=oo("animationstart"),OR=oo("transitionrun"),VR=oo("transitionstart"),LR=oo("transitioncancel"),Kb=oo("transitionend"),Yb=new Map,Fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fp.push("scrollEnd");function $s(r,a){Yb.set(r,a),pr(a,[r])}var kh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ys=[],pl=0,qp=0;function Ph(){for(var r=pl,a=qp=pl=0;a<r;){var l=ys[a];ys[a++]=null;var d=ys[a];ys[a++]=null;var g=ys[a];ys[a++]=null;var x=ys[a];if(ys[a++]=null,d!==null&&g!==null){var _=d.pending;_===null?g.next=g:(g.next=_.next,_.next=g),d.pending=g}x!==0&&Xb(l,g,x)}}function Oh(r,a,l,d){ys[pl++]=r,ys[pl++]=a,ys[pl++]=l,ys[pl++]=d,qp|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function $p(r,a,l,d){return Oh(r,a,l,d),Vh(r)}function lo(r,a){return Oh(r,null,null,a),Vh(r)}function Xb(r,a,l){r.lanes|=l;var d=r.alternate;d!==null&&(d.lanes|=l);for(var g=!1,x=r.return;x!==null;)x.childLanes|=l,d=x.alternate,d!==null&&(d.childLanes|=l),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(g=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,g&&a!==null&&(g=31-Lt(l),r=x.hiddenUpdates,d=r[g],d===null?r[g]=[a]:d.push(a),a.lane=l|536870912),x):null}function Vh(r){if(50<Su)throw Su=0,Jg=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var gl={};function UR(r,a,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(r,a,l,d){return new UR(r,a,l,d)}function Hp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Qr(r,a){var l=r.alternate;return l===null?(l=ns(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Qb(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Lh(r,a,l,d,g,x){var _=0;if(d=r,typeof r=="function")Hp(r)&&(_=1);else if(typeof r=="string")_=$I(r,l,le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=ns(31,l,a,g),r.elementType=C,r.lanes=x,r;case M:return co(l.children,g,x,a);case j:_=8,g|=24;break;case k:return r=ns(12,l,a,g|2),r.elementType=k,r.lanes=x,r;case Y:return r=ns(13,l,a,g),r.elementType=Y,r.lanes=x,r;case oe:return r=ns(19,l,a,g),r.elementType=oe,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:_=10;break e;case U:_=9;break e;case $:_=11;break e;case A:_=14;break e;case N:_=16,d=null;break e}_=29,l=Error(s(130,r===null?"null":typeof r,"")),d=null}return a=ns(_,l,a,g),a.elementType=r,a.type=d,a.lanes=x,a}function co(r,a,l,d){return r=ns(7,r,d,a),r.lanes=l,r}function Gp(r,a,l){return r=ns(6,r,null,a),r.lanes=l,r}function Wb(r){var a=ns(18,null,null,0);return a.stateNode=r,a}function Kp(r,a,l){return a=ns(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Zb=new WeakMap;function xs(r,a){if(typeof r=="object"&&r!==null){var l=Zb.get(r);return l!==void 0?l:(a={value:r,source:a,stack:Oc(a)},Zb.set(r,a),a)}return{value:r,source:a,stack:Oc(a)}}var yl=[],xl=0,Uh=null,au=0,vs=[],bs=0,Bi=null,Tr=1,Nr="";function Wr(r,a){yl[xl++]=au,yl[xl++]=Uh,Uh=r,au=a}function Jb(r,a,l){vs[bs++]=Tr,vs[bs++]=Nr,vs[bs++]=Bi,Bi=r;var d=Tr;r=Nr;var g=32-Lt(d)-1;d&=~(1<<g),l+=1;var x=32-Lt(a)+g;if(30<x){var _=g-g%5;x=(d&(1<<_)-1).toString(32),d>>=_,g-=_,Tr=1<<32-Lt(a)+g|l<<g|d,Nr=x+r}else Tr=1<<x|l<<g|d,Nr=r}function Yp(r){r.return!==null&&(Wr(r,1),Jb(r,1,0))}function Xp(r){for(;r===Uh;)Uh=yl[--xl],yl[xl]=null,au=yl[--xl],yl[xl]=null;for(;r===Bi;)Bi=vs[--bs],vs[bs]=null,Nr=vs[--bs],vs[bs]=null,Tr=vs[--bs],vs[bs]=null}function ew(r,a){vs[bs++]=Tr,vs[bs++]=Nr,vs[bs++]=Bi,Tr=a.id,Nr=a.overflow,Bi=r}var pn=null,Nt=null,rt=!1,Fi=null,ws=!1,Qp=Error(s(519));function qi(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ou(xs(a,r)),Qp}function tw(r){var a=r.stateNode,l=r.type,d=r.memoizedProps;switch(a[Gt]=r,a[cn]=d,l){case"dialog":Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":case"embed":Ze("load",a);break;case"video":case"audio":for(l=0;l<ju.length;l++)Ze(ju[l],a);break;case"source":Ze("error",a);break;case"img":case"image":case"link":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"input":Ze("invalid",a),xh(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ze("invalid",a);break;case"textarea":Ze("invalid",a),ki(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||x1(a.textContent,l)?(d.popover!=null&&(Ze("beforetoggle",a),Ze("toggle",a)),d.onScroll!=null&&Ze("scroll",a),d.onScrollEnd!=null&&Ze("scrollend",a),d.onClick!=null&&(a.onclick=Us),a=!0):a=!1,a||qi(r,!0)}function nw(r){for(pn=r.return;pn;)switch(pn.tag){case 5:case 31:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:pn=pn.return}}function vl(r){if(r!==pn)return!1;if(!rt)return nw(r),rt=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||my(r.type,r.memoizedProps)),l=!l),l&&Nt&&qi(r),nw(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Nt=S1(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Nt=S1(r)}else a===27?(a=Nt,sa(r.type)?(r=vy,vy=null,Nt=r):Nt=a):Nt=pn?Es(r.stateNode.nextSibling):null;return!0}function uo(){Nt=pn=null,rt=!1}function Wp(){var r=Fi;return r!==null&&(Yn===null?Yn=r:Yn.push.apply(Yn,r),Fi=null),r}function ou(r){Fi===null?Fi=[r]:Fi.push(r)}var Zp=O(null),ho=null,Zr=null;function $i(r,a,l){H(Zp,a._currentValue),a._currentValue=l}function Jr(r){r._currentValue=Zp.current,te(Zp)}function Jp(r,a,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),r===l)break;r=r.return}}function eg(r,a,l,d){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var x=g.dependencies;if(x!==null){var _=g.child;x=x.firstContext;e:for(;x!==null;){var I=x;x=g;for(var F=0;F<a.length;F++)if(I.context===a[F]){x.lanes|=l,I=x.alternate,I!==null&&(I.lanes|=l),Jp(x.return,l,r),d||(_=null);break e}x=I.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(s(341));_.lanes|=l,x=_.alternate,x!==null&&(x.lanes|=l),Jp(_,l,r),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===r){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function bl(r,a,l,d){r=null;for(var g=a,x=!1;g!==null;){if(!x){if((g.flags&524288)!==0)x=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var I=g.type;ts(g.pendingProps.value,_.value)||(r!==null?r.push(I):r=[I])}}else if(g===je.current){if(_=g.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(ku):r=[ku])}g=g.return}r!==null&&eg(a,r,l,d),a.flags|=262144}function zh(r){for(r=r.firstContext;r!==null;){if(!ts(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function fo(r){ho=r,Zr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function gn(r){return sw(ho,r)}function Bh(r,a){return ho===null&&fo(r),sw(r,a)}function sw(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Zr===null){if(r===null)throw Error(s(308));Zr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Zr=Zr.next=a;return l}var zR=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,d){r.push(d)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},BR=t.unstable_scheduleCallback,FR=t.unstable_NormalPriority,Xt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tg(){return{controller:new zR,data:new Map,refCount:0}}function lu(r){r.refCount--,r.refCount===0&&BR(FR,function(){r.controller.abort()})}var cu=null,ng=0,wl=0,_l=null;function qR(r,a){if(cu===null){var l=cu=[];ng=0,wl=iy(),_l={status:"pending",value:void 0,then:function(d){l.push(d)}}}return ng++,a.then(rw,rw),a}function rw(){if(--ng===0&&cu!==null){_l!==null&&(_l.status="fulfilled");var r=cu;cu=null,wl=0,_l=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function $R(r,a){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return r.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var iw=X.S;X.S=function(r,a){F_=Dn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&qR(r,a),iw!==null&&iw(r,a)};var mo=O(null);function sg(){var r=mo.current;return r!==null?r:wt.pooledCache}function Fh(r,a){a===null?H(mo,mo.current):H(mo,a.pool)}function aw(){var r=sg();return r===null?null:{parent:Xt._currentValue,pool:r}}var El=Error(s(460)),rg=Error(s(474)),qh=Error(s(542)),$h={then:function(){}};function ow(r){return r=r.status,r==="fulfilled"||r==="rejected"}function lw(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(Us,Us),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,uw(r),r;default:if(typeof a.status=="string")a.then(Us,Us);else{if(r=wt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,uw(r),r}throw go=a,El}}function po(r){try{var a=r._init;return a(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(go=l,El):l}}var go=null;function cw(){if(go===null)throw Error(s(459));var r=go;return go=null,r}function uw(r){if(r===El||r===qh)throw Error(s(483))}var Tl=null,uu=0;function Hh(r){var a=uu;return uu+=1,Tl===null&&(Tl=[]),lw(Tl,r,a)}function du(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Gh(r,a){throw a.$$typeof===b?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function dw(r){function a(Q,G){if(r){var J=Q.deletions;J===null?(Q.deletions=[G],Q.flags|=16):J.push(G)}}function l(Q,G){if(!r)return null;for(;G!==null;)a(Q,G),G=G.sibling;return null}function d(Q){for(var G=new Map;Q!==null;)Q.key!==null?G.set(Q.key,Q):G.set(Q.index,Q),Q=Q.sibling;return G}function g(Q,G){return Q=Qr(Q,G),Q.index=0,Q.sibling=null,Q}function x(Q,G,J){return Q.index=J,r?(J=Q.alternate,J!==null?(J=J.index,J<G?(Q.flags|=67108866,G):J):(Q.flags|=67108866,G)):(Q.flags|=1048576,G)}function _(Q){return r&&Q.alternate===null&&(Q.flags|=67108866),Q}function I(Q,G,J,de){return G===null||G.tag!==6?(G=Gp(J,Q.mode,de),G.return=Q,G):(G=g(G,J),G.return=Q,G)}function F(Q,G,J,de){var De=J.type;return De===M?ce(Q,G,J.props.children,de,J.key):G!==null&&(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&po(De)===G.type)?(G=g(G,J.props),du(G,J),G.return=Q,G):(G=Lh(J.type,J.key,J.props,null,Q.mode,de),du(G,J),G.return=Q,G)}function ee(Q,G,J,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=Kp(J,Q.mode,de),G.return=Q,G):(G=g(G,J.children||[]),G.return=Q,G)}function ce(Q,G,J,de,De){return G===null||G.tag!==7?(G=co(J,Q.mode,de,De),G.return=Q,G):(G=g(G,J),G.return=Q,G)}function he(Q,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Gp(""+G,Q.mode,J),G.return=Q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return J=Lh(G.type,G.key,G.props,null,Q.mode,J),du(J,G),J.return=Q,J;case R:return G=Kp(G,Q.mode,J),G.return=Q,G;case N:return G=po(G),he(Q,G,J)}if(me(G)||B(G))return G=co(G,Q.mode,J,null),G.return=Q,G;if(typeof G.then=="function")return he(Q,Hh(G),J);if(G.$$typeof===V)return he(Q,Bh(Q,G),J);Gh(Q,G)}return null}function ne(Q,G,J,de){var De=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return De!==null?null:I(Q,G,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return J.key===De?F(Q,G,J,de):null;case R:return J.key===De?ee(Q,G,J,de):null;case N:return J=po(J),ne(Q,G,J,de)}if(me(J)||B(J))return De!==null?null:ce(Q,G,J,de,null);if(typeof J.then=="function")return ne(Q,G,Hh(J),de);if(J.$$typeof===V)return ne(Q,G,Bh(Q,J),de);Gh(Q,J)}return null}function ae(Q,G,J,de,De){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(J)||null,I(G,Q,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case T:return Q=Q.get(de.key===null?J:de.key)||null,F(G,Q,de,De);case R:return Q=Q.get(de.key===null?J:de.key)||null,ee(G,Q,de,De);case N:return de=po(de),ae(Q,G,J,de,De)}if(me(de)||B(de))return Q=Q.get(J)||null,ce(G,Q,de,De,null);if(typeof de.then=="function")return ae(Q,G,J,Hh(de),De);if(de.$$typeof===V)return ae(Q,G,J,Bh(G,de),De);Gh(G,de)}return null}function Ae(Q,G,J,de){for(var De=null,lt=null,Re=G,Xe=G=0,et=null;Re!==null&&Xe<J.length;Xe++){Re.index>Xe?(et=Re,Re=null):et=Re.sibling;var ct=ne(Q,Re,J[Xe],de);if(ct===null){Re===null&&(Re=et);break}r&&Re&&ct.alternate===null&&a(Q,Re),G=x(ct,G,Xe),lt===null?De=ct:lt.sibling=ct,lt=ct,Re=et}if(Xe===J.length)return l(Q,Re),rt&&Wr(Q,Xe),De;if(Re===null){for(;Xe<J.length;Xe++)Re=he(Q,J[Xe],de),Re!==null&&(G=x(Re,G,Xe),lt===null?De=Re:lt.sibling=Re,lt=Re);return rt&&Wr(Q,Xe),De}for(Re=d(Re);Xe<J.length;Xe++)et=ae(Re,Q,Xe,J[Xe],de),et!==null&&(r&&et.alternate!==null&&Re.delete(et.key===null?Xe:et.key),G=x(et,G,Xe),lt===null?De=et:lt.sibling=et,lt=et);return r&&Re.forEach(function(la){return a(Q,la)}),rt&&Wr(Q,Xe),De}function Pe(Q,G,J,de){if(J==null)throw Error(s(151));for(var De=null,lt=null,Re=G,Xe=G=0,et=null,ct=J.next();Re!==null&&!ct.done;Xe++,ct=J.next()){Re.index>Xe?(et=Re,Re=null):et=Re.sibling;var la=ne(Q,Re,ct.value,de);if(la===null){Re===null&&(Re=et);break}r&&Re&&la.alternate===null&&a(Q,Re),G=x(la,G,Xe),lt===null?De=la:lt.sibling=la,lt=la,Re=et}if(ct.done)return l(Q,Re),rt&&Wr(Q,Xe),De;if(Re===null){for(;!ct.done;Xe++,ct=J.next())ct=he(Q,ct.value,de),ct!==null&&(G=x(ct,G,Xe),lt===null?De=ct:lt.sibling=ct,lt=ct);return rt&&Wr(Q,Xe),De}for(Re=d(Re);!ct.done;Xe++,ct=J.next())ct=ae(Re,Q,Xe,ct.value,de),ct!==null&&(r&&ct.alternate!==null&&Re.delete(ct.key===null?Xe:ct.key),G=x(ct,G,Xe),lt===null?De=ct:lt.sibling=ct,lt=ct);return r&&Re.forEach(function(tD){return a(Q,tD)}),rt&&Wr(Q,Xe),De}function bt(Q,G,J,de){if(typeof J=="object"&&J!==null&&J.type===M&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case T:e:{for(var De=J.key;G!==null;){if(G.key===De){if(De=J.type,De===M){if(G.tag===7){l(Q,G.sibling),de=g(G,J.props.children),de.return=Q,Q=de;break e}}else if(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&po(De)===G.type){l(Q,G.sibling),de=g(G,J.props),du(de,J),de.return=Q,Q=de;break e}l(Q,G);break}else a(Q,G);G=G.sibling}J.type===M?(de=co(J.props.children,Q.mode,de,J.key),de.return=Q,Q=de):(de=Lh(J.type,J.key,J.props,null,Q.mode,de),du(de,J),de.return=Q,Q=de)}return _(Q);case R:e:{for(De=J.key;G!==null;){if(G.key===De)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){l(Q,G.sibling),de=g(G,J.children||[]),de.return=Q,Q=de;break e}else{l(Q,G);break}else a(Q,G);G=G.sibling}de=Kp(J,Q.mode,de),de.return=Q,Q=de}return _(Q);case N:return J=po(J),bt(Q,G,J,de)}if(me(J))return Ae(Q,G,J,de);if(B(J)){if(De=B(J),typeof De!="function")throw Error(s(150));return J=De.call(J),Pe(Q,G,J,de)}if(typeof J.then=="function")return bt(Q,G,Hh(J),de);if(J.$$typeof===V)return bt(Q,G,Bh(Q,J),de);Gh(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(l(Q,G.sibling),de=g(G,J),de.return=Q,Q=de):(l(Q,G),de=Gp(J,Q.mode,de),de.return=Q,Q=de),_(Q)):l(Q,G)}return function(Q,G,J,de){try{uu=0;var De=bt(Q,G,J,de);return Tl=null,De}catch(Re){if(Re===El||Re===qh)throw Re;var lt=ns(29,Re,null,Q.mode);return lt.lanes=de,lt.return=Q,lt}finally{}}}var yo=dw(!0),hw=dw(!1),Hi=!1;function ig(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ag(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Gi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ki(r,a,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(dt&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Vh(r),Xb(r,null,l),a}return Oh(r,d,a,l),Vh(r)}function hu(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=r.pendingLanes,l|=d,a.lanes=l,Uc(r,l)}}function og(r,a){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?g=x=_:x=x.next=_,l=l.next}while(l!==null);x===null?g=x=a:x=x.next=a}else g=x=a;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var lg=!1;function fu(){if(lg){var r=_l;if(r!==null)throw r}}function mu(r,a,l,d){lg=!1;var g=r.updateQueue;Hi=!1;var x=g.firstBaseUpdate,_=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var F=I,ee=F.next;F.next=null,_===null?x=ee:_.next=ee,_=F;var ce=r.alternate;ce!==null&&(ce=ce.updateQueue,I=ce.lastBaseUpdate,I!==_&&(I===null?ce.firstBaseUpdate=ee:I.next=ee,ce.lastBaseUpdate=F))}if(x!==null){var he=g.baseState;_=0,ce=ee=F=null,I=x;do{var ne=I.lane&-536870913,ae=ne!==I.lane;if(ae?(Je&ne)===ne:(d&ne)===ne){ne!==0&&ne===wl&&(lg=!0),ce!==null&&(ce=ce.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ae=r,Pe=I;ne=a;var bt=l;switch(Pe.tag){case 1:if(Ae=Pe.payload,typeof Ae=="function"){he=Ae.call(bt,he,ne);break e}he=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Pe.payload,ne=typeof Ae=="function"?Ae.call(bt,he,ne):Ae,ne==null)break e;he=v({},he,ne);break e;case 2:Hi=!0}}ne=I.callback,ne!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ce===null?(ee=ce=ae,F=he):ce=ce.next=ae,_|=ne;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;ae=I,I=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);ce===null&&(F=he),g.baseState=F,g.firstBaseUpdate=ee,g.lastBaseUpdate=ce,x===null&&(g.shared.lanes=0),Zi|=_,r.lanes=_,r.memoizedState=he}}function fw(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function mw(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)fw(l[r],a)}var Nl=O(null),Kh=O(0);function pw(r,a){r=li,H(Kh,r),H(Nl,a),li=r|a.baseLanes}function cg(){H(Kh,li),H(Nl,Nl.current)}function ug(){li=Kh.current,te(Nl),te(Kh)}var ss=O(null),_s=null;function Yi(r){var a=r.alternate;H(zt,zt.current&1),H(ss,r),_s===null&&(a===null||Nl.current!==null||a.memoizedState!==null)&&(_s=r)}function dg(r){H(zt,zt.current),H(ss,r),_s===null&&(_s=r)}function gw(r){r.tag===22?(H(zt,zt.current),H(ss,r),_s===null&&(_s=r)):Xi()}function Xi(){H(zt,zt.current),H(ss,ss.current)}function rs(r){te(ss),_s===r&&(_s=null),te(zt)}var zt=O(0);function Yh(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||yy(l)||xy(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ei=0,Ye=null,xt=null,Qt=null,Xh=!1,Al=!1,xo=!1,Qh=0,pu=0,Sl=null,HR=0;function kt(){throw Error(s(321))}function hg(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!ts(r[l],a[l]))return!1;return!0}function fg(r,a,l,d,g,x){return ei=x,Ye=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,X.H=r===null||r.memoizedState===null?Jw:Cg,xo=!1,x=l(d,g),xo=!1,Al&&(x=xw(a,l,d,g)),yw(r),x}function yw(r){X.H=xu;var a=xt!==null&&xt.next!==null;if(ei=0,Qt=xt=Ye=null,Xh=!1,pu=0,Sl=null,a)throw Error(s(300));r===null||Wt||(r=r.dependencies,r!==null&&zh(r)&&(Wt=!0))}function xw(r,a,l,d){Ye=r;var g=0;do{if(Al&&(Sl=null),pu=0,Al=!1,25<=g)throw Error(s(301));if(g+=1,Qt=xt=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}X.H=e_,x=a(l,d)}while(Al);return x}function GR(){var r=X.H,a=r.useState()[0];return a=typeof a.then=="function"?gu(a):a,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(Ye.flags|=1024),a}function mg(){var r=Qh!==0;return Qh=0,r}function pg(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function gg(r){if(Xh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Xh=!1}ei=0,Qt=xt=Ye=null,Al=!1,pu=Qh=0,Sl=null}function kn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ye.memoizedState=Qt=r:Qt=Qt.next=r,Qt}function Bt(){if(xt===null){var r=Ye.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var a=Qt===null?Ye.memoizedState:Qt.next;if(a!==null)Qt=a,xt=r;else{if(r===null)throw Ye.alternate===null?Error(s(467)):Error(s(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Qt===null?Ye.memoizedState=Qt=r:Qt=Qt.next=r}return Qt}function Wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gu(r){var a=pu;return pu+=1,Sl===null&&(Sl=[]),r=lw(Sl,r,a),a=Ye,(Qt===null?a.memoizedState:Qt.next)===null&&(a=a.alternate,X.H=a===null||a.memoizedState===null?Jw:Cg),r}function Zh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return gu(r);if(r.$$typeof===V)return gn(r)}throw Error(s(438,String(r)))}function yg(r){var a=null,l=Ye.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=Ye.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Wh(),Ye.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),d=0;d<r;d++)l[d]=L;return a.index++,l}function ti(r,a){return typeof a=="function"?a(r):a}function Jh(r){var a=Bt();return xg(a,xt,r)}function xg(r,a,l){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var g=r.baseQueue,x=d.pending;if(x!==null){if(g!==null){var _=g.next;g.next=x.next,x.next=_}a.baseQueue=g=x,d.pending=null}if(x=r.baseState,g===null)r.memoizedState=x;else{a=g.next;var I=_=null,F=null,ee=a,ce=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(Je&he)===he:(ei&he)===he){var ne=ee.revertLane;if(ne===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===wl&&(ce=!0);else if((ei&ne)===ne){ee=ee.next,ne===wl&&(ce=!0);continue}else he={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},F===null?(I=F=he,_=x):F=F.next=he,Ye.lanes|=ne,Zi|=ne;he=ee.action,xo&&l(x,he),x=ee.hasEagerState?ee.eagerState:l(x,he)}else ne={lane:he,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},F===null?(I=F=ne,_=x):F=F.next=ne,Ye.lanes|=he,Zi|=he;ee=ee.next}while(ee!==null&&ee!==a);if(F===null?_=x:F.next=I,!ts(x,r.memoizedState)&&(Wt=!0,ce&&(l=_l,l!==null)))throw l;r.memoizedState=x,r.baseState=_,r.baseQueue=F,d.lastRenderedState=x}return g===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function vg(r){var a=Bt(),l=a.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var d=l.dispatch,g=l.pending,x=a.memoizedState;if(g!==null){l.pending=null;var _=g=g.next;do x=r(x,_.action),_=_.next;while(_!==g);ts(x,a.memoizedState)||(Wt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),l.lastRenderedState=x}return[x,d]}function vw(r,a,l){var d=Ye,g=Bt(),x=rt;if(x){if(l===void 0)throw Error(s(407));l=l()}else l=a();var _=!ts((xt||g).memoizedState,l);if(_&&(g.memoizedState=l,Wt=!0),g=g.queue,_g(_w.bind(null,d,g,r),[r]),g.getSnapshot!==a||_||Qt!==null&&Qt.memoizedState.tag&1){if(d.flags|=2048,Cl(9,{destroy:void 0},ww.bind(null,d,g,l,a),null),wt===null)throw Error(s(349));x||(ei&127)!==0||bw(d,a,l)}return l}function bw(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Ye.updateQueue,a===null?(a=Wh(),Ye.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function ww(r,a,l,d){a.value=l,a.getSnapshot=d,Ew(a)&&Tw(r)}function _w(r,a,l){return l(function(){Ew(a)&&Tw(r)})}function Ew(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!ts(r,l)}catch{return!0}}function Tw(r){var a=lo(r,2);a!==null&&Xn(a,r,2)}function bg(r){var a=kn();if(typeof r=="function"){var l=r;if(r=l(),xo){hs(!0);try{l()}finally{hs(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:r},a}function Nw(r,a,l,d){return r.baseState=l,xg(r,xt,typeof d=="function"?d:ti)}function KR(r,a,l,d,g){if(nf(r))throw Error(s(485));if(r=a.action,r!==null){var x={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};X.T!==null?l(!0):x.isTransition=!1,d(x),l=a.pending,l===null?(x.next=a.pending=x,Aw(a,x)):(x.next=l.next,a.pending=l.next=x)}}function Aw(r,a){var l=a.action,d=a.payload,g=r.state;if(a.isTransition){var x=X.T,_={};X.T=_;try{var I=l(g,d),F=X.S;F!==null&&F(_,I),Sw(r,a,I)}catch(ee){wg(r,a,ee)}finally{x!==null&&_.types!==null&&(x.types=_.types),X.T=x}}else try{x=l(g,d),Sw(r,a,x)}catch(ee){wg(r,a,ee)}}function Sw(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Cw(r,a,d)},function(d){return wg(r,a,d)}):Cw(r,a,l)}function Cw(r,a,l){a.status="fulfilled",a.value=l,jw(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,Aw(r,l)))}function wg(r,a,l){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,jw(a),a=a.next;while(a!==d)}r.action=null}function jw(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function Rw(r,a){return a}function Iw(r,a){if(rt){var l=wt.formState;if(l!==null){e:{var d=Ye;if(rt){if(Nt){t:{for(var g=Nt,x=ws;g.nodeType!==8;){if(!x){g=null;break t}if(g=Es(g.nextSibling),g===null){g=null;break t}}x=g.data,g=x==="F!"||x==="F"?g:null}if(g){Nt=Es(g.nextSibling),d=g.data==="F!";break e}}qi(d)}d=!1}d&&(a=l[0])}}return l=kn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rw,lastRenderedState:a},l.queue=d,l=Qw.bind(null,Ye,d),d.dispatch=l,d=bg(!1),x=Sg.bind(null,Ye,!1,d.queue),d=kn(),g={state:a,dispatch:null,action:r,pending:null},d.queue=g,l=KR.bind(null,Ye,g,x,l),g.dispatch=l,d.memoizedState=r,[a,l,!1]}function Dw(r){var a=Bt();return Mw(a,xt,r)}function Mw(r,a,l){if(a=xg(r,a,Rw)[0],r=Jh(ti)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=gu(a)}catch(_){throw _===El?qh:_}else d=a;a=Bt();var g=a.queue,x=g.dispatch;return l!==a.memoizedState&&(Ye.flags|=2048,Cl(9,{destroy:void 0},YR.bind(null,g,l),null)),[d,x,r]}function YR(r,a){r.action=a}function kw(r){var a=Bt(),l=xt;if(l!==null)return Mw(a,l,r);Bt(),a=a.memoizedState,l=Bt();var d=l.queue.dispatch;return l.memoizedState=r,[a,d,!1]}function Cl(r,a,l,d){return r={tag:r,create:l,deps:d,inst:a,next:null},a=Ye.updateQueue,a===null&&(a=Wh(),Ye.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,a.lastEffect=r),r}function Pw(){return Bt().memoizedState}function ef(r,a,l,d){var g=kn();Ye.flags|=r,g.memoizedState=Cl(1|a,{destroy:void 0},l,d===void 0?null:d)}function tf(r,a,l,d){var g=Bt();d=d===void 0?null:d;var x=g.memoizedState.inst;xt!==null&&d!==null&&hg(d,xt.memoizedState.deps)?g.memoizedState=Cl(a,x,l,d):(Ye.flags|=r,g.memoizedState=Cl(1|a,x,l,d))}function Ow(r,a){ef(8390656,8,r,a)}function _g(r,a){tf(2048,8,r,a)}function XR(r){Ye.flags|=4;var a=Ye.updateQueue;if(a===null)a=Wh(),Ye.updateQueue=a,a.events=[r];else{var l=a.events;l===null?a.events=[r]:l.push(r)}}function Vw(r){var a=Bt().memoizedState;return XR({ref:a,nextImpl:r}),function(){if((dt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Lw(r,a){return tf(4,2,r,a)}function Uw(r,a){return tf(4,4,r,a)}function zw(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Bw(r,a,l){l=l!=null?l.concat([r]):null,tf(4,4,zw.bind(null,a,r),l)}function Eg(){}function Fw(r,a){var l=Bt();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&hg(a,d[1])?d[0]:(l.memoizedState=[r,a],r)}function qw(r,a){var l=Bt();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&hg(a,d[1]))return d[0];if(d=r(),xo){hs(!0);try{r()}finally{hs(!1)}}return l.memoizedState=[d,a],d}function Tg(r,a,l){return l===void 0||(ei&1073741824)!==0&&(Je&261930)===0?r.memoizedState=a:(r.memoizedState=l,r=$_(),Ye.lanes|=r,Zi|=r,l)}function $w(r,a,l,d){return ts(l,a)?l:Nl.current!==null?(r=Tg(r,l,d),ts(r,a)||(Wt=!0),r):(ei&42)===0||(ei&1073741824)!==0&&(Je&261930)===0?(Wt=!0,r.memoizedState=l):(r=$_(),Ye.lanes|=r,Zi|=r,a)}function Hw(r,a,l,d,g){var x=K.p;K.p=x!==0&&8>x?x:8;var _=X.T,I={};X.T=I,Sg(r,!1,a,l);try{var F=g(),ee=X.S;if(ee!==null&&ee(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ce=$R(F,d);yu(r,a,ce,os(r))}else yu(r,a,d,os(r))}catch(he){yu(r,a,{then:function(){},status:"rejected",reason:he},os())}finally{K.p=x,_!==null&&I.types!==null&&(_.types=I.types),X.T=_}}function QR(){}function Ng(r,a,l,d){if(r.tag!==5)throw Error(s(476));var g=Gw(r).queue;Hw(r,g,a,Z,l===null?QR:function(){return Kw(r),l(d)})}function Gw(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:Z},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Kw(r){var a=Gw(r);a.next===null&&(a=r.alternate.memoizedState),yu(r,a.next.queue,{},os())}function Ag(){return gn(ku)}function Yw(){return Bt().memoizedState}function Xw(){return Bt().memoizedState}function WR(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=os();r=Gi(l);var d=Ki(a,r,l);d!==null&&(Xn(d,a,l),hu(d,a,l)),a={cache:tg()},r.payload=a;return}a=a.return}}function ZR(r,a,l){var d=os();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},nf(r)?Ww(a,l):(l=$p(r,a,l,d),l!==null&&(Xn(l,r,d),Zw(l,a,d)))}function Qw(r,a,l){var d=os();yu(r,a,l,d)}function yu(r,a,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(nf(r))Ww(a,g);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var _=a.lastRenderedState,I=x(_,l);if(g.hasEagerState=!0,g.eagerState=I,ts(I,_))return Oh(r,a,g,0),wt===null&&Ph(),!1}catch{}finally{}if(l=$p(r,a,g,d),l!==null)return Xn(l,r,d),Zw(l,a,d),!0}return!1}function Sg(r,a,l,d){if(d={lane:2,revertLane:iy(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},nf(r)){if(a)throw Error(s(479))}else a=$p(r,l,d,2),a!==null&&Xn(a,r,2)}function nf(r){var a=r.alternate;return r===Ye||a!==null&&a===Ye}function Ww(r,a){Al=Xh=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function Zw(r,a,l){if((l&4194048)!==0){var d=a.lanes;d&=r.pendingLanes,l|=d,a.lanes=l,Uc(r,l)}}var xu={readContext:gn,use:Zh,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};xu.useEffectEvent=kt;var Jw={readContext:gn,use:Zh,useCallback:function(r,a){return kn().memoizedState=[r,a===void 0?null:a],r},useContext:gn,useEffect:Ow,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,ef(4194308,4,zw.bind(null,a,r),l)},useLayoutEffect:function(r,a){return ef(4194308,4,r,a)},useInsertionEffect:function(r,a){ef(4,2,r,a)},useMemo:function(r,a){var l=kn();a=a===void 0?null:a;var d=r();if(xo){hs(!0);try{r()}finally{hs(!1)}}return l.memoizedState=[d,a],d},useReducer:function(r,a,l){var d=kn();if(l!==void 0){var g=l(a);if(xo){hs(!0);try{l(a)}finally{hs(!1)}}}else g=a;return d.memoizedState=d.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},d.queue=r,r=r.dispatch=ZR.bind(null,Ye,r),[d.memoizedState,r]},useRef:function(r){var a=kn();return r={current:r},a.memoizedState=r},useState:function(r){r=bg(r);var a=r.queue,l=Qw.bind(null,Ye,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Eg,useDeferredValue:function(r,a){var l=kn();return Tg(l,r,a)},useTransition:function(){var r=bg(!1);return r=Hw.bind(null,Ye,r.queue,!0,!1),kn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var d=Ye,g=kn();if(rt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=a(),wt===null)throw Error(s(349));(Je&127)!==0||bw(d,a,l)}g.memoizedState=l;var x={value:l,getSnapshot:a};return g.queue=x,Ow(_w.bind(null,d,x,r),[r]),d.flags|=2048,Cl(9,{destroy:void 0},ww.bind(null,d,x,l,a),null),l},useId:function(){var r=kn(),a=wt.identifierPrefix;if(rt){var l=Nr,d=Tr;l=(d&~(1<<32-Lt(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Qh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=HR++,a="_"+a+"r_"+l.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Ag,useFormState:Iw,useActionState:Iw,useOptimistic:function(r){var a=kn();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Sg.bind(null,Ye,!0,l),l.dispatch=a,[r,a]},useMemoCache:yg,useCacheRefresh:function(){return kn().memoizedState=WR.bind(null,Ye)},useEffectEvent:function(r){var a=kn(),l={impl:r};return a.memoizedState=l,function(){if((dt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Cg={readContext:gn,use:Zh,useCallback:Fw,useContext:gn,useEffect:_g,useImperativeHandle:Bw,useInsertionEffect:Lw,useLayoutEffect:Uw,useMemo:qw,useReducer:Jh,useRef:Pw,useState:function(){return Jh(ti)},useDebugValue:Eg,useDeferredValue:function(r,a){var l=Bt();return $w(l,xt.memoizedState,r,a)},useTransition:function(){var r=Jh(ti)[0],a=Bt().memoizedState;return[typeof r=="boolean"?r:gu(r),a]},useSyncExternalStore:vw,useId:Yw,useHostTransitionStatus:Ag,useFormState:Dw,useActionState:Dw,useOptimistic:function(r,a){var l=Bt();return Nw(l,xt,r,a)},useMemoCache:yg,useCacheRefresh:Xw};Cg.useEffectEvent=Vw;var e_={readContext:gn,use:Zh,useCallback:Fw,useContext:gn,useEffect:_g,useImperativeHandle:Bw,useInsertionEffect:Lw,useLayoutEffect:Uw,useMemo:qw,useReducer:vg,useRef:Pw,useState:function(){return vg(ti)},useDebugValue:Eg,useDeferredValue:function(r,a){var l=Bt();return xt===null?Tg(l,r,a):$w(l,xt.memoizedState,r,a)},useTransition:function(){var r=vg(ti)[0],a=Bt().memoizedState;return[typeof r=="boolean"?r:gu(r),a]},useSyncExternalStore:vw,useId:Yw,useHostTransitionStatus:Ag,useFormState:kw,useActionState:kw,useOptimistic:function(r,a){var l=Bt();return xt!==null?Nw(l,xt,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:yg,useCacheRefresh:Xw};e_.useEffectEvent=Vw;function jg(r,a,l,d){a=r.memoizedState,l=l(d,a),l=l==null?a:v({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Rg={enqueueSetState:function(r,a,l){r=r._reactInternals;var d=os(),g=Gi(d);g.payload=a,l!=null&&(g.callback=l),a=Ki(r,g,d),a!==null&&(Xn(a,r,d),hu(a,r,d))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var d=os(),g=Gi(d);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Ki(r,g,d),a!==null&&(Xn(a,r,d),hu(a,r,d))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=os(),d=Gi(l);d.tag=2,a!=null&&(d.callback=a),a=Ki(r,d,l),a!==null&&(Xn(a,r,l),hu(a,r,l))}};function t_(r,a,l,d,g,x,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,x,_):a.prototype&&a.prototype.isPureReactComponent?!ru(l,d)||!ru(g,x):!0}function n_(r,a,l,d){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==r&&Rg.enqueueReplaceState(a,a.state,null)}function vo(r,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(r=r.defaultProps){l===a&&(l=v({},l));for(var g in r)l[g]===void 0&&(l[g]=r[g])}return l}function s_(r){kh(r)}function r_(r){console.error(r)}function i_(r){kh(r)}function sf(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function a_(r,a,l){try{var d=r.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ig(r,a,l){return l=Gi(l),l.tag=3,l.payload={element:null},l.callback=function(){sf(r,a)},l}function o_(r){return r=Gi(r),r.tag=3,r}function l_(r,a,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var x=d.value;r.payload=function(){return g(x)},r.callback=function(){a_(a,l,d)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){a_(a,l,d),typeof g!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function JR(r,a,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&bl(a,l,g,!0),l=ss.current,l!==null){switch(l.tag){case 31:case 13:return _s===null?gf():l.alternate===null&&Pt===0&&(Pt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===$h?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),ny(r,d,g)),!1;case 22:return l.flags|=65536,d===$h?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),ny(r,d,g)),!1}throw Error(s(435,l.tag))}return ny(r,d,g),gf(),!1}if(rt)return a=ss.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Qp&&(r=Error(s(422),{cause:d}),ou(xs(r,l)))):(d!==Qp&&(a=Error(s(423),{cause:d}),ou(xs(a,l))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,d=xs(d,l),g=Ig(r.stateNode,d,g),og(r,g),Pt!==4&&(Pt=2)),!1;var x=Error(s(520),{cause:d});if(x=xs(x,l),Au===null?Au=[x]:Au.push(x),Pt!==4&&(Pt=2),a===null)return!0;d=xs(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=g&-g,l.lanes|=r,r=Ig(l.stateNode,d,r),og(l,r),!1;case 1:if(a=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ji===null||!Ji.has(x))))return l.flags|=65536,g&=-g,l.lanes|=g,g=o_(g),l_(g,r,l,d),og(l,g),!1}l=l.return}while(l!==null);return!1}var Dg=Error(s(461)),Wt=!1;function yn(r,a,l,d){a.child=r===null?hw(a,null,l,d):yo(a,r.child,l,d)}function c_(r,a,l,d,g){l=l.render;var x=a.ref;if("ref"in d){var _={};for(var I in d)I!=="ref"&&(_[I]=d[I])}else _=d;return fo(a),d=fg(r,a,l,_,x,g),I=mg(),r!==null&&!Wt?(pg(r,a,g),ni(r,a,g)):(rt&&I&&Yp(a),a.flags|=1,yn(r,a,d,g),a.child)}function u_(r,a,l,d,g){if(r===null){var x=l.type;return typeof x=="function"&&!Hp(x)&&x.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=x,d_(r,a,x,d,g)):(r=Lh(l.type,null,d,a,a.mode,g),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,!zg(r,g)){var _=x.memoizedProps;if(l=l.compare,l=l!==null?l:ru,l(_,d)&&r.ref===a.ref)return ni(r,a,g)}return a.flags|=1,r=Qr(x,d),r.ref=a.ref,r.return=a,a.child=r}function d_(r,a,l,d,g){if(r!==null){var x=r.memoizedProps;if(ru(x,d)&&r.ref===a.ref)if(Wt=!1,a.pendingProps=d=x,zg(r,g))(r.flags&131072)!==0&&(Wt=!0);else return a.lanes=r.lanes,ni(r,a,g)}return Mg(r,a,l,d,g)}function h_(r,a,l,d){var g=d.children,x=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|l:l,r!==null){for(d=a.child=r.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~x}else d=0,a.child=null;return f_(r,a,x,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Fh(a,x!==null?x.cachePool:null),x!==null?pw(a,x):cg(),gw(a);else return d=a.lanes=536870912,f_(r,a,x!==null?x.baseLanes|l:l,l,d)}else x!==null?(Fh(a,x.cachePool),pw(a,x),Xi(),a.memoizedState=null):(r!==null&&Fh(a,null),cg(),Xi());return yn(r,a,g,l),a.child}function vu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function f_(r,a,l,d,g){var x=sg();return x=x===null?null:{parent:Xt._currentValue,pool:x},a.memoizedState={baseLanes:l,cachePool:x},r!==null&&Fh(a,null),cg(),gw(a),r!==null&&bl(r,a,d,!0),a.childLanes=g,null}function rf(r,a){return a=of({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function m_(r,a,l){return yo(a,r.child,null,l),r=rf(a,a.pendingProps),r.flags|=2,rs(a),a.memoizedState=null,r}function eI(r,a,l){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(rt){if(d.mode==="hidden")return r=rf(a,d),a.lanes=536870912,vu(null,r);if(dg(a),(r=Nt)?(r=A1(r,ws),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Bi!==null?{id:Tr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},l=Wb(r),l.return=a,a.child=l,pn=a,Nt=null)):r=null,r===null)throw qi(a);return a.lanes=536870912,null}return rf(a,d)}var x=r.memoizedState;if(x!==null){var _=x.dehydrated;if(dg(a),g)if(a.flags&256)a.flags&=-257,a=m_(r,a,l);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(Wt||bl(r,a,l,!1),g=(l&r.childLanes)!==0,Wt||g){if(d=wt,d!==null&&(_=zc(d,l),_!==0&&_!==x.retryLane))throw x.retryLane=_,lo(r,_),Xn(d,r,_),Dg;gf(),a=m_(r,a,l)}else r=x.treeContext,Nt=Es(_.nextSibling),pn=a,rt=!0,Fi=null,ws=!1,r!==null&&ew(a,r),a=rf(a,d),a.flags|=4096;return a}return r=Qr(r.child,{mode:d.mode,children:d.children}),r.ref=a.ref,a.child=r,r.return=a,r}function af(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function Mg(r,a,l,d,g){return fo(a),l=fg(r,a,l,d,void 0,g),d=mg(),r!==null&&!Wt?(pg(r,a,g),ni(r,a,g)):(rt&&d&&Yp(a),a.flags|=1,yn(r,a,l,g),a.child)}function p_(r,a,l,d,g,x){return fo(a),a.updateQueue=null,l=xw(a,d,l,g),yw(r),d=mg(),r!==null&&!Wt?(pg(r,a,x),ni(r,a,x)):(rt&&d&&Yp(a),a.flags|=1,yn(r,a,l,x),a.child)}function g_(r,a,l,d,g){if(fo(a),a.stateNode===null){var x=gl,_=l.contextType;typeof _=="object"&&_!==null&&(x=gn(_)),x=new l(d,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Rg,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=d,x.state=a.memoizedState,x.refs={},ig(a),_=l.contextType,x.context=typeof _=="object"&&_!==null?gn(_):gl,x.state=a.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(jg(a,l,_,d),x.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&Rg.enqueueReplaceState(x,x.state,null),mu(a,d,x,g),fu(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(r===null){x=a.stateNode;var I=a.memoizedProps,F=vo(l,I);x.props=F;var ee=x.context,ce=l.contextType;_=gl,typeof ce=="object"&&ce!==null&&(_=gn(ce));var he=l.getDerivedStateFromProps;ce=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(I||ee!==_)&&n_(a,x,d,_),Hi=!1;var ne=a.memoizedState;x.state=ne,mu(a,d,x,g),fu(),ee=a.memoizedState,I||ne!==ee||Hi?(typeof he=="function"&&(jg(a,l,he,d),ee=a.memoizedState),(F=Hi||t_(a,l,F,d,ne,ee,_))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ee),x.props=d,x.state=ee,x.context=_,d=F):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{x=a.stateNode,ag(r,a),_=a.memoizedProps,ce=vo(l,_),x.props=ce,he=a.pendingProps,ne=x.context,ee=l.contextType,F=gl,typeof ee=="object"&&ee!==null&&(F=gn(ee)),I=l.getDerivedStateFromProps,(ee=typeof I=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==he||ne!==F)&&n_(a,x,d,F),Hi=!1,ne=a.memoizedState,x.state=ne,mu(a,d,x,g),fu();var ae=a.memoizedState;_!==he||ne!==ae||Hi||r!==null&&r.dependencies!==null&&zh(r.dependencies)?(typeof I=="function"&&(jg(a,l,I,d),ae=a.memoizedState),(ce=Hi||t_(a,l,ce,d,ne,ae,F)||r!==null&&r.dependencies!==null&&zh(r.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ae,F),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ae,F)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===r.memoizedProps&&ne===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ne===r.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ae),x.props=d,x.state=ae,x.context=F,d=ce):(typeof x.componentDidUpdate!="function"||_===r.memoizedProps&&ne===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ne===r.memoizedState||(a.flags|=1024),d=!1)}return x=d,af(r,a),d=(a.flags&128)!==0,x||d?(x=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,r!==null&&d?(a.child=yo(a,r.child,null,g),a.child=yo(a,null,l,g)):yn(r,a,l,g),a.memoizedState=x.state,r=a.child):r=ni(r,a,g),r}function y_(r,a,l,d){return uo(),a.flags|=256,yn(r,a,l,d),a.child}var kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pg(r){return{baseLanes:r,cachePool:aw()}}function Og(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=as),r}function x_(r,a,l){var d=a.pendingProps,g=!1,x=(a.flags&128)!==0,_;if((_=x)||(_=r!==null&&r.memoizedState===null?!1:(zt.current&2)!==0),_&&(g=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,r===null){if(rt){if(g?Yi(a):Xi(),(r=Nt)?(r=A1(r,ws),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Bi!==null?{id:Tr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},l=Wb(r),l.return=a,a.child=l,pn=a,Nt=null)):r=null,r===null)throw qi(a);return xy(r)?a.lanes=32:a.lanes=536870912,null}var I=d.children;return d=d.fallback,g?(Xi(),g=a.mode,I=of({mode:"hidden",children:I},g),d=co(d,g,l,null),I.return=a,d.return=a,I.sibling=d,a.child=I,d=a.child,d.memoizedState=Pg(l),d.childLanes=Og(r,_,l),a.memoizedState=kg,vu(null,d)):(Yi(a),Vg(a,I))}var F=r.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(x)a.flags&256?(Yi(a),a.flags&=-257,a=Lg(r,a,l)):a.memoizedState!==null?(Xi(),a.child=r.child,a.flags|=128,a=null):(Xi(),I=d.fallback,g=a.mode,d=of({mode:"visible",children:d.children},g),I=co(I,g,l,null),I.flags|=2,d.return=a,I.return=a,d.sibling=I,a.child=d,yo(a,r.child,null,l),d=a.child,d.memoizedState=Pg(l),d.childLanes=Og(r,_,l),a.memoizedState=kg,a=vu(null,d));else if(Yi(a),xy(I)){if(_=I.nextSibling&&I.nextSibling.dataset,_)var ee=_.dgst;_=ee,d=Error(s(419)),d.stack="",d.digest=_,ou({value:d,source:null,stack:null}),a=Lg(r,a,l)}else if(Wt||bl(r,a,l,!1),_=(l&r.childLanes)!==0,Wt||_){if(_=wt,_!==null&&(d=zc(_,l),d!==0&&d!==F.retryLane))throw F.retryLane=d,lo(r,d),Xn(_,r,d),Dg;yy(I)||gf(),a=Lg(r,a,l)}else yy(I)?(a.flags|=192,a.child=r.child,a=null):(r=F.treeContext,Nt=Es(I.nextSibling),pn=a,rt=!0,Fi=null,ws=!1,r!==null&&ew(a,r),a=Vg(a,d.children),a.flags|=4096);return a}return g?(Xi(),I=d.fallback,g=a.mode,F=r.child,ee=F.sibling,d=Qr(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,ee!==null?I=Qr(ee,I):(I=co(I,g,l,null),I.flags|=2),I.return=a,d.return=a,d.sibling=I,a.child=d,vu(null,d),d=a.child,I=r.child.memoizedState,I===null?I=Pg(l):(g=I.cachePool,g!==null?(F=Xt._currentValue,g=g.parent!==F?{parent:F,pool:F}:g):g=aw(),I={baseLanes:I.baseLanes|l,cachePool:g}),d.memoizedState=I,d.childLanes=Og(r,_,l),a.memoizedState=kg,vu(r.child,d)):(Yi(a),l=r.child,r=l.sibling,l=Qr(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,r!==null&&(_=a.deletions,_===null?(a.deletions=[r],a.flags|=16):_.push(r)),a.child=l,a.memoizedState=null,l)}function Vg(r,a){return a=of({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function of(r,a){return r=ns(22,r,null,a),r.lanes=0,r}function Lg(r,a,l){return yo(a,r.child,null,l),r=Vg(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function v_(r,a,l){r.lanes|=a;var d=r.alternate;d!==null&&(d.lanes|=a),Jp(r.return,a,l)}function Ug(r,a,l,d,g,x){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:x}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=g,_.treeForkCount=x)}function b_(r,a,l){var d=a.pendingProps,g=d.revealOrder,x=d.tail;d=d.children;var _=zt.current,I=(_&2)!==0;if(I?(_=_&1|2,a.flags|=128):_&=1,H(zt,_),yn(r,a,d,l),d=rt?au:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&v_(r,l,a);else if(r.tag===19)v_(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)r=l.alternate,r!==null&&Yh(r)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),Ug(a,!1,g,l,x,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(r=g.alternate,r!==null&&Yh(r)===null){a.child=g;break}r=g.sibling,g.sibling=l,l=g,g=r}Ug(a,!0,l,null,x,d);break;case"together":Ug(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function ni(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),Zi|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(bl(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,l=Qr(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Qr(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function zg(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&zh(r)))}function tI(r,a,l){switch(a.tag){case 3:Et(a,a.stateNode.containerInfo),$i(a,Xt,r.memoizedState.cache),uo();break;case 27:case 5:ds(a);break;case 4:Et(a,a.stateNode.containerInfo);break;case 10:$i(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,dg(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Yi(a),a.flags|=128,null):(l&a.child.childLanes)!==0?x_(r,a,l):(Yi(a),r=ni(r,a,l),r!==null?r.sibling:null);Yi(a);break;case 19:var g=(r.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(bl(r,a,l,!1),d=(l&a.childLanes)!==0),g){if(d)return b_(r,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),H(zt,zt.current),d)break;return null;case 22:return a.lanes=0,h_(r,a,l,a.pendingProps);case 24:$i(a,Xt,r.memoizedState.cache)}return ni(r,a,l)}function w_(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Wt=!0;else{if(!zg(r,l)&&(a.flags&128)===0)return Wt=!1,tI(r,a,l);Wt=(r.flags&131072)!==0}else Wt=!1,rt&&(a.flags&1048576)!==0&&Jb(a,au,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(r=po(a.elementType),a.type=r,typeof r=="function")Hp(r)?(d=vo(r,d),a.tag=1,a=g_(null,a,r,d,l)):(a.tag=0,a=Mg(null,a,r,d,l));else{if(r!=null){var g=r.$$typeof;if(g===$){a.tag=11,a=c_(null,a,r,d,l);break e}else if(g===A){a.tag=14,a=u_(null,a,r,d,l);break e}}throw a=_e(r)||r,Error(s(306,a,""))}}return a;case 0:return Mg(r,a,a.type,a.pendingProps,l);case 1:return d=a.type,g=vo(d,a.pendingProps),g_(r,a,d,g,l);case 3:e:{if(Et(a,a.stateNode.containerInfo),r===null)throw Error(s(387));d=a.pendingProps;var x=a.memoizedState;g=x.element,ag(r,a),mu(a,d,null,l);var _=a.memoizedState;if(d=_.cache,$i(a,Xt,d),d!==x.cache&&eg(a,[Xt],l,!0),fu(),d=_.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=y_(r,a,d,l);break e}else if(d!==g){g=xs(Error(s(424)),a),ou(g),a=y_(r,a,d,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Es(r.firstChild),pn=a,rt=!0,Fi=null,ws=!0,l=hw(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(uo(),d===g){a=ni(r,a,l);break e}yn(r,a,d,l)}a=a.child}return a;case 26:return af(r,a),r===null?(l=D1(a.type,null,a.pendingProps,null))?a.memoizedState=l:rt||(l=a.type,r=a.pendingProps,d=Ef(ke.current).createElement(l),d[Gt]=a,d[cn]=r,xn(d,l,r),Kt(d),a.stateNode=d):a.memoizedState=D1(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return ds(a),r===null&&rt&&(d=a.stateNode=j1(a.type,a.pendingProps,ke.current),pn=a,ws=!0,g=Nt,sa(a.type)?(vy=g,Nt=Es(d.firstChild)):Nt=g),yn(r,a,a.pendingProps.children,l),af(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&rt&&((g=d=Nt)&&(d=II(d,a.type,a.pendingProps,ws),d!==null?(a.stateNode=d,pn=a,Nt=Es(d.firstChild),ws=!1,g=!0):g=!1),g||qi(a)),ds(a),g=a.type,x=a.pendingProps,_=r!==null?r.memoizedProps:null,d=x.children,my(g,x)?d=null:_!==null&&my(g,_)&&(a.flags|=32),a.memoizedState!==null&&(g=fg(r,a,GR,null,null,l),ku._currentValue=g),af(r,a),yn(r,a,d,l),a.child;case 6:return r===null&&rt&&((r=l=Nt)&&(l=DI(l,a.pendingProps,ws),l!==null?(a.stateNode=l,pn=a,Nt=null,r=!0):r=!1),r||qi(a)),null;case 13:return x_(r,a,l);case 4:return Et(a,a.stateNode.containerInfo),d=a.pendingProps,r===null?a.child=yo(a,null,d,l):yn(r,a,d,l),a.child;case 11:return c_(r,a,a.type,a.pendingProps,l);case 7:return yn(r,a,a.pendingProps,l),a.child;case 8:return yn(r,a,a.pendingProps.children,l),a.child;case 12:return yn(r,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,$i(a,a.type,d.value),yn(r,a,d.children,l),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,fo(a),g=gn(g),d=d(g),a.flags|=1,yn(r,a,d,l),a.child;case 14:return u_(r,a,a.type,a.pendingProps,l);case 15:return d_(r,a,a.type,a.pendingProps,l);case 19:return b_(r,a,l);case 31:return eI(r,a,l);case 22:return h_(r,a,l,a.pendingProps);case 24:return fo(a),d=gn(Xt),r===null?(g=sg(),g===null&&(g=wt,x=tg(),g.pooledCache=x,x.refCount++,x!==null&&(g.pooledCacheLanes|=l),g=x),a.memoizedState={parent:d,cache:g},ig(a),$i(a,Xt,g)):((r.lanes&l)!==0&&(ag(r,a),mu(a,null,null,l),fu()),g=r.memoizedState,x=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),$i(a,Xt,d)):(d=x.cache,$i(a,Xt,d),d!==g.cache&&eg(a,[Xt],l,!0))),yn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function si(r){r.flags|=4}function Bg(r,a,l,d,g){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(Y_())r.flags|=8192;else throw go=$h,rg}else r.flags&=-16777217}function __(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!V1(a))if(Y_())r.flags|=8192;else throw go=$h,rg}function lf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?fh():536870912,r.lanes|=a,Dl|=a)}function bu(r,a){if(!rt)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function At(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(a)for(var g=r.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=d,r.childLanes=l,a}function nI(r,a,l){var d=a.pendingProps;switch(Xp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(a),null;case 1:return At(a),null;case 3:return l=a.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Jr(Xt),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(vl(a)?si(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Wp())),At(a),null;case 26:var g=a.type,x=a.memoizedState;return r===null?(si(a),x!==null?(At(a),__(a,x)):(At(a),Bg(a,g,null,d,l))):x?x!==r.memoizedState?(si(a),At(a),__(a,x)):(At(a),a.flags&=-16777217):(r=r.memoizedProps,r!==d&&si(a),At(a),Bg(a,g,r,d,l)),null;case 27:if(ir(a),l=ke.current,g=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&si(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return At(a),null}r=le.current,vl(a)?tw(a):(r=j1(g,d,l),a.stateNode=r,si(a))}return At(a),null;case 5:if(ir(a),g=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&si(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return At(a),null}if(x=le.current,vl(a))tw(a);else{var _=Ef(ke.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?_.createElement(g,{is:d.is}):_.createElement(g)}}x[Gt]=a,x[cn]=d;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=x;e:switch(xn(x,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&si(a)}}return At(a),Bg(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,l),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==d&&si(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(r=ke.current,vl(a)){if(r=a.stateNode,l=a.memoizedProps,d=null,g=pn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}r[Gt]=a,r=!!(r.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||x1(r.nodeValue,l)),r||qi(a,!0)}else r=Ef(r).createTextNode(d),r[Gt]=a,a.stateNode=r}return At(a),null;case 31:if(l=a.memoizedState,r===null||r.memoizedState!==null){if(d=vl(a),l!==null){if(r===null){if(!d)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Gt]=a}else uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;At(a),r=!1}else l=Wp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return a.flags&256?(rs(a),a):(rs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return At(a),null;case 13:if(d=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=vl(a),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(s(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Gt]=a}else uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;At(a),g=!1}else g=Wp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(rs(a),a):(rs(a),null)}return rs(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,r=r!==null&&r.memoizedState!==null,l&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==g&&(d.flags|=2048)),l!==r&&l&&(a.child.flags|=8192),lf(a,a.updateQueue),At(a),null);case 4:return ft(),r===null&&cy(a.stateNode.containerInfo),At(a),null;case 10:return Jr(a.type),At(a),null;case 19:if(te(zt),d=a.memoizedState,d===null)return At(a),null;if(g=(a.flags&128)!==0,x=d.rendering,x===null)if(g)bu(d,!1);else{if(Pt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(x=Yh(r),x!==null){for(a.flags|=128,bu(d,!1),r=x.updateQueue,a.updateQueue=r,lf(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)Qb(l,r),l=l.sibling;return H(zt,zt.current&1|2),rt&&Wr(a,d.treeForkCount),a.child}r=r.sibling}d.tail!==null&&Dn()>ff&&(a.flags|=128,g=!0,bu(d,!1),a.lanes=4194304)}else{if(!g)if(r=Yh(x),r!==null){if(a.flags|=128,g=!0,r=r.updateQueue,a.updateQueue=r,lf(a,r),bu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!rt)return At(a),null}else 2*Dn()-d.renderingStartTime>ff&&l!==536870912&&(a.flags|=128,g=!0,bu(d,!1),a.lanes=4194304);d.isBackwards?(x.sibling=a.child,a.child=x):(r=d.last,r!==null?r.sibling=x:a.child=x,d.last=x)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Dn(),r.sibling=null,l=zt.current,H(zt,g?l&1|2:l&1),rt&&Wr(a,d.treeForkCount),r):(At(a),null);case 22:case 23:return rs(a),ug(),d=a.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(At(a),a.subtreeFlags&6&&(a.flags|=8192)):At(a),l=a.updateQueue,l!==null&&lf(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),r!==null&&te(mo),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Jr(Xt),At(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function sI(r,a){switch(Xp(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Jr(Xt),ft(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return ir(a),null;case 31:if(a.memoizedState!==null){if(rs(a),a.alternate===null)throw Error(s(340));uo()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(rs(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));uo()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return te(zt),null;case 4:return ft(),null;case 10:return Jr(a.type),null;case 22:case 23:return rs(a),ug(),r!==null&&te(mo),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Jr(Xt),null;case 25:return null;default:return null}}function E_(r,a){switch(Xp(a),a.tag){case 3:Jr(Xt),ft();break;case 26:case 27:case 5:ir(a);break;case 4:ft();break;case 31:a.memoizedState!==null&&rs(a);break;case 13:rs(a);break;case 19:te(zt);break;case 10:Jr(a.type);break;case 22:case 23:rs(a),ug(),r!==null&&te(mo);break;case 24:Jr(Xt)}}function wu(r,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&r)===r){d=void 0;var x=l.create,_=l.inst;d=x(),_.destroy=d}l=l.next}while(l!==g)}}catch(I){gt(a,a.return,I)}}function Qi(r,a,l){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var x=g.next;d=x;do{if((d.tag&r)===r){var _=d.inst,I=_.destroy;if(I!==void 0){_.destroy=void 0,g=a;var F=l,ee=I;try{ee()}catch(ce){gt(g,F,ce)}}}d=d.next}while(d!==x)}}catch(ce){gt(a,a.return,ce)}}function T_(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{mw(a,l)}catch(d){gt(r,r.return,d)}}}function N_(r,a,l){l.props=vo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(d){gt(r,a,d)}}function _u(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(g){gt(r,a,g)}}function Ar(r,a){var l=r.ref,d=r.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){gt(r,a,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){gt(r,a,g)}else l.current=null}function A_(r){var a=r.type,l=r.memoizedProps,d=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){gt(r,r.return,g)}}function Fg(r,a,l){try{var d=r.stateNode;NI(d,r.type,l,a),d[cn]=a}catch(g){gt(r,r.return,g)}}function S_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&sa(r.type)||r.tag===4}function qg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||S_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&sa(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $g(r,a,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Us));else if(d!==4&&(d===27&&sa(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for($g(r,a,l),r=r.sibling;r!==null;)$g(r,a,l),r=r.sibling}function cf(r,a,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(d!==4&&(d===27&&sa(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(cf(r,a,l),r=r.sibling;r!==null;)cf(r,a,l),r=r.sibling}function C_(r){var a=r.stateNode,l=r.memoizedProps;try{for(var d=r.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);xn(a,d,l),a[Gt]=r,a[cn]=l}catch(x){gt(r,r.return,x)}}var ri=!1,Zt=!1,Hg=!1,j_=typeof WeakSet=="function"?WeakSet:Set,dn=null;function rI(r,a){if(r=r.containerInfo,hy=Rf,r=Bb(r),Lp(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var _=0,I=-1,F=-1,ee=0,ce=0,he=r,ne=null;t:for(;;){for(var ae;he!==l||g!==0&&he.nodeType!==3||(I=_+g),he!==x||d!==0&&he.nodeType!==3||(F=_+d),he.nodeType===3&&(_+=he.nodeValue.length),(ae=he.firstChild)!==null;)ne=he,he=ae;for(;;){if(he===r)break t;if(ne===l&&++ee===g&&(I=_),ne===x&&++ce===d&&(F=_),(ae=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=ae}l=I===-1||F===-1?null:{start:I,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(fy={focusedElem:r,selectionRange:l},Rf=!1,dn=a;dn!==null;)if(a=dn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,dn=r;else for(;dn!==null;){switch(a=dn,x=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)g=r[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,l=a,g=x.memoizedProps,x=x.memoizedState,d=l.stateNode;try{var Ae=vo(l.type,g);r=d.getSnapshotBeforeUpdate(Ae,x),d.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){gt(l,l.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)gy(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":gy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,dn=r;break}dn=a.return}}function R_(r,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:ai(r,l),d&4&&wu(5,l);break;case 1:if(ai(r,l),d&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(_){gt(l,l.return,_)}else{var g=vo(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(g,a,r.__reactInternalSnapshotBeforeUpdate)}catch(_){gt(l,l.return,_)}}d&64&&T_(l),d&512&&_u(l,l.return);break;case 3:if(ai(r,l),d&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{mw(r,a)}catch(_){gt(l,l.return,_)}}break;case 27:a===null&&d&4&&C_(l);case 26:case 5:ai(r,l),a===null&&d&4&&A_(l),d&512&&_u(l,l.return);break;case 12:ai(r,l);break;case 31:ai(r,l),d&4&&M_(r,l);break;case 13:ai(r,l),d&4&&k_(r,l),d&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=fI.bind(null,l),MI(r,l))));break;case 22:if(d=l.memoizedState!==null||ri,!d){a=a!==null&&a.memoizedState!==null||Zt,g=ri;var x=Zt;ri=d,(Zt=a)&&!x?oi(r,l,(l.subtreeFlags&8772)!==0):ai(r,l),ri=g,Zt=x}break;case 30:break;default:ai(r,l)}}function I_(r){var a=r.alternate;a!==null&&(r.alternate=null,I_(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&nl(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var jt=null,Hn=!1;function ii(r,a,l){for(l=l.child;l!==null;)D_(r,a,l),l=l.sibling}function D_(r,a,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Ps,l)}catch{}switch(l.tag){case 26:Zt||Ar(l,a),ii(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Zt||Ar(l,a);var d=jt,g=Hn;sa(l.type)&&(jt=l.stateNode,Hn=!1),ii(r,a,l),Iu(l.stateNode),jt=d,Hn=g;break;case 5:Zt||Ar(l,a);case 6:if(d=jt,g=Hn,jt=null,ii(r,a,l),jt=d,Hn=g,jt!==null)if(Hn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(l.stateNode)}catch(x){gt(l,a,x)}else try{jt.removeChild(l.stateNode)}catch(x){gt(l,a,x)}break;case 18:jt!==null&&(Hn?(r=jt,T1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),zl(r)):T1(jt,l.stateNode));break;case 4:d=jt,g=Hn,jt=l.stateNode.containerInfo,Hn=!0,ii(r,a,l),jt=d,Hn=g;break;case 0:case 11:case 14:case 15:Qi(2,l,a),Zt||Qi(4,l,a),ii(r,a,l);break;case 1:Zt||(Ar(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&N_(l,a,d)),ii(r,a,l);break;case 21:ii(r,a,l);break;case 22:Zt=(d=Zt)||l.memoizedState!==null,ii(r,a,l),Zt=d;break;default:ii(r,a,l)}}function M_(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{zl(r)}catch(l){gt(a,a.return,l)}}}function k_(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{zl(r)}catch(l){gt(a,a.return,l)}}function iI(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new j_),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new j_),a;default:throw Error(s(435,r.tag))}}function uf(r,a){var l=iI(r);a.forEach(function(d){if(!l.has(d)){l.add(d);var g=mI.bind(null,r,d);d.then(g,g)}})}function Gn(r,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],x=r,_=a,I=_;e:for(;I!==null;){switch(I.tag){case 27:if(sa(I.type)){jt=I.stateNode,Hn=!1;break e}break;case 5:jt=I.stateNode,Hn=!1;break e;case 3:case 4:jt=I.stateNode.containerInfo,Hn=!0;break e}I=I.return}if(jt===null)throw Error(s(160));D_(x,_,g),jt=null,Hn=!1,x=g.alternate,x!==null&&(x.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)P_(a,r),a=a.sibling}var Hs=null;function P_(r,a){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Gn(a,r),Kn(r),d&4&&(Qi(3,r,r.return),wu(3,r),Qi(5,r,r.return));break;case 1:Gn(a,r),Kn(r),d&512&&(Zt||l===null||Ar(l,l.return)),d&64&&ri&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=Hs;if(Gn(a,r),Kn(r),d&512&&(Zt||l===null||Ar(l,l.return)),d&4){var x=l!==null?l.memoizedState:null;if(d=r.memoizedState,l===null)if(d===null)if(r.stateNode===null){e:{d=r.type,l=r.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":x=g.getElementsByTagName("title")[0],(!x||x[hr]||x[Gt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=g.createElement(d),g.head.insertBefore(x,g.querySelector("head > title"))),xn(x,d,l),x[Gt]=r,Kt(x),d=x;break e;case"link":var _=P1("link","href",g).get(d+(l.href||""));if(_){for(var I=0;I<_.length;I++)if(x=_[I],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(I,1);break t}}x=g.createElement(d),xn(x,d,l),g.head.appendChild(x);break;case"meta":if(_=P1("meta","content",g).get(d+(l.content||""))){for(I=0;I<_.length;I++)if(x=_[I],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(I,1);break t}}x=g.createElement(d),xn(x,d,l),g.head.appendChild(x);break;default:throw Error(s(468,d))}x[Gt]=r,Kt(x),d=x}r.stateNode=d}else O1(g,r.type,r.stateNode);else r.stateNode=k1(g,d,r.memoizedProps);else x!==d?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,d===null?O1(g,r.type,r.stateNode):k1(g,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Fg(r,r.memoizedProps,l.memoizedProps)}break;case 27:Gn(a,r),Kn(r),d&512&&(Zt||l===null||Ar(l,l.return)),l!==null&&d&4&&Fg(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Gn(a,r),Kn(r),d&512&&(Zt||l===null||Ar(l,l.return)),r.flags&32){g=r.stateNode;try{$n(g,"")}catch(Ae){gt(r,r.return,Ae)}}d&4&&r.stateNode!=null&&(g=r.memoizedProps,Fg(r,g,l!==null?l.memoizedProps:g)),d&1024&&(Hg=!0);break;case 6:if(Gn(a,r),Kn(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,l=r.stateNode;try{l.nodeValue=d}catch(Ae){gt(r,r.return,Ae)}}break;case 3:if(Af=null,g=Hs,Hs=Tf(a.containerInfo),Gn(a,r),Hs=g,Kn(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{zl(a.containerInfo)}catch(Ae){gt(r,r.return,Ae)}Hg&&(Hg=!1,O_(r));break;case 4:d=Hs,Hs=Tf(r.stateNode.containerInfo),Gn(a,r),Kn(r),Hs=d;break;case 12:Gn(a,r),Kn(r);break;case 31:Gn(a,r),Kn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,uf(r,d)));break;case 13:Gn(a,r),Kn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(hf=Dn()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,uf(r,d)));break;case 22:g=r.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,ee=ri,ce=Zt;if(ri=ee||g,Zt=ce||F,Gn(a,r),Zt=ce,ri=ee,Kn(r),d&8192)e:for(a=r.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||F||ri||Zt||bo(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(x=F.stateNode,g)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{I=F.stateNode;var he=F.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ae){gt(F,F.return,Ae)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=g?"":F.memoizedProps}catch(Ae){gt(F,F.return,Ae)}}}else if(a.tag===18){if(l===null){F=a;try{var ae=F.stateNode;g?N1(ae,!0):N1(F.stateNode,!1)}catch(Ae){gt(F,F.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=r.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,uf(r,l))));break;case 19:Gn(a,r),Kn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,uf(r,d)));break;case 30:break;case 21:break;default:Gn(a,r),Kn(r)}}function Kn(r){var a=r.flags;if(a&2){try{for(var l,d=r.return;d!==null;){if(S_(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,x=qg(r);cf(r,x,g);break;case 5:var _=l.stateNode;l.flags&32&&($n(_,""),l.flags&=-33);var I=qg(r);cf(r,I,_);break;case 3:case 4:var F=l.stateNode.containerInfo,ee=qg(r);$g(r,ee,F);break;default:throw Error(s(161))}}catch(ce){gt(r,r.return,ce)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function O_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;O_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ai(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)R_(r,a.alternate,a),a=a.sibling}function bo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Qi(4,a,a.return),bo(a);break;case 1:Ar(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&N_(a,a.return,l),bo(a);break;case 27:Iu(a.stateNode);case 26:case 5:Ar(a,a.return),bo(a);break;case 22:a.memoizedState===null&&bo(a);break;case 30:bo(a);break;default:bo(a)}r=r.sibling}}function oi(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=r,x=a,_=x.flags;switch(x.tag){case 0:case 11:case 15:oi(g,x,l),wu(4,x);break;case 1:if(oi(g,x,l),d=x,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ee){gt(d,d.return,ee)}if(d=x,g=d.updateQueue,g!==null){var I=d.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)fw(F[g],I)}catch(ee){gt(d,d.return,ee)}}l&&_&64&&T_(x),_u(x,x.return);break;case 27:C_(x);case 26:case 5:oi(g,x,l),l&&d===null&&_&4&&A_(x),_u(x,x.return);break;case 12:oi(g,x,l);break;case 31:oi(g,x,l),l&&_&4&&M_(g,x);break;case 13:oi(g,x,l),l&&_&4&&k_(g,x);break;case 22:x.memoizedState===null&&oi(g,x,l),_u(x,x.return);break;case 30:break;default:oi(g,x,l)}a=a.sibling}}function Gg(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&lu(l))}function Kg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&lu(r))}function Gs(r,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)V_(r,a,l,d),a=a.sibling}function V_(r,a,l,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Gs(r,a,l,d),g&2048&&wu(9,a);break;case 1:Gs(r,a,l,d);break;case 3:Gs(r,a,l,d),g&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&lu(r)));break;case 12:if(g&2048){Gs(r,a,l,d),r=a.stateNode;try{var x=a.memoizedProps,_=x.id,I=x.onPostCommit;typeof I=="function"&&I(_,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){gt(a,a.return,F)}}else Gs(r,a,l,d);break;case 31:Gs(r,a,l,d);break;case 13:Gs(r,a,l,d);break;case 23:break;case 22:x=a.stateNode,_=a.alternate,a.memoizedState!==null?x._visibility&2?Gs(r,a,l,d):Eu(r,a):x._visibility&2?Gs(r,a,l,d):(x._visibility|=2,jl(r,a,l,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&Gg(_,a);break;case 24:Gs(r,a,l,d),g&2048&&Kg(a.alternate,a);break;default:Gs(r,a,l,d)}}function jl(r,a,l,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=r,_=a,I=l,F=d,ee=_.flags;switch(_.tag){case 0:case 11:case 15:jl(x,_,I,F,g),wu(8,_);break;case 23:break;case 22:var ce=_.stateNode;_.memoizedState!==null?ce._visibility&2?jl(x,_,I,F,g):Eu(x,_):(ce._visibility|=2,jl(x,_,I,F,g)),g&&ee&2048&&Gg(_.alternate,_);break;case 24:jl(x,_,I,F,g),g&&ee&2048&&Kg(_.alternate,_);break;default:jl(x,_,I,F,g)}a=a.sibling}}function Eu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,d=a,g=d.flags;switch(d.tag){case 22:Eu(l,d),g&2048&&Gg(d.alternate,d);break;case 24:Eu(l,d),g&2048&&Kg(d.alternate,d);break;default:Eu(l,d)}a=a.sibling}}var Tu=8192;function Rl(r,a,l){if(r.subtreeFlags&Tu)for(r=r.child;r!==null;)L_(r,a,l),r=r.sibling}function L_(r,a,l){switch(r.tag){case 26:Rl(r,a,l),r.flags&Tu&&r.memoizedState!==null&&HI(l,Hs,r.memoizedState,r.memoizedProps);break;case 5:Rl(r,a,l);break;case 3:case 4:var d=Hs;Hs=Tf(r.stateNode.containerInfo),Rl(r,a,l),Hs=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Tu,Tu=16777216,Rl(r,a,l),Tu=d):Rl(r,a,l));break;default:Rl(r,a,l)}}function U_(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Nu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];dn=d,B_(d,r)}U_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)z_(r),r=r.sibling}function z_(r){switch(r.tag){case 0:case 11:case 15:Nu(r),r.flags&2048&&Qi(9,r,r.return);break;case 3:Nu(r);break;case 12:Nu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,df(r)):Nu(r);break;default:Nu(r)}}function df(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];dn=d,B_(d,r)}U_(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Qi(8,a,a.return),df(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,df(a));break;default:df(a)}r=r.sibling}}function B_(r,a){for(;dn!==null;){var l=dn;switch(l.tag){case 0:case 11:case 15:Qi(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:lu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,dn=d;else e:for(l=r;dn!==null;){d=dn;var g=d.sibling,x=d.return;if(I_(d),d===l){dn=null;break e}if(g!==null){g.return=x,dn=g;break e}dn=x}}}var aI={getCacheForType:function(r){var a=gn(Xt),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l},cacheSignal:function(){return gn(Xt).controller.signal}},oI=typeof WeakMap=="function"?WeakMap:Map,dt=0,wt=null,We=null,Je=0,pt=0,is=null,Wi=!1,Il=!1,Yg=!1,li=0,Pt=0,Zi=0,wo=0,Xg=0,as=0,Dl=0,Au=null,Yn=null,Qg=!1,hf=0,F_=0,ff=1/0,mf=null,Ji=null,rn=0,ea=null,Ml=null,ci=0,Wg=0,Zg=null,q_=null,Su=0,Jg=null;function os(){return(dt&2)!==0&&Je!==0?Je&-Je:X.T!==null?iy():mh()}function $_(){if(as===0)if((Je&536870912)===0||rt){var r=Ka;Ka<<=1,(Ka&3932160)===0&&(Ka=262144),as=r}else as=536870912;return r=ss.current,r!==null&&(r.flags|=32),as}function Xn(r,a,l){(r===wt&&(pt===2||pt===9)||r.cancelPendingCommit!==null)&&(kl(r,0),ta(r,Je,as,!1)),Ya(r,l),((dt&2)===0||r!==wt)&&(r===wt&&((dt&2)===0&&(wo|=l),Pt===4&&ta(r,Je,as,!1)),Sr(r))}function H_(r,a,l){if((dt&6)!==0)throw Error(s(327));var d=!l&&(a&127)===0&&(a&r.expiredLanes)===0||Os(r,a),g=d?uI(r,a):ty(r,a,!0),x=d;do{if(g===0){Il&&!d&&ta(r,a,0,!1);break}else{if(l=r.current.alternate,x&&!lI(l)){g=ty(r,a,!1),x=!1;continue}if(g===2){if(x=a,r.errorRecoveryDisabledLanes&x)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var I=r;g=Au;var F=I.current.memoizedState.isDehydrated;if(F&&(kl(I,_).flags|=256),_=ty(I,_,!1),_!==2){if(Yg&&!F){I.errorRecoveryDisabledLanes|=x,wo|=x,g=4;break e}x=Yn,Yn=g,x!==null&&(Yn===null?Yn=x:Yn.push.apply(Yn,x))}g=_}if(x=!1,g!==2)continue}}if(g===1){kl(r,0),ta(r,a,0,!0);break}e:{switch(d=r,x=g,x){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ta(d,a,as,!Wi);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(g=hf+300-Dn(),10<g)){if(ta(d,a,as,!Wi),cr(d,0,!0)!==0)break e;ci=a,d.timeoutHandle=_1(G_.bind(null,d,l,Yn,mf,Qg,a,as,wo,Dl,Wi,x,"Throttled",-0,0),g);break e}G_(d,l,Yn,mf,Qg,a,as,wo,Dl,Wi,x,null,-0,0)}}break}while(!0);Sr(r)}function G_(r,a,l,d,g,x,_,I,F,ee,ce,he,ne,ae){if(r.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},L_(a,x,he);var Ae=(x&62914560)===x?hf-Dn():(x&4194048)===x?F_-Dn():0;if(Ae=GI(he,Ae),Ae!==null){ci=x,r.cancelPendingCommit=Ae(e1.bind(null,r,a,x,l,d,g,_,I,F,ce,he,null,ne,ae)),ta(r,x,_,!ee);return}}e1(r,a,x,l,d,g,_,I,F)}function lI(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],x=g.getSnapshot;g=g.value;try{if(!ts(x(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ta(r,a,l,d){a&=~Xg,a&=~wo,r.suspendedLanes|=a,r.pingedLanes&=~a,d&&(r.warmLanes|=a),d=r.expirationTimes;for(var g=a;0<g;){var x=31-Lt(g),_=1<<x;d[x]=-1,g&=~_}l!==0&&Xa(r,l,a)}function pf(){return(dt&6)===0?(Cu(0),!1):!0}function ey(){if(We!==null){if(pt===0)var r=We.return;else r=We,Zr=ho=null,gg(r),Tl=null,uu=0,r=We;for(;r!==null;)E_(r.alternate,r),r=r.return;We=null}}function kl(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,CI(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),ci=0,ey(),wt=r,We=l=Qr(r.current,null),Je=a,pt=0,is=null,Wi=!1,Il=Os(r,a),Yg=!1,Dl=as=Xg=wo=Zi=Pt=0,Yn=Au=null,Qg=!1,(a&8)!==0&&(a|=a&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=a;0<d;){var g=31-Lt(d),x=1<<g;a|=r[g],d&=~x}return li=a,Ph(),l}function K_(r,a){Ye=null,X.H=xu,a===El||a===qh?(a=cw(),pt=3):a===rg?(a=cw(),pt=4):pt=a===Dg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,is=a,We===null&&(Pt=1,sf(r,xs(a,r.current)))}function Y_(){var r=ss.current;return r===null?!0:(Je&4194048)===Je?_s===null:(Je&62914560)===Je||(Je&536870912)!==0?r===_s:!1}function X_(){var r=X.H;return X.H=xu,r===null?xu:r}function Q_(){var r=X.A;return X.A=aI,r}function gf(){Pt=4,Wi||(Je&4194048)!==Je&&ss.current!==null||(Il=!0),(Zi&134217727)===0&&(wo&134217727)===0||wt===null||ta(wt,Je,as,!1)}function ty(r,a,l){var d=dt;dt|=2;var g=X_(),x=Q_();(wt!==r||Je!==a)&&(mf=null,kl(r,a)),a=!1;var _=Pt;e:do try{if(pt!==0&&We!==null){var I=We,F=is;switch(pt){case 8:ey(),_=6;break e;case 3:case 2:case 9:case 6:ss.current===null&&(a=!0);var ee=pt;if(pt=0,is=null,Pl(r,I,F,ee),l&&Il){_=0;break e}break;default:ee=pt,pt=0,is=null,Pl(r,I,F,ee)}}cI(),_=Pt;break}catch(ce){K_(r,ce)}while(!0);return a&&r.shellSuspendCounter++,Zr=ho=null,dt=d,X.H=g,X.A=x,We===null&&(wt=null,Je=0,Ph()),_}function cI(){for(;We!==null;)W_(We)}function uI(r,a){var l=dt;dt|=2;var d=X_(),g=Q_();wt!==r||Je!==a?(mf=null,ff=Dn()+500,kl(r,a)):Il=Os(r,a);e:do try{if(pt!==0&&We!==null){a=We;var x=is;t:switch(pt){case 1:pt=0,is=null,Pl(r,a,x,1);break;case 2:case 9:if(ow(x)){pt=0,is=null,Z_(a);break}a=function(){pt!==2&&pt!==9||wt!==r||(pt=7),Sr(r)},x.then(a,a);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:ow(x)?(pt=0,is=null,Z_(a)):(pt=0,is=null,Pl(r,a,x,7));break;case 5:var _=null;switch(We.tag){case 26:_=We.memoizedState;case 5:case 27:var I=We;if(_?V1(_):I.stateNode.complete){pt=0,is=null;var F=I.sibling;if(F!==null)We=F;else{var ee=I.return;ee!==null?(We=ee,yf(ee)):We=null}break t}}pt=0,is=null,Pl(r,a,x,5);break;case 6:pt=0,is=null,Pl(r,a,x,6);break;case 8:ey(),Pt=6;break e;default:throw Error(s(462))}}dI();break}catch(ce){K_(r,ce)}while(!0);return Zr=ho=null,X.H=d,X.A=g,dt=l,We!==null?0:(wt=null,Je=0,Ph(),Pt)}function dI(){for(;We!==null&&!Ip();)W_(We)}function W_(r){var a=w_(r.alternate,r,li);r.memoizedProps=r.pendingProps,a===null?yf(r):We=a}function Z_(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=p_(l,a,a.pendingProps,a.type,void 0,Je);break;case 11:a=p_(l,a,a.pendingProps,a.type.render,a.ref,Je);break;case 5:gg(a);default:E_(l,a),a=We=Qb(a,li),a=w_(l,a,li)}r.memoizedProps=r.pendingProps,a===null?yf(r):We=a}function Pl(r,a,l,d){Zr=ho=null,gg(a),Tl=null,uu=0;var g=a.return;try{if(JR(r,g,a,l,Je)){Pt=1,sf(r,xs(l,r.current)),We=null;return}}catch(x){if(g!==null)throw We=g,x;Pt=1,sf(r,xs(l,r.current)),We=null;return}a.flags&32768?(rt||d===1?r=!0:Il||(Je&536870912)!==0?r=!1:(Wi=r=!0,(d===2||d===9||d===3||d===6)&&(d=ss.current,d!==null&&d.tag===13&&(d.flags|=16384))),J_(a,r)):yf(a)}function yf(r){var a=r;do{if((a.flags&32768)!==0){J_(a,Wi);return}r=a.return;var l=nI(a.alternate,a,li);if(l!==null){We=l;return}if(a=a.sibling,a!==null){We=a;return}We=a=r}while(a!==null);Pt===0&&(Pt=5)}function J_(r,a){do{var l=sI(r.alternate,r);if(l!==null){l.flags&=32767,We=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){We=r;return}We=r=l}while(r!==null);Pt=6,We=null}function e1(r,a,l,d,g,x,_,I,F){r.cancelPendingCommit=null;do xf();while(rn!==0);if((dt&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(x=a.lanes|a.childLanes,x|=qp,kp(r,l,x,_,I,F),r===wt&&(We=wt=null,Je=0),Ml=a,ea=r,ci=l,Wg=x,Zg=g,q_=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,pI(Ii,function(){return i1(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,g=K.p,K.p=2,_=dt,dt|=4;try{rI(r,a,l)}finally{dt=_,K.p=g,X.T=d}}rn=1,t1(),n1(),s1()}}function t1(){if(rn===1){rn=0;var r=ea,a=Ml,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=K.p;K.p=2;var g=dt;dt|=4;try{P_(a,r);var x=fy,_=Bb(r.containerInfo),I=x.focusedElem,F=x.selectionRange;if(_!==I&&I&&I.ownerDocument&&zb(I.ownerDocument.documentElement,I)){if(F!==null&&Lp(I)){var ee=F.start,ce=F.end;if(ce===void 0&&(ce=ee),"selectionStart"in I)I.selectionStart=ee,I.selectionEnd=Math.min(ce,I.value.length);else{var he=I.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),Ae=I.textContent.length,Pe=Math.min(F.start,Ae),bt=F.end===void 0?Pe:Math.min(F.end,Ae);!ae.extend&&Pe>bt&&(_=bt,bt=Pe,Pe=_);var Q=Ub(I,Pe),G=Ub(I,bt);if(Q&&G&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==G.node||ae.focusOffset!==G.offset)){var J=he.createRange();J.setStart(Q.node,Q.offset),ae.removeAllRanges(),Pe>bt?(ae.addRange(J),ae.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),ae.addRange(J))}}}}for(he=[],ae=I;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var de=he[I];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Rf=!!hy,fy=hy=null}finally{dt=g,K.p=d,X.T=l}}r.current=a,rn=2}}function n1(){if(rn===2){rn=0;var r=ea,a=Ml,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=K.p;K.p=2;var g=dt;dt|=4;try{R_(r,a.alternate,a)}finally{dt=g,K.p=d,X.T=l}}rn=3}}function s1(){if(rn===4||rn===3){rn=0,oh();var r=ea,a=Ml,l=ci,d=q_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?rn=5:(rn=0,Ml=ea=null,r1(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Ji=null),Gr(l),a=a.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Ps,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=X.T,g=K.p,K.p=2,X.T=null;try{for(var x=r.onRecoverableError,_=0;_<d.length;_++){var I=d[_];x(I.value,{componentStack:I.stack})}}finally{X.T=a,K.p=g}}(ci&3)!==0&&xf(),Sr(r),g=r.pendingLanes,(l&261930)!==0&&(g&42)!==0?r===Jg?Su++:(Su=0,Jg=r):Su=0,Cu(0)}}function r1(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,lu(a)))}function xf(){return t1(),n1(),s1(),i1()}function i1(){if(rn!==5)return!1;var r=ea,a=Wg;Wg=0;var l=Gr(ci),d=X.T,g=K.p;try{K.p=32>l?32:l,X.T=null,l=Zg,Zg=null;var x=ea,_=ci;if(rn=0,Ml=ea=null,ci=0,(dt&6)!==0)throw Error(s(331));var I=dt;if(dt|=4,z_(x.current),V_(x,x.current,_,l),dt=I,Cu(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Ps,x)}catch{}return!0}finally{K.p=g,X.T=d,r1(r,a)}}function a1(r,a,l){a=xs(l,a),a=Ig(r.stateNode,a,2),r=Ki(r,a,2),r!==null&&(Ya(r,2),Sr(r))}function gt(r,a,l){if(r.tag===3)a1(r,r,l);else for(;a!==null;){if(a.tag===3){a1(a,r,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ji===null||!Ji.has(d))){r=xs(l,r),l=o_(2),d=Ki(a,l,2),d!==null&&(l_(l,d,a,r),Ya(d,2),Sr(d));break}}a=a.return}}function ny(r,a,l){var d=r.pingCache;if(d===null){d=r.pingCache=new oI;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(l)||(Yg=!0,g.add(l),r=hI.bind(null,r,a,l),a.then(r,r))}function hI(r,a,l){var d=r.pingCache;d!==null&&d.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,wt===r&&(Je&l)===l&&(Pt===4||Pt===3&&(Je&62914560)===Je&&300>Dn()-hf?(dt&2)===0&&kl(r,0):Xg|=l,Dl===Je&&(Dl=0)),Sr(r)}function o1(r,a){a===0&&(a=fh()),r=lo(r,a),r!==null&&(Ya(r,a),Sr(r))}function fI(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),o1(r,l)}function mI(r,a){var l=0;switch(r.tag){case 31:case 13:var d=r.stateNode,g=r.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),o1(r,l)}function pI(r,a){return sn(r,a)}var vf=null,Ol=null,sy=!1,bf=!1,ry=!1,na=0;function Sr(r){r!==Ol&&r.next===null&&(Ol===null?vf=Ol=r:Ol=Ol.next=r),bf=!0,sy||(sy=!0,yI())}function Cu(r,a){if(!ry&&bf){ry=!0;do for(var l=!1,d=vf;d!==null;){if(r!==0){var g=d.pendingLanes;if(g===0)var x=0;else{var _=d.suspendedLanes,I=d.pingedLanes;x=(1<<31-Lt(42|r)+1)-1,x&=g&~(_&~I),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,d1(d,x))}else x=Je,x=cr(d,d===wt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||Os(d,x)||(l=!0,d1(d,x));d=d.next}while(l);ry=!1}}function gI(){l1()}function l1(){bf=sy=!1;var r=0;na!==0&&SI()&&(r=na);for(var a=Dn(),l=null,d=vf;d!==null;){var g=d.next,x=c1(d,a);x===0?(d.next=null,l===null?vf=g:l.next=g,g===null&&(Ol=l)):(l=d,(r!==0||(x&3)!==0)&&(bf=!0)),d=g}rn!==0&&rn!==5||Cu(r),na!==0&&(na=0)}function c1(r,a){for(var l=r.suspendedLanes,d=r.pingedLanes,g=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var _=31-Lt(x),I=1<<_,F=g[_];F===-1?((I&l)===0||(I&d)!==0)&&(g[_]=Mp(I,a)):F<=a&&(r.expiredLanes|=I),x&=~I}if(a=wt,l=Je,l=cr(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,l===0||r===a&&(pt===2||pt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Ri(d),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Os(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(d!==null&&Ri(d),Gr(l)){case 2:case 8:l=Lc;break;case 32:l=Ii;break;case 268435456:l=lh;break;default:l=Ii}return d=u1.bind(null,r),l=sn(l,d),r.callbackPriority=a,r.callbackNode=l,a}return d!==null&&d!==null&&Ri(d),r.callbackPriority=2,r.callbackNode=null,2}function u1(r,a){if(rn!==0&&rn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(xf()&&r.callbackNode!==l)return null;var d=Je;return d=cr(r,r===wt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(H_(r,d,a),c1(r,Dn()),r.callbackNode!=null&&r.callbackNode===l?u1.bind(null,r):null)}function d1(r,a){if(xf())return null;H_(r,a,!0)}function yI(){jI(function(){(dt&6)!==0?sn(Vc,gI):l1()})}function iy(){if(na===0){var r=wl;r===0&&(r=or,or<<=1,(or&261888)===0&&(or=256)),na=r}return na}function h1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:al(""+r)}function f1(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function xI(r,a,l,d,g){if(a==="submit"&&l&&l.stateNode===g){var x=h1((g[cn]||null).action),_=d.submitter;_&&(a=(a=_[cn]||null)?h1(a.formAction):_.getAttribute("formAction"),a!==null&&(x=a,_=null));var I=new br("action","action",null,d,g);r.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(na!==0){var F=_?f1(g,_):new FormData(g);Ng(l,{pending:!0,data:F,method:g.method,action:x},null,F)}}else typeof x=="function"&&(I.preventDefault(),F=_?f1(g,_):new FormData(g),Ng(l,{pending:!0,data:F,method:g.method,action:x},x,F))},currentTarget:g}]})}}for(var ay=0;ay<Fp.length;ay++){var oy=Fp[ay],vI=oy.toLowerCase(),bI=oy[0].toUpperCase()+oy.slice(1);$s(vI,"on"+bI)}$s($b,"onAnimationEnd"),$s(Hb,"onAnimationIteration"),$s(Gb,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(OR,"onTransitionRun"),$s(VR,"onTransitionStart"),$s(LR,"onTransitionCancel"),$s(Kb,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function m1(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],g=d.event;d=d.listeners;e:{var x=void 0;if(a)for(var _=d.length-1;0<=_;_--){var I=d[_],F=I.instance,ee=I.currentTarget;if(I=I.listener,F!==x&&g.isPropagationStopped())break e;x=I,g.currentTarget=ee;try{x(g)}catch(ce){kh(ce)}g.currentTarget=null,x=F}else for(_=0;_<d.length;_++){if(I=d[_],F=I.instance,ee=I.currentTarget,I=I.listener,F!==x&&g.isPropagationStopped())break e;x=I,g.currentTarget=ee;try{x(g)}catch(ce){kh(ce)}g.currentTarget=null,x=F}}}}function Ze(r,a){var l=a[tl];l===void 0&&(l=a[tl]=new Set);var d=r+"__bubble";l.has(d)||(p1(a,r,2,!1),l.add(d))}function ly(r,a,l){var d=0;a&&(d|=4),p1(l,r,d,a)}var wf="_reactListening"+Math.random().toString(36).slice(2);function cy(r){if(!r[wf]){r[wf]=!0,Bc.forEach(function(l){l!=="selectionchange"&&(wI.has(l)||ly(l,!1,r),ly(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[wf]||(a[wf]=!0,ly("selectionchange",!1,a))}}function p1(r,a,l,d){switch($1(a)){case 2:var g=XI;break;case 8:g=QI;break;default:g=Ty}l=g.bind(null,a,l,r),g=void 0,!eo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?r.addEventListener(a,l,{capture:!0,passive:g}):r.addEventListener(a,l,!0):g!==void 0?r.addEventListener(a,l,{passive:g}):r.addEventListener(a,l,!1)}function uy(r,a,l,d,g){var x=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var I=d.stateNode.containerInfo;if(I===g)break;if(_===4)for(_=d.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;I!==null;){if(_=fr(I),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){d=x=_;continue e}I=I.parentNode}}d=d.return}Vi(function(){var ee=x,ce=ms(l),he=[];e:{var ne=Yb.get(r);if(ne!==void 0){var ae=br,Ae=r;switch(r){case"keypress":if(no(l)===0)break e;case"keydown":case"keyup":ae=Ih;break;case"focusin":Ae="focus",ae=ro;break;case"focusout":Ae="blur",ae=ro;break;case"beforeblur":case"afterblur":ae=ro;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=_h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=w;break;case $b:case Hb:case Gb:ae=Th;break;case Kb:ae=P;break;case"scroll":case"scrollend":ae=Jc;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=Nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Xr;break;case"toggle":case"beforetoggle":ae=Ke}var Pe=(a&4)!==0,bt=!Pe&&(r==="scroll"||r==="scrollend"),Q=Pe?ne!==null?ne+"Capture":null:ne;Pe=[];for(var G=ee,J;G!==null;){var de=G;if(J=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||J===null||Q===null||(de=zs(G,Q),de!=null&&Pe.push(Ru(G,de,J))),bt)break;G=G.return}0<Pe.length&&(ne=new ae(ne,Ae,null,l,ce),he.push({event:ne,listeners:Pe}))}}if((a&7)===0){e:{if(ne=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",ne&&l!==Qc&&(Ae=l.relatedTarget||l.fromElement)&&(fr(Ae)||Ae[dr]))break e;if((ae||ne)&&(ne=ce.window===ce?ce:(ne=ce.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(Ae=l.relatedTarget||l.toElement,ae=ee,Ae=Ae?fr(Ae):null,Ae!==null&&(bt=o(Ae),Pe=Ae.tag,Ae!==bt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ae=null)):(ae=null,Ae=ee),ae!==Ae)){if(Pe=eu,de="onMouseLeave",Q="onMouseEnter",G="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=Xr,de="onPointerLeave",Q="onPointerEnter",G="pointer"),bt=ae==null?ne:Jn(ae),J=Ae==null?ne:Jn(Ae),ne=new Pe(de,G+"leave",ae,l,ce),ne.target=bt,ne.relatedTarget=J,de=null,fr(ce)===ee&&(Pe=new Pe(Q,G+"enter",Ae,l,ce),Pe.target=J,Pe.relatedTarget=bt,de=Pe),bt=de,ae&&Ae)t:{for(Pe=_I,Q=ae,G=Ae,J=0,de=Q;de;de=Pe(de))J++;de=0;for(var De=G;De;De=Pe(De))de++;for(;0<J-de;)Q=Pe(Q),J--;for(;0<de-J;)G=Pe(G),de--;for(;J--;){if(Q===G||G!==null&&Q===G.alternate){Pe=Q;break t}Q=Pe(Q),G=Pe(G)}Pe=null}else Pe=null;ae!==null&&g1(he,ne,ae,Pe,!1),Ae!==null&&bt!==null&&g1(he,bt,Ae,Pe,!0)}}e:{if(ne=ee?Jn(ee):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var lt=Mb;else if(Ib(ne))if(kb)lt=MR;else{lt=IR;var Re=RR}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&il(ee.elementType)&&(lt=Mb):lt=DR;if(lt&&(lt=lt(r,ee))){Db(he,lt,l,ce);break e}Re&&Re(r,ne,ee),r==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Kc(ne,"number",ne.value)}switch(Re=ee?Jn(ee):window,r){case"focusin":(Ib(Re)||Re.contentEditable==="true")&&(fl=Re,Up=ee,iu=null);break;case"focusout":iu=Up=fl=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,Fb(he,l,ce);break;case"selectionchange":if(PR)break;case"keydown":case"keyup":Fb(he,l,ce)}var Xe;if(ut)e:{switch(r){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else hl?io(r,l)&&(et="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(et="onCompositionStart");et&&(Er&&l.locale!=="ko"&&(hl||et!=="onCompositionStart"?et==="onCompositionEnd"&&hl&&(Xe=Zc()):(vr=ce,Wc="value"in vr?vr.value:vr.textContent,hl=!0)),Re=_f(ee,et),0<Re.length&&(et=new _r(et,r,null,l,ce),he.push({event:et,listeners:Re}),Xe?et.data=Xe:(Xe=dl(l),Xe!==null&&(et.data=Xe)))),(Xe=gs?AR(r,l):SR(r,l))&&(et=_f(ee,"onBeforeInput"),0<et.length&&(Re=new _r("onBeforeInput","beforeinput",null,l,ce),he.push({event:Re,listeners:et}),Re.data=Xe)),xI(he,r,ee,l,ce)}m1(he,a)})}function Ru(r,a,l){return{instance:r,listener:a,currentTarget:l}}function _f(r,a){for(var l=a+"Capture",d=[];r!==null;){var g=r,x=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||x===null||(g=zs(r,l),g!=null&&d.unshift(Ru(r,g,x)),g=zs(r,a),g!=null&&d.push(Ru(r,g,x))),r.tag===3)return d;r=r.return}return[]}function _I(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function g1(r,a,l,d,g){for(var x=a._reactName,_=[];l!==null&&l!==d;){var I=l,F=I.alternate,ee=I.stateNode;if(I=I.tag,F!==null&&F===d)break;I!==5&&I!==26&&I!==27||ee===null||(F=ee,g?(ee=zs(l,x),ee!=null&&_.unshift(Ru(l,ee,F))):g||(ee=zs(l,x),ee!=null&&_.push(Ru(l,ee,F)))),l=l.return}_.length!==0&&r.push({event:a,listeners:_})}var EI=/\r\n?/g,TI=/\u0000|\uFFFD/g;function y1(r){return(typeof r=="string"?r:""+r).replace(EI,`
`).replace(TI,"")}function x1(r,a){return a=y1(a),y1(r)===a}function vt(r,a,l,d,g,x){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||$n(r,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&$n(r,""+d);break;case"className":es(r,"class",d);break;case"tabIndex":es(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":es(r,l,d);break;case"style":Xc(r,d,x);break;case"data":if(a!=="object"){es(r,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=al(""+d),r.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(a!=="input"&&vt(r,a,"name",g.name,g,null),vt(r,a,"formEncType",g.formEncType,g,null),vt(r,a,"formMethod",g.formMethod,g,null),vt(r,a,"formTarget",g.formTarget,g,null)):(vt(r,a,"encType",g.encType,g,null),vt(r,a,"method",g.method,g,null),vt(r,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=al(""+d),r.setAttribute(l,d);break;case"onClick":d!=null&&(r.onclick=Us);break;case"onScroll":d!=null&&Ze("scroll",r);break;case"onScrollEnd":d!=null&&Ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}l=al(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""+d):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":d===!0?r.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,d):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(l,d):r.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(l):r.setAttribute(l,d);break;case"popover":Ze("beforetoggle",r),Ze("toggle",r),sl(r,"popover",d);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":sl(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wh.get(l)||l,sl(r,l,d))}}function dy(r,a,l,d,g,x){switch(l){case"style":Xc(r,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof d=="string"?$n(r,d):(typeof d=="number"||typeof d=="bigint")&&$n(r,""+d);break;case"onScroll":d!=null&&Ze("scroll",r);break;case"onScrollEnd":d!=null&&Ze("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),x=r[cn]||null,x=x!=null?x[l]:null,typeof x=="function"&&r.removeEventListener(a,x,g),typeof d=="function")){typeof x!="function"&&x!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,d,g);break e}l in r?r[l]=d:d===!0?r.setAttribute(l,""):sl(r,l,d)}}}function xn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",r),Ze("load",r);var d=!1,g=!1,x;for(x in l)if(l.hasOwnProperty(x)){var _=l[x];if(_!=null)switch(x){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:vt(r,a,x,_,l,null)}}g&&vt(r,a,"srcSet",l.srcSet,l,null),d&&vt(r,a,"src",l.src,l,null);return;case"input":Ze("invalid",r);var I=x=_=g=null,F=null,ee=null;for(d in l)if(l.hasOwnProperty(d)){var ce=l[d];if(ce!=null)switch(d){case"name":g=ce;break;case"type":_=ce;break;case"checked":F=ce;break;case"defaultChecked":ee=ce;break;case"value":x=ce;break;case"defaultValue":I=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,a));break;default:vt(r,a,d,ce,l,null)}}xh(r,x,I,F,ee,_,g,!1);return;case"select":Ze("invalid",r),d=_=x=null;for(g in l)if(l.hasOwnProperty(g)&&(I=l[g],I!=null))switch(g){case"value":x=I;break;case"defaultValue":_=I;break;case"multiple":d=I;default:vt(r,a,g,I,l,null)}a=x,l=_,r.multiple=!!d,a!=null?Mi(r,!!d,a,!1):l!=null&&Mi(r,!!d,l,!0);return;case"textarea":Ze("invalid",r),x=g=d=null;for(_ in l)if(l.hasOwnProperty(_)&&(I=l[_],I!=null))switch(_){case"value":d=I;break;case"defaultValue":g=I;break;case"children":x=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:vt(r,a,_,I,l,null)}ki(r,d,g,x);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(d=l[F],d!=null))switch(F){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:vt(r,a,F,d,l,null)}return;case"dialog":Ze("beforetoggle",r),Ze("toggle",r),Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":Ze("load",r);break;case"video":case"audio":for(d=0;d<ju.length;d++)Ze(ju[d],r);break;case"image":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"embed":case"source":case"link":Ze("error",r),Ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(d=l[ee],d!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:vt(r,a,ee,d,l,null)}return;default:if(il(a)){for(ce in l)l.hasOwnProperty(ce)&&(d=l[ce],d!==void 0&&dy(r,a,ce,d,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(d=l[I],d!=null&&vt(r,a,I,d,l,null))}function NI(r,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,x=null,_=null,I=null,F=null,ee=null,ce=null;for(ae in l){var he=l[ae];if(l.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=he;default:d.hasOwnProperty(ae)||vt(r,a,ae,null,d,he)}}for(var ne in d){var ae=d[ne];if(he=l[ne],d.hasOwnProperty(ne)&&(ae!=null||he!=null))switch(ne){case"type":x=ae;break;case"name":g=ae;break;case"checked":ee=ae;break;case"defaultChecked":ce=ae;break;case"value":_=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==he&&vt(r,a,ne,ae,d,he)}}rl(r,_,I,F,ee,ce,x,g);return;case"select":ae=_=I=ne=null;for(x in l)if(F=l[x],l.hasOwnProperty(x)&&F!=null)switch(x){case"value":break;case"multiple":ae=F;default:d.hasOwnProperty(x)||vt(r,a,x,null,d,F)}for(g in d)if(x=d[g],F=l[g],d.hasOwnProperty(g)&&(x!=null||F!=null))switch(g){case"value":ne=x;break;case"defaultValue":I=x;break;case"multiple":_=x;default:x!==F&&vt(r,a,g,x,d,F)}a=I,l=_,d=ae,ne!=null?Mi(r,!!l,ne,!1):!!d!=!!l&&(a!=null?Mi(r,!!l,a,!0):Mi(r,!!l,l?[]:"",!1));return;case"textarea":ae=ne=null;for(I in l)if(g=l[I],l.hasOwnProperty(I)&&g!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:vt(r,a,I,null,d,g)}for(_ in d)if(g=d[_],x=l[_],d.hasOwnProperty(_)&&(g!=null||x!=null))switch(_){case"value":ne=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==x&&vt(r,a,_,g,d,x)}vh(r,ne,ae);return;case"option":for(var Ae in l)if(ne=l[Ae],l.hasOwnProperty(Ae)&&ne!=null&&!d.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:vt(r,a,Ae,null,d,ne)}for(F in d)if(ne=d[F],ae=l[F],d.hasOwnProperty(F)&&ne!==ae&&(ne!=null||ae!=null))switch(F){case"selected":r.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:vt(r,a,F,ne,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)ne=l[Pe],l.hasOwnProperty(Pe)&&ne!=null&&!d.hasOwnProperty(Pe)&&vt(r,a,Pe,null,d,ne);for(ee in d)if(ne=d[ee],ae=l[ee],d.hasOwnProperty(ee)&&ne!==ae&&(ne!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:vt(r,a,ee,ne,d,ae)}return;default:if(il(a)){for(var bt in l)ne=l[bt],l.hasOwnProperty(bt)&&ne!==void 0&&!d.hasOwnProperty(bt)&&dy(r,a,bt,void 0,d,ne);for(ce in d)ne=d[ce],ae=l[ce],!d.hasOwnProperty(ce)||ne===ae||ne===void 0&&ae===void 0||dy(r,a,ce,ne,d,ae);return}}for(var Q in l)ne=l[Q],l.hasOwnProperty(Q)&&ne!=null&&!d.hasOwnProperty(Q)&&vt(r,a,Q,null,d,ne);for(he in d)ne=d[he],ae=l[he],!d.hasOwnProperty(he)||ne===ae||ne==null&&ae==null||vt(r,a,he,ne,d,ae)}function v1(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],x=g.transferSize,_=g.initiatorType,I=g.duration;if(x&&I&&v1(_)){for(_=0,I=g.responseEnd,d+=1;d<l.length;d++){var F=l[d],ee=F.startTime;if(ee>I)break;var ce=F.transferSize,he=F.initiatorType;ce&&v1(he)&&(F=F.responseEnd,_+=ce*(F<I?1:(I-ee)/(F-ee)))}if(--d,a+=8*(x+_)/(g.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var hy=null,fy=null;function Ef(r){return r.nodeType===9?r:r.ownerDocument}function b1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w1(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function my(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var py=null;function SI(){var r=window.event;return r&&r.type==="popstate"?r===py?!1:(py=r,!0):(py=null,!1)}var _1=typeof setTimeout=="function"?setTimeout:void 0,CI=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(r){return E1.resolve(null).then(r).catch(RI)}:_1;function RI(r){setTimeout(function(){throw r})}function sa(r){return r==="head"}function T1(r,a){var l=a,d=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){r.removeChild(g),zl(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Iu(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Iu(l);for(var x=l.firstChild;x;){var _=x.nextSibling,I=x.nodeName;x[hr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=_}}else l==="body"&&Iu(r.ownerDocument.body);l=g}while(l);zl(a)}function N1(r,a){var l=r;r=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=d}while(l)}function gy(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":gy(l),nl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function II(r,a,l,d){for(;r.nodeType===1;){var g=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[hr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var x=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Es(r.nextSibling),r===null)break}return null}function DI(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Es(r.nextSibling),r===null))return null;return r}function A1(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Es(r.nextSibling),r===null))return null;return r}function yy(r){return r.data==="$?"||r.data==="$~"}function xy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function MI(r,a){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Es(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var vy=null;function S1(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(a===0)return Es(r.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}r=r.nextSibling}return null}function C1(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return r;a--}else l!=="/$"&&l!=="/&"||a++}r=r.previousSibling}return null}function j1(r,a,l){switch(a=Ef(l),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Iu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);nl(r)}var Ts=new Map,R1=new Set;function Tf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ui=K.d;K.d={f:kI,r:PI,D:OI,C:VI,L:LI,m:UI,X:BI,S:zI,M:FI};function kI(){var r=ui.f(),a=pf();return r||a}function PI(r){var a=fs(r);a!==null&&a.tag===5&&a.type==="form"?Kw(a):ui.r(r)}var Vl=typeof document>"u"?null:document;function I1(r,a,l){var d=Vl;if(d&&typeof a=="string"&&a){var g=qn(a);g='link[rel="'+r+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),R1.has(g)||(R1.add(g),r={rel:r,crossOrigin:l,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),xn(a,"link",r),Kt(a),d.head.appendChild(a)))}}function OI(r){ui.D(r),I1("dns-prefetch",r,null)}function VI(r,a){ui.C(r,a),I1("preconnect",r,a)}function LI(r,a,l){ui.L(r,a,l);var d=Vl;if(d&&r&&a){var g='link[rel="preload"][as="'+qn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+qn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+qn(l.imageSizes)+'"]')):g+='[href="'+qn(r)+'"]';var x=g;switch(a){case"style":x=Ll(r);break;case"script":x=Ul(r)}Ts.has(x)||(r=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),Ts.set(x,r),d.querySelector(g)!==null||a==="style"&&d.querySelector(Du(x))||a==="script"&&d.querySelector(Mu(x))||(a=d.createElement("link"),xn(a,"link",r),Kt(a),d.head.appendChild(a)))}}function UI(r,a){ui.m(r,a);var l=Vl;if(l&&r){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+qn(d)+'"][href="'+qn(r)+'"]',x=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ul(r)}if(!Ts.has(x)&&(r=v({rel:"modulepreload",href:r},a),Ts.set(x,r),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Mu(x)))return}d=l.createElement("link"),xn(d,"link",r),Kt(d),l.head.appendChild(d)}}}function zI(r,a,l){ui.S(r,a,l);var d=Vl;if(d&&r){var g=mr(d).hoistableStyles,x=Ll(r);a=a||"default";var _=g.get(x);if(!_){var I={loading:0,preload:null};if(_=d.querySelector(Du(x)))I.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},l),(l=Ts.get(x))&&by(r,l);var F=_=d.createElement("link");Kt(F),xn(F,"link",r),F._p=new Promise(function(ee,ce){F.onload=ee,F.onerror=ce}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Nf(_,a,d)}_={type:"stylesheet",instance:_,count:1,state:I},g.set(x,_)}}}function BI(r,a){ui.X(r,a);var l=Vl;if(l&&r){var d=mr(l).hoistableScripts,g=Ul(r),x=d.get(g);x||(x=l.querySelector(Mu(g)),x||(r=v({src:r,async:!0},a),(a=Ts.get(g))&&wy(r,a),x=l.createElement("script"),Kt(x),xn(x,"link",r),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(g,x))}}function FI(r,a){ui.M(r,a);var l=Vl;if(l&&r){var d=mr(l).hoistableScripts,g=Ul(r),x=d.get(g);x||(x=l.querySelector(Mu(g)),x||(r=v({src:r,async:!0,type:"module"},a),(a=Ts.get(g))&&wy(r,a),x=l.createElement("script"),Kt(x),xn(x,"link",r),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(g,x))}}function D1(r,a,l,d){var g=(g=ke.current)?Tf(g):null;if(!g)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ll(l.href),l=mr(g).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Ll(l.href);var x=mr(g).hoistableStyles,_=x.get(r);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,_),(x=g.querySelector(Du(r)))&&!x._p&&(_.instance=x,_.state.loading=5),Ts.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ts.set(r,l),x||qI(g,r,l,_.state))),a&&d===null)throw Error(s(528,""));return _}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ul(l),l=mr(g).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ll(r){return'href="'+qn(r)+'"'}function Du(r){return'link[rel="stylesheet"]['+r+"]"}function M1(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function qI(r,a,l,d){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=r.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),xn(a,"link",l),Kt(a),r.head.appendChild(a))}function Ul(r){return'[src="'+qn(r)+'"]'}function Mu(r){return"script[async]"+r}function k1(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=r.querySelector('style[data-href~="'+qn(l.href)+'"]');if(d)return a.instance=d,Kt(d),d;var g=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Kt(d),xn(d,"style",g),Nf(d,l.precedence,r),a.instance=d;case"stylesheet":g=Ll(l.href);var x=r.querySelector(Du(g));if(x)return a.state.loading|=4,a.instance=x,Kt(x),x;d=M1(l),(g=Ts.get(g))&&by(d,g),x=(r.ownerDocument||r).createElement("link"),Kt(x);var _=x;return _._p=new Promise(function(I,F){_.onload=I,_.onerror=F}),xn(x,"link",d),a.state.loading|=4,Nf(x,l.precedence,r),a.instance=x;case"script":return x=Ul(l.src),(g=r.querySelector(Mu(x)))?(a.instance=g,Kt(g),g):(d=l,(g=Ts.get(x))&&(d=v({},l),wy(d,g)),r=r.ownerDocument||r,g=r.createElement("script"),Kt(g),xn(g,"link",d),r.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Nf(d,l.precedence,r));return a.instance}function Nf(r,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,x=g,_=0;_<d.length;_++){var I=d[_];if(I.dataset.precedence===a)x=I;else if(x!==g)break}x?x.parentNode.insertBefore(r,x.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function by(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function wy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Af=null;function P1(r,a,l){if(Af===null){var d=new Map,g=Af=new Map;g.set(l,d)}else g=Af,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(r))return d;for(d.set(r,null),l=l.getElementsByTagName(r),g=0;g<l.length;g++){var x=l[g];if(!(x[hr]||x[Gt]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(a)||"";_=r+_;var I=d.get(_);I?I.push(x):d.set(_,[x])}}return d}function O1(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function $I(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function V1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function HI(r,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Ll(d.href),x=a.querySelector(Du(g));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Sf.bind(r),a.then(r,r)),l.state.loading|=4,l.instance=x,Kt(x);return}x=a.ownerDocument||a,d=M1(d),(g=Ts.get(g))&&by(d,g),x=x.createElement("link"),Kt(x);var _=x;_._p=new Promise(function(I,F){_.onload=I,_.onerror=F}),xn(x,"link",d),l.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Sf.bind(r),a.addEventListener("load",l),a.addEventListener("error",l))}}var _y=0;function GI(r,a){return r.stylesheets&&r.count===0&&jf(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var d=setTimeout(function(){if(r.stylesheets&&jf(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+a);0<r.imgBytes&&_y===0&&(_y=62500*AI());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&jf(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>_y?50:800)+a);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Cf=null;function jf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Cf=new Map,a.forEach(KI,r),Cf=null,Sf.call(r))}function KI(r,a){if(!(a.state.loading&4)){var l=Cf.get(r);if(l)var d=l.get(null);else{l=new Map,Cf.set(r,l);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<g.length;x++){var _=g[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),d=_)}d&&l.set(null,d)}g=a.instance,_=g.getAttribute("data-precedence"),x=l.get(_)||d,x===d&&l.set(null,g),l.set(_,g),this.count++,d=Sf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),x?x.parentNode.insertBefore(g,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),a.state.loading|=4}}var ku={$$typeof:V,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function YI(r,a,l,d,g,x,_,I,F){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ur(0),this.hiddenUpdates=ur(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function L1(r,a,l,d,g,x,_,I,F,ee,ce,he){return r=new YI(r,a,l,_,F,ee,ce,he,I),a=1,x===!0&&(a|=24),x=ns(3,null,null,a),r.current=x,x.stateNode=r,a=tg(),a.refCount++,r.pooledCache=a,a.refCount++,x.memoizedState={element:d,isDehydrated:l,cache:a},ig(x),r}function U1(r){return r?(r=gl,r):gl}function z1(r,a,l,d,g,x){g=U1(g),d.context===null?d.context=g:d.pendingContext=g,d=Gi(a),d.payload={element:l},x=x===void 0?null:x,x!==null&&(d.callback=x),l=Ki(r,d,a),l!==null&&(Xn(l,r,a),hu(l,r,a))}function B1(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Ey(r,a){B1(r,a),(r=r.alternate)&&B1(r,a)}function F1(r){if(r.tag===13||r.tag===31){var a=lo(r,67108864);a!==null&&Xn(a,r,67108864),Ey(r,67108864)}}function q1(r){if(r.tag===13||r.tag===31){var a=os();a=Qa(a);var l=lo(r,a);l!==null&&Xn(l,r,a),Ey(r,a)}}var Rf=!0;function XI(r,a,l,d){var g=X.T;X.T=null;var x=K.p;try{K.p=2,Ty(r,a,l,d)}finally{K.p=x,X.T=g}}function QI(r,a,l,d){var g=X.T;X.T=null;var x=K.p;try{K.p=8,Ty(r,a,l,d)}finally{K.p=x,X.T=g}}function Ty(r,a,l,d){if(Rf){var g=Ny(d);if(g===null)uy(r,a,d,If,l),H1(r,d);else if(ZI(g,r,a,l,d))d.stopPropagation();else if(H1(r,d),a&4&&-1<WI.indexOf(r)){for(;g!==null;){var x=fs(g);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=lr(x.pendingLanes);if(_!==0){var I=x;for(I.pendingLanes|=2,I.entangledLanes|=2;_;){var F=1<<31-Lt(_);I.entanglements[1]|=F,_&=~F}Sr(x),(dt&6)===0&&(ff=Dn()+500,Cu(0))}}break;case 31:case 13:I=lo(x,2),I!==null&&Xn(I,x,2),pf(),Ey(x,2)}if(x=Ny(d),x===null&&uy(r,a,d,If,l),x===g)break;g=x}g!==null&&d.stopPropagation()}else uy(r,a,d,null,l)}}function Ny(r){return r=ms(r),Ay(r)}var If=null;function Ay(r){if(If=null,r=fr(r),r!==null){var a=o(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=u(a),r!==null)return r;r=null}else if(l===31){if(r=h(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return If=r,null}function $1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ga()){case Vc:return 2;case Lc:return 8;case Ii:case Dp:return 32;case lh:return 268435456;default:return 32}default:return 32}}var Sy=!1,ra=null,ia=null,aa=null,Pu=new Map,Ou=new Map,oa=[],WI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H1(r,a){switch(r){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":Pu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(a.pointerId)}}function Vu(r,a,l,d,g,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:x,targetContainers:[g]},a!==null&&(a=fs(a),a!==null&&F1(a)),r):(r.eventSystemFlags|=d,a=r.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),r)}function ZI(r,a,l,d,g){switch(a){case"focusin":return ra=Vu(ra,r,a,l,d,g),!0;case"dragenter":return ia=Vu(ia,r,a,l,d,g),!0;case"mouseover":return aa=Vu(aa,r,a,l,d,g),!0;case"pointerover":var x=g.pointerId;return Pu.set(x,Vu(Pu.get(x)||null,r,a,l,d,g)),!0;case"gotpointercapture":return x=g.pointerId,Ou.set(x,Vu(Ou.get(x)||null,r,a,l,d,g)),!0}return!1}function G1(r){var a=fr(r.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){r.blockedOn=a,Vs(r.priority,function(){q1(l)});return}}else if(a===31){if(a=h(l),a!==null){r.blockedOn=a,Vs(r.priority,function(){q1(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Df(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Ny(r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);Qc=d,l.target.dispatchEvent(d),Qc=null}else return a=fs(l),a!==null&&F1(a),r.blockedOn=l,!1;a.shift()}return!0}function K1(r,a,l){Df(r)&&l.delete(a)}function JI(){Sy=!1,ra!==null&&Df(ra)&&(ra=null),ia!==null&&Df(ia)&&(ia=null),aa!==null&&Df(aa)&&(aa=null),Pu.forEach(K1),Ou.forEach(K1)}function Mf(r,a){r.blockedOn===a&&(r.blockedOn=null,Sy||(Sy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JI)))}var kf=null;function Y1(r){kf!==r&&(kf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kf===r&&(kf=null);for(var a=0;a<r.length;a+=3){var l=r[a],d=r[a+1],g=r[a+2];if(typeof d!="function"){if(Ay(d||l)===null)continue;break}var x=fs(l);x!==null&&(r.splice(a,3),a-=3,Ng(x,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function zl(r){function a(F){return Mf(F,r)}ra!==null&&Mf(ra,r),ia!==null&&Mf(ia,r),aa!==null&&Mf(aa,r),Pu.forEach(a),Ou.forEach(a);for(var l=0;l<oa.length;l++){var d=oa[l];d.blockedOn===r&&(d.blockedOn=null)}for(;0<oa.length&&(l=oa[0],l.blockedOn===null);)G1(l),l.blockedOn===null&&oa.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],x=l[d+1],_=g[cn]||null;if(typeof x=="function")_||Y1(l);else if(_){var I=null;if(x&&x.hasAttribute("formAction")){if(g=x,_=x[cn]||null)I=_.formAction;else if(Ay(g)!==null)continue}else I=_.action;typeof I=="function"?l[d+1]=I:(l.splice(d,3),d-=3),Y1(l)}}}function X1(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Cy(r){this._internalRoot=r}Pf.prototype.render=Cy.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var l=a.current,d=os();z1(l,d,r,a,null,null)},Pf.prototype.unmount=Cy.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;z1(r.current,2,null,r,null,null),pf(),a[dr]=null}};function Pf(r){this._internalRoot=r}Pf.prototype.unstable_scheduleHydration=function(r){if(r){var a=mh();r={blockedOn:null,target:r,priority:a};for(var l=0;l<oa.length&&a!==0&&a<oa[l].priority;l++);oa.splice(l,0,r),l===0&&G1(r)}};var Q1=e.version;if(Q1!=="19.2.0")throw Error(s(527,Q1,"19.2.0"));K.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(a),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var eD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{Ps=Of.inject(eD),fn=Of}catch{}}return Uu.createRoot=function(r,a){if(!i(r))throw Error(s(299));var l=!1,d="",g=s_,x=r_,_=i_;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=L1(r,1,!1,null,null,l,d,null,g,x,_,X1),r[dr]=a.current,cy(r),new Cy(a)},Uu.hydrateRoot=function(r,a,l){if(!i(r))throw Error(s(299));var d=!1,g="",x=s_,_=r_,I=i_,F=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=L1(r,1,!0,a,l??null,d,g,F,x,_,I,X1),a.context=U1(null),l=a.current,d=os(),d=Qa(d),g=Gi(d),g.callback=null,Ki(l,g,d),l=d,a.current.lanes=l,Ya(a,l),Sr(a),r[dr]=a.current,cy(r),new Pf(a)},Uu.version="19.2.0",Uu}var aE;function dD(){if(aE)return Iy.exports;aE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Iy.exports=uD(),Iy.exports}var hD=dD();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oE="popstate";function fD(t={}){function e(s,i){let{pathname:o,search:u,hash:h}=s.location;return w0("",{pathname:o,search:u,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:md(i)}return pD(e,n,null,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function er(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mD(){return Math.random().toString(36).substring(2,10)}function lE(t,e){return{usr:t.state,key:t.key,idx:e}}function w0(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?vc(e):e,state:n,key:e&&e.key||s||mD()}}function md({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function pD(t,e,n,s={}){let{window:i=document.defaultView,v5Compat:o=!1}=s,u=i.history,h="POP",f=null,m=y();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let j=y(),k=j==null?null:j-m;m=j,f&&f({action:h,location:M.location,delta:k})}function b(j,k){h="PUSH";let U=w0(M.location,j,k);m=y()+1;let V=lE(U,m),$=M.createHref(U);try{u.pushState(V,"",$)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign($)}o&&f&&f({action:h,location:M.location,delta:1})}function T(j,k){h="REPLACE";let U=w0(M.location,j,k);m=y();let V=lE(U,m),$=M.createHref(U);u.replaceState(V,"",$),o&&f&&f({action:h,location:M.location,delta:0})}function R(j){return gD(j)}let M={get action(){return h},get location(){return t(i,u)},listen(j){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(oE,v),f=j,()=>{i.removeEventListener(oE,v),f=null}},createHref(j){return e(i,j)},createURL:R,encodeLocation(j){let k=R(j);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:b,replace:T,go(j){return u.go(j)}};return M}function gD(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),It(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:md(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function TA(t,e,n="/"){return yD(t,e,n,!1)}function yD(t,e,n,s){let i=typeof e=="string"?vc(e):e,o=yi(i.pathname||"/",n);if(o==null)return null;let u=NA(t);xD(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=jD(o);h=SD(u[f],m,s)}return h}function NA(t,e=[],n=[],s="",i=!1){let o=(u,h,f=i,m)=>{let y={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&f)return;It(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let v=mi([s,y.relativePath]),b=n.concat(y);u.children&&u.children.length>0&&(It(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),NA(u.children,e,b,v,f)),!(u.path==null&&!u.index)&&e.push({path:v,score:ND(v,u.index),routesMeta:b})};return t.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))o(u,h);else for(let f of AA(u.path))o(u,h,!0,f)}),e}function AA(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let u=AA(s.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),i&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function xD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AD(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var vD=/^:[\w-]+$/,bD=3,wD=2,_D=1,ED=10,TD=-2,cE=t=>t==="*";function ND(t,e){let n=t.split("/"),s=n.length;return n.some(cE)&&(s+=TD),e&&(s+=wD),n.filter(i=>!cE(i)).reduce((i,o)=>i+(vD.test(o)?bD:o===""?_D:ED),s)}function AD(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function SD(t,e,n=!1){let{routesMeta:s}=t,i={},o="/",u=[];for(let h=0;h<s.length;++h){let f=s[h],m=h===s.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=ym({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),b=f.route;if(!v&&m&&n&&!s[s.length-1].route.index&&(v=ym({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!v)return null;Object.assign(i,v.params),u.push({params:i,pathname:mi([o,v.pathname]),pathnameBase:MD(mi([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=mi([o,v.pathnameBase]))}return u}function ym(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=CD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:s.reduce((m,{paramName:y,isOptional:v},b)=>{if(y==="*"){let R=h[b]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const T=h[b];return v&&!T?m[y]=void 0:m[y]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:t}}function CD(t,e=!1,n=!0){er(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(s.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function jD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return er(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function RD(t,e="/"){let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?vc(t):t;return{pathname:n?n.startsWith("/")?n:ID(n,e):e,search:kD(s),hash:PD(i)}}function ID(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Py(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dx(t){let e=DD(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Mx(t,e,n,s=!1){let i;typeof t=="string"?i=vc(t):(i={...t},It(!i.pathname||!i.pathname.includes("?"),Py("?","pathname","search",i)),It(!i.pathname||!i.pathname.includes("#"),Py("#","pathname","hash",i)),It(!i.search||!i.search.includes("#"),Py("#","search","hash",i)));let o=t===""||i.pathname==="",u=o?"/":i.pathname,h;if(u==null)h=n;else{let v=e.length-1;if(!s&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;i.pathname=b.join("/")}h=v>=0?e[v]:"/"}let f=RD(i,h),m=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}var mi=t=>t.join("/").replace(/\/\/+/g,"/"),MD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var SA=["POST","PUT","PATCH","DELETE"];new Set(SA);var VD=["GET",...SA];new Set(VD);var bc=S.createContext(null);bc.displayName="DataRouter";var Ym=S.createContext(null);Ym.displayName="DataRouterState";S.createContext(!1);var CA=S.createContext({isTransitioning:!1});CA.displayName="ViewTransition";var LD=S.createContext(new Map);LD.displayName="Fetchers";var UD=S.createContext(null);UD.displayName="Await";var sr=S.createContext(null);sr.displayName="Navigation";var Pd=S.createContext(null);Pd.displayName="Location";var Ms=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var kx=S.createContext(null);kx.displayName="RouteError";function zD(t,{relative:e}={}){It(wc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=S.useContext(sr),{hash:i,pathname:o,search:u}=Od(t,{relative:e}),h=o;return n!=="/"&&(h=o==="/"?n:mi([n,o])),s.createHref({pathname:h,search:u,hash:i})}function wc(){return S.useContext(Pd)!=null}function za(){return It(wc(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Pd).location}var jA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RA(t){S.useContext(sr).static||S.useLayoutEffect(t)}function _c(){let{isDataRoute:t}=S.useContext(Ms);return t?n4():BD()}function BD(){It(wc(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(bc),{basename:e,navigator:n}=S.useContext(sr),{matches:s}=S.useContext(Ms),{pathname:i}=za(),o=JSON.stringify(Dx(s)),u=S.useRef(!1);return RA(()=>{u.current=!0}),S.useCallback((f,m={})=>{if(er(u.current,jA),!u.current)return;if(typeof f=="number"){n.go(f);return}let y=Mx(f,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:mi([e,y.pathname])),(m.replace?n.replace:n.push)(y,m.state,m)},[e,n,o,i,t])}var FD=S.createContext(null);function qD(t){let e=S.useContext(Ms).outlet;return S.useMemo(()=>e&&S.createElement(FD.Provider,{value:t},e),[e,t])}function $D(){let{matches:t}=S.useContext(Ms),e=t[t.length-1];return e?e.params:{}}function Od(t,{relative:e}={}){let{matches:n}=S.useContext(Ms),{pathname:s}=za(),i=JSON.stringify(Dx(n));return S.useMemo(()=>Mx(t,JSON.parse(i),s,e==="path"),[t,i,s,e])}function HD(t,e){return IA(t,e)}function IA(t,e,n,s,i){It(wc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=S.useContext(sr),{matches:u}=S.useContext(Ms),h=u[u.length-1],f=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let U=v&&v.path||"";DA(m,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let b=za(),T;if(e){let U=typeof e=="string"?vc(e):e;It(y==="/"||U.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${U.pathname}" was given in the \`location\` prop.`),T=U}else T=b;let R=T.pathname||"/",M=R;if(y!=="/"){let U=y.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(U.length).join("/")}let j=TA(t,{pathname:M});er(v||j!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),er(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=QD(j&&j.map(U=>Object.assign({},U,{params:Object.assign({},f,U.params),pathname:mi([y,o.encodeLocation?o.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?y:mi([y,o.encodeLocation?o.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),u,n,s,i);return e&&k?S.createElement(Pd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},k):k}function GD(){let t=t4(),e=OD(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:o},"ErrorBoundary")," or"," ",S.createElement("code",{style:o},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,u)}var KD=S.createElement(GD,null),YD=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(Ms.Provider,{value:this.props.routeContext},S.createElement(kx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XD({routeContext:t,match:e,children:n}){let s=S.useContext(bc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Ms.Provider,{value:t},n)}function QD(t,e=[],n=null,s=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=n?.errors;if(u!=null){let m=o.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);It(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,f=-1;if(n)for(let m=0;m<o.length;m++){let y=o[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:v,errors:b}=n,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||T){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((m,y,v)=>{let b,T=!1,R=null,M=null;n&&(b=u&&y.route.id?u[y.route.id]:void 0,R=y.route.errorElement||KD,h&&(f<0&&v===0?(DA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,M=null):f===v&&(T=!0,M=y.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,v+1)),k=()=>{let U;return b?U=R:T?U=M:y.route.Component?U=S.createElement(y.route.Component,null):y.route.element?U=y.route.element:U=m,S.createElement(XD,{match:y,routeContext:{outlet:m,matches:j,isDataRoute:n!=null},children:U})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?S.createElement(YD,{location:n.location,revalidation:n.revalidation,component:R,error:b,children:k(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:s}):k()},null)}function Px(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WD(t){let e=S.useContext(bc);return It(e,Px(t)),e}function ZD(t){let e=S.useContext(Ym);return It(e,Px(t)),e}function JD(t){let e=S.useContext(Ms);return It(e,Px(t)),e}function Ox(t){let e=JD(t),n=e.matches[e.matches.length-1];return It(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function e4(){return Ox("useRouteId")}function t4(){let t=S.useContext(kx),e=ZD("useRouteError"),n=Ox("useRouteError");return t!==void 0?t:e.errors?.[n]}function n4(){let{router:t}=WD("useNavigate"),e=Ox("useNavigate"),n=S.useRef(!1);return RA(()=>{n.current=!0}),S.useCallback(async(i,o={})=>{er(n.current,jA),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var uE={};function DA(t,e,n){!e&&!uE[t]&&(uE[t]=!0,er(!1,n))}S.memo(s4);function s4({routes:t,future:e,state:n,unstable_onError:s}){return IA(t,void 0,n,s,e)}function xm({to:t,replace:e,state:n,relative:s}){It(wc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=S.useContext(sr);er(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=S.useContext(Ms),{pathname:u}=za(),h=_c(),f=Mx(t,Dx(o),u,s==="path"),m=JSON.stringify(f);return S.useEffect(()=>{h(JSON.parse(m),{replace:e,state:n,relative:s})},[h,m,s,e,n]),null}function r4(t){return qD(t.context)}function on(t){It(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function i4({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:i,static:o=!1}){It(!wc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof n=="string"&&(n=vc(n));let{pathname:f="/",search:m="",hash:y="",state:v=null,key:b="default"}=n,T=S.useMemo(()=>{let R=yi(f,u);return R==null?null:{location:{pathname:R,search:m,hash:y,state:v,key:b},navigationType:s}},[u,f,m,y,v,b,s]);return er(T!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:S.createElement(sr.Provider,{value:h},S.createElement(Pd.Provider,{children:e,value:T}))}function a4({children:t,location:e}){return HD(_0(t),e)}function _0(t,e=[]){let n=[];return S.Children.forEach(t,(s,i)=>{if(!S.isValidElement(s))return;let o=[...e,i];if(s.type===S.Fragment){n.push.apply(n,_0(s.props.children,o));return}It(s.type===on,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),It(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=_0(s.props.children,o)),n.push(u)}),n}var Zf="get",Jf="application/x-www-form-urlencoded";function Xm(t){return t!=null&&typeof t.tagName=="string"}function o4(t){return Xm(t)&&t.tagName.toLowerCase()==="button"}function l4(t){return Xm(t)&&t.tagName.toLowerCase()==="form"}function c4(t){return Xm(t)&&t.tagName.toLowerCase()==="input"}function u4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d4(t,e){return t.button===0&&(!e||e==="_self")&&!u4(t)}var Vf=null;function h4(){if(Vf===null)try{new FormData(document.createElement("form"),0),Vf=!1}catch{Vf=!0}return Vf}var f4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oy(t){return t!=null&&!f4.has(t)?(er(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jf}"`),null):t}function m4(t,e){let n,s,i,o,u;if(l4(t)){let h=t.getAttribute("action");s=h?yi(h,e):null,n=t.getAttribute("method")||Zf,i=Oy(t.getAttribute("enctype"))||Jf,o=new FormData(t)}else if(o4(t)||c4(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(s=f?yi(f,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||Zf,i=Oy(t.getAttribute("formenctype"))||Oy(h.getAttribute("enctype"))||Jf,o=new FormData(h,t),!h4()){let{name:m,type:y,value:v}=t;if(y==="image"){let b=m?`${m}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else m&&o.append(m,v)}}else{if(Xm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zf,s=null,i=Jf,u=t}return o&&i==="text/plain"&&(u=o,o=void 0),{action:s,method:n.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function p4(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&yi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function g4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function y4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function x4(t,e,n){let s=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let u=await g4(o,n);return u.links?u.links():[]}return[]}));return _4(s.flat(1).filter(y4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dE(t,e,n,s,i,o){let u=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,h=(f,m)=>n[m].pathname!==f.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,m)=>u(f,m)||h(f,m)):o==="data"?e.filter((f,m)=>{let y=s.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(u(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function v4(t,e,{includeHydrateFallback:n}={}){return b4(t.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function b4(t){return[...new Set(t)]}function w4(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function _4(t,e){let n=new Set;return new Set(e),t.reduce((s,i)=>{let o=JSON.stringify(w4(i));return n.has(o)||(n.add(o),s.push({key:o,link:i})),s},[])}function MA(){let t=S.useContext(bc);return Vx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function E4(){let t=S.useContext(Ym);return Vx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Lx=S.createContext(void 0);Lx.displayName="FrameworkContext";function kA(){let t=S.useContext(Lx);return Vx(t,"You must render this element inside a <HydratedRouter> element"),t}function T4(t,e){let n=S.useContext(Lx),[s,i]=S.useState(!1),[o,u]=S.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:y,onTouchStart:v}=e,b=S.useRef(null);S.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let M=k=>{k.forEach(U=>{u(U.isIntersecting)})},j=new IntersectionObserver(M,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[t]),S.useEffect(()=>{if(s){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[s]);let T=()=>{i(!0)},R=()=>{i(!1),u(!1)};return n?t!=="intent"?[o,b,{}]:[o,b,{onFocus:zu(h,T),onBlur:zu(f,R),onMouseEnter:zu(m,T),onMouseLeave:zu(y,R),onTouchStart:zu(v,T)}]:[!1,b,{}]}function zu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function N4({page:t,...e}){let{router:n}=MA(),s=S.useMemo(()=>TA(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?S.createElement(S4,{page:t,matches:s,...e}):null}function A4(t){let{manifest:e,routeModules:n}=kA(),[s,i]=S.useState([]);return S.useEffect(()=>{let o=!1;return x4(t,e,n).then(u=>{o||i(u)}),()=>{o=!0}},[t,e,n]),s}function S4({page:t,matches:e,...n}){let s=za(),{manifest:i,routeModules:o}=kA(),{basename:u}=MA(),{loaderData:h,matches:f}=E4(),m=S.useMemo(()=>dE(t,e,f,i,s,"data"),[t,e,f,i,s]),y=S.useMemo(()=>dE(t,e,f,i,s,"assets"),[t,e,f,i,s]),v=S.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let R=new Set,M=!1;if(e.forEach(k=>{let U=i.routes[k.route.id];!U||!U.hasLoader||(!m.some(V=>V.route.id===k.route.id)&&k.route.id in h&&o[k.route.id]?.shouldRevalidate||U.hasClientLoader?M=!0:R.add(k.route.id))}),R.size===0)return[];let j=p4(t,u,"data");return M&&R.size>0&&j.searchParams.set("_routes",e.filter(k=>R.has(k.route.id)).map(k=>k.route.id).join(",")),[j.pathname+j.search]},[u,h,s,i,m,e,t,o]),b=S.useMemo(()=>v4(y,i),[y,i]),T=A4(y);return S.createElement(S.Fragment,null,v.map(R=>S.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),b.map(R=>S.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),T.map(({key:R,link:M})=>S.createElement("link",{key:R,nonce:n.nonce,...M})))}function C4(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var PA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PA&&(window.__reactRouterVersion="7.9.4")}catch{}function j4({basename:t,children:e,window:n}){let s=S.useRef();s.current==null&&(s.current=fD({window:n,v5Compat:!0}));let i=s.current,[o,u]=S.useState({action:i.action,location:i.location}),h=S.useCallback(f=>{S.startTransition(()=>u(f))},[u]);return S.useLayoutEffect(()=>i.listen(h),[i,h]),S.createElement(i4,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var OA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qm=S.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:i,reloadDocument:o,replace:u,state:h,target:f,to:m,preventScrollReset:y,viewTransition:v,...b},T){let{basename:R}=S.useContext(sr),M=typeof m=="string"&&OA.test(m),j,k=!1;if(typeof m=="string"&&M&&(j=m,PA))try{let C=new URL(window.location.href),L=m.startsWith("//")?new URL(C.protocol+m):new URL(m),z=yi(L.pathname,R);L.origin===C.origin&&z!=null?m=z+L.search+L.hash:k=!0}catch{er(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=zD(m,{relative:i}),[V,$,Y]=T4(s,b),oe=D4(m,{replace:u,state:h,target:f,preventScrollReset:y,relative:i,viewTransition:v});function A(C){e&&e(C),C.defaultPrevented||oe(C)}let N=S.createElement("a",{...b,...Y,href:j||U,onClick:k||o?e:A,ref:C4(T,$),target:f,"data-discover":!M&&n==="render"?"true":void 0});return V&&!M?S.createElement(S.Fragment,null,N,S.createElement(N4,{page:U})):N});Qm.displayName="Link";var E0=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:i=!1,style:o,to:u,viewTransition:h,children:f,...m},y){let v=Od(u,{relative:m.relative}),b=za(),T=S.useContext(Ym),{navigator:R,basename:M}=S.useContext(sr),j=T!=null&&V4(v)&&h===!0,k=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,U=b.pathname,V=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(U=U.toLowerCase(),V=V?V.toLowerCase():null,k=k.toLowerCase()),V&&M&&(V=yi(V,M)||V);const $=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let Y=U===k||!i&&U.startsWith(k)&&U.charAt($)==="/",oe=V!=null&&(V===k||!i&&V.startsWith(k)&&V.charAt(k.length)==="/"),A={isActive:Y,isPending:oe,isTransitioning:j},N=Y?e:void 0,C;typeof s=="function"?C=s(A):C=[s,Y?"active":null,oe?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(A):o;return S.createElement(Qm,{...m,"aria-current":N,className:C,ref:y,style:L,to:u,viewTransition:h},typeof f=="function"?f(A):f)});E0.displayName="NavLink";var R4=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:i,state:o,method:u=Zf,action:h,onSubmit:f,relative:m,preventScrollReset:y,viewTransition:v,...b},T)=>{let R=P4(),M=O4(h,{relative:m}),j=u.toLowerCase()==="get"?"get":"post",k=typeof h=="string"&&OA.test(h),U=V=>{if(f&&f(V),V.defaultPrevented)return;V.preventDefault();let $=V.nativeEvent.submitter,Y=$?.getAttribute("formmethod")||u;R($||V.currentTarget,{fetcherKey:e,method:Y,navigate:n,replace:i,state:o,relative:m,preventScrollReset:y,viewTransition:v})};return S.createElement("form",{ref:T,method:j,action:M,onSubmit:s?f:U,...b,"data-discover":!k&&t==="render"?"true":void 0})});R4.displayName="Form";function I4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VA(t){let e=S.useContext(bc);return It(e,I4(t)),e}function D4(t,{target:e,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:u}={}){let h=_c(),f=za(),m=Od(t,{relative:o});return S.useCallback(y=>{if(d4(y,e)){y.preventDefault();let v=n!==void 0?n:md(f)===md(m);h(t,{replace:v,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[f,h,m,n,s,e,t,i,o,u])}var M4=0,k4=()=>`__${String(++M4)}__`;function P4(){let{router:t}=VA("useSubmit"),{basename:e}=S.useContext(sr),n=e4();return S.useCallback(async(s,i={})=>{let{action:o,method:u,encType:h,formData:f,body:m}=m4(s,e);if(i.navigate===!1){let y=i.fetcherKey||k4();await t.fetch(y,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||u,formEncType:i.encType||h,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||u,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function O4(t,{relative:e}={}){let{basename:n}=S.useContext(sr),s=S.useContext(Ms);It(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),o={...Od(t||".",{relative:e})},u=za();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(y=>y==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();o.search=y?`?${y}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:mi([n,o.pathname])),md(o)}function V4(t,{relative:e}={}){let n=S.useContext(CA);It(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=VA("useViewTransitionState"),i=Od(t,{relative:e});if(!n.isTransitioning)return!1;let o=yi(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=yi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ym(i.pathname,u)!=null||ym(i.pathname,o)!=null}function LA(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=LA(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function wa(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=LA(t))&&(s&&(s+=" "),s+=e);return s}function L4(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}L4(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Vd=t=>typeof t=="number"&&!isNaN(t),Po=t=>typeof t=="string",xi=t=>typeof t=="function",U4=t=>Po(t)||Vd(t),T0=t=>Po(t)||xi(t)?t:null,z4=(t,e)=>t===!1||Vd(t)&&t>0?t:e,N0=t=>S.isValidElement(t)||Po(t)||xi(t)||Vd(t);function B4(t,e,n=300){let{scrollHeight:s,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function F4({enter:t,exit:e,appendPosition:n=!1,collapse:s=!0,collapseDuration:i=300}){return function({children:o,position:u,preventExitTransition:h,done:f,nodeRef:m,isIn:y,playToast:v}){let b=n?`${t}--${u}`:t,T=n?`${e}--${u}`:e,R=S.useRef(0);return S.useLayoutEffect(()=>{let M=m.current,j=b.split(" "),k=U=>{U.target===m.current&&(v(),M.removeEventListener("animationend",k),M.removeEventListener("animationcancel",k),R.current===0&&U.type!=="animationcancel"&&M.classList.remove(...j))};M.classList.add(...j),M.addEventListener("animationend",k),M.addEventListener("animationcancel",k)},[]),S.useEffect(()=>{let M=m.current,j=()=>{M.removeEventListener("animationend",j),s?B4(M,f,i):f()};y||(h?j():(R.current=1,M.className+=` ${T}`,M.addEventListener("animationend",j)))},[y]),ot.createElement(ot.Fragment,null,o)}}function hE(t,e){return{content:UA(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function UA(t,e,n=!1){return S.isValidElement(t)&&!Po(t.type)?S.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):xi(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function q4({closeToast:t,theme:e,ariaLabel:n="close"}){return ot.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:s=>{s.stopPropagation(),t(!0)},"aria-label":n},ot.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ot.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function $4({delay:t,isRunning:e,closeToast:n,type:s="default",hide:i,className:o,controlledProgress:u,progress:h,rtl:f,isIn:m,theme:y}){let v=i||u&&h===0,b={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};u&&(b.transform=`scaleX(${h})`);let T=wa("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":f}),R=xi(o)?o({rtl:f,type:s,defaultClassName:T}):wa(T,o),M={[u&&h>=1?"onTransitionEnd":"onAnimationEnd"]:u&&h<1?null:()=>{m&&n()}};return ot.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":v},ot.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${y} Toastify__progress-bar--${s}`}),ot.createElement("div",{role:"progressbar","aria-hidden":v?"true":"false","aria-label":"notification timer",className:R,style:b,...M}))}var H4=1,zA=()=>`${H4++}`;function G4(t,e,n){let s=1,i=0,o=[],u=[],h=e,f=new Map,m=new Set,y=U=>(m.add(U),()=>m.delete(U)),v=()=>{u=Array.from(f.values()),m.forEach(U=>U())},b=({containerId:U,toastId:V,updateId:$})=>{let Y=U?U!==t:t!==1,oe=f.has(V)&&$==null;return Y||oe},T=(U,V)=>{f.forEach($=>{var Y;(V==null||V===$.props.toastId)&&((Y=$.toggle)==null||Y.call($,U))})},R=U=>{var V,$;($=(V=U.props)==null?void 0:V.onClose)==null||$.call(V,U.removalReason),U.isActive=!1},M=U=>{if(U==null)f.forEach(R);else{let V=f.get(U);V&&R(V)}v()},j=()=>{i-=o.length,o=[]},k=U=>{var V,$;let{toastId:Y,updateId:oe}=U.props,A=oe==null;U.staleId&&f.delete(U.staleId),U.isActive=!0,f.set(Y,U),v(),n(hE(U,A?"added":"updated")),A&&(($=(V=U.props).onOpen)==null||$.call(V))};return{id:t,props:h,observe:y,toggle:T,removeToast:M,toasts:f,clearQueue:j,buildToast:(U,V)=>{if(b(V))return;let{toastId:$,updateId:Y,data:oe,staleId:A,delay:N}=V,C=Y==null;C&&i++;let L={...h,style:h.toastStyle,key:s++,...Object.fromEntries(Object.entries(V).filter(([B,D])=>D!=null)),toastId:$,updateId:Y,data:oe,isIn:!1,className:T0(V.className||h.toastClassName),progressClassName:T0(V.progressClassName||h.progressClassName),autoClose:V.isLoading?!1:z4(V.autoClose,h.autoClose),closeToast(B){f.get($).removalReason=B,M($)},deleteToast(){let B=f.get($);if(B!=null){if(n(hE(B,"removed")),f.delete($),i--,i<0&&(i=0),o.length>0){k(o.shift());return}v()}}};L.closeButton=h.closeButton,V.closeButton===!1||N0(V.closeButton)?L.closeButton=V.closeButton:V.closeButton===!0&&(L.closeButton=N0(h.closeButton)?h.closeButton:!0);let z={content:U,props:L,staleId:A};h.limit&&h.limit>0&&i>h.limit&&C?o.push(z):Vd(N)?setTimeout(()=>{k(z)},N):k(z)},setProps(U){h=U},setToggle:(U,V)=>{let $=f.get(U);$&&($.toggle=V)},isToastActive:U=>{var V;return(V=f.get(U))==null?void 0:V.isActive},getSnapshot:()=>u}}var On=new Map,pd=[],A0=new Set,K4=t=>A0.forEach(e=>e(t)),BA=()=>On.size>0;function Y4(){pd.forEach(t=>qA(t.content,t.options)),pd=[]}var X4=(t,{containerId:e})=>{var n;return(n=On.get(e||1))==null?void 0:n.toasts.get(t)};function FA(t,e){var n;if(e)return!!((n=On.get(e))!=null&&n.isToastActive(t));let s=!1;return On.forEach(i=>{i.isToastActive(t)&&(s=!0)}),s}function Q4(t){if(!BA()){pd=pd.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||U4(t))On.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=On.get(t.containerId);e?e.removeToast(t.id):On.forEach(n=>{n.removeToast(t.id)})}}var W4=(t={})=>{On.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function qA(t,e){N0(t)&&(BA()||pd.push({content:t,options:e}),On.forEach(n=>{n.buildToast(t,e)}))}function Z4(t){var e;(e=On.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function $A(t,e){On.forEach(n=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===n.id)&&n.toggle(t,e?.id)})}function J4(t){let e=t.containerId||1;return{subscribe(n){let s=G4(e,t,K4);On.set(e,s);let i=s.observe(n);return Y4(),()=>{i(),On.delete(e)}},setProps(n){var s;(s=On.get(e))==null||s.setProps(n)},getSnapshot(){var n;return(n=On.get(e))==null?void 0:n.getSnapshot()}}}function eM(t){return A0.add(t),()=>{A0.delete(t)}}function tM(t){return t&&(Po(t.toastId)||Vd(t.toastId))?t.toastId:zA()}function Ld(t,e){return qA(t,e),e.toastId}function Wm(t,e){return{...e,type:e&&e.type||t,toastId:tM(e)}}function Zm(t){return(e,n)=>Ld(e,Wm(t,n))}function se(t,e){return Ld(t,Wm("default",e))}se.loading=(t,e)=>Ld(t,Wm("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function nM(t,{pending:e,error:n,success:s},i){let o;e&&(o=Po(e)?se.loading(e,i):se.loading(e.render,{...i,...e}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(m,y,v)=>{if(y==null){se.dismiss(o);return}let b={type:m,...u,...i,data:v},T=Po(y)?{render:y}:y;return o?se.update(o,{...b,...T}):se(T.render,{...b,...T}),v},f=xi(t)?t():t;return f.then(m=>h("success",s,m)).catch(m=>h("error",n,m)),f}se.promise=nM;se.success=Zm("success");se.info=Zm("info");se.error=Zm("error");se.warning=Zm("warning");se.warn=se.warning;se.dark=(t,e)=>Ld(t,Wm("default",{theme:"dark",...e}));function sM(t){Q4(t)}se.dismiss=sM;se.clearWaitingQueue=W4;se.isActive=FA;se.update=(t,e={})=>{let n=X4(t,e);if(n){let{props:s,content:i}=n,o={delay:100,...s,...e,toastId:e.toastId||t,updateId:zA()};o.toastId!==t&&(o.staleId=t);let u=o.render||i;delete o.render,Ld(u,o)}};se.done=t=>{se.update(t,{progress:1})};se.onChange=eM;se.play=t=>$A(!0,t);se.pause=t=>$A(!1,t);function rM(t){var e;let{subscribe:n,getSnapshot:s,setProps:i}=S.useRef(J4(t)).current;i(t);let o=(e=S.useSyncExternalStore(n,s,s))==null?void 0:e.slice();function u(h){if(!o)return[];let f=new Map;return t.newestOnTop&&o.reverse(),o.forEach(m=>{let{position:y}=m.props;f.has(y)||f.set(y,[]),f.get(y).push(m)}),Array.from(f,m=>h(m[0],m[1]))}return{getToastToRender:u,isToastActive:FA,count:o?.length}}function iM(t){let[e,n]=S.useState(!1),[s,i]=S.useState(!1),o=S.useRef(null),u=S.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:f,closeToast:m,onClick:y,closeOnClick:v}=t;Z4({id:t.toastId,containerId:t.containerId,fn:n}),S.useEffect(()=>{if(t.pauseOnFocusLoss)return b(),()=>{T()}},[t.pauseOnFocusLoss]);function b(){document.hasFocus()||k(),window.addEventListener("focus",j),window.addEventListener("blur",k)}function T(){window.removeEventListener("focus",j),window.removeEventListener("blur",k)}function R(A){if(t.draggable===!0||t.draggable===A.pointerType){U();let N=o.current;u.canCloseOnClick=!0,u.canDrag=!0,N.style.transition="none",t.draggableDirection==="x"?(u.start=A.clientX,u.removalDistance=N.offsetWidth*(t.draggablePercent/100)):(u.start=A.clientY,u.removalDistance=N.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function M(A){let{top:N,bottom:C,left:L,right:z}=o.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&t.pauseOnHover&&A.clientX>=L&&A.clientX<=z&&A.clientY>=N&&A.clientY<=C?k():j()}function j(){n(!0)}function k(){n(!1)}function U(){u.didMove=!1,document.addEventListener("pointermove",$),document.addEventListener("pointerup",Y)}function V(){document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",Y)}function $(A){let N=o.current;if(u.canDrag&&N){u.didMove=!0,e&&k(),t.draggableDirection==="x"?u.delta=A.clientX-u.start:u.delta=A.clientY-u.start,u.start!==A.clientX&&(u.canCloseOnClick=!1);let C=t.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`;N.style.transform=`translate3d(${C},0)`,N.style.opacity=`${1-Math.abs(u.delta/u.removalDistance)}`}}function Y(){V();let A=o.current;if(u.canDrag&&u.didMove&&A){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance){i(!0),t.closeToast(!0),t.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let oe={onPointerDown:R,onPointerUp:M};return h&&f&&(oe.onMouseEnter=k,t.stacked||(oe.onMouseLeave=j)),v&&(oe.onClick=A=>{y&&y(A),u.canCloseOnClick&&m(!0)}),{playToast:j,pauseToast:k,isRunning:e,preventExitTransition:s,toastRef:o,eventHandlers:oe}}var aM=typeof window<"u"?S.useLayoutEffect:S.useEffect,Jm=({theme:t,type:e,isLoading:n,...s})=>ot.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...s});function oM(t){return ot.createElement(Jm,{...t},ot.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function lM(t){return ot.createElement(Jm,{...t},ot.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function cM(t){return ot.createElement(Jm,{...t},ot.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function uM(t){return ot.createElement(Jm,{...t},ot.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function dM(){return ot.createElement("div",{className:"Toastify__spinner"})}var S0={info:lM,warning:oM,success:cM,error:uM,spinner:dM},hM=t=>t in S0;function fM({theme:t,type:e,isLoading:n,icon:s}){let i=null,o={theme:t,type:e};return s===!1||(xi(s)?i=s({...o,isLoading:n}):S.isValidElement(s)?i=S.cloneElement(s,o):n?i=S0.spinner():hM(e)&&(i=S0[e](o))),i}var mM=t=>{let{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:i,playToast:o}=iM(t),{closeButton:u,children:h,autoClose:f,onClick:m,type:y,hideProgressBar:v,closeToast:b,transition:T,position:R,className:M,style:j,progressClassName:k,updateId:U,role:V,progress:$,rtl:Y,toastId:oe,deleteToast:A,isIn:N,isLoading:C,closeOnClick:L,theme:z,ariaLabel:B}=t,D=wa("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${y}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":L}),_e=xi(M)?M({rtl:Y,position:R,type:y,defaultClassName:D}):wa(D,M),me=fM(t),X=!!$||!f,K={closeToast:b,type:y,theme:z},Z=null;return u===!1||(xi(u)?Z=u(K):S.isValidElement(u)?Z=S.cloneElement(u,K):Z=q4(K)),ot.createElement(T,{isIn:N,done:A,position:R,preventExitTransition:n,nodeRef:s,playToast:o},ot.createElement("div",{id:oe,tabIndex:0,onClick:m,"data-in":N,className:_e,...i,style:j,ref:s,...N&&{role:V,"aria-label":B}},me!=null&&ot.createElement("div",{className:wa("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!C})},me),UA(h,t,!e),Z,!t.customProgressBar&&ot.createElement($4,{...U&&!X?{key:`p-${U}`}:{},rtl:Y,theme:z,delay:f,isRunning:e,isIn:N,closeToast:b,hide:v,type:y,className:k,controlledProgress:X,progress:$||0})))},pM=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),gM=F4(pM("bounce",!0)),yM={position:"top-right",transition:gM,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function xM(t){let e={...yM,...t},n=t.stacked,[s,i]=S.useState(!0),o=S.useRef(null),{getToastToRender:u,isToastActive:h,count:f}=rM(e),{className:m,style:y,rtl:v,containerId:b,hotKeys:T}=e;function R(j){let k=wa("Toastify__toast-container",`Toastify__toast-container--${j}`,{"Toastify__toast-container--rtl":v});return xi(m)?m({position:j,rtl:v,defaultClassName:k}):wa(k,T0(m))}function M(){n&&(i(!0),se.play())}return aM(()=>{var j;if(n){let k=o.current.querySelectorAll('[data-in="true"]'),U=12,V=(j=e.position)==null?void 0:j.includes("top"),$=0,Y=0;Array.from(k).reverse().forEach((oe,A)=>{let N=oe;N.classList.add("Toastify__toast--stacked"),A>0&&(N.dataset.collapsed=`${s}`),N.dataset.pos||(N.dataset.pos=V?"top":"bot");let C=$*(s?.2:1)+(s?0:U*A);N.style.setProperty("--y",`${V?C:C*-1}px`),N.style.setProperty("--g",`${U}`),N.style.setProperty("--s",`${1-(s?Y:0)}`),$+=N.offsetHeight,Y+=.025})}},[s,f,n]),S.useEffect(()=>{function j(k){var U;let V=o.current;T(k)&&((U=V.querySelector('[tabIndex="0"]'))==null||U.focus(),i(!1),se.pause()),k.key==="Escape"&&(document.activeElement===V||V!=null&&V.contains(document.activeElement))&&(i(!0),se.play())}return document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}},[T]),ot.createElement("section",{ref:o,className:"Toastify",id:b,onMouseEnter:()=>{n&&(i(!1),se.pause())},onMouseLeave:M,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},u((j,k)=>{let U=k.length?{...y}:{...y,pointerEvents:"none"};return ot.createElement("div",{tabIndex:-1,className:R(j),"data-stacked":n,style:U,key:`c-${j}`},k.map(({content:V,props:$})=>ot.createElement(mM,{...$,stacked:n,collapseAll:M,isIn:h($.toastId,$.containerId),key:`t-${$.key}`},V)))}))}const vM=()=>{};var fE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bM=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],u=t[n++],h=t[n++],f=((i&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},GA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const o=t[i],u=i+1<t.length,h=u?t[i+1]:0,f=i+2<t.length,m=f?t[i+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let b=(h&15)<<2|m>>6,T=m&63;f||(T=64,u||(b=64)),s.push(n[y],n[v],n[b],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||h==null||m==null||v==null)throw new wM;const b=o<<2|h>>4;if(s.push(b),m!==64){const T=h<<4&240|m>>2;if(s.push(T),v!==64){const R=m<<6&192|v;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _M=function(t){const e=HA(t);return GA.encodeByteArray(e,!0)},vm=function(t){return _M(t).replace(/\./g,"")},KA=function(t){try{return GA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=()=>EM().__FIREBASE_DEFAULTS__,NM=()=>{if(typeof process>"u"||typeof fE>"u")return;const t=fE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KA(t[1]);return e&&JSON.parse(e)},ep=()=>{try{return vM()||TM()||NM()||AM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YA=t=>ep()?.emulatorHosts?.[t],XA=t=>{const e=YA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},QA=()=>ep()?.config,WA=t=>ep()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ux(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vm(JSON.stringify(n)),vm(JSON.stringify(u)),""].join(".")}const td={};function CM(){const t={prod:[],emulator:[]};for(const e of Object.keys(td))td[e]?t.emulator.push(e):t.prod.push(e);return t}function jM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mE=!1;function zx(t,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||td[t]===e||td[t]||mE)return;td[t]=e;function n(b){return`__firebase__banner__${b}`}const s="__firebase__banner",o=CM().prod.length>0;function u(){const b=document.getElementById(s);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,T){b.setAttribute("width","24"),b.setAttribute("id",T),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{mE=!0,u()},b}function y(b,T){b.setAttribute("id",T),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=jM(s),T=n("text"),R=document.getElementById(T)||document.createElement("span"),M=n("learnmore"),j=document.getElementById(M)||document.createElement("a"),k=n("preprendIcon"),U=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const V=b.element;h(V),y(j,M);const $=m();f(U,k),V.append(U,R,j,$),document.body.appendChild(V)}o?(R.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function IM(){const t=ep()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PM(){const t=In();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OM(){return!IM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VM(){try{return typeof indexedDB=="object"}catch{return!1}}function LM(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="FirebaseError";class Fr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=UM,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ud.prototype.create)}}class Ud{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?zM(o,s):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new Fr(i,h,s)}}function zM(t,e){return t.replace(BM,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const BM=/\{\$([^}]+)}/g;function FM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ca(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const o=t[i],u=e[i];if(pE(o)&&pE(u)){if(!Ca(o,u))return!1}else if(o!==u)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function pE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Yu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,o]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Xu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qM(t,e){const n=new $M(t,e);return n.subscribe.bind(n)}class $M{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");HM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Vy),i.error===void 0&&(i.error=Vy),i.complete===void 0&&(i.complete=Vy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class ja{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new SM;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YM(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);s===h&&u.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:KM(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KM(t){return t===To?void 0:t}function YM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const QM={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},WM=tt.INFO,ZM={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},JM=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=ZM[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bx{constructor(e){this.name=e,this._logLevel=WM,this._logHandler=JM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const ek=(t,e)=>e.some(n=>t instanceof n);let gE,yE;function tk(){return gE||(gE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nk(){return yE||(yE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JA=new WeakMap,C0=new WeakMap,eS=new WeakMap,Ly=new WeakMap,Fx=new WeakMap;function sk(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(_a(t.result)),i()},u=()=>{s(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&JA.set(n,t)}).catch(()=>{}),Fx.set(e,t),e}function rk(t){if(C0.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),i()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});C0.set(t,e)}let j0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return C0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _a(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ik(t){j0=t(j0)}function ak(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Uy(this),e,...n);return eS.set(s,e.sort?e.sort():[e]),_a(s)}:nk().includes(t)?function(...e){return t.apply(Uy(this),e),_a(JA.get(this))}:function(...e){return _a(t.apply(Uy(this),e))}}function ok(t){return typeof t=="function"?ak(t):(t instanceof IDBTransaction&&rk(t),ek(t,tk())?new Proxy(t,j0):t)}function _a(t){if(t instanceof IDBRequest)return sk(t);if(Ly.has(t))return Ly.get(t);const e=ok(t);return e!==t&&(Ly.set(t,e),Fx.set(e,t)),e}const Uy=t=>Fx.get(t);function lk(t,e,{blocked:n,upgrade:s,blocking:i,terminated:o}={}){const u=indexedDB.open(t,e),h=_a(u);return s&&u.addEventListener("upgradeneeded",f=>{s(_a(u.result),f.oldVersion,f.newVersion,_a(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const ck=["get","getKey","getAll","getAllKeys","count"],uk=["put","add","delete","clear"],zy=new Map;function xE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zy.get(e))return zy.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=uk.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||ck.includes(n)))return;const o=async function(u,...h){const f=this.transaction(u,i?"readwrite":"readonly");let m=f.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),i&&f.done]))[0]};return zy.set(e,o),o}ik(t=>({...t,get:(e,n,s)=>xE(e,n)||t.get(e,n,s),has:(e,n)=>!!xE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hk(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hk(t){return t.getComponent()?.type==="VERSION"}const R0="@firebase/app",vE="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Bx("@firebase/app"),fk="@firebase/app-compat",mk="@firebase/analytics-compat",pk="@firebase/analytics",gk="@firebase/app-check-compat",yk="@firebase/app-check",xk="@firebase/auth",vk="@firebase/auth-compat",bk="@firebase/database",wk="@firebase/data-connect",_k="@firebase/database-compat",Ek="@firebase/functions",Tk="@firebase/functions-compat",Nk="@firebase/installations",Ak="@firebase/installations-compat",Sk="@firebase/messaging",Ck="@firebase/messaging-compat",jk="@firebase/performance",Rk="@firebase/performance-compat",Ik="@firebase/remote-config",Dk="@firebase/remote-config-compat",Mk="@firebase/storage",kk="@firebase/storage-compat",Pk="@firebase/firestore",Ok="@firebase/ai",Vk="@firebase/firestore-compat",Lk="firebase",Uk="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="[DEFAULT]",zk={[R0]:"fire-core",[fk]:"fire-core-compat",[pk]:"fire-analytics",[mk]:"fire-analytics-compat",[yk]:"fire-app-check",[gk]:"fire-app-check-compat",[xk]:"fire-auth",[vk]:"fire-auth-compat",[bk]:"fire-rtdb",[wk]:"fire-data-connect",[_k]:"fire-rtdb-compat",[Ek]:"fire-fn",[Tk]:"fire-fn-compat",[Nk]:"fire-iid",[Ak]:"fire-iid-compat",[Sk]:"fire-fcm",[Ck]:"fire-fcm-compat",[jk]:"fire-perf",[Rk]:"fire-perf-compat",[Ik]:"fire-rc",[Dk]:"fire-rc-compat",[Mk]:"fire-gcs",[kk]:"fire-gcs-compat",[Pk]:"fire-fst",[Vk]:"fire-fst-compat",[Ok]:"fire-vertex","fire-js":"fire-js",[Lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new Map,Bk=new Map,D0=new Map;function bE(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oo(t){const e=t.name;if(D0.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;D0.set(e,t);for(const n of bm.values())bE(n,t);for(const n of Bk.values())bE(n,t);return!0}function tp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ls(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ea=new Ud("app","Firebase",Fk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=Uk;function qx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:I0,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Ea.create("bad-app-name",{appName:String(i)});if(n||(n=QA()),!n)throw Ea.create("no-options");const o=bm.get(i);if(o){if(Ca(n,o.options)&&Ca(s,o.config))return o;throw Ea.create("duplicate-app",{appName:i})}const u=new XM(i);for(const f of D0.values())u.addComponent(f);const h=new qk(n,s,u);return bm.set(i,h),h}function $x(t=I0){const e=bm.get(t);if(!e&&t===I0&&QA())return qx();if(!e)throw Ea.create("no-app",{appName:t});return e}function jr(t,e,n){let s=zk[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(u.join(" "));return}Oo(new ja(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="firebase-heartbeat-database",Hk=1,gd="firebase-heartbeat-store";let By=null;function tS(){return By||(By=lk($k,Hk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ea.create("idb-open",{originalErrorMessage:t.message})})),By}async function Gk(t){try{const n=(await tS()).transaction(gd),s=await n.objectStore(gd).get(nS(t));return await n.done,s}catch(e){if(e instanceof Fr)vi.warn(e.message);else{const n=Ea.create("idb-get",{originalErrorMessage:e?.message});vi.warn(n.message)}}}async function wE(t,e){try{const s=(await tS()).transaction(gd,"readwrite");await s.objectStore(gd).put(e,nS(t)),await s.done}catch(n){if(n instanceof Fr)vi.warn(n.message);else{const s=Ea.create("idb-set",{originalErrorMessage:n?.message});vi.warn(s.message)}}}function nS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=1024,Yk=30;class Xk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Wk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_E();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Yk){const i=Zk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_E(),{heartbeatsToSend:n,unsentEntries:s}=Qk(this._heartbeatsCache.heartbeats),i=vm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vi.warn(e),""}}}function _E(){return new Date().toISOString().substring(0,10)}function Qk(t,e=Kk){const n=[];let s=t.slice();for(const i of t){const o=n.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),EE(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),EE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Wk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VM()?LM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function EE(t){return vm(JSON.stringify({version:2,heartbeats:t})).length}function Zk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){Oo(new ja("platform-logger",e=>new dk(e),"PRIVATE")),Oo(new ja("heartbeat",e=>new Xk(e),"PRIVATE")),jr(R0,vE,t),jr(R0,vE,"esm2020"),jr("fire-js","")}Jk("");function sS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eP=sS,rS=new Ud("auth","Firebase",sS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new Bx("@firebase/auth");function tP(t,...e){wm.logLevel<=tt.WARN&&wm.warn(`Auth (${Yo}): ${t}`,...e)}function em(t,...e){wm.logLevel<=tt.ERROR&&wm.error(`Auth (${Yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,...e){throw Hx(t,...e)}function Rr(t,...e){return Hx(t,...e)}function iS(t,e,n){const s={...eP(),[e]:n};return new Ud("auth","Firebase",s).create(e,{appName:t.name})}function pi(t){return iS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return rS.create(t,...e)}function Ve(t,e,...n){if(!t)throw Hx(e,...n)}function hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw em(e),new Error(e)}function bi(t,e){t||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(){return typeof self<"u"&&self.location?.href||""}function nP(){return TE()==="http:"||TE()==="https:"}function TE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nP()||MM()||"connection"in navigator)?navigator.onLine:!0}function rP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.shortDelay=e,this.longDelay=n,bi(n>e,"Short delay should be less than long delay!"),this.isMobile=RM()||kM()}get(){return sP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e){bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oP=new Bd(3e4,6e4);function Ai(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rr(t,e,n,s,i={}){return oS(t,i,async()=>{let o={},u={};s&&(e==="GET"?u=s:o={body:JSON.stringify(s)});const h=zd({key:t.config.apiKey,...u}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:f,...o};return DM()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Ko(t.emulatorConfig.host)&&(m.credentials="include"),aS.fetch()(await lS(t,t.config.apiHost,n,h),m)})}async function oS(t,e,n){t._canInitEmulator=!1;const s={...iP,...e};try{const i=new cP(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Lf(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Lf(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Lf(t,"user-disabled",u);const y=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw iS(t,y,m);tr(t,y)}}catch(i){if(i instanceof Fr)throw i;tr(t,"network-request-failed",{message:String(i)})}}async function Fd(t,e,n,s,i={}){const o=await rr(t,e,n,s,i);return"mfaPendingCredential"in o&&tr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function lS(t,e,n,s){const i=`${e}${n}?${s}`,o=t,u=o.config.emulator?Gx(t.config,i):`${t.config.apiScheme}://${i}`;return aP.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function lP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Rr(this.auth,"network-request-failed")),oP.get())})}}function Lf(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Rr(t,e,s);return i.customData._tokenResponse=n,i}function NE(t){return t!==void 0&&t.enterprise!==void 0}class uP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dP(t,e){return rr(t,"GET","/v2/recaptchaConfig",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(t,e){return rr(t,"POST","/v1/accounts:delete",e)}async function _m(t,e){return rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fP(t,e=!1){const n=St(t),s=await n.getIdToken(e),i=Kx(s);Ve(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o?.sign_in_provider;return{claims:i,token:s,authTime:nd(Fy(i.auth_time)),issuedAtTime:nd(Fy(i.iat)),expirationTime:nd(Fy(i.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Fy(t){return Number(t)*1e3}function Kx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return em("JWT malformed, contained fewer than 3 sections"),null;try{const i=KA(n);return i?JSON.parse(i):(em("Failed to decode base64 JWT payload"),null)}catch(i){return em("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AE(t){const e=Kx(t);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Fr&&mP(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function mP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(t){const e=t.auth,n=await t.getIdToken(),s=await Vo(t,_m(e,{idToken:n}));Ve(s?.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?cS(i.providerUserInfo):[],u=yP(t.providerData,o),h=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!u?.length,m=h?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new k0(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function gP(t){const e=St(t);await Em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yP(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function cS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t,e){const n=await oS(t,{},async()=>{const s=zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,u=await lS(t,i,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:s};return t.emulatorConfig&&Ko(t.emulatorConfig.host)&&(f.credentials="include"),aS.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vP(t,e){return rr(t,"POST","/v2/accounts:revokeToken",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=AE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:o}=await xP(e,n);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:o}=n,u=new ec;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),i&&(Ve(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(Ve(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t,e){Ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new pP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new k0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fP(this,e)}reload(){return gP(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Em(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ls(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await Vo(this,hP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,f=n._redirectEventId??void 0,m=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:T,providerData:R,stsTokenManager:M}=n;Ve(v&&M,e,"internal-error");const j=ec.fromJSON(this.name,M);Ve(typeof v=="string",e,"internal-error"),ca(s,e.name),ca(i,e.name),Ve(typeof b=="boolean",e,"internal-error"),Ve(typeof T=="boolean",e,"internal-error"),ca(o,e.name),ca(u,e.name),ca(h,e.name),ca(f,e.name),ca(m,e.name),ca(y,e.name);const k=new Xs({uid:v,auth:e,email:i,emailVerified:b,displayName:s,isAnonymous:T,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:j,createdAt:m,lastLoginAt:y});return R&&Array.isArray(R)&&(k.providerData=R.map(U=>({...U}))),f&&(k._redirectEventId=f),k}static async _fromIdTokenResponse(e,n,s=!1){const i=new ec;i.updateFromServerResponse(n);const o=new Xs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Em(o),o}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];Ve(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?cS(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!o?.length,h=new ec;h.updateFromIdToken(s);const f=new Xs({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new k0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new Map;function fi(t){bi(t instanceof Function,"Expected a class definition");let e=SE.get(t);return e?(bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uS.type="NONE";const CE=uS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e,n){return`firebase:${t}:${e}:${n}`}class tc{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:o}=this.auth;this.fullUserKey=tm(this.userKey,i.apiKey,o),this.fullPersistenceKey=tm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _m(this.auth,{idToken:e}).catch(()=>{});return n?Xs._fromGetAccountInfoResponse(this.auth,n,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new tc(fi(CE),e,s);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||fi(CE);const u=tm(s,e.config.apiKey,e.name);let h=null;for(const m of n)try{const y=await m._get(u);if(y){let v;if(typeof y=="string"){const b=await _m(e,{idToken:y}).catch(()=>{});if(!b)break;v=await Xs._fromGetAccountInfoResponse(e,b,y)}else v=Xs._fromJSON(e,y);m!==o&&(h=v),o=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new tc(o,e,s):(o=f[0],h&&await o._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new tc(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gS(e))return"Blackberry";if(yS(e))return"Webos";if(hS(e))return"Safari";if((e.includes("chrome/")||fS(e))&&!e.includes("edge/"))return"Chrome";if(pS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function dS(t=In()){return/firefox\//i.test(t)}function hS(t=In()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fS(t=In()){return/crios\//i.test(t)}function mS(t=In()){return/iemobile/i.test(t)}function pS(t=In()){return/android/i.test(t)}function gS(t=In()){return/blackberry/i.test(t)}function yS(t=In()){return/webos/i.test(t)}function Yx(t=In()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bP(t=In()){return Yx(t)&&!!window.navigator?.standalone}function wP(){return PM()&&document.documentMode===10}function xS(t=In()){return Yx(t)||pS(t)||yS(t)||gS(t)||/windows phone/i.test(t)||mS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e=[]){let n;switch(t){case"Browser":n=jE(In());break;case"Worker":n=`${jE(In())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=o=>new Promise((u,h)=>{try{const f=e(o);u(f)}catch(f){h(f)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e={}){return rr(t,"GET","/v2/passwordPolicy",Ai(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=6;class NP{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RE(this),this.idTokenSubscription=new RE(this),this.beforeStateQueue=new _P(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _m(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ls(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(s=h.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Em(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ls(this.app))return Promise.reject(pi(this));const n=e?St(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ls(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ls(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EP(this),n=new NP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ud("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await vP(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fi(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,s,i);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ba(t){return St(t)}class RE{constructor(e){this.auth=e,this.observer=null,this.addObserver=qM(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SP(t){np=t}function bS(t){return np.loadJS(t)}function CP(){return np.recaptchaEnterpriseScript}function jP(){return np.gapiScript}function RP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class IP{constructor(){this.enterprise=new DP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const MP="recaptcha-enterprise",wS="NO_RECAPTCHA";class kP{constructor(e){this.type=MP,this.auth=Ba(e)}async verify(e="verify",n=!1){async function s(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{dP(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new uP(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function i(o,u,h){const f=window.grecaptcha;NE(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{u(m)}).catch(()=>{u(wS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IP().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{s(this.auth).then(h=>{if(!n&&NE(window.grecaptcha))i(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=CP();f.length!==0&&(f+=h),bS(f).then(()=>{i(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function IE(t,e,n,s=!1,i=!1){const o=new kP(t);let u;if(i)u=wS;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Tm(t,e,n,s,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await IE(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await IE(t,e,n,n==="getOobCode");return s(t,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t,e){const n=tp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ca(o,e??{}))return i;tr(i,"already-initialized")}return n.initialize({options:e})}function OP(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(fi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function VP(t,e,n){const s=Ba(t);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,o=_S(e),{host:u,port:h}=LP(e),f=h===null?"":`:${h}`,m={url:`${o}//${u}${f}/`},y=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(Ca(m,s.config.emulator)&&Ca(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,Ko(u)?(Ux(`${o}//${u}${f}`),zx("Auth",!0)):UP()}function _S(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LP(t){const e=_S(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const o=i[1];return{host:o,port:DE(s.substr(o.length+1))}}else{const[o,u]=s.split(":");return{host:o,port:DE(u)}}}function DE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,n){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}async function zP(t,e){return rr(t,"POST","/v1/accounts:update",e)}async function BP(t,e){return rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(t,e){return Fd(t,"POST","/v1/accounts:signInWithPassword",Ai(t,e))}async function qP(t,e){return rr(t,"POST","/v1/accounts:sendOobCode",Ai(t,e))}async function $P(t,e){return qP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return Fd(t,"POST","/v1/accounts:signInWithEmailLink",Ai(t,e))}async function GP(t,e){return Fd(t,"POST","/v1/accounts:signInWithEmailLink",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends Xx{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new yd(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new yd(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,n,"signInWithPassword",FP);case"emailLink":return HP(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,s,"signUpPassword",BP);case"emailLink":return GP(e,{idToken:n,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t,e){return Fd(t,"POST","/v1/accounts:signInWithIdp",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="http://localhost";class Lo extends Xx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...o}=n;if(!s||!i)return null;const u=new Lo(s,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return nc(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,nc(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nc(e,n)}buildRequest(){const e={requestUri:KP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XP(t){const e=Yu(Xu(t)).link,n=e?Yu(Xu(e)).deep_link_id:null,s=Yu(Xu(t)).deep_link_id;return(s?Yu(Xu(s)).link:null)||s||n||e||t}class Qx{constructor(e){const n=Yu(Xu(e)),s=n.apiKey??null,i=n.oobCode??null,o=YP(n.mode??null);Ve(s&&i&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=XP(e);try{return new Qx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,n){return yd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Qx.parseLink(n);return Ve(s,"argument-error"),yd._fromEmailAndCode(e,s.code,s.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends ES{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends qd{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends qd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lo._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fa.credential(n,s)}catch{return null}}}fa.GOOGLE_SIGN_IN_METHOD="google.com";fa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends qd{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ma.credential(e.oauthAccessToken)}catch{return null}}}ma.GITHUB_SIGN_IN_METHOD="github.com";ma.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends qd{constructor(){super("twitter.com")}static credential(e,n){return Lo._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return pa.credential(n,s)}catch{return null}}}pa.TWITTER_SIGN_IN_METHOD="twitter.com";pa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e){return Fd(t,"POST","/v1/accounts:signUp",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const o=await Xs._fromIdTokenResponse(e,s,i),u=ME(s);return new Uo({user:o,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=ME(s);return new Uo({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function ME(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends Fr{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Nm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Nm(e,n,s,i)}}function TS(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nm._fromErrorAndOperation(t,o,e,s):o})}async function WP(t,e,n=!1){const s=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Uo._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(t,e,n=!1){const{auth:s}=t;if(ls(s.app))return Promise.reject(pi(s));const i="reauthenticate";try{const o=await Vo(t,TS(s,i,e,t),n);Ve(o.idToken,s,"internal-error");const u=Kx(o.idToken);Ve(u,s,"internal-error");const{sub:h}=u;return Ve(t.uid===h,s,"user-mismatch"),Uo._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&tr(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e,n=!1){if(ls(t.app))return Promise.reject(pi(t));const s="signIn",i=await TS(t,s,e),o=await Uo._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(o.user),o}async function ZP(t,e){return AS(Ba(t),e)}async function JP(t,e){return NS(St(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(t){const e=Ba(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e3(t,e,n){const s=Ba(t);await Tm(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$P)}async function xd(t,e,n){if(ls(t.app))return Promise.reject(pi(t));const s=Ba(t),u=await Tm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QP).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&SS(t),f}),h=await Uo._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function t3(t,e,n){return ls(t.app)?Promise.reject(pi(t)):ZP(St(t),Xo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&SS(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n3(t,e){return rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=St(t),o={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await Vo(s,n3(s.auth,o));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;const h=s.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=s.displayName,h.photoURL=s.photoURL),await s._updateTokensIfNecessary(u)}function s3(t,e){return r3(St(t),null,e)}async function r3(t,e,n){const{auth:s}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const u=await Vo(t,zP(s,o));await t._updateTokensIfNecessary(u,!0)}function i3(t,e,n,s){return St(t).onIdTokenChanged(e,n,s)}function a3(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function CS(t,e,n,s){return St(t).onAuthStateChanged(e,n,s)}function sd(t){return St(t).signOut()}const Am="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Am,"1"),this.storage.removeItem(Am),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=1e3,l3=10;class RS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},o=this.storage.getItem(s);wP()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,l3):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},o3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RS.type="LOCAL";const c3=RS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IS.type="SESSION";const DS=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new sp(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:o}=n.data,u=this.handlersMap[i];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const h=Array.from(u).map(async m=>m(n.origin,o)),f=await u3(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((h,f)=>{const m=Wx("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},s);u={messageChannel:i,onMessage(v){const b=v;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return window}function h3(t){Ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return typeof Ir().WorkerGlobalScope<"u"&&typeof Ir().importScripts=="function"}async function f3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m3(){return navigator?.serviceWorker?.controller||null}function p3(){return MS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebaseLocalStorageDb",g3=1,Sm="firebaseLocalStorage",PS="fbase_key";class $d{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rp(t,e){return t.transaction([Sm],e?"readwrite":"readonly").objectStore(Sm)}function y3(){const t=indexedDB.deleteDatabase(kS);return new $d(t).toPromise()}function P0(){const t=indexedDB.open(kS,g3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Sm,{keyPath:PS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Sm)?e(s):(s.close(),await y3(),e(await P0()))})})}async function kE(t,e,n){const s=rp(t,!0).put({[PS]:e,value:n});return new $d(s).toPromise()}async function x3(t,e){const n=rp(t,!1).get(e),s=await new $d(n).toPromise();return s===void 0?null:s.value}function PE(t,e){const n=rp(t,!0).delete(e);return new $d(n).toPromise()}const v3=800,b3=3;class OS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>b3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sp._getInstance(p3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await f3(),!this.activeServiceWorker)return;this.sender=new d3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||m3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P0();return await kE(e,Am,"1"),await PE(e,Am),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>kE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>x3(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=rp(i,!1).getAll();return new $d(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OS.type="LOCAL";const w3=OS;new Bd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e){return e?fi(e):(Ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends Xx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function E3(t){return AS(t.auth,new Zx(t),t.bypassAuthState)}function T3(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),NS(n,new Zx(t),t.bypassAuthState)}async function N3(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),WP(n,new Zx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,s,i,o=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E3;case"linkViaPopup":case"linkViaRedirect":return N3;case"reauthViaPopup":case"reauthViaRedirect":return T3;default:tr(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=new Bd(2e3,1e4);class Yl extends VS{constructor(e,n,s,i,o){super(e,n,i,o),this.provider=s,this.authWindow=null,this.pollId=null,Yl.currentPopupAction&&Yl.currentPopupAction.cancel(),Yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const e=Wx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A3.get())};e()}}Yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="pendingRedirect",nm=new Map;class C3 extends VS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=nm.get(this.auth._key());if(!e){try{const s=await j3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}nm.set(this.auth._key(),e)}return this.bypassAuthState||nm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j3(t,e){const n=D3(e),s=I3(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function R3(t,e){nm.set(t._key(),e)}function I3(t){return fi(t._redirectPersistence)}function D3(t){return tm(S3,t.config.apiKey,t.name)}async function M3(t,e,n=!1){if(ls(t.app))return Promise.reject(pi(t));const s=Ba(t),i=_3(s,e),u=await new C3(s,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=600*1e3;class P3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!LS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Rr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k3&&this.cachedEventUids.clear(),this.cachedEventUids.has(OE(e))}saveEventToCache(e){this.cachedEventUids.add(OE(e)),this.lastProcessedEventTime=Date.now()}}function OE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function O3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(t,e={}){return rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U3=/^https?/;async function z3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V3(t);for(const n of e)try{if(B3(n))return}catch{}tr(t,"unauthorized-domain")}function B3(t){const e=M0(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!U3.test(n))return!1;if(L3.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=new Bd(3e4,6e4);function VE(){const t=Ir().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function q3(t){return new Promise((e,n)=>{function s(){VE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VE(),n(Rr(t,"network-request-failed"))},timeout:F3.get()})}if(Ir().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ir().gapi?.load)s();else{const i=RP("iframefcb");return Ir()[i]=()=>{gapi.load?s():n(Rr(t,"network-request-failed"))},bS(`${jP()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw sm=null,e})}let sm=null;function $3(t){return sm=sm||q3(t),sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new Bd(5e3,15e3),G3="__/auth/iframe",K3="emulator/auth/iframe",Y3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q3(t){const e=t.config;Ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gx(e,K3):`https://${t.config.authDomain}/${G3}`,s={apiKey:e.apiKey,appName:t.name,v:Yo},i=X3.get(t.config.apiHost);i&&(s.eid=i);const o=t._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${zd(s).slice(1)}`}async function W3(t){const e=await $3(t),n=Ir().gapi;return Ve(n,t,"internal-error"),e.open({where:document.body,url:Q3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y3,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});const u=Rr(t,"network-request-failed"),h=Ir().setTimeout(()=>{o(u)},H3.get());function f(){Ir().clearTimeout(h),i(s)}s.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J3=500,e5=600,t5="_blank",n5="http://localhost";class LE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s5(t,e,n,s=J3,i=e5){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const f={...Z3,width:s.toString(),height:i.toString(),top:o,left:u},m=In().toLowerCase();n&&(h=fS(m)?t5:n),dS(m)&&(e=e||n5,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[T,R])=>`${b}${T}=${R},`,"");if(bP(m)&&h!=="_self")return r5(e||"",h),new LE(null);const v=window.open(e||"",h,y);Ve(v,t,"popup-blocked");try{v.focus()}catch{}return new LE(v)}function r5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="__/auth/handler",a5="emulator/auth/handler",o5=encodeURIComponent("fac");async function UE(t,e,n,s,i,o){Ve(t.config.authDomain,t,"auth-domain-config-required"),Ve(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Yo,eventId:i};if(e instanceof ES){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",FM(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof qd){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await t._getAppCheckToken(),m=f?`#${o5}=${encodeURIComponent(f)}`:"";return`${l5(t)}?${zd(h).slice(1)}${m}`}function l5({config:t}){return t.emulator?Gx(t,a5):`https://${t.authDomain}/${i5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="webStorageSupport";class c5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DS,this._completeRedirectFn=M3,this._overrideRedirectResult=R3}async _openPopup(e,n,s,i){bi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await UE(e,n,s,M0(),i);return s5(e,o,Wx())}async _openRedirect(e,n,s,i){await this._originValidation(e);const o=await UE(e,n,s,M0(),i);return h3(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(bi(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await W3(e),s=new P3(e);return n.register("authEvent",i=>(Ve(i?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qy,{type:qy},i=>{const o=i?.[0]?.[qy];o!==void 0&&n(!!o),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=z3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xS()||hS()||Yx()}}const u5=c5;var zE="@firebase/auth",BE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f5(t){Oo(new ja("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Ve(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vS(t)},m=new AP(s,i,o,f);return OP(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Oo(new ja("auth-internal",e=>{const n=Ba(e.getProvider("auth").getImmediate());return(s=>new d5(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(zE,BE,h5(t)),jr(zE,BE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=300,p5=WA("authIdTokenMaxAge")||m5;let FE=null;const g5=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>p5)return;const i=n?.token;FE!==i&&(FE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function US(t=$x()){const e=tp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PP(t,{popupRedirectResolver:u5,persistence:[w3,c3,DS]}),s=WA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const u=g5(o.toString());a3(n,u,()=>u(n.currentUser)),i3(n,h=>u(h))}}const i=YA("auth");return i&&VP(n,`http://${i}`),n}function y5(){return document.getElementsByTagName("head")?.[0]??document}SP({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const o=Rr("internal-error");o.customData=i,n(o)},s.type="text/javascript",s.charset="UTF-8",y5().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f5("Browser");var x5="firebase",v5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(x5,v5,"app");var qE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ta,zS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,N){function C(){}C.prototype=N.prototype,A.F=N.prototype,A.prototype=new C,A.prototype.constructor=A,A.D=function(L,z,B){for(var D=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)D[_e-2]=arguments[_e];return N.prototype[z].apply(L,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,N,C){C||(C=0);const L=Array(16);if(typeof N=="string")for(var z=0;z<16;++z)L[z]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(z=0;z<16;++z)L[z]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=A.g[0],C=A.g[1],z=A.g[2];let B=A.g[3],D;D=N+(B^C&(z^B))+L[0]+3614090360&4294967295,N=C+(D<<7&4294967295|D>>>25),D=B+(z^N&(C^z))+L[1]+3905402710&4294967295,B=N+(D<<12&4294967295|D>>>20),D=z+(C^B&(N^C))+L[2]+606105819&4294967295,z=B+(D<<17&4294967295|D>>>15),D=C+(N^z&(B^N))+L[3]+3250441966&4294967295,C=z+(D<<22&4294967295|D>>>10),D=N+(B^C&(z^B))+L[4]+4118548399&4294967295,N=C+(D<<7&4294967295|D>>>25),D=B+(z^N&(C^z))+L[5]+1200080426&4294967295,B=N+(D<<12&4294967295|D>>>20),D=z+(C^B&(N^C))+L[6]+2821735955&4294967295,z=B+(D<<17&4294967295|D>>>15),D=C+(N^z&(B^N))+L[7]+4249261313&4294967295,C=z+(D<<22&4294967295|D>>>10),D=N+(B^C&(z^B))+L[8]+1770035416&4294967295,N=C+(D<<7&4294967295|D>>>25),D=B+(z^N&(C^z))+L[9]+2336552879&4294967295,B=N+(D<<12&4294967295|D>>>20),D=z+(C^B&(N^C))+L[10]+4294925233&4294967295,z=B+(D<<17&4294967295|D>>>15),D=C+(N^z&(B^N))+L[11]+2304563134&4294967295,C=z+(D<<22&4294967295|D>>>10),D=N+(B^C&(z^B))+L[12]+1804603682&4294967295,N=C+(D<<7&4294967295|D>>>25),D=B+(z^N&(C^z))+L[13]+4254626195&4294967295,B=N+(D<<12&4294967295|D>>>20),D=z+(C^B&(N^C))+L[14]+2792965006&4294967295,z=B+(D<<17&4294967295|D>>>15),D=C+(N^z&(B^N))+L[15]+1236535329&4294967295,C=z+(D<<22&4294967295|D>>>10),D=N+(z^B&(C^z))+L[1]+4129170786&4294967295,N=C+(D<<5&4294967295|D>>>27),D=B+(C^z&(N^C))+L[6]+3225465664&4294967295,B=N+(D<<9&4294967295|D>>>23),D=z+(N^C&(B^N))+L[11]+643717713&4294967295,z=B+(D<<14&4294967295|D>>>18),D=C+(B^N&(z^B))+L[0]+3921069994&4294967295,C=z+(D<<20&4294967295|D>>>12),D=N+(z^B&(C^z))+L[5]+3593408605&4294967295,N=C+(D<<5&4294967295|D>>>27),D=B+(C^z&(N^C))+L[10]+38016083&4294967295,B=N+(D<<9&4294967295|D>>>23),D=z+(N^C&(B^N))+L[15]+3634488961&4294967295,z=B+(D<<14&4294967295|D>>>18),D=C+(B^N&(z^B))+L[4]+3889429448&4294967295,C=z+(D<<20&4294967295|D>>>12),D=N+(z^B&(C^z))+L[9]+568446438&4294967295,N=C+(D<<5&4294967295|D>>>27),D=B+(C^z&(N^C))+L[14]+3275163606&4294967295,B=N+(D<<9&4294967295|D>>>23),D=z+(N^C&(B^N))+L[3]+4107603335&4294967295,z=B+(D<<14&4294967295|D>>>18),D=C+(B^N&(z^B))+L[8]+1163531501&4294967295,C=z+(D<<20&4294967295|D>>>12),D=N+(z^B&(C^z))+L[13]+2850285829&4294967295,N=C+(D<<5&4294967295|D>>>27),D=B+(C^z&(N^C))+L[2]+4243563512&4294967295,B=N+(D<<9&4294967295|D>>>23),D=z+(N^C&(B^N))+L[7]+1735328473&4294967295,z=B+(D<<14&4294967295|D>>>18),D=C+(B^N&(z^B))+L[12]+2368359562&4294967295,C=z+(D<<20&4294967295|D>>>12),D=N+(C^z^B)+L[5]+4294588738&4294967295,N=C+(D<<4&4294967295|D>>>28),D=B+(N^C^z)+L[8]+2272392833&4294967295,B=N+(D<<11&4294967295|D>>>21),D=z+(B^N^C)+L[11]+1839030562&4294967295,z=B+(D<<16&4294967295|D>>>16),D=C+(z^B^N)+L[14]+4259657740&4294967295,C=z+(D<<23&4294967295|D>>>9),D=N+(C^z^B)+L[1]+2763975236&4294967295,N=C+(D<<4&4294967295|D>>>28),D=B+(N^C^z)+L[4]+1272893353&4294967295,B=N+(D<<11&4294967295|D>>>21),D=z+(B^N^C)+L[7]+4139469664&4294967295,z=B+(D<<16&4294967295|D>>>16),D=C+(z^B^N)+L[10]+3200236656&4294967295,C=z+(D<<23&4294967295|D>>>9),D=N+(C^z^B)+L[13]+681279174&4294967295,N=C+(D<<4&4294967295|D>>>28),D=B+(N^C^z)+L[0]+3936430074&4294967295,B=N+(D<<11&4294967295|D>>>21),D=z+(B^N^C)+L[3]+3572445317&4294967295,z=B+(D<<16&4294967295|D>>>16),D=C+(z^B^N)+L[6]+76029189&4294967295,C=z+(D<<23&4294967295|D>>>9),D=N+(C^z^B)+L[9]+3654602809&4294967295,N=C+(D<<4&4294967295|D>>>28),D=B+(N^C^z)+L[12]+3873151461&4294967295,B=N+(D<<11&4294967295|D>>>21),D=z+(B^N^C)+L[15]+530742520&4294967295,z=B+(D<<16&4294967295|D>>>16),D=C+(z^B^N)+L[2]+3299628645&4294967295,C=z+(D<<23&4294967295|D>>>9),D=N+(z^(C|~B))+L[0]+4096336452&4294967295,N=C+(D<<6&4294967295|D>>>26),D=B+(C^(N|~z))+L[7]+1126891415&4294967295,B=N+(D<<10&4294967295|D>>>22),D=z+(N^(B|~C))+L[14]+2878612391&4294967295,z=B+(D<<15&4294967295|D>>>17),D=C+(B^(z|~N))+L[5]+4237533241&4294967295,C=z+(D<<21&4294967295|D>>>11),D=N+(z^(C|~B))+L[12]+1700485571&4294967295,N=C+(D<<6&4294967295|D>>>26),D=B+(C^(N|~z))+L[3]+2399980690&4294967295,B=N+(D<<10&4294967295|D>>>22),D=z+(N^(B|~C))+L[10]+4293915773&4294967295,z=B+(D<<15&4294967295|D>>>17),D=C+(B^(z|~N))+L[1]+2240044497&4294967295,C=z+(D<<21&4294967295|D>>>11),D=N+(z^(C|~B))+L[8]+1873313359&4294967295,N=C+(D<<6&4294967295|D>>>26),D=B+(C^(N|~z))+L[15]+4264355552&4294967295,B=N+(D<<10&4294967295|D>>>22),D=z+(N^(B|~C))+L[6]+2734768916&4294967295,z=B+(D<<15&4294967295|D>>>17),D=C+(B^(z|~N))+L[13]+1309151649&4294967295,C=z+(D<<21&4294967295|D>>>11),D=N+(z^(C|~B))+L[4]+4149444226&4294967295,N=C+(D<<6&4294967295|D>>>26),D=B+(C^(N|~z))+L[11]+3174756917&4294967295,B=N+(D<<10&4294967295|D>>>22),D=z+(N^(B|~C))+L[2]+718787259&4294967295,z=B+(D<<15&4294967295|D>>>17),D=C+(B^(z|~N))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+N&4294967295,A.g[1]=A.g[1]+(z+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+z&4294967295,A.g[3]=A.g[3]+B&4294967295}s.prototype.v=function(A,N){N===void 0&&(N=A.length);const C=N-this.blockSize,L=this.C;let z=this.h,B=0;for(;B<N;){if(z==0)for(;B<=C;)i(this,A,B),B+=this.blockSize;if(typeof A=="string"){for(;B<N;)if(L[z++]=A.charCodeAt(B++),z==this.blockSize){i(this,L),z=0;break}}else for(;B<N;)if(L[z++]=A[B++],z==this.blockSize){i(this,L),z=0;break}}this.h=z,this.o+=N},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var N=1;N<A.length-8;++N)A[N]=0;N=this.o*8;for(var C=A.length-8;C<A.length;++C)A[C]=N&255,N/=256;for(this.v(A),A=Array(16),N=0,C=0;C<4;++C)for(let L=0;L<32;L+=8)A[N++]=this.g[C]>>>L&255;return A};function o(A,N){var C=h;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=N(A)}function u(A,N){this.h=N;const C=[];let L=!0;for(let z=A.length-1;z>=0;z--){const B=A[z]|0;L&&B==N||(C[z]=B,L=!1)}this.g=C}var h={};function f(A){return-128<=A&&A<128?o(A,function(N){return new u([N|0],N<0?-1:0)}):new u([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return j(m(-A));const N=[];let C=1;for(let L=0;A>=C;L++)N[L]=A/C|0,C*=4294967296;return new u(N,0)}function y(A,N){if(A.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(A.charAt(0)=="-")return j(y(A.substring(1),N));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=m(Math.pow(N,8));let L=v;for(let B=0;B<A.length;B+=8){var z=Math.min(8,A.length-B);const D=parseInt(A.substring(B,B+z),N);z<8?(z=m(Math.pow(N,z)),L=L.j(z).add(m(D))):(L=L.j(C),L=L.add(m(D)))}return L}var v=f(0),b=f(1),T=f(16777216);t=u.prototype,t.m=function(){if(M(this))return-j(this).m();let A=0,N=1;for(let C=0;C<this.g.length;C++){const L=this.i(C);A+=(L>=0?L:4294967296+L)*N,N*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R(this))return"0";if(M(this))return"-"+j(this).toString(A);const N=m(Math.pow(A,6));var C=this;let L="";for(;;){const z=$(C,N).g;C=k(C,z.j(N));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(A);if(C=z,R(C))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function R(A){if(A.h!=0)return!1;for(let N=0;N<A.g.length;N++)if(A.g[N]!=0)return!1;return!0}function M(A){return A.h==-1}t.l=function(A){return A=k(this,A),M(A)?-1:R(A)?0:1};function j(A){const N=A.g.length,C=[];for(let L=0;L<N;L++)C[L]=~A.g[L];return new u(C,~A.h).add(b)}t.abs=function(){return M(this)?j(this):this},t.add=function(A){const N=Math.max(this.g.length,A.g.length),C=[];let L=0;for(let z=0;z<=N;z++){let B=L+(this.i(z)&65535)+(A.i(z)&65535),D=(B>>>16)+(this.i(z)>>>16)+(A.i(z)>>>16);L=D>>>16,B&=65535,D&=65535,C[z]=D<<16|B}return new u(C,C[C.length-1]&-2147483648?-1:0)};function k(A,N){return A.add(j(N))}t.j=function(A){if(R(this)||R(A))return v;if(M(this))return M(A)?j(this).j(j(A)):j(j(this).j(A));if(M(A))return j(this.j(j(A)));if(this.l(T)<0&&A.l(T)<0)return m(this.m()*A.m());const N=this.g.length+A.g.length,C=[];for(var L=0;L<2*N;L++)C[L]=0;for(L=0;L<this.g.length;L++)for(let z=0;z<A.g.length;z++){const B=this.i(L)>>>16,D=this.i(L)&65535,_e=A.i(z)>>>16,me=A.i(z)&65535;C[2*L+2*z]+=D*me,U(C,2*L+2*z),C[2*L+2*z+1]+=B*me,U(C,2*L+2*z+1),C[2*L+2*z+1]+=D*_e,U(C,2*L+2*z+1),C[2*L+2*z+2]+=B*_e,U(C,2*L+2*z+2)}for(A=0;A<N;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=N;A<2*N;A++)C[A]=0;return new u(C,0)};function U(A,N){for(;(A[N]&65535)!=A[N];)A[N+1]+=A[N]>>>16,A[N]&=65535,N++}function V(A,N){this.g=A,this.h=N}function $(A,N){if(R(N))throw Error("division by zero");if(R(A))return new V(v,v);if(M(A))return N=$(j(A),N),new V(j(N.g),j(N.h));if(M(N))return N=$(A,j(N)),new V(j(N.g),N.h);if(A.g.length>30){if(M(A)||M(N))throw Error("slowDivide_ only works with positive integers.");for(var C=b,L=N;L.l(A)<=0;)C=Y(C),L=Y(L);var z=oe(C,1),B=oe(L,1);for(L=oe(L,2),C=oe(C,2);!R(L);){var D=B.add(L);D.l(A)<=0&&(z=z.add(C),B=D),L=oe(L,1),C=oe(C,1)}return N=k(A,z.j(N)),new V(z,N)}for(z=v;A.l(N)>=0;){for(C=Math.max(1,Math.floor(A.m()/N.m())),L=Math.ceil(Math.log(C)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=m(C),D=B.j(N);M(D)||D.l(A)>0;)C-=L,B=m(C),D=B.j(N);R(B)&&(B=b),z=z.add(B),A=k(A,D)}return new V(z,A)}t.B=function(A){return $(this,A).h},t.and=function(A){const N=Math.max(this.g.length,A.g.length),C=[];for(let L=0;L<N;L++)C[L]=this.i(L)&A.i(L);return new u(C,this.h&A.h)},t.or=function(A){const N=Math.max(this.g.length,A.g.length),C=[];for(let L=0;L<N;L++)C[L]=this.i(L)|A.i(L);return new u(C,this.h|A.h)},t.xor=function(A){const N=Math.max(this.g.length,A.g.length),C=[];for(let L=0;L<N;L++)C[L]=this.i(L)^A.i(L);return new u(C,this.h^A.h)};function Y(A){const N=A.g.length+1,C=[];for(let L=0;L<N;L++)C[L]=A.i(L)<<1|A.i(L-1)>>>31;return new u(C,A.h)}function oe(A,N){const C=N>>5;N%=32;const L=A.g.length-C,z=[];for(let B=0;B<L;B++)z[B]=N>0?A.i(B+C)>>>N|A.i(B+C+1)<<32-N:A.i(B+C);return new u(z,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,zS=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,Ta=u}).apply(typeof qE<"u"?qE:typeof self<"u"?self:typeof window<"u"?window:{});var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BS,Qu,FS,rm,O0,qS,$S,HS;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uf=="object"&&Uf];for(var w=0;w<p.length;++w){var E=p[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function i(p,w){if(w)e:{var E=s;p=p.split(".");for(var P=0;P<p.length-1;P++){var W=p[P];if(!(W in E))break e;E=E[W]}p=p[p.length-1],P=E[p],w=w(P),w!=P&&w!=null&&e(E,p,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(w){var E=[],P;for(P in w)Object.prototype.hasOwnProperty.call(w,P)&&E.push([P,w[P]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function h(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function f(p,w,E){return p.call.apply(p.bind,arguments)}function m(p,w,E){return m=f,m.apply(null,arguments)}function y(p,w){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),p.apply(this,P)}}function v(p,w){function E(){}E.prototype=w.prototype,p.Z=w.prototype,p.prototype=new E,p.prototype.constructor=p,p.Ob=function(P,W,ie){for(var xe=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)xe[Ke-2]=arguments[Ke];return w.prototype[W].apply(P,xe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function T(p){const w=p.length;if(w>0){const E=Array(w);for(let P=0;P<w;P++)E[P]=p[P];return E}return[]}function R(p,w){for(let P=1;P<arguments.length;P++){const W=arguments[P];var E=typeof W;if(E=E!="object"?E:W?Array.isArray(W)?"array":E:"null",E=="array"||E=="object"&&typeof W.length=="number"){E=p.length||0;const ie=W.length||0;p.length=E+ie;for(let xe=0;xe<ie;xe++)p[E+xe]=W[xe]}else p.push(W)}}class M{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function j(p){u.setTimeout(()=>{throw p},0)}function k(){var p=A;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class U{constructor(){this.h=this.g=null}add(w,E){const P=V.get();P.set(w,E),this.h?this.h.next=P:this.g=P,this.h=P}}var V=new M(()=>new $,p=>p.reset());class ${constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,oe=!1,A=new U,N=()=>{const p=Promise.resolve(void 0);Y=()=>{p.then(C)}};function C(){for(var p;p=k();){try{p.h.call(p.g)}catch(E){j(E)}var w=V;w.j(p),w.h<100&&(w.h++,p.next=w.g,w.g=p)}oe=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};u.addEventListener("test",E,w),u.removeEventListener("test",E,w)}catch{}return p})();function D(p){return/^[\s\xa0]*$/.test(p)}function _e(p,w){z.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,w)}v(_e,z),_e.prototype.init=function(p,w){const E=this.type=p.type,P=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget,w||(E=="mouseover"?w=p.fromElement:E=="mouseout"&&(w=p.toElement)),this.relatedTarget=w,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),X=0;function K(p,w,E,P,W){this.listener=p,this.proxy=null,this.src=w,this.type=E,this.capture=!!P,this.ha=W,this.key=++X,this.da=this.fa=!1}function Z(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function q(p,w,E){for(const P in p)w.call(E,p[P],P,p)}function ye(p,w){for(const E in p)w.call(void 0,p[E],E,p)}function O(p){const w={};for(const E in p)w[E]=p[E];return w}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(p,w){let E,P;for(let W=1;W<arguments.length;W++){P=arguments[W];for(E in P)p[E]=P[E];for(let ie=0;ie<te.length;ie++)E=te[ie],Object.prototype.hasOwnProperty.call(P,E)&&(p[E]=P[E])}}function le(p){this.src=p,this.g={},this.h=0}le.prototype.add=function(p,w,E,P,W){const ie=p.toString();p=this.g[ie],p||(p=this.g[ie]=[],this.h++);const xe=ke(p,w,P,W);return xe>-1?(w=p[xe],E||(w.fa=!1)):(w=new K(w,this.src,ie,!!P,W),w.fa=E,p.push(w)),w};function be(p,w){const E=w.type;if(E in p.g){var P=p.g[E],W=Array.prototype.indexOf.call(P,w,void 0),ie;(ie=W>=0)&&Array.prototype.splice.call(P,W,1),ie&&(Z(w),p.g[E].length==0&&(delete p.g[E],p.h--))}}function ke(p,w,E,P){for(let W=0;W<p.length;++W){const ie=p[W];if(!ie.da&&ie.listener==w&&ie.capture==!!E&&ie.ha==P)return W}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Et={};function ft(p,w,E,P,W){if(Array.isArray(w)){for(let ie=0;ie<w.length;ie++)ft(p,w[ie],E,P,W);return null}return E=Oc(E),p&&p[me]?p.J(w,E,h(P)?!!P.capture:!1,W):ds(p,w,E,!1,P,W)}function ds(p,w,E,P,W,ie){if(!w)throw Error("Invalid event type");const xe=h(W)?!!W.capture:!!W;let Ke=Ha(p);if(Ke||(p[je]=Ke=new le(p)),E=Ke.add(w,E,P,xe,ie),E.proxy)return E;if(P=ir(),E.proxy=P,P.src=p,P.listener=E,p.addEventListener)B||(W=xe),W===void 0&&(W=!1),p.addEventListener(w.toString(),P,W);else if(p.attachEvent)p.attachEvent(ar(w.toString()),P);else if(p.addListener&&p.removeListener)p.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ir(){function p(E){return w.call(p.src,p.listener,E)}const w=kc;return p}function ks(p,w,E,P,W){if(Array.isArray(w))for(var ie=0;ie<w.length;ie++)ks(p,w[ie],E,P,W);else P=h(P)?!!P.capture:!!P,E=Oc(E),p&&p[me]?(p=p.i,ie=String(w).toString(),ie in p.g&&(w=p.g[ie],E=ke(w,E,P,W),E>-1&&(Z(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete p.g[ie],p.h--)))):p&&(p=Ha(p))&&(w=p.g[w.toString()],p=-1,w&&(p=ke(w,E,P,W)),(E=p>-1?w[p]:null)&&Jo(E))}function Jo(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[me])be(w.i,p);else{var E=p.type,P=p.proxy;w.removeEventListener?w.removeEventListener(E,P,p.capture):w.detachEvent?w.detachEvent(ar(E),P):w.addListener&&w.removeListener&&w.removeListener(P),(E=Ha(w))?(be(E,p),E.h==0&&(E.src=null,w[je]=null)):Z(p)}}}function ar(p){return p in Et?Et[p]:Et[p]="on"+p}function kc(p,w){if(p.da)p=!0;else{w=new _e(w,this);const E=p.listener,P=p.ha||p.src;p.fa&&Jo(p),p=E.call(P,w)}return p}function Ha(p){return p=p[je],p instanceof le?p:null}var Pc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oc(p){return typeof p=="function"?p:(p[Pc]||(p[Pc]=function(w){return p.handleEvent(w)}),p[Pc])}function $t(){L.call(this),this.i=new le(this),this.M=this,this.G=null}v($t,L),$t.prototype[me]=!0,$t.prototype.removeEventListener=function(p,w,E,P){ks(this,p,w,E,P)};function sn(p,w){var E,P=p.G;if(P)for(E=[];P;P=P.G)E.push(P);if(p=p.M,P=w.type||w,typeof w=="string")w=new z(w,p);else if(w instanceof z)w.target=w.target||p;else{var W=w;w=new z(P,p),H(w,W)}W=!0;let ie,xe;if(E)for(xe=E.length-1;xe>=0;xe--)ie=w.g=E[xe],W=Ri(ie,P,!0,w)&&W;if(ie=w.g=p,W=Ri(ie,P,!0,w)&&W,W=Ri(ie,P,!1,w)&&W,E)for(xe=0;xe<E.length;xe++)ie=w.g=E[xe],W=Ri(ie,P,!1,w)&&W}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var p=this.i;for(const w in p.g){const E=p.g[w];for(let P=0;P<E.length;P++)Z(E[P]);delete p.g[w],p.h--}}this.G=null},$t.prototype.J=function(p,w,E,P){return this.i.add(String(p),w,!1,E,P)},$t.prototype.K=function(p,w,E,P){return this.i.add(String(p),w,!0,E,P)};function Ri(p,w,E,P){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();let W=!0;for(let ie=0;ie<w.length;++ie){const xe=w[ie];if(xe&&!xe.da&&xe.capture==E){const Ke=xe.listener,Ut=xe.ha||xe.src;xe.fa&&be(p.i,xe),W=Ke.call(Ut,P)!==!1&&W}}return W&&!P.defaultPrevented}function Ip(p,w){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:u.setTimeout(p,w||0)}function oh(p){p.g=Ip(()=>{p.g=null,p.i&&(p.i=!1,oh(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class Dn extends L{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:oh(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ga(p){L.call(this),this.h=p,this.g={}}v(Ga,L);var Vc=[];function Lc(p){q(p.g,function(w,E){this.g.hasOwnProperty(E)&&Jo(w)},p),p.g={}}Ga.prototype.N=function(){Ga.Z.N.call(this),Lc(this)},Ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=u.JSON.stringify,Dp=u.JSON.parse,lh=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function ch(){}function uh(){}var Ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fn(){z.call(this,"d")}v(fn,z);function hs(){z.call(this,"c")}v(hs,z);var Lt={},dh=null;function el(){return dh=dh||new $t}Lt.Ia="serverreachability";function hh(p){z.call(this,Lt.Ia,p)}v(hh,z);function or(p){const w=el();sn(w,new hh(w))}Lt.STAT_EVENT="statevent";function Ka(p,w){z.call(this,Lt.STAT_EVENT,p),this.stat=w}v(Ka,z);function Ht(p){const w=el();sn(w,new Ka(w,p))}Lt.Ja="timingevent";function lr(p,w){z.call(this,Lt.Ja,p),this.size=w}v(lr,z);function cr(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},w)}function Os(){this.g=!0}Os.prototype.ua=function(){this.g=!1};function Mp(p,w,E,P,W,ie){p.info(function(){if(p.g)if(ie){var xe="",Ke=ie.split("&");for(let ut=0;ut<Ke.length;ut++){var Ut=Ke[ut].split("=");if(Ut.length>1){const Ct=Ut[0];Ut=Ut[1];const gs=Ct.split("_");xe=gs.length>=2&&gs[1]=="type"?xe+(Ct+"="+Ut+"&"):xe+(Ct+"=redacted&")}}}else xe=null;else xe=ie;return"XMLHTTP REQ ("+P+") [attempt "+W+"]: "+w+`
`+E+`
`+xe})}function fh(p,w,E,P,W,ie,xe){p.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+W+"]: "+w+`
`+E+`
`+ie+" "+xe})}function ur(p,w,E,P){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+kp(p,E)+(P?" "+P:"")})}function Ya(p,w){p.info(function(){return"TIMEOUT: "+w})}Os.prototype.info=function(){};function kp(p,w){if(!p.g)return w;if(!w)return null;try{const ie=JSON.parse(w);if(ie){for(p=0;p<ie.length;p++)if(Array.isArray(ie[p])){var E=ie[p];if(!(E.length<2)){var P=E[1];if(Array.isArray(P)&&!(P.length<1)){var W=P[0];if(W!="noop"&&W!="stop"&&W!="close")for(let xe=1;xe<P.length;xe++)P[xe]=""}}}}return Ii(ie)}catch{return w}}var Xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zc;function Qa(){}v(Qa,ch),Qa.prototype.g=function(){return new XMLHttpRequest},zc=new Qa;function Gr(p){return encodeURIComponent(String(p))}function mh(p){var w=1;p=p.split(":");const E=[];for(;w>0&&p.length;)E.push(p.shift()),w--;return p.length&&E.push(p.join(":")),E}function Vs(p,w,E,P){this.j=p,this.i=w,this.l=E,this.S=P||1,this.V=new Ga(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ls}function Ls(){this.i=null,this.g="",this.h=!1}var Gt={},cn={};function dr(p,w,E){p.M=1,p.A=Wa(Yt(w)),p.u=E,p.R=!0,tl(p,null)}function tl(p,w){p.F=Date.now(),hr(p),p.B=Yt(p.A);var E=p.B,P=p.S;Array.isArray(P)||(P=[String(P)]),il(E.i,"t",P),p.C=0,E=p.j.L,p.h=new Ls,p.g=jh(p.j,E?w:null,!p.u),p.P>0&&(p.O=new Dn(m(p.Y,p,p.g),p.P)),w=p.V,E=p.g,P=p.ba;var W="readystatechange";Array.isArray(W)||(W&&(Vc[0]=W.toString()),W=Vc);for(let ie=0;ie<W.length;ie++){const xe=ft(E,W[ie],P||w.handleEvent,!1,w.h||w);if(!xe)break;w.g[xe.key]=xe}w=p.J?O(p.J):{},p.u?(p.v||(p.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,w)):(p.v="GET",p.g.ea(p.B,p.v,null,w)),or(),Mp(p.i,p.v,p.B,p.l,p.S,p.u)}Vs.prototype.ba=function(p){p=p.target;const w=this.O;w&&Bs(p)==3?w.j():this.Y(p)},Vs.prototype.Y=function(p){try{if(p==this.g)e:{const Ke=Bs(this.g),Ut=this.g.ya(),ut=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||mn(this.g)))){this.K||Ke!=4||Ut==7||(Ut==8||ut<=0?or(3):or(2)),fr(this);var w=this.g.ca();this.X=w;var E=Pp(this);if(this.o=w==200,fh(this.i,this.v,this.B,this.l,this.S,Ke,w),this.o){if(this.U&&!this.L){t:{if(this.g){var P,W=this.g;if((P=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(P)){var ie=P;break t}}ie=null}if(p=ie)ur(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mr(this,p);else{this.o=!1,this.m=3,Ht(12),Jn(this),fs(this);break e}}if(this.R){p=!0;let Ct;for(;!this.K&&this.C<E.length;)if(Ct=gh(this,E),Ct==cn){Ke==4&&(this.m=4,Ht(14),p=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Gt){this.m=4,Ht(15),ur(this.i,this.l,E,"[Invalid Chunk]"),p=!1;break}else ur(this.i,this.l,Ct,null),mr(this,Ct);if(ph(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||E.length!=0||this.h.h||(this.m=1,Ht(16),p=!1),this.o=this.o&&p,!p)ur(this.i,this.l,E,"[Invalid Chunked Response]"),Jn(this),fs(this);else if(E.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),tu(xe),xe.P=!0,Ht(11))}}else ur(this.i,this.l,E,null),mr(this,E);Ke==4&&Jn(this),this.o&&!this.K&&(Ke==4?Nh(this.j,this):(this.o=!1,hr(this)))}else Yr(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),Jn(this),fs(this)}}}catch{}finally{}};function Pp(p){if(!ph(p))return p.g.la();const w=mn(p.g);if(w==="")return"";let E="";const P=w.length,W=Bs(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Jn(p),fs(p),"";p.h.i=new u.TextDecoder}for(let ie=0;ie<P;ie++)p.h.h=!0,E+=p.h.i.decode(w[ie],{stream:!(W&&ie==P-1)});return w.length=0,p.h.g+=E,p.C=0,p.h.g}function ph(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function gh(p,w){var E=p.C,P=w.indexOf(`
`,E);return P==-1?cn:(E=Number(w.substring(E,P)),isNaN(E)?Gt:(P+=1,P+E>w.length?cn:(w=w.slice(P,P+E),p.C=P+E,w)))}Vs.prototype.cancel=function(){this.K=!0,Jn(this)};function hr(p){p.T=Date.now()+p.H,nl(p,p.H)}function nl(p,w){if(p.D!=null)throw Error("WatchDog timer not null");p.D=cr(m(p.aa,p),w)}function fr(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Vs.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ya(this.i,this.B),this.M!=2&&(or(),Ht(17)),Jn(this),this.m=2,fs(this)):nl(this,this.T-p)};function fs(p){p.j.I==0||p.K||Nh(p.j,p)}function Jn(p){fr(p);var w=p.O;w&&typeof w.dispose=="function"&&w.dispose(),p.O=null,Lc(p.V),p.g&&(w=p.g,p.g=null,w.abort(),w.dispose())}function mr(p,w){try{var E=p.j;if(E.I!=0&&(E.g==p||gr(E.h,p))){if(!p.L&&gr(E.h,p)&&E.I==3){try{var P=E.Ba.g.parse(w)}catch{P=null}if(Array.isArray(P)&&P.length==3){var W=P;if(W[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<p.F)ul(E),Ui(E);else break e;ro(E),Ht(18)}}else E.xa=W[1],0<E.xa-E.K&&W[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=cr(m(E.Va,E),6e3));pr(E.h)<=1&&E.ta&&(E.ta=void 0)}else _r(E,11)}else if((p.L||E.g==p)&&ul(E),!D(w))for(W=E.Ba.g.parse(w),w=0;w<W.length;w++){let ut=W[w];const Ct=ut[0];if(!(Ct<=E.K))if(E.K=Ct,ut=ut[1],E.I==2)if(ut[0]=="c"){E.M=ut[1],E.ba=ut[2];const gs=ut[3];gs!=null&&(E.ka=gs,E.j.info("VER="+E.ka));const Er=ut[4];Er!=null&&(E.za=Er,E.j.info("SVER="+E.za));const Fs=ut[5];Fs!=null&&typeof Fs=="number"&&Fs>0&&(P=1.5*Fs,E.O=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const qs=p.g;if(qs){const io=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var ie=P.h;ie.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(qc(ie,ie.h),ie.h=null))}if(P.G){const dl=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(P.wa=dl,mt(P.J,P.G,dl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-p.F,E.j.info("Handshake RTT: "+E.T+"ms")),P=E;var xe=p;if(P.na=Ch(P,P.L?P.ba:null,P.W),xe.L){$c(P.h,xe);var Ke=xe,Ut=P.O;Ut&&(Ke.H=Ut),Ke.D&&(fr(Ke),hr(Ke)),P.g=xe}else Eh(P);E.i.length>0&&wr(E)}else ut[0]!="stop"&&ut[0]!="close"||_r(E,7);else E.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?_r(E,7):Jc(E):ut[0]!="noop"&&E.l&&E.l.qa(ut),E.A=0)}}or(4)}catch{}}var Kt=class{constructor(p,w){this.g=p,this.map=w}};function Bc(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fc(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function pr(p){return p.h?1:p.g?p.g.size:0}function gr(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function qc(p,w){p.g?p.g.add(w):p.h=w}function $c(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}Bc.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Hc(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const E of p.g.values())w=w.concat(E.G);return w}return T(p.i)}var yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(p,w){if(p){p=p.split("&");for(let E=0;E<p.length;E++){const P=p[E].indexOf("=");let W,ie=null;P>=0?(W=p[E].substring(0,P),ie=p[E].substring(P+1)):W=p[E],w(W,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function es(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;p instanceof es?(this.l=p.l,un(this,p.j),this.o=p.o,this.g=p.g,Di(this,p.u),this.h=p.h,Gc(this,wh(p.i)),this.m=p.m):p&&(w=String(p).match(yh))?(this.l=!1,un(this,w[1]||"",!0),this.o=yr(w[2]||""),this.g=yr(w[3]||"",!0),Di(this,w[4]),this.h=yr(w[5]||"",!0),Gc(this,w[6]||"",!0),this.m=yr(w[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}es.prototype.toString=function(){const p=[];var w=this.j;w&&p.push(Za(w,rl,!0),":");var E=this.g;return(E||w=="file")&&(p.push("//"),(w=this.o)&&p.push(Za(w,rl,!0),"@"),p.push(Gr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&p.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&p.push("/"),p.push(Za(E,E.charAt(0)=="/"?Kc:xh,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",Za(E,vh)),p.join("")},es.prototype.resolve=function(p){const w=Yt(this);let E=!!p.j;E?un(w,p.j):E=!!p.o,E?w.o=p.o:E=!!p.g,E?w.g=p.g:E=p.u!=null;var P=p.h;if(E)Di(w,p.u);else if(E=!!p.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var W=w.h.lastIndexOf("/");W!=-1&&(P=w.h.slice(0,W+1)+P)}if(W=P,W==".."||W==".")P="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){P=W.lastIndexOf("/",0)==0,W=W.split("/");const ie=[];for(let xe=0;xe<W.length;){const Ke=W[xe++];Ke=="."?P&&xe==W.length&&ie.push(""):Ke==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),P&&xe==W.length&&ie.push("")):(ie.push(Ke),P=!0)}P=ie.join("/")}else P=W}return E?w.h=P:E=p.i.toString()!=="",E?Gc(w,wh(p.i)):E=!!p.m,E&&(w.m=p.m),w};function Yt(p){return new es(p)}function un(p,w,E){p.j=E?yr(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function Di(p,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);p.u=w}else p.u=null}function Gc(p,w,E){w instanceof ki?(p.i=w,al(p.i,p.l)):(E||(w=Za(w,Mi)),p.i=new ki(w,p.l))}function mt(p,w,E){p.i.set(w,E)}function Wa(p){return mt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function yr(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Za(p,w,E){return typeof p=="string"?(p=encodeURI(p).replace(w,qn),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function qn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var rl=/[#\/\?@]/g,xh=/[#\?:]/g,Kc=/[#\?]/g,Mi=/[#\?@]/g,vh=/#/g;function ki(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function $n(p){p.g||(p.g=new Map,p.h=0,p.i&&sl(p.i,function(w,E){p.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}t=ki.prototype,t.add=function(p,w){$n(this),this.i=null,p=Pi(this,p);let E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(w),this.h+=1,this};function bh(p,w){$n(p),w=Pi(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function Yc(p,w){return $n(p),w=Pi(p,w),p.g.has(w)}t.forEach=function(p,w){$n(this),this.g.forEach(function(E,P){E.forEach(function(W){p.call(w,W,P,this)},this)},this)};function Xc(p,w){$n(p);let E=[];if(typeof w=="string")Yc(p,w)&&(E=E.concat(p.g.get(Pi(p,w))));else for(p=Array.from(p.g.values()),w=0;w<p.length;w++)E=E.concat(p[w]);return E}t.set=function(p,w){return $n(this),this.i=null,p=Pi(this,p),Yc(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},t.get=function(p,w){return p?(p=Xc(this,p),p.length>0?String(p[0]):w):w};function il(p,w,E){bh(p,w),E.length>0&&(p.i=null,p.g.set(Pi(p,w),T(E)),p.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(let P=0;P<w.length;P++){var E=w[P];const W=Gr(E);E=Xc(this,E);for(let ie=0;ie<E.length;ie++){let xe=W;E[ie]!==""&&(xe+="="+Gr(E[ie])),p.push(xe)}}return this.i=p.join("&")};function wh(p){const w=new ki;return w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),w}function Pi(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function al(p,w){w&&!p.j&&($n(p),p.i=null,p.g.forEach(function(E,P){const W=P.toLowerCase();P!=W&&(bh(this,P),il(this,W,E))},p)),p.j=w}function Us(p,w){const E=new Os;if(u.Image){const P=new Image;P.onload=y(ms,E,"TestLoadImage: loaded",!0,w,P),P.onerror=y(ms,E,"TestLoadImage: error",!1,w,P),P.onabort=y(ms,E,"TestLoadImage: abort",!1,w,P),P.ontimeout=y(ms,E,"TestLoadImage: timeout",!1,w,P),u.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=p}else w(!1)}function Qc(p,w){const E=new Os,P=new AbortController,W=setTimeout(()=>{P.abort(),ms(E,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:P.signal}).then(ie=>{clearTimeout(W),ie.ok?ms(E,"TestPingServer: ok",!0,w):ms(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),ms(E,"TestPingServer: error",!1,w)})}function ms(p,w,E,P,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),P(E)}catch{}}function Oi(){this.g=new lh}function xr(p){this.i=p.Sb||null,this.h=p.ab||!1}v(xr,ch),xr.prototype.g=function(){return new Ja(this.i,this.h)};function Ja(p,w){$t.call(this),this.H=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ja,$t),t=Ja.prototype,t.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=w,this.readyState=1,zs(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(w.body=p),(this.H||u).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ol(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function ol(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?Vi(this):zs(this),this.readyState==3&&ol(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,Vi(this))},t.Na=function(p){this.g&&(this.response=p,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(p){p.readyState=4,p.l=null,p.j=null,p.B=null,zs(p)}t.setRequestHeader=function(p,w){this.A.append(p,w)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,p.push(E[0]+": "+E[1]),E=w.next();return p.join(`\r
`)};function zs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ps(p){let w="";return q(p,function(E,P){w+=P,w+=":",w+=E,w+=`\r
`}),w}function eo(p,w,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=ps(E),typeof p=="string"?E!=null&&Gr(E):mt(p,w,E))}function yt(p){$t.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(yt,$t);var vr=/^https?$/i,Wc=["POST","PUT"];t=yt.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,w,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zc.g(),this.g.onreadystatechange=b(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(ie){to(this,ie);return}if(p=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var W in P)E.set(W,P[W]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ie of P.keys())E.set(ie,P.get(ie));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Wc,w,void 0)>=0)||P||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,xe]of E)this.g.setRequestHeader(ie,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ie){to(this,ie)}};function to(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.o=5,Zc(p),Kr(p)}function Zc(p){p.A||(p.A=!0,sn(p,"complete"),sn(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,sn(this,"complete"),sn(this,"abort"),Kr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?no(this):this.Xa())},t.Xa=function(){no(this)};function no(p){if(p.h&&typeof o<"u"){if(p.v&&Bs(p)==4)setTimeout(p.Ca.bind(p),0);else if(sn(p,"readystatechange"),Bs(p)==4){p.h=!1;try{const ie=p.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var P;if(P=ie===0){let xe=String(p.D).match(yh)[1]||null;!xe&&u.self&&u.self.location&&(xe=u.self.location.protocol.slice(0,-1)),P=!vr.test(xe?xe.toLowerCase():"")}E=P}if(E)sn(p,"complete"),sn(p,"success");else{p.o=6;try{var W=Bs(p)>2?p.g.statusText:""}catch{W=""}p.l=W+" ["+p.ca()+"]",Zc(p)}}finally{Kr(p)}}}}function Kr(p,w){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const E=p.g;p.g=null,w||sn(p,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Bs(p){return p.g?p.g.readyState:0}t.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),Dp(w)}};function mn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Yr(p){const w={};p=(p.g&&Bs(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<p.length;P++){if(D(p[P]))continue;var E=mh(p[P]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ie=w[W]||[];w[W]=ie,ie.push(E)}ye(w,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(p,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||w}function Li(p){this.za=0,this.i=[],this.j=new Os,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=br("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=br("baseRetryDelayMs",5e3,p),this.Za=br("retryDelaySeedMs",1e4,p),this.Ta=br("forwardChannelMaxRetries",2,p),this.va=br("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Bc(p&&p.concurrentRequestLimit),this.Ba=new Oi,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Li.prototype,t.ka=8,t.I=1,t.connect=function(p,w,E,P){Ht(0),this.W=p,this.H=w||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.J=Ch(this,null,this.W),wr(this)};function Jc(p){if(ll(p),p.I==3){var w=p.V++,E=Yt(p.J);if(mt(E,"SID",p.M),mt(E,"RID",w),mt(E,"TYPE","terminate"),so(p,E),w=new Vs(p,p.j,w),w.M=2,w.A=Wa(Yt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=w.A,E=!0),E||(w.g=jh(w.j,null),w.g.ea(w.A)),w.F=Date.now(),hr(w)}Sh(p)}function Ui(p){p.g&&(tu(p),p.g.cancel(),p.g=null)}function ll(p){Ui(p),p.v&&(u.clearTimeout(p.v),p.v=null),ul(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function wr(p){if(!Fc(p.h)&&!p.m){p.m=!0;var w=p.Ea;Y||N(),oe||(Y(),oe=!0),A.add(w,p),p.D=0}}function cl(p,w){return pr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=w.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=cr(m(p.Ea,p,w),Ah(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const W=new Vs(this,this.j,p);let ie=this.o;if(this.U&&(ie?(ie=O(ie),H(ie,this.U)):ie=this.U),this.u!==null||this.R||(W.J=ie,ie=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(w+=P,w>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=_h(this,W,w),E=Yt(this.J),mt(E,"RID",p),mt(E,"CVER",22),this.G&&mt(E,"X-HTTP-Session-Id",this.G),so(this,E),ie&&(this.R?w="headers="+Gr(ps(ie))+"&"+w:this.u&&eo(E,this.u,ie)),qc(this.h,W),this.Ra&&mt(E,"TYPE","init"),this.S?(mt(E,"$req",w),mt(E,"SID","null"),W.U=!0,dr(W,E,null)):dr(W,E,w),this.I=2}}else this.I==3&&(p?eu(this,p):this.i.length==0||Fc(this.h)||eu(this))};function eu(p,w){var E;w?E=w.l:E=p.V++;const P=Yt(p.J);mt(P,"SID",p.M),mt(P,"RID",E),mt(P,"AID",p.K),so(p,P),p.u&&p.o&&eo(P,p.u,p.o),E=new Vs(p,p.j,E,p.D+1),p.u===null&&(E.J=p.o),w&&(p.i=w.G.concat(p.i)),w=_h(p,E,1e3),E.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),qc(p.h,E),dr(E,P,w)}function so(p,w){p.H&&q(p.H,function(E,P){mt(w,P,E)}),p.l&&q({},function(E,P){mt(w,P,E)})}function _h(p,w,E){E=Math.min(p.i.length,E);const P=p.l?m(p.l.Ka,p.l,p):null;e:{var W=p.i;let Ke=-1;for(;;){const Ut=["count="+E];Ke==-1?E>0?(Ke=W[0].g,Ut.push("ofs="+Ke)):Ke=0:Ut.push("ofs="+Ke);let ut=!0;for(let Ct=0;Ct<E;Ct++){var ie=W[Ct].g;const gs=W[Ct].map;if(ie-=Ke,ie<0)Ke=Math.max(0,W[Ct].g-100),ut=!1;else try{ie="req"+ie+"_"||"";try{var xe=gs instanceof Map?gs:Object.entries(gs);for(const[Er,Fs]of xe){let qs=Fs;h(Fs)&&(qs=Ii(Fs)),Ut.push(ie+Er+"="+encodeURIComponent(qs))}}catch(Er){throw Ut.push(ie+"type="+encodeURIComponent("_badmap")),Er}}catch{P&&P(gs)}}if(ut){xe=Ut.join("&");break e}}xe=void 0}return p=p.i.splice(0,E),w.G=p,xe}function Eh(p){if(!p.g&&!p.v){p.Y=1;var w=p.Da;Y||N(),oe||(Y(),oe=!0),A.add(w,p),p.A=0}}function ro(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=cr(m(p.Da,p),Ah(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,Th(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=cr(m(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Ui(this),Th(this))};function tu(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Th(p){p.g=new Vs(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var w=Yt(p.na);mt(w,"RID","rpc"),mt(w,"SID",p.M),mt(w,"AID",p.K),mt(w,"CI",p.F?"0":"1"),!p.F&&p.ia&&mt(w,"TO",p.ia),mt(w,"TYPE","xmlhttp"),so(p,w),p.u&&p.o&&eo(w,p.u,p.o),p.O&&(p.g.H=p.O);var E=p.g;p=p.ba,E.M=1,E.A=Wa(Yt(w)),E.u=null,E.R=!0,tl(E,p)}t.Va=function(){this.C!=null&&(this.C=null,Ui(this),ro(this),Ht(19))};function ul(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Nh(p,w){var E=null;if(p.g==w){ul(p),tu(p),p.g=null;var P=2}else if(gr(p.h,w))E=w.G,$c(p.h,w),P=1;else return;if(p.I!=0){if(w.o)if(P==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var W=p.D;P=el(),sn(P,new lr(P,E)),wr(p)}else Eh(p);else if(W=w.m,W==3||W==0&&w.X>0||!(P==1&&cl(p,w)||P==2&&ro(p)))switch(E&&E.length>0&&(w=p.h,w.i=w.i.concat(E)),W){case 1:_r(p,5);break;case 4:_r(p,10);break;case 3:_r(p,6);break;default:_r(p,2)}}}function Ah(p,w){let E=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(E*=2),E*w}function _r(p,w){if(p.j.info("Error code "+w),w==2){var E=m(p.bb,p),P=p.Ua;const W=!P;P=new es(P||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||un(P,"https"),Wa(P),W?Us(P.toString(),E):Qc(P.toString(),E)}else Ht(2);p.I=0,p.l&&p.l.pa(w),Sh(p),ll(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Sh(p){if(p.I=0,p.ja=[],p.l){const w=Hc(p.h);(w.length!=0||p.i.length!=0)&&(R(p.ja,w),R(p.ja,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.oa()}}function Ch(p,w,E){var P=E instanceof es?Yt(E):new es(E);if(P.g!="")w&&(P.g=w+"."+P.g),Di(P,P.u);else{var W=u.location;P=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;const ie=new es(null);P&&un(ie,P),w&&(ie.g=w),W&&Di(ie,W),E&&(ie.h=E),P=ie}return E=p.G,w=p.wa,E&&w&&mt(P,E,w),mt(P,"VER",p.ka),so(p,P),P}function jh(p,w,E){if(w&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Aa&&!p.ma?new yt(new xr({ab:E})):new yt(p.ma),w.Fa(p.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rh(){}t=Rh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zi(){}zi.prototype.g=function(p,w){return new Mn(p,w)};function Mn(p,w){$t.call(this),this.g=new Li(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(p?p["X-WebChannel-Client-Profile"]=w.sa:p={"X-WebChannel-Client-Profile":w.sa}),this.g.U=p,(p=w&&w.Qb)&&!D(p)&&(this.g.u=p),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!D(w)&&(this.g.G=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new Xr(this)}v(Mn,$t),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Jc(this.g)},Mn.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var E={};E.__data__=p,p=E}else this.v&&(E={},E.__data__=Ii(p),p=E);w.i.push(new Kt(w.Ya++,p)),w.I==3&&wr(w)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Jc(this.g),delete this.g,Mn.Z.N.call(this)};function Ih(p){fn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){e:{for(const E in w){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}v(Ih,fn);function Dh(){hs.call(this),this.status=1}v(Dh,hs);function Xr(p){this.g=p}v(Xr,Rh),Xr.prototype.ra=function(){sn(this.g,"a")},Xr.prototype.qa=function(p){sn(this.g,new Ih(p))},Xr.prototype.pa=function(p){sn(this.g,new Dh)},Xr.prototype.oa=function(){sn(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,HS=function(){return new zi},$S=function(){return el()},qS=Lt,O0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xa.NO_ERROR=0,Xa.TIMEOUT=8,Xa.HTTP_ERROR=6,rm=Xa,Uc.COMPLETE="complete",FS=Uc,uh.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",$t.prototype.listen=$t.prototype.J,Qu=uh,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,BS=yt}).apply(typeof Uf<"u"?Uf:typeof self<"u"?self:typeof window<"u"?window:{});const $E="@firebase/firestore",HE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new Bx("@firebase/firestore");function Fl(){return zo.logLevel}function Ee(t,...e){if(zo.logLevel<=tt.DEBUG){const n=e.map(Jx);zo.debug(`Firestore (${Ec}): ${t}`,...n)}}function wi(t,...e){if(zo.logLevel<=tt.ERROR){const n=e.map(Jx);zo.error(`Firestore (${Ec}): ${t}`,...n)}}function cc(t,...e){if(zo.logLevel<=tt.WARN){const n=e.map(Jx);zo.warn(`Firestore (${Ec}): ${t}`,...n)}}function Jx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,GS(t,s,n)}function GS(t,e,n){let s=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw wi(s),new Error(s)}function ht(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||GS(e,i,s)}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Sn.UNAUTHENTICATED)))}shutdown(){}}class w5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _5{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0,42304);let s=this.i;const i=f=>this.i!==s?(s=this.i,n(f)):Promise.resolve();let o=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gi,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},h=f=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gi)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ht(typeof s.accessToken=="string",31837,{l:s}),new KS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class E5{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class T5{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new E5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class GE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ls(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ht(this.o===void 0,3512);const s=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const i=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new GE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new GE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=A5(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<n&&(s+=e.charAt(i[o]%62))}return s}}function nt(t,e){return t<e?-1:t>e?1:0}function V0(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),o=e.charAt(s);if(i!==o)return $y(i)===$y(o)?nt(i,o):$y(i)?1:-1}return nt(t.length,e.length)}const S5=55296,C5=57343;function $y(t){const e=t.charCodeAt(0);return e>=S5&&e<=C5}function uc(t,e,n){return t.length===e.length&&t.every(((s,i)=>n(s,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="__name__";class Cr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Le(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const o=Cr.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return nt(e.length,n.length)}static compareSegments(e,n){const s=Cr.isNumericId(e),i=Cr.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Cr.extractNumericId(e).compare(Cr.extractNumericId(n)):V0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class Tt extends Cr{construct(e,n,s){return new Tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new Tt(n)}static emptyPath(){return new Tt([])}}const j5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Cr{construct(e,n,s){return new En(e,n,s)}static isValidIdentifier(e){return j5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KE}static keyField(){return new En([KE])}static fromServerFormat(e){const n=[];let s="",i=0;const o=()=>{if(s.length===0)throw new we(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new we(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new we(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(s+=h,i++):(o(),i++)}if(o(),u)throw new we(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Tt.fromString(e))}static fromName(e){return new Me(Tt.fromString(e).popFirst(5))}static empty(){return new Me(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t,e,n){if(!n)throw new we(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R5(t,e,n,s){if(e===!0&&s===!0)throw new we(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YE(t){if(!Me.isDocumentKey(t))throw new we(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XE(t){if(Me.isDocumentKey(t))throw new we(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function XS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le(12329,{type:typeof t})}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ip(t);throw new we(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function I5(t,e){if(e<=0)throw new we(ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Hd(t,e){if(!XS(t))throw new we(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const u=t[s];if(i&&typeof u!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${s}' field to equal '${o.value}'`;break}}if(n)throw new we(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=-62135596800,WE=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(e){return fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*WE);return new fe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<QE)throw new we(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WE}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hd(e,fe._jsonSchema))return new fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:nn("string",fe._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new fe(0,0))}static max(){return new Fe(new fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=-1;function D5(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(s===1e9?new fe(n+1,0):new fe(n,s));return new Ra(i,Me.empty(),e)}function M5(t){return new Ra(t.readTime,t.key,vd)}class Ra{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ra(Fe.min(),Me.empty(),vd)}static max(){return new Ra(Fe.max(),Me.empty(),vd)}}function k5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==P5)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(s,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,s)=>{n(e)}))}static reject(e){return new pe(((n,s)=>{s(e)}))}static waitFor(e){return new pe(((n,s)=>{let i=0,o=0,u=!1;e.forEach((h=>{++i,h.next((()=>{++o,u&&o===i&&n()}),(f=>s(f)))})),u=!0,o===i&&n()}))}static or(e){let n=pe.resolve(!1);for(const s of e)n=n.next((i=>i?pe.resolve(i):s()));return n}static forEach(e,n){const s=[];return e.forEach(((i,o)=>{s.push(n.call(this,i,o))})),this.waitFor(s)}static mapArray(e,n){return new pe(((s,i)=>{const o=e.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;n(e[m]).next((y=>{u[m]=y,++h,h===o&&s(u)}),(y=>i(y)))}}))}static doWhile(e,n){return new pe(((s,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):s()};o()}))}}function V5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ap.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-1;function op(t){return t==null}function Cm(t){return t===0&&1/t==-1/0}function L5(t){return typeof t=="number"&&Number.isInteger(t)&&!Cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="";function U5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ZE(e)),e=z5(t.get(n),e);return ZE(e)}function z5(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case QS:n+="";break;default:n+=o}}return n}function ZE(t){return t+QS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?s(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,s,i,o){this.key=e,this.value=n,this.color=s??_n.RED,this.left=i??_n.EMPTY,this.right=o??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,o){return new _n(e??this.key,n??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const o=s(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,s),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,n,s,i,o){return this}insert(e,n,s){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eT(this.data.getIterator())}getIteratorFrom(e){return new eT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class eT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new cs([])}unionWith(e){let n=new ln(En.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new cs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ZS("Invalid base64 string: "+o):o}})(e);return new Tn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o})(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const B5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ia(t){if(ht(!!t,39018),typeof t=="string"){let e=0;const n=B5.exec(t);if(ht(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Da(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="server_timestamp",eC="__type__",tC="__previous_value__",nC="__local_write_time__";function nv(t){return(t?.mapValue?.fields||{})[eC]?.stringValue===JS}function lp(t){const e=t.mapValue.fields[tC];return nv(e)?lp(e):e}function bd(t){const e=Ia(t.mapValue.fields[nC].timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n,s,i,o,u,h,f,m,y){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const jm="(default)";class wd{constructor(e,n){this.projectId=e,this.database=n||jm}static empty(){return new wd("","")}get isDefaultDatabase(){return this.database===jm}isEqual(e){return e instanceof wd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="__type__",q5="__max__",Bf={mapValue:{}},rC="__vector__",Rm="value";function Ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nv(t)?4:H5(t)?9007199254740991:$5(t)?10:11:Le(28295,{value:t})}function Lr(t,e){if(t===e)return!0;const n=Ma(t);if(n!==Ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bd(t).isEqual(bd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=Ia(i.timestampValue),h=Ia(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Da(i.bytesValue).isEqual(Da(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return qt(i.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(i.geoPointValue.longitude)===qt(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return qt(i.integerValue)===qt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=qt(i.doubleValue),h=qt(o.doubleValue);return u===h?Cm(u)===Cm(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return(function(i,o){const u=i.mapValue.fields||{},h=o.mapValue.fields||{};if(JE(u)!==JE(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Lr(u[f],h[f])))return!1;return!0})(t,e);default:return Le(52216,{left:t})}}function _d(t,e){return(t.values||[]).find((n=>Lr(n,e)))!==void 0}function dc(t,e){if(t===e)return 0;const n=Ma(t),s=Ma(e);if(n!==s)return nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=qt(o.integerValue||o.doubleValue),f=qt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(t,e);case 3:return tT(t.timestampValue,e.timestampValue);case 4:return tT(bd(t),bd(e));case 5:return V0(t.stringValue,e.stringValue);case 6:return(function(o,u){const h=Da(o),f=Da(u);return h.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const y=nt(h[m],f[m]);if(y!==0)return y}return nt(h.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=nt(qt(o.latitude),qt(u.latitude));return h!==0?h:nt(qt(o.longitude),qt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return nT(t.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},f=u.fields||{},m=h[Rm]?.arrayValue,y=f[Rm]?.arrayValue,v=nt(m?.values?.length||0,y?.values?.length||0);return v!==0?v:nT(m,y)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Bf.mapValue&&u===Bf.mapValue)return 0;if(o===Bf.mapValue)return 1;if(u===Bf.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const b=V0(f[v],y[v]);if(b!==0)return b;const T=dc(h[f[v]],m[y[v]]);if(T!==0)return T}return nt(f.length,y.length)})(t.mapValue,e.mapValue);default:throw Le(23264,{he:n})}}function tT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=Ia(t),s=Ia(e),i=nt(n.seconds,s.seconds);return i!==0?i:nt(n.nanos,s.nanos)}function nT(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const o=dc(n[i],s[i]);if(o)return o}return nt(n.length,s.length)}function hc(t){return L0(t)}function L0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Ia(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Da(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Me.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",i=!0;for(const o of n.values||[])i?i=!1:s+=",",s+=L0(o);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const u of s)o?o=!1:i+=",",i+=`${u}:${L0(n.fields[u])}`;return i+"}"})(t.mapValue):Le(61005,{value:t})}function im(t){switch(Ma(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lp(t);return e?16+im(e):16;case 5:return 2*t.stringValue.length;case 6:return Da(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,o)=>i+im(o)),0)})(t.arrayValue);case 10:case 11:return(function(s){let i=0;return Fa(s.fields,((o,u)=>{i+=o.length+im(u)})),i})(t.mapValue);default:throw Le(13486,{value:t})}}function sT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function U0(t){return!!t&&"integerValue"in t}function sv(t){return!!t&&"arrayValue"in t}function rT(t){return!!t&&"nullValue"in t}function iT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function am(t){return!!t&&"mapValue"in t}function $5(t){return(t?.mapValue?.fields||{})[sC]?.stringValue===rC}function rd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fa(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=rd(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rd(t.arrayValue.values[n]);return e}return{...t}}function H5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===q5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!am(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rd(n)}setAll(e){let n=En.emptyPath(),s={},i=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,s,i),s={},i=[],n=h.popLast()}u?s[h.lastSegment()]=rd(u):i.push(h.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,s,i)}delete(e){const n=this.field(e.popLast());am(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];am(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Fa(n,((i,o)=>e[i]=o));for(const i of s)delete e[i]}clone(){return new Wn(rd(this.value))}}function iC(t){const e=[];return Fa(t.fields,((n,s)=>{const i=new En([n]);if(am(s)){const o=iC(s.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)})),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,s,i,o,u,h){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new jn(e,0,Fe.min(),Fe.min(),Fe.min(),Wn.empty(),0)}static newFoundDocument(e,n,s,i){return new jn(e,1,n,Fe.min(),s,i,0)}static newNoDocument(e,n){return new jn(e,2,n,Fe.min(),Fe.min(),Wn.empty(),0)}static newUnknownDocument(e,n){return new jn(e,3,n,Fe.min(),Fe.min(),Wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.position=e,this.inclusive=n}}function aT(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const o=e[i],u=t.position[i];if(o.field.isKeyField()?s=Me.comparator(Me.fromName(u.referenceValue),n.key):s=dc(u,n.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function oT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n="asc"){this.field=e,this.dir=n}}function G5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class tn extends aC{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Y5(e,n,s):n==="array-contains"?new W5(e,s):n==="in"?new Z5(e,s):n==="not-in"?new J5(e,s):n==="array-contains-any"?new e6(e,s):new tn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new X5(e,s):new Q5(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dc(n,this.value)):n!==null&&Ma(this.value)===Ma(n)&&this.matchesComparison(dc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends aC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new nr(e,n)}matches(e){return oC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oC(t){return t.op==="and"}function lC(t){return K5(t)&&oC(t)}function K5(t){for(const e of t.filters)if(e instanceof nr)return!1;return!0}function z0(t){if(t instanceof tn)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(lC(t))return t.filters.map((e=>z0(e))).join(",");{const e=t.filters.map((n=>z0(n))).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof tn?(function(s,i){return i instanceof tn&&s.op===i.op&&s.field.isEqual(i.field)&&Lr(s.value,i.value)})(t,e):t instanceof nr?(function(s,i){return i instanceof nr&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((o,u,h)=>o&&cC(u,i.filters[h])),!0):!1})(t,e):void Le(19439)}function uC(t){return t instanceof tn?(function(n){return`${n.field.canonicalString()} ${n.op} ${hc(n.value)}`})(t):t instanceof nr?(function(n){return n.op.toString()+" {"+n.getFilters().map(uC).join(" ,")+"}"})(t):"Filter"}class Y5 extends tn{constructor(e,n,s){super(e,n,s),this.key=Me.fromName(s.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class X5 extends tn{constructor(e,n){super(e,"in",n),this.keys=dC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Q5 extends tn{constructor(e,n){super(e,"not-in",n),this.keys=dC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function dC(t,e){return(e.arrayValue?.values||[]).map((n=>Me.fromName(n.referenceValue)))}class W5 extends tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sv(n)&&_d(n.arrayValue,this.value)}}class Z5 extends tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_d(this.value.arrayValue,n)}}class J5 extends tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(_d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_d(this.value.arrayValue,n)}}class e6 extends tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>_d(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n=null,s=[],i=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function lT(t,e=null,n=[],s=[],i=null,o=null,u=null){return new t6(t,e,n,s,i,o,u)}function rv(t){const e=He(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>z0(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),op(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>hc(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>hc(s))).join(",")),e.Te=n}return e.Te}function iv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oT(t.startAt,e.startAt)&&oT(t.endAt,e.endAt)}function B0(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n=null,s=[],i=[],o=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function n6(t,e,n,s,i,o,u,h){return new Ac(t,e,n,s,i,o,u,h)}function cp(t){return new Ac(t)}function cT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hC(t){return t.collectionGroup!==null}function id(t){const e=He(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ln(En.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ed(o,s))})),n.has(En.keyField().canonicalString())||e.Ie.push(new Ed(En.keyField(),s))}return e.Ie}function Dr(t){const e=He(t);return e.Ee||(e.Ee=s6(e,id(t))),e.Ee}function s6(t,e){if(t.limitType==="F")return lT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Ed(i.field,o)}));const n=t.endAt?new Im(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Im(t.startAt.position,t.startAt.inclusive):null;return lT(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function F0(t,e){const n=t.filters.concat([e]);return new Ac(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dm(t,e,n){return new Ac(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return iv(Dr(t),Dr(e))&&t.limitType===e.limitType}function fC(t){return`${rv(Dr(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>uC(i))).join(", ")}]`),op(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>hc(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>hc(i))).join(",")),`Target(${s})`})(Dr(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&(function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):Me.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(t,e)&&(function(s,i){for(const o of id(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(s,i){return!(s.startAt&&!(function(u,h,f){const m=aT(u,h,f);return u.inclusive?m<=0:m<0})(s.startAt,id(s),i)||s.endAt&&!(function(u,h,f){const m=aT(u,h,f);return u.inclusive?m>=0:m>0})(s.endAt,id(s),i))})(t,e)}function r6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mC(t){return(e,n)=>{let s=!1;for(const i of id(t)){const o=i6(i,e,n);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function i6(t,e,n){const s=t.field.isKeyField()?Me.comparator(e.key,n.key):(function(o,u,h){const f=u.data.field(o),m=h.data.field(o);return f!==null&&m!==null?dc(f,m):Le(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,((n,s)=>{for(const[i,o]of s)e(i,o)}))}isEmpty(){return WS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new Mt(Me.comparator);function _i(){return a6}const pC=new Mt(Me.comparator);function Wu(...t){let e=pC;for(const n of t)e=e.insert(n.key,n);return e}function gC(t){let e=pC;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function So(){return ad()}function yC(){return ad()}function ad(){return new Qo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const o6=new Mt(Me.comparator),l6=new ln(Me.comparator);function st(...t){let e=l6;for(const n of t)e=e.add(n);return e}const c6=new ln(nt);function u6(){return c6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cm(e)?"-0":e}}function xC(t){return{integerValue:""+t}}function d6(t,e){return L5(e)?xC(e):av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this._=void 0}}function h6(t,e,n){return t instanceof Td?(function(i,o){const u={fields:{[eC]:{stringValue:JS},[nC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&nv(o)&&(o=lp(o)),o&&(u.fields[tC]=o),{mapValue:u}})(n,e):t instanceof fc?bC(t,e):t instanceof Nd?wC(t,e):(function(i,o){const u=vC(i,o),h=uT(u)+uT(i.Ae);return U0(u)&&U0(i.Ae)?xC(h):av(i.serializer,h)})(t,e)}function f6(t,e,n){return t instanceof fc?bC(t,e):t instanceof Nd?wC(t,e):n}function vC(t,e){return t instanceof Mm?(function(s){return U0(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class Td extends hp{}class fc extends hp{constructor(e){super(),this.elements=e}}function bC(t,e){const n=_C(e);for(const s of t.elements)n.some((i=>Lr(i,s)))||n.push(s);return{arrayValue:{values:n}}}class Nd extends hp{constructor(e){super(),this.elements=e}}function wC(t,e){let n=_C(e);for(const s of t.elements)n=n.filter((i=>!Lr(i,s)));return{arrayValue:{values:n}}}class Mm extends hp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uT(t){return qt(t.integerValue||t.doubleValue)}function _C(t){return sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.field=e,this.transform=n}}function m6(t,e){return t.field.isEqual(e.field)&&(function(s,i){return s instanceof fc&&i instanceof fc||s instanceof Nd&&i instanceof Nd?uc(s.elements,i.elements,Lr):s instanceof Mm&&i instanceof Mm?Lr(s.Ae,i.Ae):s instanceof Td&&i instanceof Td})(t.transform,e.transform)}class p6{constructor(e,n){this.version=e,this.transformResults=n}}class zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function om(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fp{}function TC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mp(t.key,zn.none()):new Gd(t.key,t.data,zn.none());{const n=t.data,s=Wn.empty();let i=new ln(En.comparator);for(let o of e.fields)if(!i.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?s.delete(o):s.set(o,u),i=i.add(o)}return new qa(t.key,s,new cs(i.toArray()),zn.none())}}function g6(t,e,n){t instanceof Gd?(function(i,o,u){const h=i.value.clone(),f=hT(i.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof qa?(function(i,o,u){if(!om(i.precondition,o))return void o.convertToUnknownDocument(u.version);const h=hT(i.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(NC(i)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function od(t,e,n,s){return t instanceof Gd?(function(o,u,h,f){if(!om(o.precondition,u))return h;const m=o.value.clone(),y=fT(o.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,s):t instanceof qa?(function(o,u,h,f){if(!om(o.precondition,u))return h;const m=fT(o.fieldTransforms,f,u),y=u.data;return y.setAll(NC(o)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,s):(function(o,u,h){return om(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function y6(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),o=vC(s.transform,i||null);o!=null&&(n===null&&(n=Wn.empty()),n.set(s.field,o))}return n||null}function dT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&uc(s,i,((o,u)=>m6(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gd extends fp{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qa extends fp{constructor(e,n,s,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function NC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function hT(t,e,n){const s=new Map;ht(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],u=o.transform,h=e.data.field(o.field);s.set(o.field,f6(u,h,n[i]))}return s}function fT(t,e,n){const s=new Map;for(const i of t){const o=i.transform,u=n.data.field(i.field);s.set(i.field,h6(o,u,e))}return s}class mp extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x6 extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&g6(o,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=od(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=od(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=yC();return this.mutations.forEach((i=>{const o=e.get(i.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=n.has(i.key)?null:h;const f=TC(u,h);f!==null&&s.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Fe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),st())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,((n,s)=>dT(n,s)))&&uc(this.baseMutations,e.baseMutations,((n,s)=>dT(n,s)))}}class ov{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){ht(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return o6})();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,s[u].version);return new ov(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,at;function _6(t){switch(t){case ue.OK:return Le(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Le(15467,{code:t})}}function AC(t){if(t===void 0)return wi("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Jt.OK:return ue.OK;case Jt.CANCELLED:return ue.CANCELLED;case Jt.UNKNOWN:return ue.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return ue.INTERNAL;case Jt.UNAVAILABLE:return ue.UNAVAILABLE;case Jt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Jt.NOT_FOUND:return ue.NOT_FOUND;case Jt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Jt.ABORTED:return ue.ABORTED;case Jt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Jt.DATA_LOSS:return ue.DATA_LOSS;default:return Le(39323,{code:t})}}(at=Jt||(Jt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=new Ta([4294967295,4294967295],0);function mT(t){const e=E6().encode(t),n=new zS;return n.update(e),new Uint8Array(n.digest())}function pT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ta([n,s],0),new Ta([i,o],0)]}class lv{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Zu(`Invalid padding: ${n}`);if(s<0)throw new Zu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Zu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ta.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(Ta.fromNumber(s)));return i.compare(T6)===1&&(i=new Ta([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=mT(e),[s,i]=pT(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,i,o);if(!this.we(u))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new lv(o,i,n);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=mT(e),[s,i]=pT(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,i,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,s,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new pp(Fe.min(),i,new Mt(nt),_i(),st())}}class Kd{constructor(e,n,s,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Kd(s,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,s,i){this.be=e,this.removedTargetIds=n,this.key=s,this.De=i}}class SC{constructor(e,n){this.targetId=e,this.Ce=n}}class CC{constructor(e,n,s=Tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class gT{constructor(){this.ve=0,this.Fe=yT(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),n=st(),s=st();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:Le(38017,{changeType:o})}})),new Kd(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=yT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class N6{constructor(e){this.Ge=e,this.ze=new Map,this.je=_i(),this.Je=Ff(),this.He=Ff(),this.Ye=new Mt(nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(B0(o))if(s===0){const u=new Me(o.path);this.et(n,u,jn.newNoDocument(u,Fe.min()))}else ht(s===1,20013,{expectedCount:s});else{const u=this._t(n);if(u!==s){const h=this.ut(e),f=h?this.ct(h,e,u):1;if(f!==0){this.it(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=n;let u,h;try{u=Da(s).toUint8Array()}catch(f){if(f instanceof ZS)return cc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new lv(u,i,o)}catch(f){return cc(f instanceof Zu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&B0(h.target)){const f=new Me(h.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,jn.newNoDocument(f,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let s=st();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const i=new pp(e,n,this.Ye,this.je,s);return this.je=_i(),this.Je=Ff(),this.He=Ff(),this.Ye=new Mt(nt),i}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new gT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ln(nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ln(nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ff(){return new Mt(Me.comparator)}function yT(){return new Mt(Me.comparator)}const A6={asc:"ASCENDING",desc:"DESCENDING"},S6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C6={and:"AND",or:"OR"};class j6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function q0(t,e){return t.useProto3Json||op(e)?e:{value:e}}function km(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R6(t,e){return km(t,e.toTimestamp())}function Mr(t){return ht(!!t,49232),Fe.fromTimestamp((function(n){const s=Ia(n);return new fe(s.seconds,s.nanos)})(t))}function cv(t,e){return $0(t,e).canonicalString()}function $0(t,e){const n=(function(i){return new Tt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function RC(t){const e=Tt.fromString(t);return ht(PC(e),10190,{key:e.toString()}),e}function H0(t,e){return cv(t.databaseId,e.path)}function Hy(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(DC(n))}function IC(t,e){return cv(t.databaseId,e)}function I6(t){const e=RC(t);return e.length===4?Tt.emptyPath():DC(e)}function G0(t){return new Tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DC(t){return ht(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xT(t,e,n){return{name:H0(t,e),fields:n.value.mapValue.fields}}function D6(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Le(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(m,y){return m.useProto3Json?(ht(y===void 0||typeof y=="string",58123),Tn.fromBase64String(y||"")):(ht(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Tn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const y=m.code===void 0?ue.UNKNOWN:AC(m.code);return new we(y,m.message||"")})(u);n=new CC(s,i,o,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Hy(t,s.document.name),o=Mr(s.document.updateTime),u=s.document.createTime?Mr(s.document.createTime):Fe.min(),h=new Wn({mapValue:{fields:s.document.fields}}),f=jn.newFoundDocument(i,o,u,h),m=s.targetIds||[],y=s.removedTargetIds||[];n=new lm(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Hy(t,s.document),o=s.readTime?Mr(s.readTime):Fe.min(),u=jn.newNoDocument(i,o),h=s.removedTargetIds||[];n=new lm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Hy(t,s.document),o=s.removedTargetIds||[];n=new lm([],o,i,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:o}=s,u=new w6(i,o),h=s.targetId;n=new SC(h,u)}}return n}function M6(t,e){let n;if(e instanceof Gd)n={update:xT(t,e.key,e.value)};else if(e instanceof mp)n={delete:H0(t,e.key)};else if(e instanceof qa)n={update:xT(t,e.key,e.data),updateMask:F6(e.fieldMask)};else{if(!(e instanceof x6))return Le(16599,{Vt:e.type});n={verify:H0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(o,u){const h=u.transform;if(h instanceof Td)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof fc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Nd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Mm)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Le(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:R6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le(27497)})(t,e.precondition)),n}function k6(t,e){return t&&t.length>0?(ht(e!==void 0,14353),t.map((n=>(function(i,o){let u=i.updateTime?Mr(i.updateTime):Mr(o);return u.isEqual(Fe.min())&&(u=Mr(o)),new p6(u,i.transformResults||[])})(n,e)))):[]}function P6(t,e){return{documents:[IC(t,e.path)]}}function O6(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=IC(t,i);const o=(function(m){if(m.length!==0)return kC(nr.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(m){if(m.length!==0)return m.map((y=>(function(b){return{field:$l(b.field),direction:U6(b.dir)}})(y)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=q0(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:i}}function V6(t){let e=I6(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){ht(s===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(v){const b=MC(v);return b instanceof nr&&lC(b)?b.getFilters():[b]})(n.where));let u=[];n.orderBy&&(u=(function(v){return v.map((b=>(function(R){return new Ed(Hl(R.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(b)))})(n.orderBy));let h=null;n.limit&&(h=(function(v){let b;return b=typeof v=="object"?v.value:v,op(b)?null:b})(n.limit));let f=null;n.startAt&&(f=(function(v){const b=!!v.before,T=v.values||[];return new Im(T,b)})(n.startAt));let m=null;return n.endAt&&(m=(function(v){const b=!v.before,T=v.values||[];return new Im(T,b)})(n.endAt)),n6(e,i,u,o,h,"F",f,m)}function L6(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Hl(n.unaryFilter.field);return tn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Hl(n.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hl(n.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Hl(n.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(t):t.fieldFilter!==void 0?(function(n){return tn.create(Hl(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return nr.create(n.compositeFilter.filters.map((s=>MC(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(n.compositeFilter.op))})(t):Le(30097,{filter:t})}function U6(t){return A6[t]}function z6(t){return S6[t]}function B6(t){return C6[t]}function $l(t){return{fieldPath:t.canonicalString()}}function Hl(t){return En.fromServerFormat(t.fieldPath)}function kC(t){return t instanceof tn?(function(n){if(n.op==="=="){if(iT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NAN"}};if(rT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NOT_NAN"}};if(rT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(n.field),op:z6(n.op),value:n.value}}})(t):t instanceof nr?(function(n){const s=n.getFilters().map((i=>kC(i)));return s.length===1?s[0]:{compositeFilter:{op:B6(n.op),filters:s}}})(t):Le(54877,{filter:t})}function F6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function PC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n,s,i,o=Fe.min(),u=Fe.min(),h=Tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.yt=e}}function $6(t){const e=V6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.Cn=new G6}addToCollectionParentIndex(e,n){return this.Cn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Ra.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Ra.min())}updateCollectionGroup(e,n,s){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class G6{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new ln(Tt.comparator),o=!i.has(s);return this.index[n]=i.add(s),o}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new ln(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OC=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(OC,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mc(0)}static cr(){return new mc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="LruGarbageCollector",K6=1048576;function wT([t,e],[n,s]){const i=nt(t,n);return i===0?nt(e,s):i}class Y6{constructor(e){this.Ir=e,this.buffer=new ln(wT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();wT(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class X6{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(bT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nc(n)?Ee(bT,"Ignoring IndexedDB error during garbage collection: ",n):await Tc(n)}await this.Vr(3e5)}))}}class Q6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(ap.ce);const s=new Y6(n);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(vT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vT):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,i,o,u,h,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,u=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(s=v,h=Date.now(),this.removeTargets(e,s,n)))).next((v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(m=Date.now(),Fl()<=tt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${i} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v}))))}}function W6(t,e){return new Q6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.changes=new Qo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?pe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(s!==null&&od(s.mutation,i,cs.empty(),fe.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,st()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=st()){const i=So();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,s).next((o=>{let u=Wu();return o.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const s=So();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,st())))}populateOverlays(e,n,s){const i=[];return s.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,s,i){let o=_i();const u=ad(),h=(function(){return ad()})();return n.forEach(((f,m)=>{const y=s.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof qa)?o=o.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),od(y.mutation,m,y.mutation.getFieldMask(),fe.now())):u.set(m.key,cs.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((m,y)=>u.set(m,y))),n.forEach(((m,y)=>h.set(m,new J6(y,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,n){const s=ad();let i=new Mt(((u,h)=>u-h)),o=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=n.get(f);if(m===null)return;let y=s.get(f)||cs.empty();y=h.applyToLocalView(m,y),s.set(f,y);const v=(i.get(h.batchId)||st()).add(f);i=i.insert(h.batchId,v)}))})).next((()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,y=f.value,v=yC();y.forEach((b=>{if(!o.has(b)){const T=TC(n.get(b),s.get(b));T!==null&&v.set(b,T),o=o.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return pe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,i){return(function(u){return Me.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next((o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-o.size):pe.resolve(So());let h=vd,f=o;return u.next((m=>pe.forEach(m,((y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?pe.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{f=f.insert(y,b)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,f,m,st()))).next((y=>({batchId:h,changes:gC(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((s=>{let i=Wu();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const o=n.collectionGroup;let u=Wu();return this.indexManager.getCollectionParents(e,o).next((h=>pe.forEach(h,(f=>{const m=(function(v,b){return new Ac(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,s,i).next((y=>{y.forEach(((v,b)=>{u=u.insert(v,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,o,i)))).next((u=>{o.forEach(((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,jn.newInvalidDocument(y)))}));let h=Wu();return u.forEach(((f,m)=>{const y=o.get(f);y!==void 0&&od(y.mutation,m,cs.empty(),fe.now()),dp(n,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return pe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Mr(i.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:$6(i.bundledQuery),readTime:Mr(i.readTime)}})(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.overlays=new Mt(Me.comparator),this.qr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=So();return pe.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&s.set(i,o)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((i,o)=>{this.St(e,n,o)})),pe.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),pe.resolve()}getOverlaysForCollection(e,n,s){const i=So(),o=n.length+1,u=new Me(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>s&&i.set(f.getKey(),f)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let o=new Mt(((m,y)=>m-y));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let y=o.get(m.largestBatchId);y===null&&(y=So(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=So(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>h.set(m,y))),!(h.size()>=i)););return pe.resolve(h)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new b6(n,s));let o=this.qr.get(n);o===void 0&&(o=st(),this.qr.set(n,o)),this.qr.set(n,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.Qr=new ln(hn.$r),this.Ur=new ln(hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new hn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new hn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Me(new Tt([])),s=new hn(n,e),i=new hn(n,e+1),o=[];return this.Ur.forEachInRange([s,i],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Me(new Tt([])),s=new hn(n,e),i=new hn(n,e+1);let o=st();return this.Ur.forEachInRange([s,i],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new hn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class hn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Me.comparator(e.key,n.key)||nt(e.Yr,n.Yr)}static Kr(e,n){return nt(e.Yr,n.Yr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ln(hn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new v6(o,n,s,i);this.mutationQueue.push(u);for(const h of i)this.Zr=this.Zr.add(new hn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(u)}lookupMutationBatch(e,n){return pe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ei(s),o=i<0?0:i;return pe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?tv:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new hn(n,0),i=new hn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,i],(u=>{const h=this.Xr(u.Yr);o.push(h)})),pe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ln(nt);return n.forEach((i=>{const o=new hn(i,0),u=new hn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{s=s.add(h.Yr)}))})),pe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let o=s;Me.isDocumentKey(o)||(o=o.child(""));const u=new hn(new Me(o),0);let h=new ln(nt);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!s.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.Yr)),!0)}),u),pe.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return pe.forEach(n.mutations,(i=>{const o=new hn(i.key,n.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new hn(n,0),i=this.Zr.firstAfterOrEqual(s);return pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),o=i?i.size:0,u=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return pe.resolve(s?s.document.mutableCopy():jn.newInvalidDocument(n))}getEntries(e,n){let s=_i();return n.forEach((i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():jn.newInvalidDocument(i))})),pe.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let o=_i();const u=n.path,h=new Me(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||k5(M5(y),s)<=0||(i.has(y.key)||dp(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,n,s,i){Le(9500)}ii(e,n){return pe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new aO(this)}getSize(e){return pe.resolve(this.size)}}class aO extends Z6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),pe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.persistence=e,this.si=new Qo((n=>rv(n)),iv),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new uv,this.targetCount=0,this.ai=mc.ur()}forEachTarget(e,n){return this.si.forEach(((s,i)=>n(i))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),pe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new mc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Pr(n),pe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,s){let i=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&s.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),pe.waitFor(o).next((()=>i))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return pe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),pe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((u=>{o.push(i.markPotentiallyOrphaned(e,u))})),pe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return pe.resolve(s)}containsKey(e,n){return pe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.ui={},this.overlays={},this.ci=new ap(0),this.li=!1,this.li=!0,this.hi=new sO,this.referenceDelegate=e(this),this.Pi=new oO(this),this.indexManager=new H6,this.remoteDocumentCache=(function(i){return new iO(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new q6(n),this.Ii=new tO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new rO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ee("MemoryPersistence","Starting transaction:",e);const i=new lO(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return pe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class lO extends O5{constructor(e){super(),this.currentSequenceNumber=e}}class dv{constructor(e){this.persistence=e,this.Ri=new uv,this.Vi=null}static mi(e){return new dv(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),pe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(s=>{const i=Me.fromPath(s);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Fe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pm{constructor(e,n){this.persistence=e,this.pi=new Qo((s=>U5(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=W6(this,n)}static mi(e,n){return new Pm(e,n)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((i=>s+i))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return pe.forEach(this.pi,((s,i)=>this.br(e,s,i).next((o=>o?pe.resolve():n(i)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,n).next((h=>{h||(s++,o.removeEntry(u,Fe.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=im(e.data.value)),n}br(e,n,s){return pe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return pe.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=i}static As(e,n){let s=st(),i=st();for(const o of n.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new hv(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return OM()?8:V5(In())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,i,s).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new cO;return this.Ss(e,n,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>o.result))}bs(e,n,s,i){return s.documentReadCount<this.fs?(Fl()<=tt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(Fl()<=tt.DEBUG&&Ee("QueryEngine","Query:",ql(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Fl()<=tt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(n))):pe.resolve())}ys(e,n){if(cT(n))return pe.resolve(null);let s=Dr(n);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Dm(n,null,"F"),s=Dr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const u=st(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((f=>{const m=this.Ds(n,h);return this.Cs(n,m,u,f.readTime)?this.ys(e,Dm(n,null,"F")):this.vs(e,m,n,f)}))))})))))}ws(e,n,s,i){return cT(n)||i.isEqual(Fe.min())?pe.resolve(null):this.ps.getDocuments(e,s).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,s,i)?pe.resolve(null):(Fl()<=tt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(n)),this.vs(e,u,n,D5(i,vd)).next((h=>h)))}))}Ds(e,n){let s=new ln(mC(e));return n.forEach(((i,o)=>{dp(e,o)&&(s=s.add(o))})),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,s){return Fl()<=tt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",ql(n)),this.ps.getDocumentsMatchingQuery(e,n,Ra.min(),s)}vs(e,n,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="LocalStore",dO=3e8;class hO{constructor(e,n,s,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Mt(nt),this.xs=new Qo((o=>rv(o)),iv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function fO(t,e,n,s){return new hO(t,e,n,s)}async function LC(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((o=>{const u=[],h=[];let f=st();for(const m of i){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of o){h.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(s,f).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function mO(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,y){const v=m.batch,b=v.keys();let T=pe.resolve();return b.forEach((R=>{T=T.next((()=>y.getEntry(f,R))).next((M=>{const j=m.docVersions.get(R);ht(j!==null,48541),M.version.compareTo(j)<0&&(v.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),y.addEntry(M)))}))})),T.next((()=>h.mutationQueue.removeMutationBatch(f,v)))})(n,s,e,o).next((()=>o.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let f=st();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function UC(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function pO(t,e){const n=He(t),s=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const h=[];e.targetChanges.forEach(((y,v)=>{const b=i.get(v);if(!b)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,v).next((()=>n.Pi.addMatchingKeys(o,y.addedDocuments,v))));let T=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Tn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,s)),i=i.insert(v,T),(function(M,j,k){return M.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=dO?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(b,T,y)&&h.push(n.Pi.updateTargetData(o,T))}));let f=_i(),m=st();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),h.push(gO(o,u,e.documentUpdates).next((y=>{f=y.ks,m=y.qs}))),!s.isEqual(Fe.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next((v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));h.push(y)}return pe.waitFor(h).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,m))).next((()=>f))})).then((o=>(n.Ms=i,o)))}function gO(t,e,n){let s=st(),i=st();return n.forEach((o=>s=s.add(o))),e.getEntries(t,s).next((o=>{let u=_i();return n.forEach(((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(Fe.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):Ee(fv,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:u,qs:i}}))}function yO(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=tv),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function xO(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,e).next((o=>o?(i=o,pe.resolve(i)):n.Pi.allocateTargetId(s).next((u=>(i=new ba(e,u,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function K0(t,e,n){const s=He(t),i=s.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",o,(u=>s.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Nc(u))throw u;Ee(fv,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function _T(t,e,n){const s=He(t);let i=Fe.min(),o=st();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,y){const v=He(f),b=v.xs.get(y);return b!==void 0?pe.resolve(v.Ms.get(b)):v.Pi.getTargetData(m,y)})(s,u,Dr(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{o=f}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,n?i:Fe.min(),n?o:st()))).next((h=>(vO(s,r6(e),h),{documents:h,Qs:o})))))}function vO(t,e,n){let s=t.Os.get(e)||Fe.min();n.forEach(((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),t.Os.set(e,s)}class ET{constructor(){this.activeTargetIds=u6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bO{constructor(){this.Mo=new ET,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ET,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="ConnectivityMonitor";class NT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(TT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(TT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf=null;function Y0(){return qf===null?qf=(function(){return 268435456+Math.round(2147483648*Math.random())})():qf++,"0x"+qf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="RestConnection",_O={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===jm?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,n,s,i,o){const u=Y0(),h=this.zo(e,n.toUriEncodedString());Ee(Gy,`Sending RPC '${e}' ${u}:`,h,s);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,o);const{host:m}=new URL(h),y=Ko(m);return this.Jo(e,h,f,s,y).then((v=>(Ee(Gy,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw cc(Gy,`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",s),v}))}Ho(e,n,s,i,o,u){return this.Go(e,n,s,i,o)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),s&&s.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const s=_O[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class NO extends EO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,o){const u=Y0();return new Promise(((h,f)=>{const m=new BS;m.setWithCredentials(!0),m.listenOnce(FS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case rm.NO_ERROR:const v=m.getResponseJson();Ee(An,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case rm.TIMEOUT:Ee(An,`RPC '${e}' ${u} timed out`),f(new we(ue.DEADLINE_EXCEEDED,"Request time out"));break;case rm.HTTP_ERROR:const b=m.getStatus();if(Ee(An,`RPC '${e}' ${u} failed with status:`,b,"response text:",m.getResponseText()),b>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T?.error;if(R&&R.status&&R.message){const M=(function(k){const U=k.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(U)>=0?U:ue.UNKNOWN})(R.status);f(new we(M,R.message))}else f(new we(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new we(ue.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ee(An,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(i);Ee(An,`RPC '${e}' ${u} sending request:`,i),m.send(n,"POST",y,s,15)}))}T_(e,n,s){const i=Y0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=HS(),h=$S(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,s),f.encodeInitMessageHeaders=!0;const y=o.join("");Ee(An,`Creating RPC '${e}' stream ${i}: ${y}`,f);const v=u.createWebChannel(y,f);this.I_(v);let b=!1,T=!1;const R=new TO({Yo:j=>{T?Ee(An,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(b||(Ee(An,`Opening RPC '${e}' stream ${i} transport.`),v.open(),b=!0),Ee(An,`RPC '${e}' stream ${i} sending:`,j),v.send(j))},Zo:()=>v.close()}),M=(j,k,U)=>{j.listen(k,(V=>{try{U(V)}catch($){setTimeout((()=>{throw $}),0)}}))};return M(v,Qu.EventType.OPEN,(()=>{T||(Ee(An,`RPC '${e}' stream ${i} transport opened.`),R.o_())})),M(v,Qu.EventType.CLOSE,(()=>{T||(T=!0,Ee(An,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(v))})),M(v,Qu.EventType.ERROR,(j=>{T||(T=!0,cc(An,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),R.a_(new we(ue.UNAVAILABLE,"The operation could not be completed")))})),M(v,Qu.EventType.MESSAGE,(j=>{if(!T){const k=j.data[0];ht(!!k,16349);const U=k,V=U?.error||U[0]?.error;if(V){Ee(An,`RPC '${e}' stream ${i} received error:`,V);const $=V.status;let Y=(function(N){const C=Jt[N];if(C!==void 0)return AC(C)})($),oe=V.message;Y===void 0&&(Y=ue.INTERNAL,oe="Unknown error status: "+$+" with message "+V.message),T=!0,R.a_(new we(Y,oe)),v.close()}else Ee(An,`RPC '${e}' stream ${i} received:`,k),R.u_(k)}})),M(h,qS.STAT_EVENT,(j=>{j.stat===O0.PROXY?Ee(An,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===O0.NOPROXY&&Ee(An,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Ky(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return new j6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,s=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="PersistentStream";class BC{constructor(e,n,s,i,o,u,h,f){this.Mi=e,this.S_=s,this.b_=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(wi(n.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{e((()=>{const i=new we(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(AT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ee(AT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AO extends BC{constructor(e,n,s,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=D6(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Fe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Fe.min():u.readTime?Mr(u.readTime):Fe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=G0(this.serializer),n.addTarget=(function(o,u){let h;const f=u.target;if(h=B0(f)?{documents:P6(o,f)}:{query:O6(o,f).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=jC(o,u.resumeToken);const m=q0(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Fe.min())>0){h.readTime=km(o,u.snapshotVersion.toTimestamp());const m=q0(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const s=L6(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=G0(this.serializer),n.removeTarget=e,this.q_(n)}}class SO extends BC{constructor(e,n,s,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=k6(e.writeResults,e.commitTime),s=Mr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=G0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>M6(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{}class jO extends CO{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new we(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,$0(n,s),i,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ue.UNKNOWN,o.toString())}))}Ho(e,n,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,$0(n,s),i,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ue.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wi(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="RemoteStore";class IO{constructor(e,n,s,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Wo(this)&&(Ee(Bo,"Restarting streams for network reachability change."),await(async function(f){const m=He(f);m.Ea.add(4),await Yd(m),m.Ra.set("Unknown"),m.Ea.delete(4),await yp(m)})(this))}))})),this.Ra=new RO(s,i)}}async function yp(t){if(Wo(t))for(const e of t.da)await e(!0)}async function Yd(t){for(const e of t.da)await e(!1)}function FC(t,e){const n=He(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yv(n)?gv(n):Sc(n).O_()&&pv(n,e))}function mv(t,e){const n=He(t),s=Sc(n);n.Ia.delete(e),s.O_()&&qC(n,e),n.Ia.size===0&&(s.O_()?s.L_():Wo(n)&&n.Ra.set("Unknown"))}function pv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sc(t).Y_(e)}function qC(t,e){t.Va.Ue(e),Sc(t).Z_(e)}function gv(t){t.Va=new N6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sc(t).start(),t.Ra.ua()}function yv(t){return Wo(t)&&!Sc(t).x_()&&t.Ia.size>0}function Wo(t){return He(t).Ea.size===0}function $C(t){t.Va=void 0}async function DO(t){t.Ra.set("Online")}async function MO(t){t.Ia.forEach(((e,n)=>{pv(t,e)}))}async function kO(t,e){$C(t),yv(t)?(t.Ra.ha(e),gv(t)):t.Ra.set("Unknown")}async function PO(t,e,n){if(t.Ra.set("Online"),e instanceof CC&&e.state===2&&e.cause)try{await(async function(i,o){const u=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.Ia.delete(h),i.Va.removeTarget(h))})(t,e)}catch(s){Ee(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Om(t,s)}else if(e instanceof lm?t.Va.Ze(e):e instanceof SC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Fe.min()))try{const s=await UC(t.localStore);n.compareTo(s)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(m);y&&o.Ia.set(m,y.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(Tn.EMPTY_BYTE_STRING,y.snapshotVersion)),qC(o,f);const v=new ba(y.target,f,m,y.sequenceNumber);pv(o,v)})),o.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(s){Ee(Bo,"Failed to raise snapshot:",s),await Om(t,s)}}async function Om(t,e,n){if(!Nc(e))throw e;t.Ea.add(1),await Yd(t),t.Ra.set("Offline"),n||(n=()=>UC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(Bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yp(t)}))}function HC(t,e){return e().catch((n=>Om(t,n,e)))}async function xp(t){const e=He(t),n=ka(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tv;for(;OO(e);)try{const i=await yO(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,VO(e,i)}catch(i){await Om(e,i)}GC(e)&&KC(e)}function OO(t){return Wo(t)&&t.Ta.length<10}function VO(t,e){t.Ta.push(e);const n=ka(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GC(t){return Wo(t)&&!ka(t).x_()&&t.Ta.length>0}function KC(t){ka(t).start()}async function LO(t){ka(t).ra()}async function UO(t){const e=ka(t);for(const n of t.Ta)e.ea(n.mutations)}async function zO(t,e,n){const s=t.Ta.shift(),i=ov.from(s,e,n);await HC(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await xp(t)}async function BO(t,e){e&&ka(t).X_&&await(async function(s,i){if((function(u){return _6(u)&&u!==ue.ABORTED})(i.code)){const o=s.Ta.shift();ka(s).B_(),await HC(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i))),await xp(s)}})(t,e),GC(t)&&KC(t)}async function ST(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),Ee(Bo,"RemoteStore received new credentials");const s=Wo(n);n.Ea.add(3),await Yd(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yp(n)}async function FO(t,e){const n=He(t);e?(n.Ea.delete(2),await yp(n)):e||(n.Ea.add(2),await Yd(n),n.Ra.set("Unknown"))}function Sc(t){return t.ma||(t.ma=(function(n,s,i){const o=He(n);return o.sa(),new AO(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:DO.bind(null,t),t_:MO.bind(null,t),r_:kO.bind(null,t),H_:PO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),yv(t)?gv(t):t.Ra.set("Unknown")):(await t.ma.stop(),$C(t))}))),t.ma}function ka(t){return t.fa||(t.fa=(function(n,s,i){const o=He(n);return o.sa(),new SO(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:LO.bind(null,t),r_:BO.bind(null,t),ta:UO.bind(null,t),na:zO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await xp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ee(Bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,s,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,o){const u=Date.now()+s,h=new xv(e,n,u,i,o);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vv(t,e){if(wi("AsyncQueue",`${e}: ${t}`),Nc(t))return new we(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{static emptySet(e){return new sc(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Me.comparator(n.key,s.key):(n,s)=>Me.comparator(n.key,s.key),this.keyedMap=Wu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new sc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.ga=new Mt(Me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class pc{constructor(e,n,s,i,o,u,h,f,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,i,o){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new pc(e,n,sc.emptySet(n),u,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $O{constructor(){this.queries=jT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=He(n),o=i.queries;i.queries=jT(),o.forEach(((u,h)=>{for(const f of h.Sa)f.onError(s)}))})(this,new we(ue.ABORTED,"Firestore shutting down"))}}function jT(){return new Qo((t=>fC(t)),up)}async function bv(t,e){const n=He(t);let s=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(s=2):(o=new qO,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const h=vv(u,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&_v(n)}async function wv(t,e){const n=He(t),s=e.query;let i=3;const o=n.queries.get(s);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function HO(t,e){const n=He(t);let s=!1;for(const i of e){const o=i.query,u=n.queries.get(o);if(u){for(const h of u.Sa)h.Fa(i)&&(s=!0);u.wa=i}}s&&_v(n)}function GO(t,e,n){const s=He(t),i=s.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);s.queries.delete(e)}function _v(t){t.Ca.forEach((e=>{e.next()}))}var X0,RT;(RT=X0||(X0={})).Ma="default",RT.Cache="cache";class Ev{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new pc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==X0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.key=e}}class XC{constructor(e){this.key=e}}class KO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=mC(e),this.tu=new sc(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new CT,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,v)=>{const b=i.get(y),T=dp(this.query,v)?v:null,R=!!b&&this.mutatedKeys.has(b.key),M=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;b&&T?b.data.isEqual(T.data)?R!==M&&(s.track({type:3,doc:T}),j=!0):this.su(b,T)||(s.track({type:2,doc:T}),j=!0,(f&&this.eu(T,f)>0||m&&this.eu(T,m)<0)&&(h=!0)):!b&&T?(s.track({type:0,doc:T}),j=!0):b&&!T&&(s.track({type:1,doc:b}),j=!0,(f||m)&&(h=!0)),j&&(T?(u=u.add(T),o=M?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),s.track({type:1,doc:y})}return{tu:u,iu:s,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,v)=>(function(T,R){const M=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:j})}};return M(T)-M(R)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(s),i=i??!1;const h=n&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,m=f!==this.Za;return this.Za=f,u.length!==0||m?{snapshot:new pc(this.query,e.tu,o,u,e.mutatedKeys,f===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new XC(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new YC(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=st();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return pc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tv="SyncEngine";class YO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class XO{constructor(e){this.key=e,this.hu=!1}}class QO{constructor(e,n,s,i,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Qo((h=>fC(h)),up),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Me.comparator),this.Au=new Map,this.Ru=new uv,this.Vu={},this.mu=new Map,this.fu=mc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WO(t,e,n=!0){const s=tj(t);let i;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await QC(s,e,n,!0),i}async function ZO(t,e){const n=tj(t);await QC(n,e,!0,!1)}async function QC(t,e,n,s){const i=await xO(t.localStore,Dr(e)),o=i.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let h;return s&&(h=await JO(t,e,o,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&FC(t.remoteStore,i),h}async function JO(t,e,n,s,i){t.pu=(v,b,T)=>(async function(M,j,k,U){let V=j.view.ru(k);V.Cs&&(V=await _T(M.localStore,j.query,!1).then((({documents:A})=>j.view.ru(A,V))));const $=U&&U.targetChanges.get(j.targetId),Y=U&&U.targetMismatches.get(j.targetId)!=null,oe=j.view.applyChanges(V,M.isPrimaryClient,$,Y);return DT(M,j.targetId,oe.au),oe.snapshot})(t,v,b,T);const o=await _T(t.localStore,e,!0),u=new KO(e,o.Qs),h=u.ru(o.documents),f=Kd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),m=u.applyChanges(h,t.isPrimaryClient,f);DT(t,n,m.au);const y=new YO(e,n,u);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function eV(t,e,n){const s=He(t),i=s.Tu.get(e),o=s.Iu.get(i.targetId);if(o.length>1)return s.Iu.set(i.targetId,o.filter((u=>!up(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await K0(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&mv(s.remoteStore,i.targetId),Q0(s,i.targetId)})).catch(Tc)):(Q0(s,i.targetId),await K0(s.localStore,i.targetId,!0))}async function tV(t,e){const n=He(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),mv(n.remoteStore,s.targetId))}async function nV(t,e,n){const s=cV(t);try{const i=await(function(u,h){const f=He(u),m=fe.now(),y=h.reduce(((T,R)=>T.add(R.key)),st());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let R=_i(),M=st();return f.Ns.getEntries(T,y).next((j=>{R=j,R.forEach(((k,U)=>{U.isValidDocument()||(M=M.add(k))}))})).next((()=>f.localDocuments.getOverlayedDocuments(T,R))).next((j=>{v=j;const k=[];for(const U of h){const V=y6(U,v.get(U.key).overlayedDocument);V!=null&&k.push(new qa(U.key,V,iC(V.value.mapValue),zn.exists(!0)))}return f.mutationQueue.addMutationBatch(T,m,k,h)})).next((j=>{b=j;const k=j.applyToLocalDocumentSet(v,M);return f.documentOverlayCache.saveOverlays(T,j.batchId,k)}))})).then((()=>({batchId:b.batchId,changes:gC(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(u,h,f){let m=u.Vu[u.currentUser.toKey()];m||(m=new Mt(nt)),m=m.insert(h,f),u.Vu[u.currentUser.toKey()]=m})(s,i.batchId,n),await Xd(s,i.changes),await xp(s.remoteStore)}catch(i){const o=vv(i,"Failed to persist write");n.reject(o)}}async function WC(t,e){const n=He(t);try{const s=await pO(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const u=n.Au.get(o);u&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?ht(u.hu,14607):i.removedDocuments.size>0&&(ht(u.hu,42227),u.hu=!1))})),await Xd(n,s,e)}catch(s){await Tc(s)}}function IT(t,e,n){const s=He(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(u,h){const f=He(u);f.onlineState=h;let m=!1;f.queries.forEach(((y,v)=>{for(const b of v.Sa)b.va(h)&&(m=!0)})),m&&_v(f)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function sV(t,e,n){const s=He(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),o=i&&i.key;if(o){let u=new Mt(Me.comparator);u=u.insert(o,jn.newNoDocument(o,Fe.min()));const h=st().add(o),f=new pp(Fe.min(),new Map,new Mt(nt),u,h);await WC(s,f),s.du=s.du.remove(o),s.Au.delete(e),Nv(s)}else await K0(s.localStore,e,!1).then((()=>Q0(s,e,n))).catch(Tc)}async function rV(t,e){const n=He(t),s=e.batch.batchId;try{const i=await mO(n.localStore,e);JC(n,s,null),ZC(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Xd(n,i)}catch(i){await Tc(i)}}async function iV(t,e,n){const s=He(t);try{const i=await(function(u,h){const f=He(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next((v=>(ht(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(m,v)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(s.localStore,e);JC(s,e,n),ZC(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Xd(s,i)}catch(i){await Tc(i)}}function ZC(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function JC(t,e,n){const s=He(t);let i=s.Vu[s.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Q0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||ej(t,s)}))}function ej(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Nv(t))}function DT(t,e,n){for(const s of n)s instanceof YC?(t.Ru.addReference(s.key,e),aV(t,s)):s instanceof XC?(Ee(Tv,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||ej(t,s.key)):Le(19791,{wu:s})}function aV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Ee(Tv,"New document in limbo: "+n),t.Eu.add(s),Nv(t))}function Nv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Me(Tt.fromString(e)),s=t.fu.next();t.Au.set(s,new XO(n)),t.du=t.du.insert(n,s),FC(t.remoteStore,new ba(Dr(cp(n.path)),s,"TargetPurposeLimboResolution",ap.ce))}}async function Xd(t,e,n){const s=He(t),i=[],o=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,f)=>{u.push(s.pu(f,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const y=m?!m.fromCache:n?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(m){i.push(m);const y=hv.As(f.targetId,m);o.push(y)}})))})),await Promise.all(u),s.Pu.H_(i),await(async function(f,m){const y=He(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>pe.forEach(m,(b=>pe.forEach(b.Es,(T=>y.persistence.referenceDelegate.addReference(v,b.targetId,T))).next((()=>pe.forEach(b.ds,(T=>y.persistence.referenceDelegate.removeReference(v,b.targetId,T)))))))))}catch(v){if(!Nc(v))throw v;Ee(fv,"Failed to update sequence numbers: "+v)}for(const v of m){const b=v.targetId;if(!v.fromCache){const T=y.Ms.get(b),R=T.snapshotVersion,M=T.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(b,M)}}})(s.localStore,o))}async function oV(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){Ee(Tv,"User change. New user:",e.toKey());const s=await LC(n.localStore,e);n.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new we(ue.CANCELLED,u))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Xd(n,s.Ls)}}function lV(t,e){const n=He(t),s=n.Au.get(e);if(s&&s.hu)return st().add(s.key);{let i=st();const o=n.Iu.get(e);if(!o)return i;for(const u of o){const h=n.Tu.get(u);i=i.unionWith(h.view.nu)}return i}}function tj(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sV.bind(null,e),e.Pu.H_=HO.bind(null,e.eventManager),e.Pu.yu=GO.bind(null,e.eventManager),e}function cV(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iV.bind(null,e),e}class Vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fO(this.persistence,new uO,e.initialUser,this.serializer)}Cu(e){return new VC(dv.mi,this.serializer)}Du(e){return new bO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vm.provider={build:()=>new Vm};class uV extends Vm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ht(this.persistence.referenceDelegate instanceof Pm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new X6(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new VC((s=>Pm.mi(s,n)),this.serializer)}}class W0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>IT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oV.bind(null,this.syncEngine),await FO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $O})()}createDatastore(e){const n=gp(e.databaseInfo.databaseId),s=(function(o){return new NO(o)})(e.databaseInfo);return(function(o,u,h,f){return new jO(o,u,h,f)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,i,o,u,h){return new IO(s,i,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>IT(this.syncEngine,n,0)),(function(){return NT.v()?new NT:new wO})())}createSyncEngine(e,n){return(function(i,o,u,h,f,m,y){const v=new QO(i,o,u,h,f,m);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=He(n);Ee(Bo,"RemoteStore shutting down."),s.Ea.add(5),await Yd(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}W0.provider={build:()=>new W0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="FirestoreClient";class dV{constructor(e,n,s,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Sn.UNAUTHENTICATED,this.clientId=ev.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async u=>{Ee(Pa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Ee(Pa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=vv(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Yy(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(Pa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async i=>{s.isEqual(i)||(await LC(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function MT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hV(t);Ee(Pa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>ST(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,i)=>ST(e.remoteStore,i))),t._onlineComponents=e}async function hV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(Pa,"Using user provided OfflineComponentProvider");try{await Yy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;cc("Error using user provided cache. Falling back to memory cache: "+n),await Yy(t,new Vm)}}else Ee(Pa,"Using default OfflineComponentProvider"),await Yy(t,new uV(void 0));return t._offlineComponents}async function nj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(Pa,"Using user provided OnlineComponentProvider"),await MT(t,t._uninitializedComponentsProvider._online)):(Ee(Pa,"Using default OnlineComponentProvider"),await MT(t,new W0))),t._onlineComponents}function fV(t){return nj(t).then((e=>e.syncEngine))}async function Lm(t){const e=await nj(t),n=e.eventManager;return n.onListen=WO.bind(null,e.syncEngine),n.onUnlisten=eV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tV.bind(null,e.syncEngine),n}function mV(t,e,n={}){const s=new gi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,f,m){const y=new Av({next:b=>{y.Nu(),u.enqueueAndForget((()=>wv(o,v)));const T=b.docs.has(h);!T&&b.fromCache?m.reject(new we(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&b.fromCache&&f&&f.source==="server"?m.reject(new we(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new Ev(cp(h.path),y,{includeMetadataChanges:!0,qa:!0});return bv(o,v)})(await Lm(t),t.asyncQueue,e,n,s))),s.promise}function pV(t,e,n={}){const s=new gi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,f,m){const y=new Av({next:b=>{y.Nu(),u.enqueueAndForget((()=>wv(o,v))),b.fromCache&&f.source==="server"?m.reject(new we(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new Ev(h,y,{includeMetadataChanges:!0,qa:!0});return bv(o,v)})(await Lm(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="firestore.googleapis.com",PT=!0;class OT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rj,this.ssl=PT}else this.host=e.host,this.ssl=e.ssl??PT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K6)throw new we(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sj(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new b5;switch(s.type){case"firstParty":return new T5(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=kT.get(n);s&&(Ee("ComponentProvider","Removing Datastore"),kT.delete(n),s.terminate())})(this),Promise.resolve()}}function gV(t,e,n,s={}){t=Un(t,vp);const i=Ko(e),o=t._getSettings(),u={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;i&&(Ux(`https://${h}`),zx("Firestore",!0)),o.host!==rj&&o.host!==h&&cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:i,emulatorOptions:s};if(!Ca(f,u)&&(t._setSettings(f),s.mockUserToken)){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Sn.MOCK_USER;else{m=ZA(s.mockUserToken,t._app?.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new we(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Sn(v)}t._authCredentials=new w5(new KS(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Hd(n,Vt._jsonSchema))return new Vt(e,s||null,new Me(Tt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:nn("string",Vt._jsonSchemaVersion),referencePath:nn("string")};class Na extends Si{constructor(e,n,s){super(e,n,cp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Me(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function ve(t,e,...n){if(t=St(t),YS("collection","path",e),t instanceof vp){const s=Tt.fromString(e,...n);return XE(s),new Na(t,null,s)}{if(!(t instanceof Vt||t instanceof Na))throw new we(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Tt.fromString(e,...n));return XE(s),new Na(t.firestore,null,s)}}function Ne(t,e,...n){if(t=St(t),arguments.length===1&&(e=ev.newId()),YS("doc","path",e),t instanceof vp){const s=Tt.fromString(e,...n);return YE(s),new Vt(t,null,new Me(s))}{if(!(t instanceof Vt||t instanceof Na))throw new we(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Tt.fromString(e,...n));return YE(s),new Vt(t.firestore,t instanceof Na?t.converter:null,new Me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zC(this,"async_queue_retry"),this._c=()=>{const s=Ky();s&&Ee(VT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Ky();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ky();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nc(e))throw e;Ee(VT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,wi("INTERNAL UNHANDLED ERROR: ",UT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=xv.createAndSchedule(this,e,n,s,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Le(47125,{Pc:UT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function UT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of s)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Ur extends vp{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new LT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function yV(t,e){const n=typeof t=="object"?t:$x(),s=typeof t=="string"?t:jm,i=tp(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=XA("firestore");o&&gV(i,...o)}return i}function Qd(t){if(t._terminated)throw new we(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xV(t),t._firestoreClient}function xV(t){const e=t._freezeSettings(),n=(function(i,o,u,h){return new F5(i,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(Tn.fromBase64String(e))}catch(n){throw new we(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ss(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ss._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hd(e,Ss._jsonSchema))return Ss.fromBase64String(e.bytes)}}Ss._jsonSchemaVersion="firestore/bytes/1.0",Ss._jsonSchema={type:nn("string",Ss._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kr._jsonSchemaVersion}}static fromJSON(e){if(Hd(e,kr._jsonSchema))return new kr(e.latitude,e.longitude)}}kr._jsonSchemaVersion="firestore/geoPoint/1.0",kr._jsonSchema={type:nn("string",kr._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hd(e,Pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Pr(e.vectorValues);throw new we(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:nn("string",Pr._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=/^__.*__$/;class bV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new qa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gd(e,this.data,n,this.fieldTransforms)}}class ij{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new qa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:t})}}class bp{constructor(e,n,s,i,o,u){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aj(this.Ac)&&vV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||gp(e)}Cc(e,n,s,i=!1){return new bp({Ac:e,methodName:n,Dc:s,path:En.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jd(t){const e=t._freezeSettings(),n=gp(t._databaseId);return new wV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sv(t,e,n,s,i,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Rv("Data must be an object, but it was:",u,s);const h=cj(s,u);let f,m;if(o.merge)f=new cs(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const b=Z0(e,v,n);if(!u.contains(b))throw new we(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);dj(y,b)||y.push(b)}f=new cs(y),m=u.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,m=u.fieldTransforms;return new bV(new Wn(h),f,m)}class wp extends Zd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}function _V(t,e,n){return new bp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cv extends Zd{_toFieldTransform(e){return new EC(e.path,new Td)}isEqual(e){return e instanceof Cv}}class jv extends Zd{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=_V(this,e,!0),s=this.vc.map((o=>Cc(o,n))),i=new fc(s);return new EC(e.path,i)}isEqual(e){return e instanceof jv&&Ca(this.vc,e.vc)}}function oj(t,e,n,s){const i=t.Cc(1,e,n);Rv("Data must be an object, but it was:",i,s);const o=[],u=Wn.empty();Fa(s,((f,m)=>{const y=Iv(e,f,n);m=St(m);const v=i.yc(y);if(m instanceof wp)o.push(y);else{const b=Cc(m,v);b!=null&&(o.push(y),u.set(y,b))}}));const h=new cs(o);return new ij(u,h,i.fieldTransforms)}function lj(t,e,n,s,i,o){const u=t.Cc(1,e,n),h=[Z0(e,s,n)],f=[i];if(o.length%2!=0)throw new we(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)h.push(Z0(e,o[b])),f.push(o[b+1]);const m=[],y=Wn.empty();for(let b=h.length-1;b>=0;--b)if(!dj(m,h[b])){const T=h[b];let R=f[b];R=St(R);const M=u.yc(T);if(R instanceof wp)m.push(T);else{const j=Cc(R,M);j!=null&&(m.push(T),y.set(T,j))}}const v=new cs(m);return new ij(y,v,u.fieldTransforms)}function EV(t,e,n,s=!1){return Cc(n,t.Cc(s?4:3,e))}function Cc(t,e){if(uj(t=St(t)))return Rv("Unsupported field value:",e,t),cj(t,e);if(t instanceof Zd)return(function(s,i){if(!aj(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,i){const o=[];let u=0;for(const h of s){let f=Cc(h,i.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(t,e)}return(function(s,i){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return d6(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=fe.fromDate(s);return{timestampValue:km(i.serializer,o)}}if(s instanceof fe){const o=new fe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:km(i.serializer,o)}}if(s instanceof kr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ss)return{bytesValue:jC(i.serializer,s._byteString)};if(s instanceof Vt){const o=i.databaseId,u=s.firestore._databaseId;if(!u.isEqual(o))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cv(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Pr)return(function(u,h){return{mapValue:{fields:{[sC]:{stringValue:rC},[Rm]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return av(h.serializer,m)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${ip(s)}`)})(t,e)}function cj(t,e){const n={};return WS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(t,((s,i)=>{const o=Cc(i,e.mc(s));o!=null&&(n[s]=o)})),{mapValue:{fields:n}}}function uj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof kr||t instanceof Ss||t instanceof Vt||t instanceof Zd||t instanceof Pr)}function Rv(t,e,n){if(!uj(n)||!XS(n)){const s=ip(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Z0(t,e,n){if((e=St(e))instanceof Wd)return e._internalPath;if(typeof e=="string")return Iv(t,e);throw Um("Field path arguments must be of type string or ",t,!1,void 0,n)}const TV=new RegExp("[~\\*/\\[\\]]");function Iv(t,e,n){if(e.search(TV)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wd(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Um(t,e,n,s,i){const o=s&&!s.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${s}`),u&&(f+=` in document ${i}`),f+=")"),new we(ue.INVALID_ARGUMENT,h+t+f)}function dj(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,s,i,o){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_p("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NV extends hj{data(){return super.data()}}function _p(t,e){return typeof e=="string"?Iv(t,e):e instanceof Wd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dv{}class Mv extends Dv{}function Ie(t,e,...n){let s=[];e instanceof Dv&&s.push(e),s=s.concat(n),(function(o){const u=o.filter((f=>f instanceof kv)).length,h=o.filter((f=>f instanceof Ep)).length;if(u>1||u>0&&h>0)throw new we(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)t=i._apply(t);return t}class Ep extends Mv{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ep(e,n,s)}_apply(e){const n=this._parse(e);return mj(e._query,n),new Si(e.firestore,e.converter,F0(e._query,n))}_parse(e){const n=Jd(e.firestore);return(function(o,u,h,f,m,y,v){let b;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new we(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){FT(v,y);const R=[];for(const M of v)R.push(BT(f,o,M));b={arrayValue:{values:R}}}else b=BT(f,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||FT(v,y),b=EV(h,u,v,y==="in"||y==="not-in");return tn.create(m,y,b)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ge(t,e,n){const s=e,i=_p("where",t);return Ep._create(i,s,n)}class kv extends Dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kv(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:nr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let u=i;const h=o.getFlattenedFilters();for(const f of h)mj(u,f),u=F0(u,f)})(e._query,n),new Si(e.firestore,e.converter,F0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pv extends Mv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pv(e,n)}_apply(e){const n=(function(i,o,u){if(i.startAt!==null)throw new we(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new we(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ed(o,u)})(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,(function(i,o){const u=i.explicitOrderBy.concat([o]);return new Ac(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function it(t,e="asc"){const n=e,s=_p("orderBy",t);return Pv._create(s,n)}class Ov extends Mv{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Ov(e,n,s)}_apply(e){return new Si(e.firestore,e.converter,Dm(e._query,this._limit,this._limitType))}}function cm(t){return I5("limit",t),Ov._create("limit",t,"F")}function BT(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new we(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hC(e)&&n.indexOf("/")!==-1)throw new we(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Tt.fromString(n));if(!Me.isDocumentKey(s))throw new we(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return sT(t,new Me(s))}if(n instanceof Vt)return sT(t,n._key);throw new we(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(n)}.`)}function FT(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mj(t,e){const n=(function(i,o){for(const u of i)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new we(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AV{convertValue(e,n="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fa(e,((i,o)=>{s[i]=this.convertValue(o,n)})),s}convertVectorValue(e){const n=e.fields?.[Rm].arrayValue?.values?.map((s=>qt(s.doubleValue)));return new Pr(n)}convertGeoPoint(e){return new kr(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=lp(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(bd(e));default:return null}}convertTimestamp(e){const n=Ia(e);return new fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Tt.fromString(e);ht(PC(s),9688,{name:e});const i=new wd(s.get(1),s.get(3)),o=new Me(s.popFirst(5));return i.isEqual(n)||wi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ro extends hj{constructor(e,n,s,i,o,u){super(e,n,s,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(_p("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ro._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ro._jsonSchema={type:nn("string",Ro._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class um extends Ro{data(e={}){return super.data(e)}}class Io{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ju(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new um(this._firestore,this._userDataWriter,s.key,s,new Ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((h=>{const f=new um(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Ju(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new um(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Ju(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:SV(h.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ev.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){t=Un(t,Vt);const e=Un(t.firestore,Ur);return mV(Qd(e),t._key).then((n=>pj(e,t,n)))}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:nn("string",Io._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};class Lv extends AV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function Ue(t){t=Un(t,Si);const e=Un(t.firestore,Ur),n=Qd(e),s=new Lv(e);return fj(t._query),pV(n,t._query).then((i=>new Io(e,s,t,i)))}function Cs(t,e,n){t=Un(t,Vt);const s=Un(t.firestore,Ur),i=Vv(t.converter,e,n);return eh(s,[Sv(Jd(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zn.none())])}function _t(t,e,n,...s){t=Un(t,Vt);const i=Un(t.firestore,Ur),o=Jd(i);let u;return u=typeof(e=St(e))=="string"||e instanceof Wd?lj(o,"updateDoc",t._key,e,n,s):oj(o,"updateDoc",t._key,e),eh(i,[u.toMutation(t._key,zn.exists(!0))])}function us(t){return eh(Un(t.firestore,Ur),[new mp(t._key,zn.none())])}function Bn(t,e){const n=Un(t.firestore,Ur),s=Ne(t),i=Vv(t.converter,e);return eh(n,[Sv(Jd(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,zn.exists(!1))]).then((()=>s))}function Vn(t,...e){t=St(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||zT(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(zT(e[s])){const f=e[s];e[s]=f.next?.bind(f),e[s+1]=f.error?.bind(f),e[s+2]=f.complete?.bind(f)}let o,u,h;if(t instanceof Vt)u=Un(t.firestore,Ur),h=cp(t._key.path),o={next:f=>{e[s]&&e[s](pj(u,t,f))},error:e[s+1],complete:e[s+2]};else{const f=Un(t,Si);u=Un(f.firestore,Ur),h=f._query;const m=new Lv(u);o={next:y=>{e[s]&&e[s](new Io(u,m,f,y))},error:e[s+1],complete:e[s+2]},fj(t._query)}return(function(m,y,v,b){const T=new Av(b),R=new Ev(y,T,v);return m.asyncQueue.enqueueAndForget((async()=>bv(await Lm(m),R))),()=>{T.Nu(),m.asyncQueue.enqueueAndForget((async()=>wv(await Lm(m),R)))}})(Qd(u),h,i,o)}function eh(t,e){return(function(s,i){const o=new gi;return s.asyncQueue.enqueueAndForget((async()=>nV(await fV(s),i,o))),o.promise})(Qd(t),e)}function pj(t,e,n){const s=n.docs.get(e._key),i=new Lv(t);return new Ro(t,i,e._key,s,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jd(e)}set(e,n,s){this._verifyNotCommitted();const i=Xy(e,this._firestore),o=Vv(i.converter,n,s),u=Sv(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,s);return this._mutations.push(u.toMutation(i._key,zn.none())),this}update(e,n,s,...i){this._verifyNotCommitted();const o=Xy(e,this._firestore);let u;return u=typeof(n=St(n))=="string"||n instanceof Wd?lj(this._dataReader,"WriteBatch.update",o._key,n,s,i):oj(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xy(e,this._firestore);return this._mutations=this._mutations.concat(new mp(n._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xy(t,e){if((t=St(t)).firestore!==e)throw new we(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function J0(){return new Cv("serverTimestamp")}function jV(...t){return new jv("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){return Qd(t=Un(t,Ur)),new CV(t,(e=>eh(t,e)))}(function(e,n=!0){(function(i){Ec=i})(Yo),Oo(new ja("firestore",((s,{instanceIdentifier:i,options:o})=>{const u=s.getProvider("app").getImmediate(),h=new Ur(new _5(s.getProvider("auth-internal")),new N5(u,s.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new we(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wd(m.options.projectId,y)})(u,i),u);return o={useFetchStreams:n,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),jr($E,HE,e),jr($E,HE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="firebasestorage.googleapis.com",RV="storageBucket",IV=120*1e3,DV=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Fr{constructor(e,n,s=0){super(Qy(e),`Firebase Storage: ${n} (${Qy(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zr||(zr={}));function Qy(t){return"storage/"+t}function MV(){const t="An unknown error occurred, please check the error payload for server response.";return new qr(zr.UNKNOWN,t)}function kV(){return new qr(zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PV(){return new qr(zr.CANCELED,"User canceled the upload/download.")}function OV(t){return new qr(zr.INVALID_URL,"Invalid URL '"+t+"'.")}function VV(t){return new qr(zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function qT(t){return new qr(zr.INVALID_ARGUMENT,t)}function yj(){return new qr(zr.APP_DELETED,"The Firebase app was deleted.")}function LV(t){return new qr(zr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Qs.makeFromUrl(e,n)}catch{return new Qs(e,"")}if(s.path==="")return s;throw VV(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function o($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+i+u,"i"),f={bucket:1,path:3};function m($){$.path_=decodeURIComponent($.path)}const y="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${y}/b/${i}/o${b}`,"i"),R={bucket:1,path:3},M=n===gj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",k=new RegExp(`^https?://${M}/${i}/${j}`,"i"),V=[{regex:h,indices:f,postModify:o},{regex:T,indices:R,postModify:m},{regex:k,indices:{bucket:1,path:2},postModify:m}];for(let $=0;$<V.length;$++){const Y=V[$],oe=Y.regex.exec(e);if(oe){const A=oe[Y.indices.bucket];let N=oe[Y.indices.path];N||(N=""),s=new Qs(A,N),Y.postModify(s);break}}if(s==null)throw OV(e);return s}}class UV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t,e,n){let s=1,i=null,o=null,u=!1,h=0;function f(){return h===2}let m=!1;function y(...j){m||(m=!0,e.apply(null,j))}function v(j){i=setTimeout(()=>{i=null,t(T,f())},j)}function b(){o&&clearTimeout(o)}function T(j,...k){if(m){b();return}if(j){b(),y.call(null,j,...k);return}if(f()||u){b(),y.call(null,j,...k);return}s<64&&(s*=2);let V;h===1?(h=2,V=0):V=(s+Math.random())*1e3,v(V)}let R=!1;function M(j){R||(R=!0,b(),!m&&(i!==null?(j||(h=2),clearTimeout(i),v(0)):j||(h=1)))}return v(0),o=setTimeout(()=>{u=!0,M(!0)},n),M}function BV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){return t!==void 0}function $T(t,e,n,s){if(s<e)throw qT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw qT(`Invalid value for '${t}'. Expected ${n} or less.`)}function qV(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var zm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zm||(zm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n,s,i,o,u,h,f,m,y,v,b=!0,T=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=v,this.retry=b,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,M)=>{this.resolve_=R,this.reject_=M,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new $f(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===zm.NO_ERROR,f=o.getStatus();if(!h||$V(f,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===zm.ABORT;s(!1,new $f(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;s(!0,new $f(m,o))})},n=(s,i)=>{const o=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());FV(f)?o(f):o()}catch(f){u(f)}else if(h!==null){const f=MV();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(i.canceled){const f=this.appDelete_?yj():PV();u(f)}else{const f=kV();u(f)}};this.canceled_?n(!1,new $f(!1,null,!0)):this.backoffId_=zV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $f{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function GV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function QV(t,e,n,s,i,o,u=!0,h=!1){const f=qV(t.urlParams),m=t.url+f,y=Object.assign({},t.headers);return YV(y,e),GV(y,n),KV(y,o),XV(y,s),new HV(m,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this._service=e,n instanceof Qs?this._location=n:this._location=Qs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bm(e,n)}get root(){const e=new Qs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZV(this._location.path)}get storage(){return this._service}get parent(){const e=WV(this._location.path);if(e===null)return null;const n=new Qs(this._location.bucket,e);return new Bm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LV(e)}}function HT(t,e){const n=e?.[RV];return n==null?null:Qs.makeFromBucketSpec(n,t)}function JV(t,e,n,s={}){t.host=`${e}:${n}`;const i=Ko(e);i&&(Ux(`https://${t.host}/b`),zx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=s;o&&(t._overrideAuthToken=typeof o=="string"?o:ZA(o,t.app.options.projectId))}class eL{constructor(e,n,s,i,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=gj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=IV,this._maxUploadRetryTime=DV,this._requests=new Set,i!=null?this._bucket=Qs.makeFromBucketSpec(i,this._host):this._bucket=HT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qs.makeFromBucketSpec(this._url,e):this._bucket=HT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bm(this,e)}_makeRequest(e,n,s,i,o=!0){if(this._deleted)return new UV(yj());{const u=QV(e,this._appId,s,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const GT="@firebase/storage",KT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="storage";function tL(t=$x(),e){t=St(t);const s=tp(t,xj).getImmediate({identifier:e}),i=XA("storage");return i&&nL(s,...i),s}function nL(t,e,n,s={}){JV(t,e,n,s)}function sL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new eL(n,s,i,e,Yo)}function rL(){Oo(new ja(xj,sL,"PUBLIC").setMultipleInstances(!0)),jr(GT,KT,""),jr(GT,KT,"esm2020")}rL();const vj={apiKey:"AIzaSyDOKMcdMsv8Xn9kgU4sWZnF6AADaZ-dcbg",authDomain:"katos-connect.firebaseapp.com",projectId:"katos-connect",storageBucket:"katos-connect.firebasestorage.app",messagingSenderId:"270769467550",appId:"1:270769467550:web:d09da23b665c4200518b8f"},Uv=qx(vj),bn=US(Uv),re=yV(Uv);tL(Uv);const iL=qx(vj,"client-creation"),YT=US(iL),XT=t=>{let e;const n=new Set,s=(m,y)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const b=e;e=y??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(T=>T(e,b))}},i=()=>e,h={setState:s,getState:i,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m))},f=e=t(s,i,h);return h},aL=(t=>t?XT(t):XT),oL=t=>t;function lL(t,e=oL){const n=ot.useSyncExternalStore(t.subscribe,ot.useCallback(()=>e(t.getState()),[t,e]),ot.useCallback(()=>e(t.getInitialState()),[t,e]));return ot.useDebugValue(n),n}const QT=t=>{const e=aL(t),n=s=>lL(e,s);return Object.assign(n,e),n},th=(t=>t?QT(t):QT),$e={SUPER_ADMIN:"super_admin",ADMIN:"admin",CHEF:"chef",CLIENT:"client"},cL={[$e.SUPER_ADMIN]:{canCreateAdmins:!0,canCreateClients:!0,canManageUsers:!0,canDeleteUsers:!0,canViewDashboard:!0,canManageProjects:!0,canManageMaterials:!0,canManageSettings:!0},[$e.ADMIN]:{canCreateAdmins:!1,canCreateClients:!0,canManageUsers:!0,canDeleteUsers:!0,canViewDashboard:!0,canManageProjects:!0,canManageMaterials:!0,canManageSettings:!1},[$e.CHEF]:{canCreateAdmins:!1,canCreateClients:!1,canManageUsers:!1,canDeleteUsers:!1,canViewDashboard:!0,canManageProjects:!0,canManageMaterials:!0,canManageSettings:!1},[$e.CLIENT]:{canCreateAdmins:!1,canCreateClients:!1,canManageUsers:!1,canDeleteUsers:!1,canViewDashboard:!0,canManageProjects:!1,canManageMaterials:!1,canManageSettings:!1}},bj=(t,e)=>cL[t][e];class uL{async signIn(e,n){const i=(await t3(bn,e,n)).user,o=await this.getUserData(i.uid);if(o&&o.isBlocked)throw await sd(bn),new Error("Votre compte a t bloqu. Contactez l'administrateur.");return i}async signUp(e,n,s,i=$e.CLIENT,o){const h=(await xd(bn,e,n)).user;await lc(h,{displayName:s});const f={uid:h.uid,email:h.email,displayName:s,phoneNumber:o||null,role:i,createdAt:fe.now()};return await Cs(Ne(re,"users",h.uid),f),h}async signOut(){await sd(bn)}async getUserData(e){const n=await Pn(Ne(re,"users",e));return n.exists()?n.data():null}getCurrentUser(){return bn.currentUser}onAuthStateChange(e){return CS(bn,e)}async changePassword(e,n){try{const s=bn.currentUser;if(!s)return{success:!1,error:"Aucun utilisateur connect"};if(!s.email)return{success:!1,error:"Email utilisateur non disponible"};console.log("Tentative de r-authentification pour:",s.email);const i=Xo.credential(s.email,e);await JP(s,i),console.log("R-authentification russie, changement de mot de passe..."),await s3(s,n);try{const o=await Pn(Ne(re,"users",s.uid));if(o.exists()){const u=o.data();u.isTemporaryPassword&&await Cs(Ne(re,"users",s.uid),{...u,isTemporaryPassword:!1})}}catch(o){console.warn("Impossible de mettre  jour le flag isTemporaryPassword:",o)}return{success:!0}}catch(s){console.error("Erreur lors du changement de mot de passe:",s);let i="Erreur lors du changement de mot de passe";return s.code==="auth/wrong-password"?i="Mot de passe actuel incorrect":s.code==="auth/weak-password"?i="Le nouveau mot de passe est trop faible":s.code==="auth/too-many-requests"&&(i="Trop de tentatives. Veuillez ressayer plus tard"),{success:!1,error:i}}}generateTemporaryPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let s=0;s<8;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}generateClientUsername(){const n=Date.now().toString().slice(-6),s=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`CLI${n}${s}`}async isUsernameAvailable(e){try{const n=ve(re,"users"),s=Ie(n,Ge("username","==",e));return(await Ue(s)).empty}catch(n){return console.error("Erreur lors de la vrification de l'identifiant:",n),!1}}async generateUniqueUsername(){let e=this.generateClientUsername(),n=0;for(;!await this.isUsernameAvailable(e)&&n<10;)e=this.generateClientUsername(),n++;if(n>=10)throw new Error("Impossible de gnrer un identifiant unique");return e}async createClientAccount(e,n,s){try{const i=this.generateTemporaryPassword(),o=await this.generateUniqueUsername(),u=bn.currentUser,h=await u?.getIdToken();if(!u||!h)return{success:!1,error:"Aucun utilisateur admin connect"};console.log("Admin actuel sauvegard:",u.email);const m=(await xd(bn,e,i)).user;console.log("Compte client cr:",m.email),await lc(m,{displayName:n});const y={uid:m.uid,email:m.email,displayName:n,username:o,role:$e.CLIENT,createdAt:fe.now(),clientId:s,isTemporaryPassword:!0};return await Cs(Ne(re,"users",m.uid),y),await sd(bn),console.log("Compte client cr et dconnect"),{success:!0,tempPassword:i,username:o,uid:m.uid}}catch(i){console.error("Erreur lors de la cration du compte client:",i);let o="Erreur lors de la cration du compte";return i.code==="auth/email-already-in-use"?o="Un compte existe dj avec cet email":i.code==="auth/weak-password"?o="Le mot de passe gnr est trop faible":i.code==="auth/invalid-email"&&(o="Email invalide"),{success:!1,error:o}}}async getAllUsers(){try{const e=ve(re,"users"),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({uid:i.id,...i.data()}))}catch(e){return console.error("Erreur lors de la rcupration des utilisateurs:",e),[]}}async toggleUserStatus(e){try{const n=Ne(re,"users",e),s=await Pn(n);if(!s.exists())return{success:!1,error:"Utilisateur non trouv"};const u=!(s.data().isBlocked||!1);return await _t(n,{isBlocked:u,blockedAt:u?fe.now():null}),{success:!0}}catch(n){return console.error("Erreur lors du changement de statut utilisateur:",n),{success:!1,error:"Erreur lors du changement de statut"}}}async deleteUser(e){try{console.log("Tentative de suppression de l'utilisateur:",e);const n=Ne(re,"users",e),s=await Pn(n);if(!s.exists())return console.log("Utilisateur non trouv:",e),{success:!1,error:"Utilisateur non trouv"};const i=s.data();if(console.log("Donnes utilisateur  supprimer:",i),i.role==="client"&&i.clientId){console.log("Suppression du document client:",i.clientId);const o=Ne(re,"clients",i.clientId);await us(o),console.log("Document client supprim:",i.clientId)}return console.log("Suppression du document utilisateur pour:",e),await us(n),console.log("Suppression complte russie pour:",e),{success:!0}}catch(n){return console.error("Erreur lors de la suppression de l'utilisateur:",n),{success:!1,error:n.message||"Erreur lors de la suppression"}}}async regenerateClientAccess(e){try{const n=Ne(re,"users",e),s=await Pn(n);if(!s.exists())return{success:!1,error:"Utilisateur non trouv"};if(s.data().role!==$e.CLIENT)return{success:!1,error:"Cette action est rserve aux clients"};const o=await this.generateUniqueUsername(),u=this.generateTemporaryPassword();return await _t(n,{username:o,isTemporaryPassword:!0}),{success:!0,username:o,tempPassword:u}}catch(n){return console.error("Erreur lors de la rgnration des accs:",n),{success:!1,error:"Erreur lors de la rgnration des accs"}}}async resetPassword(e){try{return await e3(bn,e),{success:!0}}catch(n){console.error("Erreur lors de l'envoi de l'email de rinitialisation:",n);let s="Erreur lors de l'envoi de l'email";return n.code==="auth/user-not-found"?s="Aucun compte associ  cet email":n.code==="auth/invalid-email"&&(s="Email invalide"),{success:!1,error:s}}}}const js=new uL,Fn=th((t,e)=>({user:null,userData:null,isAuthenticated:!1,loading:!0,error:null,resetPassword:async n=>{try{t({loading:!0,error:null});const s=await js.resetPassword(n);return t({loading:!1}),s}catch(s){return t({error:s.message||"Erreur inconnue",loading:!1}),{success:!1,error:s.message}}},login:async(n,s)=>{try{t({loading:!0,error:null});const i=await js.signIn(n,s),o=await js.getUserData(i.uid);return t({user:i,userData:o,isAuthenticated:!0,loading:!1}),!0}catch(i){return t({error:i.message||"Erreur de connexion",loading:!1}),!1}},logout:async()=>{try{return await js.signOut(),t({user:null,userData:null,isAuthenticated:!1,error:null}),!0}catch(n){return t({error:n.message||"Erreur lors de la dconnexion"}),!1}},setUser:n=>t({user:n,isAuthenticated:!!n}),setUserData:n=>{if(n&&n.isBlocked){js.signOut().then(()=>{t({user:null,userData:null,isAuthenticated:!1,error:"Votre compte a t bloqu. Veuillez vous reconnecter."})});return}t({userData:n})},setLoading:n=>t({loading:n}),setError:n=>t({error:n})})),dL=({children:t})=>{const{setUser:e,setUserData:n,setLoading:s}=Fn();return S.useEffect(()=>{s(!0);const i=CS(bn,async o=>{if(o){e(o);try{const u=await js.getUserData(o.uid);if(u&&u.isBlocked){await js.signOut();return}n(u)}catch(u){console.error("Erreur lors de la rcupration des donnes utilisateur:",u)}}else e(null),n(null);s(!1)});return()=>i()},[e,n,s]),c.jsx(c.Fragment,{children:t})};class hL{collectionName="clients";async testConnection(){try{console.log(" Test de connexion Firestore...");const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc")),s=await Ue(n);return console.log(" Connexion Firestore OK - "+s.docs.length+" documents trouvs"),{success:!0}}catch(e){return console.error(" chec du test de connexion Firestore:",e),e.message?.includes("ERR_BLOCKED_BY_CLIENT")||e.code==="network-request-failed"||e.message?.includes("Failed to fetch")?{success:!1,error:"Connexion bloque par le navigateur. Vrifiez vos extensions (ad-blockers)."}:{success:!1,error:e.message||"Erreur de connexion inconnue"}}}async addClient(e){try{console.log("Ajout client dans Firebase:",e);const n=ve(re,this.collectionName),s={};Object.entries(e).forEach(([u,h])=>{h!==void 0&&(s[u]=h)});const i={...s,status:s.status||"En attente",createdAt:fe.now()};console.log("Donnes nettoyes pour Firebase:",i);const o=await Bn(n,i);return console.log("Client ajout avec ID:",o.id),o.id}catch(n){throw console.error(" Erreur lors de l'ajout du client:",n),n.message?.includes("ERR_BLOCKED_BY_CLIENT")||n.code==="network-request-failed"||n.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):n}}async getClients(){const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}async getClientById(e){try{const n=Ne(re,this.collectionName,e),s=await Pn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){return console.error("Erreur lors de la rcupration du client:",n),null}}async updateClient(e,n){try{console.log("Mise  jour client dans Firebase:",{id:e,updates:n});const s=Ne(re,this.collectionName,e);await _t(s,n),console.log("Client mis  jour avec succs:",e)}catch(s){throw console.error(" Erreur lors de la mise  jour du client:",s),s.message?.includes("ERR_BLOCKED_BY_CLIENT")||s.code==="network-request-failed"||s.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):s.message?.includes("Missing or insufficient permissions")?(console.error(" Permissions insuffisantes pour modifier ce client"),new Error("Permissions insuffisantes. Vrifiez vos droits d'accs.")):s}}async getClientByUserId(e){const n=ve(re,this.collectionName),s=Ie(n,Ge("userId","==",e)),i=await Ue(s);if(i.empty)return null;const o=i.docs[0];return{id:o.id,...o.data()}}async getClientByEmail(e){const n=ve(re,this.collectionName),s=Ie(n,Ge("email","==",e)),i=await Ue(s);if(i.empty)return null;const o=i.docs[0];return{id:o.id,...o.data()}}async deleteClient(e){try{console.log("Suppression client dans Firebase:",e);const n=Ne(re,this.collectionName,e);await us(n),console.log("Client supprim avec succs:",e)}catch(n){throw console.error(" Erreur lors de la suppression du client:",n),n.message?.includes("ERR_BLOCKED_BY_CLIENT")||n.code==="network-request-failed"||n.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):n.message?.includes("Missing or insufficient permissions")?(console.error(" Permissions insuffisantes pour supprimer ce client"),new Error("Permissions insuffisantes. Vrifiez vos droits d'accs.")):n}}subscribeToClients(e){console.log("Dmarrage de l'coute des clients...");const n=ve(re,this.collectionName),s=Ie(n,it("createdAt","desc"));return Vn(s,i=>{console.log("Changement dtect dans la collection clients. Nombre de docs:",i.docs.length);const o=i.docs.map(u=>{const h=u.data();return console.log("Document client:",u.id,h),{id:u.id,...h}});console.log("Envoi des clients au callback:",o.length),e(o)},i=>{console.error(" Erreur dans l'coute des clients:",i),console.log(" Envoi de liste vide au callback suite  l'erreur"),e([])})}async fixClientStatuses(){try{console.log(" Dbut de la correction des statuts clients...");const e=ve(re,this.collectionName),n=await Ue(e);let s=0,i=0;for(const o of n.docs){const u=o.data();if(u.invitationStatus==="accepted"&&u.status!=="En cours")try{await _t(Ne(re,this.collectionName,o.id),{status:"En cours"}),console.log(` Client ${o.id} mis  jour: ${u.status}  En cours`),s++}catch(h){console.error(` Erreur mise  jour client ${o.id}:`,h),i++}}return console.log(` Correction termine: ${s} clients mis  jour, ${i} erreurs`),{updated:s,errors:i}}catch(e){throw console.error(" Erreur lors de la correction des statuts:",e),e}}}const ga=new hL,fL=t=>{let e;try{const n=t.status,s=t.invitationStatus;s==="accepted"?e="En cours":e=n||"En attente",console.log(` Conversion client ${t.id}:`,{nom:t.nom,originalStatus:n,invitationStatus:s,finalStatus:e})}catch(n){console.error(` Erreur conversion client ${t.id}:`,n),e="En attente"}try{return{id:t.id,nom:t.nom||"",prenom:t.prenom||"",email:t.email||"",telephone:t.telephone||"",adresse:t.adresse||"",localisationSite:t.localisationSite||"",projetAdhere:t.projetAdhere||"",status:e,isActive:t.isActive!==!1,invitationStatus:t.invitationStatus||"pending",invitationToken:t.invitationToken||void 0,userId:t.userId||void 0,username:t.username||void 0,tempPassword:t.tempPassword||void 0,typePaiement:t.typePaiement||"comptant",createdAt:t.createdAt?.toDate?.()?.toISOString?.()?.split?.("T")?.[0]||new Date().toISOString().split("T")[0],invitedAt:t.invitedAt?.toDate?.()?.toISOString?.()?.split?.("T")?.[0]||void 0,acceptedAt:t.acceptedAt?.toDate?.()?.toISOString?.()?.split?.("T")?.[0]||void 0}}catch(n){return console.error(` Erreur lors de la conversion finale du client ${t.id}:`,n),{id:t.id||"unknown",nom:t.nom||"Inconnu",prenom:t.prenom||"",email:t.email||"",telephone:"",adresse:"",localisationSite:"",projetAdhere:"",status:"En attente",isActive:!0,invitationStatus:"pending",invitationToken:void 0,userId:void 0,username:void 0,tempPassword:void 0,typePaiement:"comptant",createdAt:new Date().toISOString().split("T")[0],invitedAt:void 0,acceptedAt:void 0}}},mL=t=>{console.log(" Conversion vers Firebase:",t);try{const e={nom:t.nom||"",prenom:t.prenom||"",email:t.email||"",telephone:t.telephone||"",adresse:t.adresse||"",localisationSite:t.localisationSite||"",projetAdhere:t.projetAdhere||"",status:t.status||"En attente",isActive:t.isActive!==void 0?t.isActive:!0,invitationStatus:t.invitationStatus||"pending",typePaiement:t.typePaiement||"comptant"};return t.invitationToken&&(e.invitationToken=t.invitationToken),t.userId&&(e.userId=t.userId),t.username&&(e.username=t.username),t.tempPassword&&(e.tempPassword=t.tempPassword),t.invitedAt&&(e.invitedAt=fe.fromDate(new Date(t.invitedAt))),t.acceptedAt&&(e.acceptedAt=fe.fromDate(new Date(t.acceptedAt))),console.log(" Conversion vers Firebase russie:",e),e}catch(e){return console.error(" Erreur lors de la conversion vers Firebase:",e),{nom:t.nom||"",prenom:t.prenom||"",email:t.email||"",telephone:t.telephone||"",adresse:t.adresse||"",localisationSite:t.localisationSite||"",projetAdhere:t.projetAdhere||"",status:"En attente",isActive:!0,invitationStatus:"pending",typePaiement:"comptant"}}},Zo=th((t,e)=>({clients:[],loading:!1,error:null,addClient:async n=>{try{t({loading:!0,error:null});const s=mL(n),i=await ga.addClient(s);return console.log("Client ajout avec succs, ID:",i),t({loading:!1}),!0}catch(s){return console.error("Erreur lors de l'ajout du client:",s),t({error:s.message||"Erreur lors de l'ajout du client",loading:!1}),!1}},updateClient:async(n,s)=>{try{t({loading:!0,error:null});const i={};return s.nom&&(i.nom=s.nom),s.prenom&&(i.prenom=s.prenom),s.email&&(i.email=s.email),s.telephone&&(i.telephone=s.telephone),s.adresse&&(i.adresse=s.adresse),s.localisationSite&&(i.localisationSite=s.localisationSite),s.projetAdhere&&(i.projetAdhere=s.projetAdhere),s.status&&(i.status=s.status),s.isActive!==void 0&&(i.isActive=s.isActive),s.invitationStatus&&(i.invitationStatus=s.invitationStatus),s.invitationToken&&(i.invitationToken=s.invitationToken),s.userId&&(i.userId=s.userId),s.username&&(i.username=s.username),s.tempPassword&&(i.tempPassword=s.tempPassword),s.typePaiement&&(i.typePaiement=s.typePaiement),await ga.updateClient(n,i),t({loading:!1}),!0}catch(i){return t({error:i.message||"Erreur lors de la mise  jour du client",loading:!1}),!1}},deleteClient:async n=>{try{return t({loading:!0,error:null}),await ga.deleteClient(n),t({loading:!1}),!0}catch(s){return t({error:s.message||"Erreur lors de la suppression du client",loading:!1}),!1}},toggleClientStatus:async n=>{try{t({loading:!0,error:null});const s=!n.isActive;return await ga.updateClient(n.id,{isActive:s}),console.log(`Client ${n.id} status toggled to ${s}`),t({loading:!1}),!0}catch(s){return console.error("Erreur lors du changement de statut:",s),t({error:s.message||"Erreur lors du changement de statut",loading:!1}),!1}},initializeClients:()=>{console.log("Initialisation des clients..."),t({loading:!0,error:null});const n=ga.subscribeToClients(s=>{try{console.log("Clients reus de Firebase:",s.length);const i=s.map(fL);console.log("Clients convertis:",i),t({clients:i,loading:!1,error:null})}catch(i){console.error(" Erreur lors de la conversion des clients:",i),t({loading:!1,error:"Erreur lors de la conversion des donnes client"})}});e().unsubscribe=n},setClients:n=>t({clients:n}),setLoading:n=>t({loading:n}),setError:n=>t({error:n})}));class pL{collectionName="materials";async testConnection(){try{console.log(" Test de connexion Firestore (matriaux)...");const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc")),s=await Ue(n);return console.log(" Connexion Firestore OK (matriaux) - "+s.docs.length+" matriaux trouvs"),{success:!0}}catch(e){return console.error(" chec du test de connexion Firestore (matriaux):",e),e.message?.includes("ERR_BLOCKED_BY_CLIENT")||e.code==="network-request-failed"||e.message?.includes("Failed to fetch")?{success:!1,error:"Connexion bloque par le navigateur. Vrifiez vos extensions (ad-blockers)."}:{success:!1,error:e.message||"Erreur de connexion inconnue"}}}async addMaterial(e){try{console.log("Ajout matriau dans Firebase:",e);const n=ve(re,this.collectionName),s={...e,createdAt:fe.now()};console.log("Donnes matriau pour Firebase:",s);const i=await Bn(n,s);return console.log("Matriau ajout avec ID:",i.id),i.id}catch(n){throw console.error(" Erreur lors de l'ajout du matriau:",n),n.message?.includes("ERR_BLOCKED_BY_CLIENT")||n.code==="network-request-failed"||n.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):n}}async getMaterials(){const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}async updateMaterial(e,n){try{console.log("Mise  jour matriau dans Firebase:",{id:e,updates:n});const s=Ne(re,this.collectionName,e);await _t(s,n),console.log("Matriau mis  jour avec succs:",e)}catch(s){throw console.error(" Erreur lors de la mise  jour du matriau:",s),s.message?.includes("ERR_BLOCKED_BY_CLIENT")||s.code==="network-request-failed"||s.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):s.message?.includes("Missing or insufficient permissions")?(console.error(" Permissions insuffisantes pour modifier ce matriau"),new Error("Permissions insuffisantes. Vrifiez vos droits d'accs.")):s}}async deleteMaterial(e){try{console.log("Suppression matriau dans Firebase:",e);const n=Ne(re,this.collectionName,e);await us(n),console.log("Matriau supprim avec succs:",e)}catch(n){throw console.error(" Erreur lors de la suppression du matriau:",n),n.message?.includes("ERR_BLOCKED_BY_CLIENT")||n.code==="network-request-failed"||n.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):n.message?.includes("Missing or insufficient permissions")?(console.error(" Permissions insuffisantes pour supprimer ce matriau"),new Error("Permissions insuffisantes. Vrifiez vos droits d'accs.")):n}}subscribeToMaterials(e){const n=ve(re,this.collectionName),s=Ie(n,it("createdAt","desc"));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})}async getMaterialsByCategory(e){const n=ve(re,this.collectionName);return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.category===e)}}const Hf=new pL,gL=t=>({id:t.id,name:t.name,category:t.category,price:t.price,image:t.image,supplier:t.supplier,description:t.description}),yL=t=>({name:t.name,category:t.category,price:t.price,image:t.image,supplier:t.supplier,description:t.description}),zv=th((t,e)=>({materials:[],loading:!1,error:null,addMaterial:async n=>{try{t({loading:!0,error:null});const s=yL(n);return await Hf.addMaterial(s),t({loading:!1}),!0}catch(s){return t({error:s.message||"Erreur lors de l'ajout du matriau",loading:!1}),!1}},updateMaterial:async(n,s)=>{try{t({loading:!0,error:null});const i={};return s.name&&(i.name=s.name),s.category&&(i.category=s.category),s.price!==void 0&&(i.price=s.price),s.image&&(i.image=s.image),s.supplier&&(i.supplier=s.supplier),s.description&&(i.description=s.description),await Hf.updateMaterial(n,i),t({loading:!1}),!0}catch(i){return t({error:i.message||"Erreur lors de la mise  jour du matriau",loading:!1}),!1}},deleteMaterial:async n=>{try{return t({loading:!0,error:null}),await Hf.deleteMaterial(n),t({loading:!1}),!0}catch(s){return t({error:s.message||"Erreur lors de la suppression du matriau",loading:!1}),!1}},initializeMaterials:()=>{t({loading:!0,error:null});const n=Hf.subscribeToMaterials(s=>{const i=s.map(gL);t({materials:i,loading:!1,error:null})});e().unsubscribe=n},setMaterials:n=>t({materials:n}),setLoading:n=>t({loading:n}),setError:n=>t({error:n})}));class xL{CLOUD_NAME="dnxfzj45y";UPLOAD_PRESET="upload_preset";API_URL=`https://api.cloudinary.com/v1_1/${this.CLOUD_NAME}/upload`;async uploadFile(e,n="image"){if(!this.CLOUD_NAME||!this.UPLOAD_PRESET)throw new Error("Cloudinary configuration missing. Please check your .env file.");try{const s=new FormData;s.append("file",e),s.append("upload_preset",this.UPLOAD_PRESET),s.append("resource_type",n);const o=await(await fetch(this.API_URL,{method:"POST",body:s})).json();if(o.error)throw new Error(o.error.message);return o.secure_url}catch(s){throw console.error("Cloudinary Upload Error:",s),s}}getOptimizedUrl(e,n="f_auto,q_auto"){if(!e||!e.includes("cloudinary.com"))return e;const s=e.split("/upload/");return s.length!==2?e:`${s[0]}/upload/${n}/${s[1]}`}}const Bv=new xL;class vL{async uploadImage(e,n="temp"){try{return console.warn(`StorageService.uploadImage is now using Cloudinary. folderPath: ${n} is ignored.`),Bv.uploadFile(e,"image")}catch(s){throw console.error("Erreur upload image vers Cloudinary:",s),new Error(s.message||"Erreur lors de l'upload de l'image")}}async uploadMaterialImage(e,n){return this.uploadImage(e,n?`materials/${n}`:"materials/temp")}async deleteImage(e){console.warn("Delete image on Cloudinary requires signed API or specific setup. Skipping for now.")}validateImageFile(e){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw new Error("Format d'image non support. Utilisez JPG, PNG ou WebP.");if(e.size>5242880)throw new Error("L'image est trop volumineuse. Maximum 5MB.");return!0}async resizeImage(e,n=800,s=600){return new Promise(i=>{const o=document.createElement("canvas"),u=o.getContext("2d"),h=new Image;h.onload=()=>{let{width:f,height:m}=h;f>m?f>n&&(m=m*n/f,f=n):m>s&&(f=f*s/m,m=s),o.width=f,o.height=m,u.drawImage(h,0,0,f,m),o.toBlob(y=>{const v=new File([y],e.name,{type:e.type,lastModified:Date.now()});i(v)},e.type,.8)},h.src=URL.createObjectURL(e)})}}const Br=new vL;class bL{collectionName="projects";async testConnection(){try{console.log(" Test de connexion Firestore (projets)...");const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc")),s=await Ue(n);return console.log(" Connexion Firestore OK (projets) - "+s.docs.length+" projets trouvs"),{success:!0}}catch(e){return console.error(" chec du test de connexion Firestore (projets):",e),e.message?.includes("ERR_BLOCKED_BY_CLIENT")||e.code==="network-request-failed"||e.message?.includes("Failed to fetch")?{success:!1,error:"Connexion bloque par le navigateur. Vrifiez vos extensions (ad-blockers)."}:{success:!1,error:e.message||"Erreur de connexion inconnue"}}}async addProject(e){try{console.log("Ajout projet dans Firebase:",e);const n=ve(re,this.collectionName),s={...e,createdAt:fe.now()};console.log("Donnes projet pour Firebase:",s);const i=await Bn(n,s);return console.log("Projet ajout avec ID:",i.id),i.id}catch(n){throw console.error(" Erreur lors de l'ajout du projet:",n),n.message?.includes("ERR_BLOCKED_BY_CLIENT")||n.code==="network-request-failed"||n.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):n}}async getProjects(){const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}async updateProject(e,n){try{console.log("Mise  jour projet dans Firebase:",{id:e,updates:n});const s=Ne(re,this.collectionName,e);await _t(s,n),console.log("Projet mis  jour avec succs:",e)}catch(s){throw console.error(" Erreur lors de la mise  jour du projet:",s),s.message?.includes("ERR_BLOCKED_BY_CLIENT")||s.code==="network-request-failed"||s.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):s.message?.includes("Missing or insufficient permissions")?(console.error(" Permissions insuffisantes pour modifier ce projet"),new Error("Permissions insuffisantes. Vrifiez vos droits d'accs.")):s}}async deleteProject(e){try{console.log("Suppression projet dans Firebase:",e);const s=(await this.getProjects()).find(o=>o.id===e);if(s?.images&&s.images.length>0){console.log(`Suppression de ${s.images.length} images du Storage`);for(const o of s.images)try{await Br.deleteImage(o),console.log("Image supprime:",o)}catch(u){console.warn("Erreur suppression image:",u)}}const i=Ne(re,this.collectionName,e);await us(i),console.log("Projet supprim avec succs:",e)}catch(n){throw console.error(" Erreur lors de la suppression du projet:",n),n.message?.includes("ERR_BLOCKED_BY_CLIENT")||n.code==="network-request-failed"||n.message?.includes("Failed to fetch")?(console.error(" Connexion Firestore bloque - vrifiez vos extensions de navigateur"),new Error("Connexion bloque par le navigateur. Dsactivez temporairement vos extensions (ad-blockers) et ressayez.")):n.message?.includes("Missing or insufficient permissions")?(console.error(" Permissions insuffisantes pour supprimer ce projet"),new Error("Permissions insuffisantes. Vrifiez vos droits d'accs.")):n}}subscribeToProjects(e){const n=ve(re,this.collectionName),s=Ie(n,it("createdAt","desc"));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)})}async getProjectsByType(e){const n=ve(re,this.collectionName);return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.type===e)}async uploadProjectImages(e,n){const s=n?`projects/${n}`:"projects/temp",i=e.map(o=>Br.uploadImage(o,s));return Promise.all(i)}}const Bu=new bL,wL=t=>({id:t.id,name:t.name,description:t.description,images:t.images,type:t.type,price:t.price||0,currency:t.currency||"FCFA"}),_L=t=>({name:t.name,description:t.description,images:t.images,type:t.type,price:t.price||0,currency:t.currency||"FCFA"}),Ci=th((t,e)=>({projects:[],loading:!1,error:null,addProject:async n=>{try{t({loading:!0,error:null});const s=_L(n);return await Bu.addProject(s),t({loading:!1}),!0}catch(s){return t({error:s.message||"Erreur lors de l'ajout du projet",loading:!1}),!1}},updateProject:async(n,s)=>{try{t({loading:!0,error:null});const i={};return s.name!==void 0&&(i.name=s.name),s.description!==void 0&&(i.description=s.description),s.images!==void 0&&(i.images=s.images),s.type!==void 0&&(i.type=s.type),s.price!==void 0&&(i.price=s.price),s.currency!==void 0&&(i.currency=s.currency),await Bu.updateProject(n,i),t({loading:!1}),!0}catch(i){return t({error:i.message||"Erreur lors de la mise  jour du projet",loading:!1}),!1}},deleteProject:async n=>{try{return t({loading:!0,error:null}),await Bu.deleteProject(n),t({loading:!1}),!0}catch(s){return t({error:s.message||"Erreur lors de la suppression du projet",loading:!1}),!1}},uploadProjectImages:async(n,s)=>{try{return t({error:null}),await Bu.uploadProjectImages(n,s)}catch(i){return t({error:i.message||"Erreur lors de l'upload des images"}),[]}},initializeProjects:()=>{t({loading:!0,error:null});const n=Bu.subscribeToProjects(s=>{const i=s.map(wL);t({projects:i,loading:!1,error:null})});e().unsubscribe=n},setProjects:n=>t({projects:n}),setLoading:n=>t({loading:n}),setError:n=>t({error:n})}));class EL{COLLECTION_NAME="admins";async getAllAdmins(){try{const e=ve(re,this.COLLECTION_NAME),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Erreur lors de la rcupration des admins:",e),[]}}async createAdmin(e){try{const n=ve(re,this.COLLECTION_NAME);return{id:(await Bn(n,e)).id,...e}}catch(n){return console.error("Erreur lors de la cration de l'admin:",n),null}}async updateAdmin(e,n){try{const s=Ne(re,this.COLLECTION_NAME,e);return await _t(s,n),!0}catch(s){return console.error("Erreur lors de la mise  jour de l'admin:",s),!1}}async deleteAdmin(e){try{const n=Ne(re,this.COLLECTION_NAME,e);return await us(n),!0}catch(n){return console.error("Erreur lors de la suppression de l'admin:",n),!1}}async getAdminByEmail(e){try{const n=ve(re,this.COLLECTION_NAME),s=Ie(n,Ge("email","==",e)),i=await Ue(s);if(!i.empty){const o=i.docs[0];return{id:o.id,...o.data()}}return null}catch(n){return console.error("Erreur lors de la recherche de l'admin:",n),null}}generateInvitationToken(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}generateTemporaryPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="abcdefghijklmnopqrstuvwxyz",s="0123456789",i="!@#$%^&*";let o="";o+=e.charAt(Math.floor(Math.random()*e.length)),o+=n.charAt(Math.floor(Math.random()*n.length)),o+=s.charAt(Math.floor(Math.random()*s.length)),o+=i.charAt(Math.floor(Math.random()*i.length));const u=e+n+s+i;for(let h=o.length;h<12;h++)o+=u.charAt(Math.floor(Math.random()*u.length));return o.split("").sort(()=>Math.random()-.5).join("")}async markInvitationSent(e,n){try{const s=Ne(re,this.COLLECTION_NAME,e);return await _t(s,{invitationStatus:"sent",invitationToken:n,invitedAt:fe.now()}),!0}catch(s){return console.error("Erreur lors du marquage de l'invitation:",s),!1}}}const Fu=new EL,WT=t=>{const e=t;return{id:e.id,nom:e.nom,prenom:e.prenom,email:e.email,phoneNumber:e.phoneNumber,status:e.status,invitationStatus:e.invitationStatus,invitationToken:e.invitationToken,tempPassword:e.tempPassword,userId:e.userId,createdAt:e.createdAt?.toDate?.()?.toISOString()||new Date().toISOString(),invitedAt:e.invitedAt?.toDate?.()?.toISOString(),acceptedAt:e.acceptedAt?.toDate?.()?.toISOString()}},TL=th((t,e)=>({admins:[],loading:!1,error:null,initializeAdmins:async()=>{try{t({loading:!0,error:null});const s=(await Fu.getAllAdmins()).map(WT);t({admins:s,loading:!1})}catch(n){console.error("Erreur lors de l'initialisation des admins:",n),t({error:n.message,loading:!1})}},addAdmin:async n=>{try{t({error:null});const s=Fu.generateTemporaryPassword(),i=await Fu.createAdmin({nom:n.nom,prenom:n.prenom,email:n.email,phoneNumber:n.phoneNumber,status:"En attente",invitationStatus:"pending",tempPassword:s,createdAt:fe.now()});if(i){const o=WT(i);return t(u=>({admins:[...u.admins,o]})),!0}return!1}catch(s){return console.error("Erreur lors de la cration de l'admin:",s),t({error:s.message}),!1}},updateAdmin:async(n,s)=>{try{t({error:null});const i={...s};s.invitedAt&&(i.invitedAt=fe.fromDate(new Date(s.invitedAt))),s.acceptedAt&&(i.acceptedAt=fe.fromDate(new Date(s.acceptedAt)));const o=await Fu.updateAdmin(n,i);return o&&t(u=>({admins:u.admins.map(h=>h.id===n?{...h,...s}:h)})),o}catch(i){return console.error("Erreur lors de la mise  jour de l'admin:",i),t({error:i.message}),!1}},deleteAdmin:async n=>{try{t({error:null});const s=await Fu.deleteAdmin(n);return s&&t(i=>({admins:i.admins.filter(o=>o.id!==n)})),s}catch(s){return console.error("Erreur lors de la suppression de l'admin:",s),t({error:s.message}),!1}},setAdmins:n=>t({admins:n}),setLoading:n=>t({loading:n}),setError:n=>t({error:n})}));class NL{generateTemporaryPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let s=0;s<8;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}async createUser(e,n){try{const s=this.generateTemporaryPassword(),i=bn.currentUser;if(!i)return{success:!1,error:"Aucun utilisateur connect"};const o=i.email,h=(await xd(bn,e.email,s)).user;await lc(h,{displayName:e.displayName});const f={uid:h.uid,email:h.email,displayName:e.displayName,phoneNumber:e.phoneNumber,role:e.role,isTemporaryPassword:!0,createdAt:fe.now(),createdBy:n};return await Cs(Ne(re,"users",h.uid),f),await Cs(Ne(re,"temporaryPasswords",h.uid),{password:s,createdAt:fe.now(),createdBy:n}),await sd(bn),{success:!0,tempPassword:s,uid:h.uid,adminEmail:o}}catch(s){return console.error("Erreur lors de la cration de l'utilisateur:",s),{success:!1,error:s.message}}}async getAllUsers(){try{const e=ve(re,"users"),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>i.data())}catch(e){return console.error("Erreur lors de la rcupration des utilisateurs:",e),[]}}async getUserByUid(e){try{const n=await Pn(Ne(re,"users",e));if(n.exists())return n.data();const s=await Pn(Ne(re,"clients",e));if(s.exists()){const i=s.data();return{uid:s.id,email:i.email,displayName:`${i.prenom||""} ${i.nom||""}`.trim()||"Client",role:$e.CLIENT,createdAt:i.createdAt||fe.now()}}return null}catch(n){return console.error("Erreur lors de la rcupration de l'utilisateur:",n),null}}async getUsersByRole(e){try{const n=ve(re,"users"),s=Ie(n,Ge("role","==",e),it("createdAt","desc"));return(await Ue(s)).docs.map(o=>o.data())}catch(n){return console.error("Erreur lors de la rcupration des utilisateurs par rle:",n),[]}}async getAvailableChefs(){try{console.log(" [userService] Rcupration de tous les utilisateurs pour filtrer les chefs...");const e=ve(re,"users"),s=(await Ue(e)).docs.map(o=>({uid:o.id,...o.data()}));console.log(` [userService] ${s.length} utilisateurs trouvs au total.`);const i=s.filter(o=>{const u=o.role===$e.CHEF,h=o.role===$e.ADMIN&&o.isChef===!0,f=o.role===$e.SUPER_ADMIN;return u||h||f?(console.log(` [userService] Chef potentiel trouv: ${o.displayName||"Sans nom"} (UID: ${o.uid}, Role: ${o.role})`),!0):!1});return console.log(` [userService] ${i.length} chefs filtrs. Tri en cours...`),[...i].sort((o,u)=>{try{const h=String(o?.displayName||"").trim().toLowerCase(),f=String(u?.displayName||"").trim().toLowerCase();return h.localeCompare(f)}catch(h){return console.error(" [userService] Erreur pendant le tri d'un chef:",h,{chefA:o,chefB:u}),0}})}catch(e){return console.error(" [userService] Erreur lors de la rcupration des chefs disponibles:",e),[]}}async deleteUser(e){try{return await us(Ne(re,"users",e)),{success:!0}}catch(n){return console.error("Erreur lors de la suppression de l'utilisateur:",n),{success:!1,error:n.message}}}async updateUserRole(e,n){try{const s=Ne(re,"users",e);return await Cs(s,{role:n},{merge:!0}),{success:!0}}catch(s){return console.error("Erreur lors de la mise  jour du rle:",s),{success:!1,error:s.message}}}async updateChefStatus(e,n){try{const s=Ne(re,"users",e);return await Cs(s,{isChef:n},{merge:!0}),{success:!0}}catch(s){return console.error("Erreur lors de la mise  jour du statut chef:",s),{success:!1,error:s.message}}}async emailExists(e){try{const n=ve(re,"users"),s=Ie(n,Ge("email","==",e));return!(await Ue(s)).empty}catch(n){return console.error("Erreur lors de la vrification de l'email:",n),!1}}async getTemporaryPassword(e){try{const n=await Pn(Ne(re,"temporaryPasswords",e));return n.exists()?n.data().password:null}catch(n){return console.error("Erreur lors de la rcupration du mot de passe temporaire:",n),null}}async removeTemporaryPassword(e){try{return await us(Ne(re,"temporaryPasswords",e)),!0}catch(n){return console.error("Erreur lors de la suppression du mot de passe temporaire:",n),!1}}async initializeSuperAdmin(e,n,s){try{try{const i=await this.getUsersByRole($e.SUPER_ADMIN);if(i.length>0)return console.log(" [userService] Un super administrateur existe dj dans Firestore."),{success:!0,uid:i[0].uid}}catch{console.log(" [userService] Impossible de vrifier Firestore (probablement non authentifi). Tentative Auth...")}try{const o=(await xd(bn,e,n)).user;await lc(o,{displayName:s});const u={uid:o.uid,email:o.email,displayName:s,role:$e.SUPER_ADMIN,isTemporaryPassword:!1,createdAt:fe.now()};return await Cs(Ne(re,"users",o.uid),u),console.log(" [userService] Super Admin cr avec succs."),{success:!0,uid:o.uid}}catch(i){if(i.code==="auth/email-already-in-use")return console.log(" [userService] L'email est dj utilis. Le Super Admin existe probablement dj."),{success:!0,error:"Un compte avec cet email existe dj"};throw i}}catch(i){return console.error(" [userService] Erreur lors de l'initialisation du super admin:",i),{success:!1,error:i.message}}}}const Fo=new NL,qu={email:"admin@katos.sn",password:"Katos2024!",displayName:"Super Administrateur"};async function AL(){try{if((await Fo.getUsersByRole($e.SUPER_ADMIN)).length>0){console.log("Super Admin dj configur"),await SL();return}console.log("Cration du Super Admin par dfaut...");const e=await Fo.initializeSuperAdmin(qu.email,qu.password,qu.displayName);e.success?(console.log(" Super Admin cr avec succs"),console.log(" Email:",qu.email),console.log(" Mot de passe:",qu.password),console.log("  Pensez  changer le mot de passe aprs la premire connexion")):console.error(" Erreur lors de la cration du Super Admin:",e.error)}catch(t){t.code==="auth/email-already-in-use"?console.log("  Super Admin dj existant avec cet email"):console.error(" Erreur lors de l'initialisation du Super Admin:",t)}}async function SL(){try{const t=await Fo.getUsersByRole($e.SUPER_ADMIN);for(const e of t)if(e.isTemporaryPassword===void 0){console.log(`Mise  jour des proprits pour ${e.email}`);const n=Ne(re,"users",e.uid);await Cs(n,{...e,isTemporaryPassword:!1})}}catch(t){console.error("Erreur lors de la mise  jour des proprits super admin:",t)}}const CL=({children:t})=>{const{isAuthenticated:e}=Fn(),{initializeClients:n}=Zo(),{initializeMaterials:s}=zv(),{initializeProjects:i}=Ci(),{initializeAdmins:o}=TL();return S.useEffect(()=>{(async()=>{try{await AL()}catch(h){console.error("Erreur lors de l'initialisation du Super Admin:",h)}})()},[]),S.useEffect(()=>{e&&(n(),s(),i(),o())},[e,n,s,i,o]),c.jsx(c.Fragment,{children:t})},jL=({children:t})=>{const{isAuthenticated:e,loading:n}=Fn();return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):e?c.jsx(c.Fragment,{children:t}):c.jsx(xm,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IL=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),ZT=t=>{const e=IL(t);return e.charAt(0).toUpperCase()+e.slice(1)},wj=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),DL=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ML={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:u,...h},f)=>S.createElement("svg",{ref:f,...ML,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:wj("lucide",i),...!o&&!DL(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,y])=>S.createElement(m,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(t,e)=>{const n=S.forwardRef(({className:s,...i},o)=>S.createElement(kL,{ref:o,iconNode:e,className:wj(`lucide-${RL(ZT(t))}`,`lucide-${t}`,s),...i}));return n.displayName=ZT(t),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],OL=Te("activity",PL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_j=Te("arrow-left",VL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],JT=Te("arrow-right",LL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eN=Te("ban",UL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Ej=Te("banknote",zL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Aa=Te("bell",BL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],dm=Te("building-2",FL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Tp=Te("calendar",qL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],HL=Te("camera",$L);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fv=Te("chart-column",GL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],YL=Te("check-check",KL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Tj=Te("check",XL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],WL=Te("chevron-left",QL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ex=Te("chevron-right",ZL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Oa=Te("circle-alert",JL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qo=Te("circle-check-big",eU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nU=Te("circle-check",tU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rU=Te("circle-x",sU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$o=Te("clock",iU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ya=Te("copy",aU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],rc=Te("credit-card",oU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],tx=Te("database",lU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],nx=Te("download",cU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],qv=Te("euro",uU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ic=Te("eye-off",dU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sa=Te("eye",hU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ho=Te("file-text",fU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pU=Te("folder-plus",mU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$v=Te("funnel",gU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],ld=Te("hard-hat",yU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Hv=Te("image",xU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Wy=Te("key",vU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wU=Te("layout-dashboard",bU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],EU=Te("lock",_U);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],NU=Te("log-out",TU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Go=Te("mail",AU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Np=Te("map-pin",SU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],jU=Te("menu",CU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Nj=Te("panels-top-left",RU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],DU=Te("pause",IU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kU=Te("pen-line",MU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ap=Te("phone",PU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Aj=Te("play",OU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zs=Te("plus",VU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],UU=Te("power",LU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],BU=Te("printer",zU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],qU=Te("receipt",FU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Zy=Te("refresh-cw",$U);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Jy=Te("rotate-ccw",HU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],tN=Te("rotate-cw",GU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sx=Te("save",KU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gv=Te("search",YU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Sd=Te("send",XU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kv=Te("settings",QU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rx=Te("shield",WU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Sj=Te("shopping-bag",ZU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sp=Te("square-pen",JU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],t9=Te("star",e9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],s9=Te("tag",n9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$r=Te("trash-2",r9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Cj=Te("trending-up",i9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ix=Te("triangle-alert",a9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nh=Te("upload",o9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],c9=Te("user-cog",l9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Yv=Te("user-plus",u9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ei=Te("user",d9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ws=Te("users",h9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Js=Te("x",f9),jj=S.createContext(void 0),Rj=()=>{const t=S.useContext(jj);if(!t)throw new Error("useLayout must be used within a LayoutProvider");return t},Xv="-",m9=t=>{const e=g9(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:u=>{const h=u.split(Xv);return h[0]===""&&h.length!==1&&h.shift(),Ij(h,e)||p9(u)},getConflictingClassGroupIds:(u,h)=>{const f=n[u]||[];return h&&s[u]?[...f,...s[u]]:f}}},Ij=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),i=s?Ij(t.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(Xv);return e.validators.find(({validator:u})=>u(o))?.classGroupId},nN=/^\[(.+)\]$/,p9=t=>{if(nN.test(t)){const e=nN.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},g9=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const i in n)ax(n[i],s,i,e);return s},ax=(t,e,n,s)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:sN(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(y9(i)){ax(i(s),e,n,s);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,u])=>{ax(u,sN(e,o),n,s)})})},sN=(t,e)=>{let n=t;return e.split(Xv).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},y9=t=>t.isThemeGetter,x9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const i=(o,u)=>{n.set(o,u),e++,e>t&&(e=0,s=n,n=new Map)};return{get(o){let u=n.get(o);if(u!==void 0)return u;if((u=s.get(o))!==void 0)return i(o,u),u},set(o,u){n.has(o)?n.set(o,u):i(o,u)}}},ox="!",lx=":",v9=lx.length,b9=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const o=[];let u=0,h=0,f=0,m;for(let R=0;R<i.length;R++){let M=i[R];if(u===0&&h===0){if(M===lx){o.push(i.slice(f,R)),f=R+v9;continue}if(M==="/"){m=R;continue}}M==="["?u++:M==="]"?u--:M==="("?h++:M===")"&&h--}const y=o.length===0?i:i.substring(f),v=w9(y),b=v!==y,T=m&&m>f?m-f:void 0;return{modifiers:o,hasImportantModifier:b,baseClassName:v,maybePostfixModifierPosition:T}};if(e){const i=e+lx,o=s;s=u=>u.startsWith(i)?o(u.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(n){const i=s;s=o=>n({className:o,parseClassName:i})}return s},w9=t=>t.endsWith(ox)?t.substring(0,t.length-1):t.startsWith(ox)?t.substring(1):t,_9=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let o=[];return s.forEach(u=>{u[0]==="["||e[u]?(i.push(...o.sort(),u),o=[]):o.push(u)}),i.push(...o.sort()),i}},E9=t=>({cache:x9(t.cacheSize),parseClassName:b9(t),sortModifiers:_9(t),...m9(t)}),T9=/\s+/,N9=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:o}=e,u=[],h=t.trim().split(T9);let f="";for(let m=h.length-1;m>=0;m-=1){const y=h[m],{isExternal:v,modifiers:b,hasImportantModifier:T,baseClassName:R,maybePostfixModifierPosition:M}=n(y);if(v){f=y+(f.length>0?" "+f:f);continue}let j=!!M,k=s(j?R.substring(0,M):R);if(!k){if(!j){f=y+(f.length>0?" "+f:f);continue}if(k=s(R),!k){f=y+(f.length>0?" "+f:f);continue}j=!1}const U=o(b).join(":"),V=T?U+ox:U,$=V+k;if(u.includes($))continue;u.push($);const Y=i(k,j);for(let oe=0;oe<Y.length;++oe){const A=Y[oe];u.push(V+A)}f=y+(f.length>0?" "+f:f)}return f};function A9(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Dj(e))&&(s&&(s+=" "),s+=n);return s}const Dj=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=Dj(t[s]))&&(n&&(n+=" "),n+=e);return n};function S9(t,...e){let n,s,i,o=u;function u(f){const m=e.reduce((y,v)=>v(y),t());return n=E9(m),s=n.cache.get,i=n.cache.set,o=h,h(f)}function h(f){const m=s(f);if(m)return m;const y=N9(f,n);return i(f,y),y}return function(){return o(A9.apply(null,arguments))}}const an=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Mj=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kj=/^\((?:(\w[\w-]*):)?(.+)\)$/i,C9=/^\d+\/\d+$/,j9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,D9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,M9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bl=t=>C9.test(t),Qe=t=>!!t&&!Number.isNaN(Number(t)),ua=t=>!!t&&Number.isInteger(Number(t)),e0=t=>t.endsWith("%")&&Qe(t.slice(0,-1)),di=t=>j9.test(t),k9=()=>!0,P9=t=>R9.test(t)&&!I9.test(t),Pj=()=>!1,O9=t=>D9.test(t),V9=t=>M9.test(t),L9=t=>!Se(t)&&!Ce(t),U9=t=>jc(t,Lj,Pj),Se=t=>Mj.test(t),_o=t=>jc(t,Uj,P9),t0=t=>jc(t,$9,Qe),rN=t=>jc(t,Oj,Pj),z9=t=>jc(t,Vj,V9),Gf=t=>jc(t,zj,O9),Ce=t=>kj.test(t),$u=t=>Rc(t,Uj),B9=t=>Rc(t,H9),iN=t=>Rc(t,Oj),F9=t=>Rc(t,Lj),q9=t=>Rc(t,Vj),Kf=t=>Rc(t,zj,!0),jc=(t,e,n)=>{const s=Mj.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},Rc=(t,e,n=!1)=>{const s=kj.exec(t);return s?s[1]?e(s[1]):n:!1},Oj=t=>t==="position"||t==="percentage",Vj=t=>t==="image"||t==="url",Lj=t=>t==="length"||t==="size"||t==="bg-size",Uj=t=>t==="length",$9=t=>t==="number",H9=t=>t==="family-name",zj=t=>t==="shadow",G9=()=>{const t=an("color"),e=an("font"),n=an("text"),s=an("font-weight"),i=an("tracking"),o=an("leading"),u=an("breakpoint"),h=an("container"),f=an("spacing"),m=an("radius"),y=an("shadow"),v=an("inset-shadow"),b=an("text-shadow"),T=an("drop-shadow"),R=an("blur"),M=an("perspective"),j=an("aspect"),k=an("ease"),U=an("animate"),V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Y=()=>[...$(),Ce,Se],oe=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],N=()=>[Ce,Se,f],C=()=>[Bl,"full","auto",...N()],L=()=>[ua,"none","subgrid",Ce,Se],z=()=>["auto",{span:["full",ua,Ce,Se]},ua,Ce,Se],B=()=>[ua,"auto",Ce,Se],D=()=>["auto","min","max","fr",Ce,Se],_e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],me=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...N()],K=()=>[Bl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],Z=()=>[t,Ce,Se],q=()=>[...$(),iN,rN,{position:[Ce,Se]}],ye=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",F9,U9,{size:[Ce,Se]}],te=()=>[e0,$u,_o],H=()=>["","none","full",m,Ce,Se],le=()=>["",Qe,$u,_o],be=()=>["solid","dashed","dotted","double"],ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>[Qe,e0,iN,rN],Et=()=>["","none",R,Ce,Se],ft=()=>["none",Qe,Ce,Se],ds=()=>["none",Qe,Ce,Se],ir=()=>[Qe,Ce,Se],ks=()=>[Bl,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[di],breakpoint:[di],color:[k9],container:[di],"drop-shadow":[di],ease:["in","out","in-out"],font:[L9],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[di],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[di],shadow:[di],spacing:["px",Qe],text:[di],"text-shadow":[di],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bl,Se,Ce,j]}],container:["container"],columns:[{columns:[Qe,Se,Ce,h]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Y()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[ua,"auto",Ce,Se]}],basis:[{basis:[Bl,"full","auto",h,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Qe,Bl,"auto","initial","none",Se]}],grow:[{grow:["",Qe,Ce,Se]}],shrink:[{shrink:["",Qe,Ce,Se]}],order:[{order:[ua,"first","last","none",Ce,Se]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[..._e(),"normal"]}],"justify-items":[{"justify-items":[...me(),"normal"]}],"justify-self":[{"justify-self":["auto",...me()]}],"align-content":[{content:["normal",..._e()]}],"align-items":[{items:[...me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...me(),{baseline:["","last"]}]}],"place-content":[{"place-content":_e()}],"place-items":[{"place-items":[...me(),"baseline"]}],"place-self":[{"place-self":["auto",...me()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[h,"screen",...K()]}],"min-w":[{"min-w":[h,"screen","none",...K()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",n,$u,_o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Ce,t0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",e0,Se]}],"font-family":[{font:[B9,Se,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ce,Se]}],"line-clamp":[{"line-clamp":[Qe,"none",Ce,t0]}],leading:[{leading:[o,...N()]}],"list-image":[{"list-image":["none",Ce,Se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,Se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...be(),"wavy"]}],"text-decoration-thickness":[{decoration:[Qe,"from-font","auto",Ce,_o]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[Qe,"auto",Ce,Se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:ye()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ua,Ce,Se],radial:["",Ce,Se],conic:[ua,Ce,Se]},q9,z9]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...be(),"hidden","none"]}],"divide-style":[{divide:[...be(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...be(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Qe,Ce,Se]}],"outline-w":[{outline:["",Qe,$u,_o]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",y,Kf,Gf]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",v,Kf,Gf]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[Qe,_o]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",b,Kf,Gf]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[Qe,Ce,Se]}],"mix-blend":[{"mix-blend":[...ke(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ke()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":je()}],"mask-image-linear-to-pos":[{"mask-linear-to":je()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":je()}],"mask-image-t-to-pos":[{"mask-t-to":je()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":je()}],"mask-image-r-to-pos":[{"mask-r-to":je()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":je()}],"mask-image-b-to-pos":[{"mask-b-to":je()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":je()}],"mask-image-l-to-pos":[{"mask-l-to":je()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":je()}],"mask-image-x-to-pos":[{"mask-x-to":je()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":je()}],"mask-image-y-to-pos":[{"mask-y-to":je()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ce,Se]}],"mask-image-radial-from-pos":[{"mask-radial-from":je()}],"mask-image-radial-to-pos":[{"mask-radial-to":je()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[Qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":je()}],"mask-image-conic-to-pos":[{"mask-conic-to":je()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:ye()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,Se]}],filter:[{filter:["","none",Ce,Se]}],blur:[{blur:Et()}],brightness:[{brightness:[Qe,Ce,Se]}],contrast:[{contrast:[Qe,Ce,Se]}],"drop-shadow":[{"drop-shadow":["","none",T,Kf,Gf]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",Qe,Ce,Se]}],"hue-rotate":[{"hue-rotate":[Qe,Ce,Se]}],invert:[{invert:["",Qe,Ce,Se]}],saturate:[{saturate:[Qe,Ce,Se]}],sepia:[{sepia:["",Qe,Ce,Se]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,Se]}],"backdrop-blur":[{"backdrop-blur":Et()}],"backdrop-brightness":[{"backdrop-brightness":[Qe,Ce,Se]}],"backdrop-contrast":[{"backdrop-contrast":[Qe,Ce,Se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Qe,Ce,Se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Qe,Ce,Se]}],"backdrop-invert":[{"backdrop-invert":["",Qe,Ce,Se]}],"backdrop-opacity":[{"backdrop-opacity":[Qe,Ce,Se]}],"backdrop-saturate":[{"backdrop-saturate":[Qe,Ce,Se]}],"backdrop-sepia":[{"backdrop-sepia":["",Qe,Ce,Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,Se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Qe,"initial",Ce,Se]}],ease:[{ease:["linear","initial",k,Ce,Se]}],delay:[{delay:[Qe,Ce,Se]}],animate:[{animate:["none",U,Ce,Se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[M,Ce,Se]}],"perspective-origin":[{"perspective-origin":Y()}],rotate:[{rotate:ft()}],"rotate-x":[{"rotate-x":ft()}],"rotate-y":[{"rotate-y":ft()}],"rotate-z":[{"rotate-z":ft()}],scale:[{scale:ds()}],"scale-x":[{"scale-x":ds()}],"scale-y":[{"scale-y":ds()}],"scale-z":[{"scale-z":ds()}],"scale-3d":["scale-3d"],skew:[{skew:ir()}],"skew-x":[{"skew-x":ir()}],"skew-y":[{"skew-y":ir()}],transform:[{transform:[Ce,Se,"","none","gpu","cpu"]}],"transform-origin":[{origin:Y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ks()}],"translate-x":[{"translate-x":ks()}],"translate-y":[{"translate-y":ks()}],"translate-z":[{"translate-z":ks()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,Se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,Se]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[Qe,$u,_o,t0]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},K9=S9(G9);function Do(...t){return K9(wa(t))}const Gl=({children:t,allowedRoles:e,requiredPermission:n,fallback:s=null})=>{const{userData:i}=Fn();return i?e&&!e.includes(i.role)?c.jsx(c.Fragment,{children:s}):n&&!bj(i.role,n)?c.jsx(c.Fragment,{children:s}):c.jsx(c.Fragment,{children:t}):c.jsx(c.Fragment,{children:s})},Qv="/assets/logo-CsS-3pBs.png",Y9=[{name:"Dashboard",href:"/dashboard",icon:wU},{name:"Prospects",href:"/prospects",icon:Yv},{name:"Clients",href:"/clients",icon:Ws},{name:"Villas",href:"/projects",icon:dm},{name:"Projets",href:"/chantiers",icon:ld},{name:"Comptabilit",href:"/accounting",icon:qv},{name:"Boutique",href:"/boutique",icon:Sj},{name:"Documents",href:"/documents",icon:Ho},{name:"Catalogue Mobile",href:"/showcase",icon:Nj},{name:"Administrateurs",href:"/users",icon:c9,requiresPermission:"canManageUsers"},{name:"Paramtres",href:"/settings",icon:Kv}],X9=()=>{const{logout:t}=Fn(),{isMobileMenuOpen:e,setIsMobileMenuOpen:n}=Rj(),s=()=>{t()},i=()=>{n(!1)};return S.useEffect(()=>{const o=u=>{u.key==="Escape"&&n(!1)};return e?(document.addEventListener("keydown",o),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[e,n]),c.jsxs(c.Fragment,{children:[e&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden cursor-pointer",onClick:()=>n(!1)}),c.jsxs("div",{className:Do("fixed lg:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out lg:translate-x-0 flex flex-col h-screen shadow-lg",e?"translate-x-0":"-translate-x-full"),style:{backgroundColor:"#2B2E83"},children:[c.jsx("div",{className:"flex items-center justify-center h-14 sm:h-16 px-4",style:{backgroundColor:"#1F2161"},children:c.jsx("img",{src:Qv,alt:"Katos Construction",className:"h-8 sm:h-10 w-auto"})}),c.jsx("nav",{className:"flex-1 px-3 sm:px-4 py-4 sm:py-6 space-y-1 sm:space-y-2",children:Y9.map(o=>o.requiresPermission?c.jsx(Gl,{requiredPermission:o.requiresPermission,children:c.jsxs(E0,{to:o.href,onClick:i,className:({isActive:u})=>Do("group flex items-center px-3 py-2.5 sm:py-2 text-sm font-medium rounded-lg transition-colors touch-manipulation",u?"text-white shadow-md":"text-white/80 hover:text-white"),style:({isActive:u})=>({backgroundColor:u?"#E95E2D":"transparent"}),children:[c.jsx(o.icon,{className:"w-5 h-5 mr-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:o.name})]})},o.name):c.jsxs(E0,{to:o.href,onClick:i,className:({isActive:u})=>Do("group flex items-center px-3 py-2.5 sm:py-2 text-sm font-medium rounded-lg transition-colors touch-manipulation",u?"text-white shadow-md":"text-white/80 hover:text-white"),style:({isActive:u})=>({backgroundColor:u?"#E95E2D":"transparent"}),children:[c.jsx(o.icon,{className:"w-5 h-5 mr-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:o.name})]},o.name))}),c.jsx("div",{className:"px-3 sm:px-4 pb-4 sm:pb-6 border-t border-white/20",children:c.jsxs("button",{onClick:()=>{s(),i()},className:"w-full flex items-center px-3 py-2.5 sm:py-2 mt-4 text-sm font-medium text-white/80 rounded-lg hover:text-white transition-colors touch-manipulation cursor-pointer",children:[c.jsx(NU,{className:"w-5 h-5 mr-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:"Dconnexion"})]})})]})]})},ge=({variant:t="primary",size:e="md",className:n,children:s,icon:i,loading:o=!1,disabled:u,...h})=>{const f="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",m={primary:"bg-primary-500 border border-primary-500 text-katos-white hover:bg-primary-600 hover:border-primary-600 focus:ring-primary-500",secondary:"bg-secondary-500 border border-secondary-500 text-katos-white hover:bg-secondary-600 hover:border-secondary-600 focus:ring-secondary-500",danger:"bg-red-500 border border-red-500 text-katos-white hover:bg-red-600 hover:border-red-600 focus:ring-red-500",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary-500"},y={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return c.jsxs("button",{className:Do(f,m[t],y[e],n),disabled:u||o,...h,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),i&&!o&&c.jsx("span",{className:"mr-2",children:i}),s]})},Cn={subscribeToNotifications(t){const e=Ie(ve(re,"notifications"),it("createdAt","desc"),cm(50));return Vn(e,n=>{const s=n.docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate?.()?.toISOString()||i.data().createdAt}));t(s)})},async markAsRead(t){try{await _t(Ne(re,"notifications",t),{isRead:!0})}catch(e){throw console.error("Erreur lors du marquage de la notification:",e),e}},async markAllAsRead(){try{const t=Ie(ve(re,"notifications"),Ge("isRead","==",!1)),n=(await Ue(t)).docs.map(s=>_t(s.ref,{isRead:!0}));await Promise.all(n)}catch(t){throw console.error("Erreur lors du marquage de toutes les notifications:",t),t}},async createNotification(t){try{await Bn(ve(re,"notifications"),{...t,createdAt:J0()})}catch(e){throw console.error("Erreur lors de la cration de la notification:",e),e}},async sendPaymentReminder(t,e,n,s){let i="",o="";const u=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e),h=n.toLocaleDateString("fr-FR");switch(s){case"upcoming":i="Rappel de paiement  venir",o=`Une chance de ${u} est prvue pour le ${h}.`;break;case"due_today":i="Paiement d aujourd'hui",o=`L'chance de ${u} doit tre rgle aujourd'hui.`;break;case"overdue":i="Paiement en retard",o=`L'chance de ${u} du ${h} est en retard. Merci de rgulariser.`;break}await this.createNotification({userId:t,type:"payment",title:i,message:o,isRead:!1,link:"/billing"})},getNotificationIcon(t){switch(t){case"document_upload":return"";case"material_selection":return"";case"client_update":return"";case"payment":return"";default:return""}},getNotificationColor(t){switch(t){case"document_upload":return"bg-blue-100 text-blue-800 border-blue-200";case"material_selection":return"bg-green-100 text-green-800 border-green-200";case"client_update":return"bg-purple-100 text-purple-800 border-purple-200";case"payment":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},getRelativeTime(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),i=Math.floor(s/6e4),o=Math.floor(s/36e5),u=Math.floor(s/864e5);return i<1?" l'instant":i<60?`Il y a ${i} min`:o<24?`Il y a ${o}h`:u<7?`Il y a ${u} jour${u>1?"s":""}`:e.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},countUnreadNotifications(t){return t.filter(e=>!e.isRead).length},async notifyPaymentReceived(t,e,n){const s=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e);await this.createNotification({userId:t,type:"payment",title:"Paiement reu",message:`Nous avons bien reu votre paiement de ${s} pour : ${n}. Vous pouvez consulter votre reu dans l'application.`,isRead:!1,link:"/billing"})}},n0=Object.freeze(Object.defineProperty({__proto__:null,notificationService:Cn},Symbol.toStringTag,{value:"Module"})),Q9=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!1),[i,o]=S.useState(!1),u=S.useRef(null);S.useEffect(()=>{const y=Cn.subscribeToNotifications(v=>{e(v)});return()=>y()},[]),S.useEffect(()=>{const y=v=>{u.current&&!u.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const h=Cn.countUnreadNotifications(t),f=async(y,v)=>{v.stopPropagation();try{await Cn.markAsRead(y)}catch(b){console.error("Erreur lors du marquage:",b)}},m=async()=>{o(!0);try{await Cn.markAllAsRead()}catch(y){console.error("Erreur lors du marquage de toutes les notifications:",y)}finally{o(!1)}};return c.jsxs("div",{className:"relative",ref:u,children:[c.jsxs(ge,{variant:"outline",onClick:()=>s(!n),className:"relative p-2 h-10 w-10",children:[c.jsx(Aa,{className:"h-5 w-5"}),h>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center min-w-[20px] px-1",children:h>99?"99+":h})]}),n&&c.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden",children:[c.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"font-semibold text-gray-900",children:["Notifications ",h>0&&`(${h})`]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[h>0&&c.jsxs(ge,{variant:"outline",size:"sm",onClick:m,disabled:i,className:"text-xs",children:[c.jsx(YL,{className:"w-3 h-3 mr-1"}),"Tout lire"]}),c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>s(!1),className:"p-1",children:c.jsx(Js,{className:"w-3 h-3"})})]})]})}),c.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.length>0?t.map(y=>c.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${y.isRead?"":"bg-blue-50"}`,children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center text-lg ${Cn.getNotificationColor(y.type)}`,children:Cn.getNotificationIcon(y.type)}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:y.title}),c.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:y.message}),c.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[c.jsx("span",{children:y.clientName}),c.jsx("span",{className:"mx-1",children:""}),c.jsx("span",{children:Cn.getRelativeTime(y.createdAt)})]})]}),!y.isRead&&c.jsx(ge,{variant:"outline",size:"sm",onClick:v=>f(y.id,v),className:"p-1 ml-2 flex-shrink-0",children:c.jsx(Tj,{className:"w-3 h-3"})})]})})]})},y.id)):c.jsxs("div",{className:"p-8 text-center text-gray-500",children:[c.jsx(Aa,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm",children:"Aucune notification"})]})}),t.length>0&&c.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:c.jsx("p",{className:"text-xs text-center text-gray-500",children:"Les notifications sont synchronises en temps rel"})})]})]})},W9=()=>{const{user:t}=Fn(),{isMobileMenuOpen:e,toggleMobileMenu:n}=Rj();return c.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 h-14 sm:h-16",children:c.jsxs("div",{className:"flex items-center justify-between h-full px-3 sm:px-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:n,className:"lg:hidden p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-all touch-manipulation cursor-pointer","aria-label":"Toggle menu",children:e?c.jsx(Js,{className:"w-5 h-5"}):c.jsx(jU,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex items-center",children:c.jsxs("h2",{className:"text-sm sm:text-lg lg:text-xl font-semibold text-gray-800 truncate",children:[c.jsx("span",{className:"hidden sm:inline",children:"Projet Katos connect"}),c.jsx("span",{className:"sm:hidden",children:"Katos"})]})})]}),c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[c.jsx(Q9,{}),c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl sm:rounded-2xl p-1.5 sm:p-2 hover:from-gray-100 hover:to-gray-150 transition-all duration-300 cursor-pointer group",children:[c.jsx("div",{className:"w-7 h-7 sm:w-10 sm:h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-lg sm:rounded-xl flex items-center justify-center shadow-md sm:shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:c.jsx(Ei,{className:"w-3 h-3 sm:w-5 sm:h-5 text-white"})}),c.jsxs("div",{className:"hidden sm:flex flex-col",children:[c.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800 group-hover:text-gray-900 transition-colors truncate max-w-24 lg:max-w-none",children:t?.displayName||"Utilisateur"}),c.jsx("span",{className:"text-xs text-gray-500",children:"Admin"})]})]})]})]})})},Z9=({children:t})=>{const[e,n]=S.useState(!1),s=()=>{n(!e)};return c.jsx(jj.Provider,{value:{isMobileMenuOpen:e,setIsMobileMenuOpen:n,toggleMobileMenu:s},children:t})},J9=()=>c.jsx(Z9,{children:c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx(X9,{}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx(W9,{}),c.jsx("main",{className:"flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6",children:c.jsx(r4,{})})]})]})}),Be=({label:t,error:e,icon:n,rightElement:s,className:i,...o})=>c.jsxs("div",{className:"space-y-2",children:[t&&c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:t}),c.jsxs("div",{className:"relative",children:[n&&c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx("div",{className:"text-gray-400",children:n})}),c.jsx("input",{className:Do("block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium",n&&"pl-10",s&&"pr-10",n&&e&&"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500",e&&!n&&"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500",i),...o}),s&&c.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",children:s})]}),e&&c.jsx("p",{className:"text-red-600 text-xs",children:e})]}),e8=()=>{const[t,e]=S.useState(""),[n,s]=S.useState(""),[i,o]=S.useState(!1),[u,h]=S.useState(!1),f=_c(),{login:m,loading:y,error:v,resetPassword:b}=Fn(),T=async M=>{M.preventDefault(),await m(t,n)&&f("/dashboard")},R=async M=>{if(M.preventDefault(),!t){se.error("Veuillez entrer votre adresse email");return}const{success:j,error:k}=await b(t);j?(se.success("Email de rinitialisation envoy ! Vrifiez votre bote mail."),o(!1)):se.error(k||"Erreur lors de l'envoi de l'email")};return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("img",{src:Qv,alt:"Katos Construction",className:"h-16 w-auto"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:i?"Rinitialisation du mot de passe":"Connexion Backoffice"}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:i?"Entrez votre email pour recevoir un lien de rinitialisation.":"Accdez  votre espace de gestion"})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-100",children:[v&&c.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(Oa,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Erreur de connexion"}),c.jsx("div",{className:"mt-2 text-sm text-red-700",children:c.jsx("p",{children:v})})]})]})}),i?c.jsxs("form",{className:"space-y-6",onSubmit:R,children:[c.jsx(Be,{label:"Email",type:"email",required:!0,value:t,onChange:M=>e(M.target.value),icon:c.jsx(Go,{className:"w-4 h-4"}),placeholder:"votre@email.com"}),c.jsx("div",{children:c.jsxs(ge,{type:"submit",className:"w-full flex justify-center py-2 px-4",loading:y,children:["Envoyer le lien",!y&&c.jsx(JT,{className:"ml-2 w-4 h-4"})]})}),c.jsx("div",{className:"text-center",children:c.jsxs("button",{type:"button",onClick:()=>o(!1),className:"text-sm font-medium text-gray-600 hover:text-gray-900 flex items-center justify-center mx-auto",children:[c.jsx(_j,{className:"w-4 h-4 mr-1"}),"Retour  la connexion"]})})]}):c.jsxs("form",{className:"space-y-6",onSubmit:T,children:[c.jsx(Be,{label:"Email",type:"email",required:!0,value:t,onChange:M=>e(M.target.value),icon:c.jsx(Go,{className:"w-4 h-4"}),placeholder:"votre@email.com"}),c.jsxs("div",{className:"relative",children:[c.jsx(Be,{label:"Mot de passe",type:u?"text":"password",required:!0,value:n,onChange:M=>s(M.target.value),icon:c.jsx(EU,{className:"w-4 h-4"}),placeholder:"",rightElement:c.jsx("button",{type:"button",onClick:()=>h(!u),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:u?c.jsx(ic,{className:"w-4 h-4"}):c.jsx(Sa,{className:"w-4 h-4"})})}),c.jsx("div",{className:"absolute right-0 top-0",children:c.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-xs font-medium text-blue-600 hover:text-blue-500",tabIndex:-1,children:"Mot de passe oubli ?"})})]}),c.jsx("div",{children:c.jsxs(ge,{type:"submit",className:"w-full flex justify-center py-2 px-4",loading:y,children:["Se connecter",!y&&c.jsx(JT,{className:"ml-2 w-4 h-4"})]})}),c.jsx("div",{className:"text-center mt-4 border-t pt-4",children:c.jsx(Qm,{to:"/register",className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:"Crer votre compte"})})]})]})})]})},t8="modulepreload",n8=function(t){return"/"+t},aN={},ac=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let m=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var u=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");i=m(n.map(y=>{if(y=n8(y),y in aN)return;aN[y]=!0;const v=y.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${b}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":t8,v||(T.as="script"),T.crossOrigin="",T.href=y,f&&T.setAttribute("nonce",f),document.head.appendChild(T),v)return new Promise((R,M)=>{T.addEventListener("load",R),T.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${y}`)))})}))}function o(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return i.then(h=>{for(const f of h||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})};class s8{COLLECTION_NAME="invitationCodes";generateInvitationCode(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let s=0;s<8;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}async createInvitationCode(e){try{const n=this.generateInvitationCode(),s=fe.now(),i=fe.fromMillis(s.toMillis()+10080*60*1e3),o={code:n,createdBy:e,createdAt:s,status:"active",expiresAt:i},u=ve(re,this.COLLECTION_NAME);return{id:(await Bn(u,o)).id,...o}}catch{return null}}async getAllInvitationCodes(){try{const e=ve(re,this.COLLECTION_NAME),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}catch{return[]}}async validateAndUseCode(e,n){try{const s=ve(re,this.COLLECTION_NAME),i=Ie(s,Ge("code","==",e)),o=await Ue(i);if(o.empty)return{valid:!1,error:"Code d'invitation invalide"};const u=o.docs[0],h=u.data();return h.status==="used"?{valid:!1,error:"Ce code a dj t utilis"}:h.expiresAt.toMillis()<Date.now()?(await _t(Ne(re,this.COLLECTION_NAME,u.id),{status:"expired"}),{valid:!1,error:"Ce code a expir"}):(await _t(Ne(re,this.COLLECTION_NAME,u.id),{status:"used",usedAt:fe.now(),usedBy:n}),{valid:!0})}catch{return{valid:!1,error:"Erreur lors de la validation du code"}}}async updateCodeUsedBy(e,n){try{const s=Ne(re,this.COLLECTION_NAME,e);return await _t(s,{usedBy:n}),!0}catch{return!1}}async reactivateCode(e){try{const n=Ne(re,this.COLLECTION_NAME,e);return await _t(n,{status:"active",usedAt:null,usedBy:null}),!0}catch{return!1}}async deleteInvitationCode(e){try{const n=Ne(re,this.COLLECTION_NAME,e);return await us(n),!0}catch{return!1}}async cleanExpiredCodes(){try{const e=ve(re,this.COLLECTION_NAME),n=Ie(e,Ge("expiresAt","<",fe.now())),s=await Ue(n),i=s.docs.map(o=>_t(o.ref,{status:"expired"}));return await Promise.all(i),s.size}catch{return 0}}async createClientAccount(e,n){try{const s=Ne(re,"clients",e),i=await Pn(s);if(!i.exists())return{success:!1,error:"Client non trouv"};const o=i.data();if(!n&&!o.email)return{success:!1,error:"Email requis pour crer le compte"};const u=n||o.email;if(o.userId)return{success:!1,error:"Un compte existe dj pour ce client"};const h=ve(re,"users"),f=Ie(h,Ge("email","==",u)),m=await Ue(f);if(!m.empty){const T=m.docs[0].data();return T.clientId===e?(await _t(s,{userId:T.uid,acceptedAt:T.createdAt||fe.now()}),{success:!1,error:`Compte rcupr ! L'utilisateur tait dj cr avec l'identifiant: ${T.username}`}):{success:!1,error:"Un compte Firebase existe dj avec cet email mais li  un autre client. Utilisez un autre email."}}const{clientAccountService:y}=await ac(async()=>{const{clientAccountService:b}=await Promise.resolve().then(()=>_A);return{clientAccountService:b}},[]),v=await y.createClientAccount(u,`${o.prenom} ${o.nom}`,e);return v.success?(v.uid&&await _t(s,{userId:v.uid,username:v.username,tempPassword:v.tempPassword,acceptedAt:fe.now()}),{success:!0,credentials:` IDENTIFIANTS DE CONNEXION

Identifiant: ${v.username}
Mot de passe: ${v.tempPassword}

 Instructions de connexion:
1. Utilisez l'identifiant (pas l'email)
2. Entrez le mot de passe fourni
3. Changez le mot de passe lors de la premire connexion

 IMPORTANT:
- Gardez ces informations confidentielles
- Le mot de passe doit tre chang  la premire connexion`}):{success:!1,error:v.error}}catch(s){return console.error("Erreur lors de la cration du compte client:",s),{success:!1,error:"Erreur lors de la cration du compte client"}}}async getOrCreateInvitation(e,n){try{const s=ve(re,"invitations"),i=Ie(s,Ge("clientId","==",e)),o=await Ue(i);if(!o.empty){const f=o.docs[0];return{id:f.id,...f.data()}}const u={clientId:e,email:n,status:"pending",createdAt:fe.now(),expiresAt:fe.fromMillis(Date.now()+720*60*60*1e3),token:this.generateInvitationCode()};return{id:(await Bn(s,u)).id,...u}}catch(s){throw console.error("Erreur lors de la cration/rcupration de l'invitation:",s),s}}async getClientInvitations(e){try{const n=ve(re,"invitations");let s;return e?s=Ie(n,Ge("clientId","==",e),it("createdAt","desc")):s=Ie(n,it("createdAt","desc")),(await Ue(s)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){return console.error("Erreur lors de la rcupration des invitations:",n),[]}}subscribeToInvitations(e){const n=ve(re,"invitations"),s=Ie(n,it("createdAt","desc"));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));e(o)},i=>{console.error("Erreur lors de l'coute des invitations:",i),e([])})}generateInvitationUrl(e){return`${window.location.origin}/invitation?token=${e}`}generateDirectUrl(e){return`${window.location.origin}/direct-access?token=${e}`}async deleteInvitation(e){try{const n=Ne(re,"invitations",e);return await us(n),!0}catch(n){return console.error("Erreur lors de la suppression de l'invitation:",n),!1}}async regenerateClientAccess(e){try{const n=Ne(re,"clients",e),s=await Pn(n);if(!s.exists())return{success:!1,error:"Client non trouv"};const i=s.data();if(!i.email)return{success:!1,error:"Email requis pour rgnrer les accs"};const o=Date.now(),u=`auth_${e}_${o}@app.katos`,h=`${i.prenom||"Client"} ${i.nom||""}`.trim();console.log(`Regenerating access for client ${e} with technical email: ${u}`);const{clientAccountService:f}=await ac(async()=>{const{clientAccountService:v}=await Promise.resolve().then(()=>_A);return{clientAccountService:v}},void 0),m=await f.createClientAccount(u,h,e);if(!m.success||!m.uid||!m.username||!m.tempPassword)throw new Error(m.error||"Erreur lors de la cration du nouveau compte");return await _t(n,{userId:m.uid,username:m.username,tempPassword:m.tempPassword}),console.log(`Client ${e} linked to new userId: ${m.uid}`),{success:!0,credentials:` IDENTIFIANTS RINITIALISS

Identifiant: ${m.username}
Mot de passe: ${m.tempPassword}

 Instructions de connexion:
1. Utilisez le nouvel identifiant
2. Entrez le mot de passe fourni
3. Si vous aviez dj un compte, les anciens identifiants ne fonctionnent plus.

Cette opration a rpar votre accs en crant une nouvelle connexion scurise.`}}catch(n){return console.error("Erreur lors de la rgnration des accs:",n),{success:!1,error:"Erreur lors de la rgnration des accs"}}}}const Ys=new s8,r8=()=>{const[t,e]=S.useState(""),[n,s]=S.useState(""),[i,o]=S.useState(""),[u,h]=S.useState(""),[f,m]=S.useState(""),[y,v]=S.useState(""),[b,T]=S.useState(!1),[R,M]=S.useState(!1),[j,k]=S.useState(!1),{isAuthenticated:U}=Fn();if(U)return c.jsx(xm,{to:"/dashboard",replace:!0});const V=async $=>{if($.preventDefault(),n!==i){se.error("Les mots de passe ne correspondent pas");return}if(n.length<6){se.error("Le mot de passe doit contenir au moins 6 caractres");return}if(!u.trim()||!f.trim()){se.error("Veuillez remplir tous les champs obligatoires");return}if(!y.trim()){se.error("Veuillez saisir votre code d'invitation");return}k(!0);try{const Y=await Ys.validateAndUseCode(y,"temp");if(!Y.valid){se.error(Y.error||"Code d'invitation invalide"),k(!1);return}const oe=await js.signUp(t,n,`${f} ${u}`,$e.ADMIN),N=(await Ys.getAllInvitationCodes()).find(C=>C.code===y&&C.status==="used");N&&N.id&&await Ys.updateCodeUsedBy(N.id,oe.uid),se.success("Inscription russie ! Vous pouvez maintenant vous connecter."),window.location.href="/login"}catch(Y){Y.code==="auth/email-already-in-use"?se.error("Un compte existe dj avec cet email. Utilisez la page de connexion."):Y.code==="auth/weak-password"?se.error("Le mot de passe est trop faible"):Y.code==="auth/invalid-email"?se.error("Email invalide"):se.error("Erreur lors de l'inscription. Veuillez ressayer.")}finally{k(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("img",{className:"h-16 w-auto",src:Qv,alt:"Katos Construction"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crer votre compte"}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Utilisez le code d'invitation fourni par votre administrateur"})]}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:V,children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(Be,{label:"Prnom",type:"text",value:f,onChange:$=>m($.target.value),required:!0,placeholder:"Jean"}),c.jsx(Be,{label:"Nom",type:"text",value:u,onChange:$=>h($.target.value),required:!0,placeholder:"Dupont"})]}),c.jsx(Be,{label:"Email",type:"email",value:t,onChange:$=>e($.target.value),required:!0,placeholder:"admin@example.com"}),c.jsx(Be,{label:"Code d'invitation",type:"text",value:y,onChange:$=>v($.target.value.toUpperCase()),required:!0,placeholder:"Votre code d'invitation (ex: ABC12345)"}),c.jsxs("div",{className:"relative",children:[c.jsx(Be,{label:"Mot de passe",type:b?"text":"password",value:n,onChange:$=>s($.target.value),required:!0,placeholder:"Choisissez un mot de passe"}),c.jsx("button",{type:"button",className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600",onClick:()=>T(!b),children:b?c.jsx(ic,{className:"h-5 w-5"}):c.jsx(Sa,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Be,{label:"Confirmer le mot de passe",type:R?"text":"password",value:i,onChange:$=>o($.target.value),required:!0,placeholder:"Confirmez votre mot de passe"}),c.jsx("button",{type:"button",className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600",onClick:()=>M(!R),children:R?c.jsx(ic,{className:"h-5 w-5"}):c.jsx(Sa,{className:"h-5 w-5"})})]})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[" Utilisez le code d'invitation fourni par votre administrateur",c.jsx("br",{})," Choisissez votre propre email et mot de passe",c.jsx("br",{})," Le code d'invitation ne peut tre utilis qu'une seule fois"]})}),c.jsx(ge,{type:"submit",className:"w-full",loading:j,icon:c.jsx(Yv,{className:"w-5 h-5"}),children:"Crer mon compte"}),c.jsx("div",{className:"text-center",children:c.jsx(Qm,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:"Dj un compte ? Se connecter"})})]})]})})},Bj=S.createContext({});function i8(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const Wv=typeof window<"u",a8=Wv?S.useLayoutEffect:S.useEffect,Zv=S.createContext(null);function Jv(t,e){t.indexOf(e)===-1&&t.push(e)}function eb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ti=(t,e,n)=>n>e?e:n<t?t:n;let tb=()=>{};const Ni={},Fj=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function qj(t){return typeof t=="object"&&t!==null}const $j=t=>/^0[^.\s]+$/u.test(t);function nb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Is=t=>t,o8=(t,e)=>n=>e(t(n)),sh=(...t)=>t.reduce(o8),Cd=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class sb{constructor(){this.subscriptions=[]}add(e){return Jv(this.subscriptions,e),()=>eb(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Or=t=>t*1e3,Rs=t=>t/1e3;function Hj(t,e){return e?t*(1e3/e):0}const Gj=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,l8=1e-7,c8=12;function u8(t,e,n,s,i){let o,u,h=0;do u=e+(n-e)/2,o=Gj(u,s,i)-t,o>0?n=u:e=u;while(Math.abs(o)>l8&&++h<c8);return u}function rh(t,e,n,s){if(t===e&&n===s)return Is;const i=o=>u8(o,0,1,t,n);return o=>o===0||o===1?o:Gj(i(o),e,s)}const Kj=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Yj=t=>e=>1-t(1-e),Xj=rh(.33,1.53,.69,.99),rb=Yj(Xj),Qj=Kj(rb),Wj=t=>(t*=2)<1?.5*rb(t):.5*(2-Math.pow(2,-10*(t-1))),ib=t=>1-Math.sin(Math.acos(t)),Zj=Yj(ib),Jj=Kj(ib),d8=rh(.42,0,1,1),h8=rh(0,0,.58,1),e2=rh(.42,0,.58,1),f8=t=>Array.isArray(t)&&typeof t[0]!="number",t2=t=>Array.isArray(t)&&typeof t[0]=="number",m8={linear:Is,easeIn:d8,easeInOut:e2,easeOut:h8,circIn:ib,circInOut:Jj,circOut:Zj,backIn:rb,backInOut:Qj,backOut:Xj,anticipate:Wj},p8=t=>typeof t=="string",oN=t=>{if(t2(t)){tb(t.length===4);const[e,n,s,i]=t;return rh(e,n,s,i)}else if(p8(t))return m8[t];return t},Yf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function g8(t,e){let n=new Set,s=new Set,i=!1,o=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(y){u.has(y)&&(m.schedule(y),t()),y(h)}const m={schedule:(y,v=!1,b=!1)=>{const R=b&&i?n:s;return v&&u.add(y),R.has(y)||R.add(y),y},cancel:y=>{s.delete(y),u.delete(y)},process:y=>{if(h=y,i){o=!0;return}i=!0,[n,s]=[s,n],n.forEach(f),n.clear(),i=!1,o&&(o=!1,m.process(y))}};return m}const y8=40;function n2(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Yf.reduce((V,$)=>(V[$]=g8(o),V),{}),{setup:h,read:f,resolveKeyframes:m,preUpdate:y,update:v,preRender:b,render:T,postRender:R}=u,M=()=>{const V=Ni.useManualTiming?i.timestamp:performance.now();n=!1,Ni.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(V-i.timestamp,y8),1)),i.timestamp=V,i.isProcessing=!0,h.process(i),f.process(i),m.process(i),y.process(i),v.process(i),b.process(i),T.process(i),R.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(M))},j=()=>{n=!0,s=!0,i.isProcessing||t(M)};return{schedule:Yf.reduce((V,$)=>{const Y=u[$];return V[$]=(oe,A=!1,N=!1)=>(n||j(),Y.schedule(oe,A,N)),V},{}),cancel:V=>{for(let $=0;$<Yf.length;$++)u[Yf[$]].cancel(V)},state:i,steps:u}}const{schedule:Rt,cancel:Va,state:wn,steps:s0}=n2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Is,!0);let hm;function x8(){hm=void 0}const Zn={now:()=>(hm===void 0&&Zn.set(wn.isProcessing||Ni.useManualTiming?wn.timestamp:performance.now()),hm),set:t=>{hm=t,queueMicrotask(x8)}},s2=t=>e=>typeof e=="string"&&e.startsWith(t),ab=s2("--"),v8=s2("var(--"),ob=t=>v8(t)?b8.test(t.split("/*")[0].trim()):!1,b8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ic={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jd={...Ic,transform:t=>Ti(0,1,t)},Xf={...Ic,default:1},cd=t=>Math.round(t*1e5)/1e5,lb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function w8(t){return t==null}const _8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cb=(t,e)=>n=>!!(typeof n=="string"&&_8.test(n)&&n.startsWith(t)||e&&!w8(n)&&Object.prototype.hasOwnProperty.call(n,e)),r2=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,o,u,h]=s.match(lb);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},E8=t=>Ti(0,255,t),r0={...Ic,transform:t=>Math.round(E8(t))},Co={test:cb("rgb","red"),parse:r2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+r0.transform(t)+", "+r0.transform(e)+", "+r0.transform(n)+", "+cd(jd.transform(s))+")"};function T8(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const cx={test:cb("#"),parse:T8,transform:Co.transform},ih=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),da=ih("deg"),Vr=ih("%"),ze=ih("px"),N8=ih("vh"),A8=ih("vw"),lN={...Vr,parse:t=>Vr.parse(t)/100,transform:t=>Vr.transform(t*100)},Xl={test:cb("hsl","hue"),parse:r2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Vr.transform(cd(e))+", "+Vr.transform(cd(n))+", "+cd(jd.transform(s))+")"},en={test:t=>Co.test(t)||cx.test(t)||Xl.test(t),parse:t=>Co.test(t)?Co.parse(t):Xl.test(t)?Xl.parse(t):cx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Co.transform(t):Xl.transform(t),getAnimatableNone:t=>{const e=en.parse(t);return e.alpha=0,en.transform(e)}},S8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function C8(t){return isNaN(t)&&typeof t=="string"&&(t.match(lb)?.length||0)+(t.match(S8)?.length||0)>0}const i2="number",a2="color",j8="var",R8="var(",cN="${}",I8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rd(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let o=0;const h=e.replace(I8,f=>(en.test(f)?(s.color.push(o),i.push(a2),n.push(en.parse(f))):f.startsWith(R8)?(s.var.push(o),i.push(j8),n.push(f)):(s.number.push(o),i.push(i2),n.push(parseFloat(f))),++o,cN)).split(cN);return{values:n,split:h,indexes:s,types:i}}function o2(t){return Rd(t).values}function l2(t){const{split:e,types:n}=Rd(t),s=e.length;return i=>{let o="";for(let u=0;u<s;u++)if(o+=e[u],i[u]!==void 0){const h=n[u];h===i2?o+=cd(i[u]):h===a2?o+=en.transform(i[u]):o+=i[u]}return o}}const D8=t=>typeof t=="number"?0:en.test(t)?en.getAnimatableNone(t):t;function M8(t){const e=o2(t);return l2(t)(e.map(D8))}const La={test:C8,parse:o2,createTransformer:l2,getAnimatableNone:M8};function i0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function k8({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,f=2*n-h;i=i0(f,h,t+1/3),o=i0(f,h,t),u=i0(f,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:s}}function Fm(t,e){return n=>n>0?e:t}const Dt=(t,e,n)=>t+(e-t)*n,a0=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},P8=[cx,Co,Xl],O8=t=>P8.find(e=>e.test(t));function uN(t){const e=O8(t);if(!e)return!1;let n=e.parse(t);return e===Xl&&(n=k8(n)),n}const dN=(t,e)=>{const n=uN(t),s=uN(e);if(!n||!s)return Fm(t,e);const i={...n};return o=>(i.red=a0(n.red,s.red,o),i.green=a0(n.green,s.green,o),i.blue=a0(n.blue,s.blue,o),i.alpha=Dt(n.alpha,s.alpha,o),Co.transform(i))},ux=new Set(["none","hidden"]);function V8(t,e){return ux.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function L8(t,e){return n=>Dt(t,e,n)}function ub(t){return typeof t=="number"?L8:typeof t=="string"?ob(t)?Fm:en.test(t)?dN:B8:Array.isArray(t)?c2:typeof t=="object"?en.test(t)?dN:U8:Fm}function c2(t,e){const n=[...t],s=n.length,i=t.map((o,u)=>ub(o)(o,e[u]));return o=>{for(let u=0;u<s;u++)n[u]=i[u](o);return n}}function U8(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=ub(t[i])(t[i],e[i]));return i=>{for(const o in s)n[o]=s[o](i);return n}}function z8(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],u=t.indexes[o][s[o]],h=t.values[u]??0;n[i]=h,s[o]++}return n}const B8=(t,e)=>{const n=La.createTransformer(e),s=Rd(t),i=Rd(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?ux.has(t)&&!i.values.length||ux.has(e)&&!s.values.length?V8(t,e):sh(c2(z8(s,i),i.values),n):Fm(t,e)};function u2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dt(t,e,n):ub(t)(t,e)}const F8=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Rt.update(e,n),stop:()=>Va(e),now:()=>wn.isProcessing?wn.timestamp:Zn.now()}},d2=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)s+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},qm=2e4;function db(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<qm;)e+=n,s=t.next(e);return e>=qm?1/0:e}function q8(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(db(s),qm);return{type:"keyframes",ease:o=>s.next(i*o).value/e,duration:Rs(i)}}const $8=5;function h2(t,e,n){const s=Math.max(e-$8,0);return Hj(n-t(s),e-s)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},o0=.001;function H8({duration:t=Ot.duration,bounce:e=Ot.bounce,velocity:n=Ot.velocity,mass:s=Ot.mass}){let i,o,u=1-e;u=Ti(Ot.minDamping,Ot.maxDamping,u),t=Ti(Ot.minDuration,Ot.maxDuration,Rs(t)),u<1?(i=m=>{const y=m*u,v=y*t,b=y-n,T=dx(m,u),R=Math.exp(-v);return o0-b/T*R},o=m=>{const v=m*u*t,b=v*n+n,T=Math.pow(u,2)*Math.pow(m,2)*t,R=Math.exp(-v),M=dx(Math.pow(m,2),u);return(-i(m)+o0>0?-1:1)*((b-T)*R)/M}):(i=m=>{const y=Math.exp(-m*t),v=(m-n)*t+1;return-o0+y*v},o=m=>{const y=Math.exp(-m*t),v=(n-m)*(t*t);return y*v});const h=5/t,f=K8(i,o,h);if(t=Or(t),isNaN(f))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:t};{const m=Math.pow(f,2)*s;return{stiffness:m,damping:u*2*Math.sqrt(s*m),duration:t}}}const G8=12;function K8(t,e,n){let s=n;for(let i=1;i<G8;i++)s=s-t(s)/e(s);return s}function dx(t,e){return t*Math.sqrt(1-e*e)}const Y8=["duration","bounce"],X8=["stiffness","damping","mass"];function hN(t,e){return e.some(n=>t[n]!==void 0)}function Q8(t){let e={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...t};if(!hN(t,X8)&&hN(t,Y8))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,o=2*Ti(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ot.mass,stiffness:i,damping:o}}else{const n=H8(t);e={...e,...n,mass:Ot.mass},e.isResolvedFromDuration=!0}return e}function $m(t=Ot.visualDuration,e=Ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:o},{stiffness:f,damping:m,mass:y,duration:v,velocity:b,isResolvedFromDuration:T}=Q8({...n,velocity:-Rs(n.velocity||0)}),R=b||0,M=m/(2*Math.sqrt(f*y)),j=u-o,k=Rs(Math.sqrt(f/y)),U=Math.abs(j)<5;s||(s=U?Ot.restSpeed.granular:Ot.restSpeed.default),i||(i=U?Ot.restDelta.granular:Ot.restDelta.default);let V;if(M<1){const Y=dx(k,M);V=oe=>{const A=Math.exp(-M*k*oe);return u-A*((R+M*k*j)/Y*Math.sin(Y*oe)+j*Math.cos(Y*oe))}}else if(M===1)V=Y=>u-Math.exp(-k*Y)*(j+(R+k*j)*Y);else{const Y=k*Math.sqrt(M*M-1);V=oe=>{const A=Math.exp(-M*k*oe),N=Math.min(Y*oe,300);return u-A*((R+M*k*j)*Math.sinh(N)+Y*j*Math.cosh(N))/Y}}const $={calculatedDuration:T&&v||null,next:Y=>{const oe=V(Y);if(T)h.done=Y>=v;else{let A=Y===0?R:0;M<1&&(A=Y===0?Or(R):h2(V,Y,oe));const N=Math.abs(A)<=s,C=Math.abs(u-oe)<=i;h.done=N&&C}return h.value=h.done?u:oe,h},toString:()=>{const Y=Math.min(db($),qm),oe=d2(A=>$.next(Y*A).value,Y,30);return Y+"ms "+oe},toTransition:()=>{}};return $}$m.applyToOptions=t=>{const e=q8(t,100,$m);return t.ease=e.ease,t.duration=Or(e.duration),t.type="keyframes",t};function hx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:f,restDelta:m=.5,restSpeed:y}){const v=t[0],b={done:!1,value:v},T=N=>h!==void 0&&N<h||f!==void 0&&N>f,R=N=>h===void 0?f:f===void 0||Math.abs(h-N)<Math.abs(f-N)?h:f;let M=n*e;const j=v+M,k=u===void 0?j:u(j);k!==j&&(M=k-v);const U=N=>-M*Math.exp(-N/s),V=N=>k+U(N),$=N=>{const C=U(N),L=V(N);b.done=Math.abs(C)<=m,b.value=b.done?k:L};let Y,oe;const A=N=>{T(b.value)&&(Y=N,oe=$m({keyframes:[b.value,R(b.value)],velocity:h2(V,N,b.value),damping:i,stiffness:o,restDelta:m,restSpeed:y}))};return A(0),{calculatedDuration:null,next:N=>{let C=!1;return!oe&&Y===void 0&&(C=!0,$(N),A(N)),Y!==void 0&&N>=Y?oe.next(N-Y):(!C&&$(N),b)}}}function W8(t,e,n){const s=[],i=n||Ni.mix||u2,o=t.length-1;for(let u=0;u<o;u++){let h=i(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Is:e;h=sh(f,h)}s.push(h)}return s}function Z8(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const o=t.length;if(tb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=W8(e,s,i),f=h.length,m=y=>{if(u&&y<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(y<t[v+1]);v++);const b=Cd(t[v],t[v+1],y);return h[v](b)};return n?y=>m(Ti(t[0],t[o-1],y)):m}function J8(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Cd(0,e,s);t.push(Dt(n,1,i))}}function ez(t){const e=[0];return J8(e,t.length-1),e}function tz(t,e){return t.map(n=>n*e)}function nz(t,e){return t.map(()=>e||e2).splice(0,t.length-1)}function ud({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=f8(s)?s.map(oN):oN(s),o={done:!1,value:e[0]},u=tz(n&&n.length===e.length?n:ez(e),t),h=Z8(u,e,{ease:Array.isArray(i)?i:nz(e,i)});return{calculatedDuration:t,next:f=>(o.value=h(f),o.done=f>=t,o)}}const sz=t=>t!==null;function hb(t,{repeat:e,repeatType:n="loop"},s,i=1){const o=t.filter(sz),h=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!h||s===void 0?o[h]:s}const rz={decay:hx,inertia:hx,tween:ud,keyframes:ud,spring:$m};function f2(t){typeof t.type=="string"&&(t.type=rz[t.type])}class fb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const iz=t=>t/100;class mb extends fb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;f2(e);const{type:n=ud,repeat:s=0,repeatDelay:i=0,repeatType:o,velocity:u=0}=e;let{keyframes:h}=e;const f=n||ud;f!==ud&&typeof h[0]!="number"&&(this.mixKeyframes=sh(iz,u2(h[0],h[1])),h=[0,100]);const m=f({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-u})),m.calculatedDuration===null&&(m.calculatedDuration=db(m));const{calculatedDuration:y}=m;this.calculatedDuration=y,this.resolvedDuration=y+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:y,repeat:v,repeatType:b,repeatDelay:T,type:R,onUpdate:M,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const k=this.currentTime-m*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?k<0:k>i;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let V=this.currentTime,$=s;if(v){const N=Math.min(this.currentTime,i)/h;let C=Math.floor(N),L=N%1;!L&&N>=1&&(L=1),L===1&&C--,C=Math.min(C,v+1),!!(C%2)&&(b==="reverse"?(L=1-L,T&&(L-=T/h)):b==="mirror"&&($=u)),V=Ti(0,1,L)*h}const Y=U?{done:!1,value:y[0]}:$.next(V);o&&(Y.value=o(Y.value));let{done:oe}=Y;!U&&f!==null&&(oe=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&oe);return A&&R!==hx&&(Y.value=hb(y,this.options,j,this.speed)),M&&M(Y.value),A&&this.finish(),Y}then(e,n){return this.finished.then(e,n)}get duration(){return Rs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rs(e)}get time(){return Rs(this.currentTime)}set time(e){e=Or(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Rs(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=F8,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function az(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const jo=t=>t*180/Math.PI,fx=t=>{const e=jo(Math.atan2(t[1],t[0]));return mx(e)},oz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:fx,rotateZ:fx,skewX:t=>jo(Math.atan(t[1])),skewY:t=>jo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},mx=t=>(t=t%360,t<0&&(t+=360),t),fN=fx,mN=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),pN=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),lz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:mN,scaleY:pN,scale:t=>(mN(t)+pN(t))/2,rotateX:t=>mx(jo(Math.atan2(t[6],t[5]))),rotateY:t=>mx(jo(Math.atan2(-t[2],t[0]))),rotateZ:fN,rotate:fN,skewX:t=>jo(Math.atan(t[4])),skewY:t=>jo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function px(t){return t.includes("scale")?1:0}function gx(t,e){if(!t||t==="none")return px(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=lz,i=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=oz,i=h}if(!i)return px(e);const o=s[e],u=i[1].split(",").map(uz);return typeof o=="function"?o(u):u[o]}const cz=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return gx(n,e)};function uz(t){return parseFloat(t.trim())}const Dc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mc=new Set(Dc),gN=t=>t===Ic||t===ze,dz=new Set(["x","y","z"]),hz=Dc.filter(t=>!dz.has(t));function fz(t){const e=[];return hz.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Mo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>gx(e,"x"),y:(t,{transform:e})=>gx(e,"y")};Mo.translateX=Mo.x;Mo.translateY=Mo.y;const ko=new Set;let yx=!1,xx=!1,vx=!1;function m2(){if(xx){const t=Array.from(ko).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=fz(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([o,u])=>{s.getValue(o)?.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}xx=!1,yx=!1,ko.forEach(t=>t.complete(vx)),ko.clear()}function p2(){ko.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xx=!0)})}function mz(){vx=!0,p2(),m2(),vx=!1}class pb{constructor(e,n,s,i,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(ko.add(this),yx||(yx=!0,Rt.read(p2),Rt.resolveKeyframes(m2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const o=i?.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&n){const h=s.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),i&&o===void 0&&i.set(e[0])}az(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ko.delete(this)}cancel(){this.state==="scheduled"&&(ko.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const pz=t=>t.startsWith("--");function gz(t,e,n){pz(e)?t.style.setProperty(e,n):t.style[e]=n}const yz=nb(()=>window.ScrollTimeline!==void 0),xz={};function vz(t,e){const n=nb(t);return()=>xz[e]??n()}const g2=vz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ed=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,yN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ed([0,.65,.55,1]),circOut:ed([.55,0,1,.45]),backIn:ed([.31,.01,.66,-.59]),backOut:ed([.33,1.53,.69,.99])};function y2(t,e){if(t)return typeof t=="function"?g2()?d2(t,e):"ease-out":t2(t)?ed(t):Array.isArray(t)?t.map(n=>y2(n,e)||yN.easeOut):yN[t]}function bz(t,e,n,{delay:s=0,duration:i=300,repeat:o=0,repeatType:u="loop",ease:h="easeOut",times:f}={},m=void 0){const y={[e]:n};f&&(y.offset=f);const v=y2(h,i);Array.isArray(v)&&(y.easing=v);const b={delay:s,duration:i,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return m&&(b.pseudoElement=m),t.animate(y,b)}function x2(t){return typeof t=="function"&&"applyToOptions"in t}function wz({type:t,...e}){return x2(t)&&g2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _z extends fb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,tb(typeof e.type!="string");const m=wz(e);this.animation=bz(n,s,i,m,o),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const y=hb(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):gz(n,s,y),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Rs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rs(e)}get time(){return Rs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Or(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&yz()?(this.animation.timeline=e,Is):n(this)}}const v2={anticipate:Wj,backInOut:Qj,circInOut:Jj};function Ez(t){return t in v2}function Tz(t){typeof t.ease=="string"&&Ez(t.ease)&&(t.ease=v2[t.ease])}const xN=10;class Nz extends _z{constructor(e){Tz(e),f2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:o,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new mb({...u,autoplay:!1}),f=Or(this.finishedTime??this.time);n.setWithVelocity(h.sample(f-xN).value,h.sample(f).value,xN),h.stop()}}const vN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(La.test(t)||t==="0")&&!t.startsWith("url("));function Az(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Sz(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=vN(i,e),h=vN(o,e);return!u||!h?!1:Az(t)||(n==="spring"||x2(n))&&s}function bx(t){t.duration=0,t.type="keyframes"}const Cz=new Set(["opacity","clipPath","filter","transform"]),jz=nb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rz(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:o,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=e.owner.getProps();return jz()&&n&&Cz.has(n)&&(n!=="transform"||!m)&&!f&&!s&&i!=="mirror"&&o!==0&&u!=="inertia"}const Iz=40;class Dz extends fb{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:u="loop",keyframes:h,name:f,motionValue:m,element:y,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zn.now();const b={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:o,repeatType:u,name:f,motionValue:m,element:y,...v},T=y?.KeyframeResolver||pb;this.keyframeResolver=new T(h,(R,M,j)=>this.onKeyframesResolved(R,M,b,!j),f,m,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:o,type:u,velocity:h,delay:f,isHandoff:m,onUpdate:y}=s;this.resolvedAt=Zn.now(),Sz(e,o,u,h)||((Ni.instantAnimations||!f)&&y?.(hb(e,s,n)),e[0]=e[e.length-1],bx(s),s.repeat=0);const b={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Iz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},T=!m&&Rz(b)?new Nz({...b,element:b.motionValue.owner.current}):new mb(b);T.finished.then(()=>this.notifyFinished()).catch(Is),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),mz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Mz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kz(t){const e=Mz.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function b2(t,e,n=1){const[s,i]=kz(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const u=o.trim();return Fj(u)?parseFloat(u):u}return ob(i)?b2(i,e,n+1):i}function gb(t,e){return t?.[e]??t?.default??t}const w2=new Set(["width","height","top","left","right","bottom",...Dc]),Pz={test:t=>t==="auto",parse:t=>t},_2=t=>e=>e.test(t),E2=[Ic,ze,Vr,da,A8,N8,Pz],bN=t=>E2.find(_2(t));function Oz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$j(t):!0}const Vz=new Set(["brightness","contrast","saturate","opacity"]);function Lz(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(lb)||[];if(!s)return t;const i=n.replace(s,"");let o=Vz.has(e)?1:0;return s!==n&&(o*=100),e+"("+o+i+")"}const Uz=/\b([a-z-]*)\(.*?\)/gu,wx={...La,getAnimatableNone:t=>{const e=t.match(Uz);return e?e.map(Lz).join(" "):t}},wN={...Ic,transform:Math.round},zz={rotate:da,rotateX:da,rotateY:da,rotateZ:da,scale:Xf,scaleX:Xf,scaleY:Xf,scaleZ:Xf,skew:da,skewX:da,skewY:da,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:jd,originX:lN,originY:lN,originZ:ze},yb={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...zz,zIndex:wN,fillOpacity:jd,strokeOpacity:jd,numOctaves:wN},Bz={...yb,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:wx,WebkitFilter:wx},T2=t=>Bz[t];function N2(t,e){let n=T2(t);return n!==wx&&(n=La),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Fz=new Set(["auto","none","0"]);function qz(t,e,n){let s=0,i;for(;s<t.length&&!i;){const o=t[s];typeof o=="string"&&!Fz.has(o)&&Rd(o).values.length&&(i=t[s]),s++}if(i&&n)for(const o of e)t[o]=N2(n,i)}class $z extends pb{constructor(e,n,s,i,o){super(e,n,s,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),ob(m))){const y=b2(m,n.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!w2.has(s)||e.length!==2)return;const[i,o]=e,u=bN(i),h=bN(o);if(u!==h)if(gN(u)&&gN(h))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else Mo[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||Oz(e[i]))&&s.push(i);s.length&&qz(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mo[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,u=s[o];s[o]=Mo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function Hz(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=n?.[t]??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const A2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Gz(t){return qj(t)&&"offsetHeight"in t}const _N=30,Kz=t=>!isNaN(parseFloat(t));class Yz{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=Zn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Kz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new sb);const s=this.events[e].add(n);return e==="change"?()=>{s(),Rt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>_N)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,_N);return Hj(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gc(t,e){return new Yz(t,e)}const{schedule:xb}=n2(queueMicrotask,!1),Ks={x:!1,y:!1};function S2(){return Ks.x||Ks.y}function Xz(t){return t==="x"||t==="y"?Ks[t]?null:(Ks[t]=!0,()=>{Ks[t]=!1}):Ks.x||Ks.y?null:(Ks.x=Ks.y=!0,()=>{Ks.x=Ks.y=!1})}function C2(t,e){const n=Hz(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function EN(t){return!(t.pointerType==="touch"||S2())}function Qz(t,e,n={}){const[s,i,o]=C2(t,n),u=h=>{if(!EN(h))return;const{target:f}=h,m=e(f,h);if(typeof m!="function"||!f)return;const y=v=>{EN(v)&&(m(v),f.removeEventListener("pointerleave",y))};f.addEventListener("pointerleave",y,i)};return s.forEach(h=>{h.addEventListener("pointerenter",u,i)}),o}const j2=(t,e)=>e?t===e?!0:j2(t,e.parentElement):!1,vb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Wz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Zz(t){return Wz.has(t.tagName)||t.tabIndex!==-1}const fm=new WeakSet;function TN(t){return e=>{e.key==="Enter"&&t(e)}}function l0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Jz=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=TN(()=>{if(fm.has(n))return;l0(n,"down");const i=TN(()=>{l0(n,"up")}),o=()=>l0(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function NN(t){return vb(t)&&!S2()}function e7(t,e,n={}){const[s,i,o]=C2(t,n),u=h=>{const f=h.currentTarget;if(!NN(h))return;fm.add(f);const m=e(f,h),y=(T,R)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",b),fm.has(f)&&fm.delete(f),NN(T)&&typeof m=="function"&&m(T,{success:R})},v=T=>{y(T,f===window||f===document||n.useGlobalTarget||j2(f,T.target))},b=T=>{y(T,!1)};window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",b,i)};return s.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,i),Gz(h)&&(h.addEventListener("focus",m=>Jz(m,i)),!Zz(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function R2(t){return qj(t)&&"ownerSVGElement"in t}function t7(t){return R2(t)&&t.tagName==="svg"}const Rn=t=>!!(t&&t.getVelocity),n7=[...E2,en,La],s7=t=>n7.find(_2(t)),I2=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function r7(t=!0){const e=S.useContext(Zv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,o=S.useId();S.useEffect(()=>{if(t)return i(o)},[t]);const u=S.useCallback(()=>t&&s&&s(o),[o,s,t]);return!n&&s?[!1,u]:[!0]}const D2=S.createContext({strict:!1}),AN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yc={};for(const t in AN)yc[t]={isEnabled:e=>AN[t].some(n=>!!e[n])};function i7(t){for(const e in t)yc[e]={...yc[e],...t[e]}}const a7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||a7.has(t)}let M2=t=>!Hm(t);function o7(t){typeof t=="function"&&(M2=e=>e.startsWith("on")?!Hm(e):t(e))}try{o7(require("@emotion/is-prop-valid").default)}catch{}function l7(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(M2(i)||n===!0&&Hm(i)||!e&&!Hm(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Cp=S.createContext({});function jp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Id(t){return typeof t=="string"||Array.isArray(t)}const bb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wb=["initial",...bb];function Rp(t){return jp(t.animate)||wb.some(e=>Id(t[e]))}function k2(t){return!!(Rp(t)||t.variants)}function c7(t,e){if(Rp(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Id(n)?n:void 0,animate:Id(s)?s:void 0}}return t.inherit!==!1?e:{}}function u7(t){const{initial:e,animate:n}=c7(t,S.useContext(Cp));return S.useMemo(()=>({initial:e,animate:n}),[SN(e),SN(n)])}function SN(t){return Array.isArray(t)?t.join(" "):t}const Dd={};function d7(t){for(const e in t)Dd[e]=t[e],ab(e)&&(Dd[e].isCSSVariable=!0)}function P2(t,{layout:e,layoutId:n}){return Mc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Dd[t]||t==="opacity")}const h7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},f7=Dc.length;function m7(t,e,n){let s="",i=!0;for(let o=0;o<f7;o++){const u=Dc[o],h=t[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const m=A2(h,yb[u]);if(!f){i=!1;const y=h7[u]||u;s+=`${y}(${m}) `}n&&(e[u]=m)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function _b(t,e,n){const{style:s,vars:i,transformOrigin:o}=t;let u=!1,h=!1;for(const f in e){const m=e[f];if(Mc.has(f)){u=!0;continue}else if(ab(f)){i[f]=m;continue}else{const y=A2(m,yb[f]);f.startsWith("origin")?(h=!0,o[f]=y):s[f]=y}}if(e.transform||(u||n?s.transform=m7(e,t.transform,n):s.transform&&(s.transform="none")),h){const{originX:f="50%",originY:m="50%",originZ:y=0}=o;s.transformOrigin=`${f} ${m} ${y}`}}const Eb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function O2(t,e,n){for(const s in e)!Rn(e[s])&&!P2(s,n)&&(t[s]=e[s])}function p7({transformTemplate:t},e){return S.useMemo(()=>{const n=Eb();return _b(n,e,t),Object.assign({},n.vars,n.style)},[e])}function g7(t,e){const n=t.style||{},s={};return O2(s,n,t),Object.assign(s,p7(t,e)),s}function y7(t,e){const n={},s=g7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const x7={offset:"stroke-dashoffset",array:"stroke-dasharray"},v7={offset:"strokeDashoffset",array:"strokeDasharray"};function b7(t,e,n=1,s=0,i=!0){t.pathLength=1;const o=i?x7:v7;t[o.offset]=ze.transform(-s);const u=ze.transform(e),h=ze.transform(n);t[o.array]=`${u} ${h}`}function V2(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:o=1,pathOffset:u=0,...h},f,m,y){if(_b(t,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:b}=t;v.transform&&(b.transform=v.transform,delete v.transform),(b.transform||v.transformOrigin)&&(b.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),b.transform&&(b.transformBox=y?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),s!==void 0&&(v.scale=s),i!==void 0&&b7(v,i,o,u,!1)}const L2=()=>({...Eb(),attrs:{}}),U2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function w7(t,e,n,s){const i=S.useMemo(()=>{const o=L2();return V2(o,e,U2(s),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};O2(o,t.style,t),i.style={...o,...i.style}}return i}const _7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tb(t){return typeof t!="string"||t.includes("-")?!1:!!(_7.indexOf(t)>-1||/[A-Z]/u.test(t))}function E7(t,e,n,{latestValues:s},i,o=!1){const h=(Tb(t)?w7:y7)(e,s,i,t),f=l7(e,typeof t=="string",o),m=t!==S.Fragment?{...f,...h,ref:n}:{},{children:y}=e,v=S.useMemo(()=>Rn(y)?y.get():y,[y]);return S.createElement(t,{...m,children:v})}function CN(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Nb(t,e,n,s){if(typeof e=="function"){const[i,o]=CN(s);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=CN(s);e=e(n!==void 0?n:t.custom,i,o)}return e}function mm(t){return Rn(t)?t.get():t}function T7({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:N7(n,s,i,t),renderState:e()}}function N7(t,e,n,s){const i={},o=s(t,{});for(const b in o)i[b]=mm(o[b]);let{initial:u,animate:h}=t;const f=Rp(t),m=k2(t);e&&m&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let y=n?n.initial===!1:!1;y=y||u===!1;const v=y?h:u;if(v&&typeof v!="boolean"&&!jp(v)){const b=Array.isArray(v)?v:[v];for(let T=0;T<b.length;T++){const R=Nb(t,b[T]);if(R){const{transitionEnd:M,transition:j,...k}=R;for(const U in k){let V=k[U];if(Array.isArray(V)){const $=y?V.length-1:0;V=V[$]}V!==null&&(i[U]=V)}for(const U in M)i[U]=M[U]}}}return i}const z2=t=>(e,n)=>{const s=S.useContext(Cp),i=S.useContext(Zv),o=()=>T7(t,e,s,i);return n?o():i8(o)};function Ab(t,e,n){const{style:s}=t,i={};for(const o in s)(Rn(s[o])||e.style&&Rn(e.style[o])||P2(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(i[o]=s[o]);return i}const A7=z2({scrapeMotionValuesFromProps:Ab,createRenderState:Eb});function B2(t,e,n){const s=Ab(t,e,n);for(const i in t)if(Rn(t[i])||Rn(e[i])){const o=Dc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[o]=t[i]}return s}const S7=z2({scrapeMotionValuesFromProps:B2,createRenderState:L2}),C7=Symbol.for("motionComponentSymbol");function Ql(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function j7(t,e,n){return S.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Ql(n)&&(n.current=s))},[e])}const Sb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),R7="framerAppearId",F2="data-"+Sb(R7),q2=S.createContext({});function I7(t,e,n,s,i){const{visualElement:o}=S.useContext(Cp),u=S.useContext(D2),h=S.useContext(Zv),f=S.useContext(I2).reducedMotion,m=S.useRef(null);s=s||u.renderer,!m.current&&s&&(m.current=s(t,{visualState:e,parent:o,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const y=m.current,v=S.useContext(q2);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&D7(m.current,n,i,v);const b=S.useRef(!1);S.useInsertionEffect(()=>{y&&b.current&&y.update(n,h)});const T=n[F2],R=S.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return a8(()=>{y&&(b.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),R.current&&y.animationState&&y.animationState.animateChanges())}),S.useEffect(()=>{y&&(!R.current&&y.animationState&&y.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),R.current=!1),y.enteringChildren=void 0)}),y}function D7(t,e,n,s){const{layoutId:i,layout:o,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:m,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$2(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!u||h&&Ql(h),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:f,layoutRoot:m})}function $2(t){if(t)return t.options.allowProjection!==!1?t.projection:$2(t.parent)}function c0(t,{forwardMotionProps:e=!1}={},n,s){n&&i7(n);const i=Tb(t)?S7:A7;function o(h,f){let m;const y={...S.useContext(I2),...h,layoutId:M7(h)},{isStatic:v}=y,b=u7(h),T=i(h,v);if(!v&&Wv){k7();const R=P7(y);m=R.MeasureLayout,b.visualElement=I7(t,T,y,s,R.ProjectionNode)}return c.jsxs(Cp.Provider,{value:b,children:[m&&b.visualElement?c.jsx(m,{visualElement:b.visualElement,...y}):null,E7(t,h,j7(T,b.visualElement,f),T,v,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=S.forwardRef(o);return u[C7]=t,u}function M7({layoutId:t}){const e=S.useContext(Bj).id;return e&&t!==void 0?e+"-"+t:t}function k7(t,e){S.useContext(D2).strict}function P7(t){const{drag:e,layout:n}=yc;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function O7(t,e){if(typeof Proxy>"u")return c0;const n=new Map,s=(o,u)=>c0(o,u,t,e),i=(o,u)=>s(o,u);return new Proxy(i,{get:(o,u)=>u==="create"?s:(n.has(u)||n.set(u,c0(u,void 0,t,e)),n.get(u))})}function H2({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function V7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function L7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function u0(t){return t===void 0||t===1}function _x({scale:t,scaleX:e,scaleY:n}){return!u0(t)||!u0(e)||!u0(n)}function No(t){return _x(t)||G2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function G2(t){return jN(t.x)||jN(t.y)}function jN(t){return t&&t!=="0%"}function Gm(t,e,n){const s=t-n,i=e*s;return n+i}function RN(t,e,n,s,i){return i!==void 0&&(t=Gm(t,i,s)),Gm(t,n,s)+e}function Ex(t,e=0,n=1,s,i){t.min=RN(t.min,e,n,s,i),t.max=RN(t.max,e,n,s,i)}function K2(t,{x:e,y:n}){Ex(t.x,e.translate,e.scale,e.originPoint),Ex(t.y,n.translate,n.scale,n.originPoint)}const IN=.999999999999,DN=1.0000000000001;function U7(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let h=0;h<i;h++){o=n[h],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Zl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,K2(t,u)),s&&No(o.latestValues)&&Zl(t,o.latestValues))}e.x<DN&&e.x>IN&&(e.x=1),e.y<DN&&e.y>IN&&(e.y=1)}function Wl(t,e){t.min=t.min+e,t.max=t.max+e}function MN(t,e,n,s,i=.5){const o=Dt(t.min,t.max,i);Ex(t,e,n,o,s)}function Zl(t,e){MN(t.x,e.x,e.scaleX,e.scale,e.originX),MN(t.y,e.y,e.scaleY,e.scale,e.originY)}function Y2(t,e){return H2(L7(t.getBoundingClientRect(),e))}function z7(t,e,n){const s=Y2(t,n),{scroll:i}=e;return i&&(Wl(s.x,i.offset.x),Wl(s.y,i.offset.y)),s}const kN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jl=()=>({x:kN(),y:kN()}),PN=()=>({min:0,max:0}),Ft=()=>({x:PN(),y:PN()}),Tx={current:null},X2={current:!1};function B7(){if(X2.current=!0,!!Wv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tx.current=t.matches;t.addEventListener("change",e),e()}else Tx.current=!1}const F7=new WeakMap;function q7(t,e,n){for(const s in e){const i=e[s],o=n[s];if(Rn(i))t.addValue(s,i);else if(Rn(o))t.addValue(s,gc(i,{owner:t}));else if(o!==i)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(i):u.hasAnimated||u.set(i)}else{const u=t.getStaticValue(s);t.addValue(s,gc(u!==void 0?u:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const ON=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $7{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:o,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Zn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Rt.render(this.render,!1,!0))};const{latestValues:f,renderState:m}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Rp(n),this.isVariantNode=k2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in v){const T=v[b];f[b]!==void 0&&Rn(T)&&T.set(f[b])}}mount(e){this.current=e,F7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),X2.current||B7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tx.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Va(this.notifyUpdate),Va(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Mc.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Rt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yc){const n=yc[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<ON.length;s++){const i=ON[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,u=e[o];u&&(this.propEventSubscriptions[i]=this.on(i,u))}this.prevMotionValues=q7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=gc(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Fj(s)||$j(s))?s=parseFloat(s):!s7(s)&&La.test(n)&&(s=N2(e,n)),this.setBaseTarget(e,Rn(s)?s.get():s)),Rn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=Nb(this.props,n,this.presenceContext?.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Rn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new sb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){xb.render(this.render)}}class Q2 extends $7{constructor(){super(...arguments),this.KeyframeResolver=$z}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function W2(t,{style:e,vars:n},s,i){const o=t.style;let u;for(u in e)o[u]=e[u];i?.applyProjectionStyles(o,s);for(u in n)o.setProperty(u,n[u])}function H7(t){return window.getComputedStyle(t)}class G7 extends Q2{constructor(){super(...arguments),this.type="html",this.renderInstance=W2}readValueFromInstance(e,n){if(Mc.has(n))return this.projection?.isProjecting?px(n):cz(e,n);{const s=H7(e),i=(ab(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Y2(e,n)}build(e,n,s){_b(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Ab(e,n,s)}}const Z2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function K7(t,e,n,s){W2(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(Z2.has(i)?i:Sb(i),e.attrs[i])}class Y7 extends Q2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ft}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Mc.has(n)){const s=T2(n);return s&&s.default||0}return n=Z2.has(n)?n:Sb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return B2(e,n,s)}build(e,n,s){V2(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){K7(e,n,s,i)}mount(e){this.isSVGTag=U2(e.tagName),super.mount(e)}}const X7=(t,e)=>Tb(t)?new Y7(e):new G7(e,{allowProjection:t!==S.Fragment});function oc(t,e,n){const s=t.getProps();return Nb(s,e,n!==void 0?n:s.custom,t)}const Nx=t=>Array.isArray(t);function Q7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,gc(n))}function W7(t){return Nx(t)?t[t.length-1]||0:t}function Z7(t,e){const n=oc(t,e);let{transitionEnd:s={},transition:i={},...o}=n||{};o={...o,...s};for(const u in o){const h=W7(o[u]);Q7(t,u,h)}}function J7(t){return!!(Rn(t)&&t.add)}function Ax(t,e){const n=t.getValue("willChange");if(J7(n))return n.add(e);if(!n&&Ni.WillChange){const s=new Ni.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function J2(t){return t.props[F2]}const eB=t=>t!==null;function tB(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(eB),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const nB={type:"spring",stiffness:500,damping:25,restSpeed:10},sB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),rB={type:"keyframes",duration:.8},iB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aB=(t,{keyframes:e})=>e.length>2?rB:Mc.has(t)?t.startsWith("scale")?sB(e[1]):nB:iB;function oB({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:h,from:f,elapsed:m,...y}){return!!Object.keys(y).length}const Cb=(t,e,n,s={},i,o)=>u=>{const h=gb(s,t)||{},f=h.delay||s.delay||0;let{elapsed:m=0}=s;m=m-Or(f);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:b=>{e.set(b),h.onUpdate&&h.onUpdate(b)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:o?void 0:i};oB(h)||Object.assign(y,aB(t,y)),y.duration&&(y.duration=Or(y.duration)),y.repeatDelay&&(y.repeatDelay=Or(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(bx(y),y.delay===0&&(v=!0)),(Ni.instantAnimations||Ni.skipAnimations)&&(v=!0,bx(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,v&&!o&&e.get()!==void 0){const b=tB(y.keyframes,h);if(b!==void 0){Rt.update(()=>{y.onUpdate(b),y.onComplete()});return}}return h.isSync?new mb(y):new Dz(y)};function lB({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function eR(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...h}=e;s&&(o=s);const f=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const y in h){const v=t.getValue(y,t.latestValues[y]??null),b=h[y];if(b===void 0||m&&lB(m,y))continue;const T={delay:n,...gb(o||{},y)},R=v.get();if(R!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===R&&!T.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const k=J2(t);if(k){const U=window.MotionHandoffAnimation(k,y,Rt);U!==null&&(T.startTime=U,M=!0)}}Ax(t,y),v.start(Cb(y,v,b,t.shouldReduceMotion&&w2.has(y)?{type:!1}:T,t,M));const j=v.animation;j&&f.push(j)}return u&&Promise.all(f).then(()=>{Rt.update(()=>{u&&Z7(t,u)})}),f}function tR(t,e,n,s=0,i=1){const o=Array.from(t).sort((m,y)=>m.sortNodePosition(y)).indexOf(e),u=t.size,h=(u-1)*s;return typeof n=="function"?n(o,u):i===1?o*s:h-o*s}function Sx(t,e,n={}){const s=oc(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(eR(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:v}=i;return cB(t,e,f,m,y,v,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[f,m]=h==="beforeChildren"?[o,u]:[u,o];return f().then(()=>m())}else return Promise.all([o(),u(n.delay)])}function cB(t,e,n=0,s=0,i=0,o=1,u){const h=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),h.push(Sx(f,e,{...u,delay:n+(typeof s=="function"?0:s)+tR(t.variantChildren,f,s,i,o)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(h)}function uB(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(o=>Sx(t,o,n));s=Promise.all(i)}else if(typeof e=="string")s=Sx(t,e,n);else{const i=typeof e=="function"?oc(t,e,n.custom):e;s=Promise.all(eR(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function nR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const dB=wb.length;function sR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?sR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<dB;n++){const s=wb[n],i=t.props[s];(Id(i)||i===!1)&&(e[s]=i)}return e}const hB=[...bb].reverse(),fB=bb.length;function mB(t){return e=>Promise.all(e.map(({animation:n,options:s})=>uB(t,n,s)))}function pB(t){let e=mB(t),n=VN(),s=!0;const i=f=>(m,y)=>{const v=oc(t,y,f==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:b,transitionEnd:T,...R}=v;m={...m,...R,...T}}return m};function o(f){e=f(t)}function u(f){const{props:m}=t,y=sR(t.parent)||{},v=[],b=new Set;let T={},R=1/0;for(let j=0;j<fB;j++){const k=hB[j],U=n[k],V=m[k]!==void 0?m[k]:y[k],$=Id(V),Y=k===f?U.isActive:null;Y===!1&&(R=j);let oe=V===y[k]&&V!==m[k]&&$;if(oe&&s&&t.manuallyAnimateOnMount&&(oe=!1),U.protectedKeys={...T},!U.isActive&&Y===null||!V&&!U.prevProp||jp(V)||typeof V=="boolean")continue;const A=gB(U.prevProp,V);let N=A||k===f&&U.isActive&&!oe&&$||j>R&&$,C=!1;const L=Array.isArray(V)?V:[V];let z=L.reduce(i(k),{});Y===!1&&(z={});const{prevResolvedValues:B={}}=U,D={...B,...z},_e=K=>{N=!0,b.has(K)&&(C=!0,b.delete(K)),U.needsAnimating[K]=!0;const Z=t.getValue(K);Z&&(Z.liveStyle=!1)};for(const K in D){const Z=z[K],q=B[K];if(T.hasOwnProperty(K))continue;let ye=!1;Nx(Z)&&Nx(q)?ye=!nR(Z,q):ye=Z!==q,ye?Z!=null?_e(K):b.add(K):Z!==void 0&&b.has(K)?_e(K):U.protectedKeys[K]=!0}U.prevProp=V,U.prevResolvedValues=z,U.isActive&&(T={...T,...z}),s&&t.blockInitialAnimation&&(N=!1);const me=oe&&A;N&&(!me||C)&&v.push(...L.map(K=>{const Z={type:k};if(typeof K=="string"&&s&&!me&&t.manuallyAnimateOnMount&&t.parent){const{parent:q}=t,ye=oc(q,K);if(q.enteringChildren&&ye){const{delayChildren:O}=ye.transition||{};Z.delay=tR(q.enteringChildren,t,O)}}return{animation:K,options:Z}}))}if(b.size){const j={};if(typeof m.initial!="boolean"){const k=oc(t,Array.isArray(m.initial)?m.initial[0]:m.initial);k&&k.transition&&(j.transition=k.transition)}b.forEach(k=>{const U=t.getBaseTarget(k),V=t.getValue(k);V&&(V.liveStyle=!0),j[k]=U??null}),v.push({animation:j})}let M=!!v.length;return s&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(M=!1),s=!1,M?e(v):Promise.resolve()}function h(f,m){if(n[f].isActive===m)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(f,m)),n[f].isActive=m;const y=u(f);for(const v in n)n[v].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>n,reset:()=>{n=VN()}}}function gB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nR(e,t):!1}function Eo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VN(){return{animate:Eo(!0),whileInView:Eo(),whileHover:Eo(),whileTap:Eo(),whileDrag:Eo(),whileFocus:Eo(),exit:Eo()}}class $a{constructor(e){this.isMounted=!1,this.node=e}update(){}}class yB extends $a{constructor(e){super(e),e.animationState||(e.animationState=pB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let xB=0;class vB extends $a{constructor(){super(...arguments),this.id=xB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const bB={animation:{Feature:yB},exit:{Feature:vB}};function Md(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function ah(t){return{point:{x:t.pageX,y:t.pageY}}}const wB=t=>e=>vb(e)&&t(e,ah(e));function dd(t,e,n,s){return Md(t,e,wB(n),s)}const rR=1e-4,_B=1-rR,EB=1+rR,iR=.01,TB=0-iR,NB=0+iR;function Ln(t){return t.max-t.min}function AB(t,e,n){return Math.abs(t-e)<=n}function LN(t,e,n,s=.5){t.origin=s,t.originPoint=Dt(e.min,e.max,t.origin),t.scale=Ln(n)/Ln(e),t.translate=Dt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=_B&&t.scale<=EB||isNaN(t.scale))&&(t.scale=1),(t.translate>=TB&&t.translate<=NB||isNaN(t.translate))&&(t.translate=0)}function hd(t,e,n,s){LN(t.x,e.x,n.x,s?s.originX:void 0),LN(t.y,e.y,n.y,s?s.originY:void 0)}function UN(t,e,n){t.min=n.min+e.min,t.max=t.min+Ln(e)}function SB(t,e,n){UN(t.x,e.x,n.x),UN(t.y,e.y,n.y)}function zN(t,e,n){t.min=e.min-n.min,t.max=t.min+Ln(e)}function fd(t,e,n){zN(t.x,e.x,n.x),zN(t.y,e.y,n.y)}function As(t){return[t("x"),t("y")]}const aR=({current:t})=>t?t.ownerDocument.defaultView:null,BN=(t,e)=>Math.abs(t-e);function CB(t,e){const n=BN(t.x,e.x),s=BN(t.y,e.y);return Math.sqrt(n**2+s**2)}class oR{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=h0(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,R=CB(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!R)return;const{point:M}=b,{timestamp:j}=wn;this.history.push({...M,timestamp:j});const{onStart:k,onMove:U}=this.handlers;T||(k&&k(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,b)},this.handlePointerMove=(b,T)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=d0(T,this.transformPagePoint),Rt.update(this.updatePoint,!0)},this.handlePointerUp=(b,T)=>{this.end();const{onEnd:R,onSessionEnd:M,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=h0(b.type==="pointercancel"?this.lastMoveEventInfo:d0(T,this.transformPagePoint),this.history);this.startEvent&&R&&R(b,k),M&&M(b,k)},!vb(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=i||window;const h=ah(e),f=d0(h,this.transformPagePoint),{point:m}=f,{timestamp:y}=wn;this.history=[{...m,timestamp:y}];const{onSessionStart:v}=n;v&&v(e,h0(f,this.history)),this.removeListeners=sh(dd(this.contextWindow,"pointermove",this.handlePointerMove),dd(this.contextWindow,"pointerup",this.handlePointerUp),dd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Va(this.updatePoint)}}function d0(t,e){return e?{point:e(t.point)}:t}function FN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function h0({point:t},e){return{point:t,delta:FN(t,lR(e)),offset:FN(t,jB(e)),velocity:RB(e,.1)}}function jB(t){return t[0]}function lR(t){return t[t.length-1]}function RB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=lR(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Or(e)));)n--;if(!s)return{x:0,y:0};const o=Rs(i.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-s.x)/o,y:(i.y-s.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function IB(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Dt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Dt(n,t,s.max):Math.min(t,n)),t}function qN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function DB(t,{top:e,left:n,bottom:s,right:i}){return{x:qN(t.x,n,i),y:qN(t.y,e,s)}}function $N(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function MB(t,e){return{x:$N(t.x,e.x),y:$N(t.y,e.y)}}function kB(t,e){let n=.5;const s=Ln(t),i=Ln(e);return i>s?n=Cd(e.min,e.max-s,t.min):s>i&&(n=Cd(t.min,t.max-i,e.min)),Ti(0,1,n)}function PB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Cx=.35;function OB(t=Cx){return t===!1?t=0:t===!0&&(t=Cx),{x:HN(t,"left","right"),y:HN(t,"top","bottom")}}function HN(t,e,n){return{min:GN(t,e),max:GN(t,n)}}function GN(t,e){return typeof t=="number"?t:t[e]||0}const VB=new WeakMap;class LB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ft(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ah(v).point)},u=(v,b)=>{const{drag:T,dragPropagation:R,onDragStart:M}=this.getProps();if(T&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Xz(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),As(k=>{let U=this.getAxisMotionValue(k).get()||0;if(Vr.test(U)){const{projection:V}=this.visualElement;if(V&&V.layout){const $=V.layout.layoutBox[k];$&&(U=Ln($)*(parseFloat(U)/100))}}this.originPoint[k]=U}),M&&Rt.postRender(()=>M(v,b)),Ax(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},h=(v,b)=>{this.latestPointerEvent=v,this.latestPanInfo=b;const{dragPropagation:T,dragDirectionLock:R,onDirectionLock:M,onDrag:j}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:k}=b;if(R&&this.currentDirection===null){this.currentDirection=UB(k),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",b.point,k),this.updateAxis("y",b.point,k),this.visualElement.render(),j&&j(v,b)},f=(v,b)=>{this.latestPointerEvent=v,this.latestPanInfo=b,this.stop(v,b),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>As(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new oR(e,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:aR(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!s)return;const{velocity:u}=i;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&Rt.postRender(()=>h(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Qf(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=IB(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ql(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=DB(s.layoutBox,e):this.constraints=!1,this.elastic=OB(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&As(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=PB(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ql(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=z7(s,i.root,this.visualElement.getTransformPagePoint());let u=MB(i.layout.layoutBox,o);if(n){const h=n(V7(u));this.hasMutatedConstraints=!!h,h&&(u=H2(h))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},m=As(y=>{if(!Qf(y,n,this.currentDirection))return;let v=f&&f[y]||{};u&&(v={min:0,max:0});const b=i?200:1e6,T=i?40:1e7,R={type:"inertia",velocity:s?e[y]:0,bounceStiffness:b,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(y,R)});return Promise.all(m).then(h)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Ax(this.visualElement,e),s.start(Cb(e,s,0,n,this.visualElement,!1))}stopAnimation(){As(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){As(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){As(n=>{const{drag:s}=this.getProps();if(!Qf(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:h}=i.layout.layoutBox[n];o.set(e[n]-Dt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Ql(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};As(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();i[u]=kB({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),As(u=>{if(!Qf(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];h.set(Dt(f,m,i[u]))})}addListeners(){if(!this.visualElement.current)return;VB.set(this.visualElement,this);const e=this.visualElement.current,n=dd(e,"pointerdown",f=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Ql(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Rt.read(s);const u=Md(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(As(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=f[y].translate,v.set(v.get()+f[y].translate))}),this.visualElement.render())}));return()=>{u(),n(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=Cx,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function Qf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function UB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class zB extends $a{constructor(e){super(e),this.removeGroupControls=Is,this.removeListeners=Is,this.controls=new LB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Is}unmount(){this.removeGroupControls(),this.removeListeners()}}const KN=t=>(e,n)=>{t&&Rt.postRender(()=>t(e,n))};class BB extends $a{constructor(){super(...arguments),this.removePointerDownListener=Is}onPointerDown(e){this.session=new oR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:KN(e),onStart:KN(n),onMove:s,onEnd:(o,u)=>{delete this.session,i&&Rt.postRender(()=>i(o,u))}}}mount(){this.removePointerDownListener=dd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ze.test(t))t=parseFloat(t);else return t;const n=YN(t,e.target.x),s=YN(t,e.target.y);return`${n}% ${s}%`}},FB={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=La.parse(t);if(i.length>5)return s;const o=La.createTransformer(t),u=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,f=n.y.scale*e.y;i[0+u]/=h,i[1+u]/=f;const m=Dt(h,f,.5);return typeof i[2+u]=="number"&&(i[2+u]/=m),typeof i[3+u]=="number"&&(i[3+u]/=m),o(i)}};let f0=!1;class qB extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:o}=e;d7($B),o&&(n.group&&n.group.add(o),s&&s.register&&i&&s.register(o),f0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),pm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:o}=this.props,{projection:u}=s;return u&&(u.isPresent=o,f0=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Rt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;f0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cR(t){const[e,n]=r7(),s=S.useContext(Bj);return c.jsx(qB,{...t,layoutGroup:s,switchLayoutGroup:S.useContext(q2),isPresent:e,safeToRemove:n})}const $B={borderRadius:{...Hu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hu,borderTopRightRadius:Hu,borderBottomLeftRadius:Hu,borderBottomRightRadius:Hu,boxShadow:FB};function HB(t,e,n){const s=Rn(t)?t:gc(t);return s.start(Cb("",s,e,n)),s.animation}const GB=(t,e)=>t.depth-e.depth;class KB{constructor(){this.children=[],this.isDirty=!1}add(e){Jv(this.children,e),this.isDirty=!0}remove(e){eb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GB),this.isDirty=!1,this.children.forEach(e)}}function YB(t,e){const n=Zn.now(),s=({timestamp:i})=>{const o=i-n;o>=e&&(Va(s),t(o-e))};return Rt.setup(s,!0),()=>Va(s)}const uR=["TopLeft","TopRight","BottomLeft","BottomRight"],XB=uR.length,XN=t=>typeof t=="string"?parseFloat(t):t,QN=t=>typeof t=="number"||ze.test(t);function QB(t,e,n,s,i,o){i?(t.opacity=Dt(0,n.opacity??1,WB(s)),t.opacityExit=Dt(e.opacity??1,0,ZB(s))):o&&(t.opacity=Dt(e.opacity??1,n.opacity??1,s));for(let u=0;u<XB;u++){const h=`border${uR[u]}Radius`;let f=WN(e,h),m=WN(n,h);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||QN(f)===QN(m)?(t[h]=Math.max(Dt(XN(f),XN(m),s),0),(Vr.test(m)||Vr.test(f))&&(t[h]+="%")):t[h]=m}(e.rotate||n.rotate)&&(t.rotate=Dt(e.rotate||0,n.rotate||0,s))}function WN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const WB=dR(0,.5,Zj),ZB=dR(.5,.95,Is);function dR(t,e,n){return s=>s<t?0:s>e?1:n(Cd(t,e,s))}function ZN(t,e){t.min=e.min,t.max=e.max}function Ns(t,e){ZN(t.x,e.x),ZN(t.y,e.y)}function JN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function eA(t,e,n,s,i){return t-=e,t=Gm(t,1/n,s),i!==void 0&&(t=Gm(t,1/i,s)),t}function JB(t,e=0,n=1,s=.5,i,o=t,u=t){if(Vr.test(e)&&(e=parseFloat(e),e=Dt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=Dt(o.min,o.max,s);t===o&&(h-=e),t.min=eA(t.min,e,n,h,i),t.max=eA(t.max,e,n,h,i)}function tA(t,e,[n,s,i],o,u){JB(t,e[n],e[s],e[i],e.scale,o,u)}const eF=["x","scaleX","originX"],tF=["y","scaleY","originY"];function nA(t,e,n,s){tA(t.x,e,eF,n?n.x:void 0,s?s.x:void 0),tA(t.y,e,tF,n?n.y:void 0,s?s.y:void 0)}function sA(t){return t.translate===0&&t.scale===1}function hR(t){return sA(t.x)&&sA(t.y)}function rA(t,e){return t.min===e.min&&t.max===e.max}function nF(t,e){return rA(t.x,e.x)&&rA(t.y,e.y)}function iA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function fR(t,e){return iA(t.x,e.x)&&iA(t.y,e.y)}function aA(t){return Ln(t.x)/Ln(t.y)}function oA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class sF{constructor(){this.members=[]}add(e){Jv(this.members,e),e.scheduleRender()}remove(e){if(eb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rF(t,e,n){let s="";const i=t.x.translate/e.x,o=t.y.translate/e.y,u=n?.z||0;if((i||o||u)&&(s=`translate3d(${i}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:y,rotateX:v,rotateY:b,skewX:T,skewY:R}=n;m&&(s=`perspective(${m}px) ${s}`),y&&(s+=`rotate(${y}deg) `),v&&(s+=`rotateX(${v}deg) `),b&&(s+=`rotateY(${b}deg) `),T&&(s+=`skewX(${T}deg) `),R&&(s+=`skewY(${R}deg) `)}const h=t.x.scale*e.x,f=t.y.scale*e.y;return(h!==1||f!==1)&&(s+=`scale(${h}, ${f})`),s||"none"}const m0=["","X","Y","Z"],iF=1e3;let aF=0;function p0(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function mR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=J2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Rt,!(i||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&mR(s)}function pR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(u={},h=e?.()){this.id=aF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cF),this.nodes.forEach(fF),this.nodes.forEach(mF),this.nodes.forEach(uF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new KB)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new sb),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=R2(u)&&!t7(u),this.instance=u;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),t){let y,v=0;const b=()=>this.root.updateBlockedByResize=!1;Rt.read(()=>{v=window.innerWidth}),t(u,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,y&&y(),y=YB(b,250),pm.hasAnimatedSinceResize&&(pm.hasAnimatedSinceResize=!1,this.nodes.forEach(uA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:b,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||m.getDefaultTransition()||vF,{onLayoutAnimationStart:M,onLayoutAnimationComplete:j}=m.getProps(),k=!this.targetLayout||!fR(this.targetLayout,T),U=!v&&b;if(this.options.layoutRoot||this.resumeFrom||U||v&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...gb(R,"layout"),onPlay:M,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(y,U)}else v||uA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pF),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hF),this.nodes.forEach(oF),this.nodes.forEach(lF)):this.nodes.forEach(cA),this.clearAllSnapshots();const h=Zn.now();wn.delta=Ti(0,1e3/60,h-wn.timestamp),wn.timestamp=h,wn.isProcessing=!0,s0.update.process(wn),s0.preRender.process(wn),s0.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dF),this.sharedNodes.forEach(gF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!hR(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;u&&this.instance&&(h||No(this.latestValues)||y)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),bF(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Ft();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(wF))){const{scroll:m}=this.root;m&&(Wl(h.x,m.offset.x),Wl(h.y,m.offset.y))}return h}removeElementScroll(u){const h=Ft();if(Ns(h,u),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:y,options:v}=m;m!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Ns(h,u),Wl(h.x,y.offset.x),Wl(h.y,y.offset.y))}return h}applyTransform(u,h=!1){const f=Ft();Ns(f,u);for(let m=0;m<this.path.length;m++){const y=this.path[m];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Zl(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),No(y.latestValues)&&Zl(f,y.latestValues)}return No(this.latestValues)&&Zl(f,this.latestValues),f}removeTransform(u){const h=Ft();Ns(h,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!No(m.latestValues))continue;_x(m.latestValues)&&m.updateSnapshot();const y=Ft(),v=m.measurePageBox();Ns(y,v),nA(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return No(this.latestValues)&&nA(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!(!this.layout||!(y||v))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),fd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ft(),this.targetWithTransforms=Ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),SB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ns(this.target,this.layout.layoutBox),K2(this.target,this.targetDelta)):Ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),fd(this.relativeTargetOrigin,this.target,b.target),Ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_x(this.parent.latestValues)||G2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(f=!1),f)return;const{layout:m,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||y))return;Ns(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;U7(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ft());const{target:T}=u;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JN(this.prevProjectionDelta.x,this.projectionDelta.x),JN(this.prevProjectionDelta.y,this.projectionDelta.y)),hd(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!oA(this.projectionDelta.x,this.prevProjectionDelta.x)||!oA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jl(),this.projectionDelta=Jl(),this.projectionDeltaWithTransform=Jl()}setAnimationOrigin(u,h=!1){const f=this.snapshot,m=f?f.latestValues:{},y={...this.latestValues},v=Jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const b=Ft(),T=f?f.source:void 0,R=this.layout?this.layout.source:void 0,M=T!==R,j=this.getStack(),k=!j||j.members.length<=1,U=!!(M&&!k&&this.options.crossfade===!0&&!this.path.some(xF));this.animationProgress=0;let V;this.mixTargetDelta=$=>{const Y=$/1e3;dA(v.x,u.x,Y),dA(v.y,u.y,Y),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fd(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yF(this.relativeTarget,this.relativeTargetOrigin,b,Y),V&&nF(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Ft()),Ns(V,this.relativeTarget)),M&&(this.animationValues=y,QB(y,m,this.latestValues,Y,U,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rt.update(()=>{pm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gc(0)),this.currentAnimation=HB(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:m,latestValues:y}=u;if(!(!h||!f||!m)){if(this!==u&&this.layout&&m&&gR(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||Ft();const v=Ln(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+v;const b=Ln(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+b}Ns(h,f),Zl(h,y),hd(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new sF),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const m={};f.z&&p0("z",u,m,this.animationValues);for(let y=0;y<m0.length;y++)p0(`rotate${m0[y]}`,u,m,this.animationValues),p0(`skew${m0[y]}`,u,m,this.animationValues);u.render();for(const y in m)u.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=mm(h?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=mm(h?.pointerEvents)||""),this.hasProjected&&!No(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const y=m.animationValues||m.latestValues;this.applyTransformsToTarget();let v=rF(this.projectionDeltaWithTransform,this.treeScale,y);f&&(v=f(y,v)),u.transform=v;const{x:b,y:T}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${T.origin*100}% 0`,m.animationValues?u.opacity=m===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:u.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const R in Dd){if(y[R]===void 0)continue;const{correct:M,applyTo:j,isCSSVariable:k}=Dd[R],U=v==="none"?y[R]:M(y[R],m);if(j){const V=j.length;for(let $=0;$<V;$++)u[j[$]]=U}else k?this.options.visualElement.renderState.vars[R]=U:u[R]=U}this.options.layoutId&&(u.pointerEvents=m===this?mm(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(lA),this.root.sharedNodes.clear()}}}function oF(t){t.updateLayout()}function lF(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?As(y=>{const v=o?e.measuredBox[y]:e.layoutBox[y],b=Ln(v);v.min=n[y].min,v.max=v.min+b}):gR(i,e.layoutBox,n)&&As(y=>{const v=o?e.measuredBox[y]:e.layoutBox[y],b=Ln(n[y]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+b)});const u=Jl();hd(u,n,e.layoutBox);const h=Jl();o?hd(h,t.applyTransform(s,!0),e.measuredBox):hd(h,n,e.layoutBox);const f=!hR(u);let m=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:b}=y;if(v&&b){const T=Ft();fd(T,e.layoutBox,v.layoutBox);const R=Ft();fd(R,n,b.layoutBox),fR(T,R)||(m=!0),y.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=T,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function cF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function uF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dF(t){t.clearSnapshot()}function lA(t){t.clearMeasurements()}function cA(t){t.isLayoutDirty=!1}function hF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fF(t){t.resolveTargetDelta()}function mF(t){t.calcProjection()}function pF(t){t.resetSkewAndRotation()}function gF(t){t.removeLeadSnapshot()}function dA(t,e,n){t.translate=Dt(e.translate,0,n),t.scale=Dt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function hA(t,e,n,s){t.min=Dt(e.min,n.min,s),t.max=Dt(e.max,n.max,s)}function yF(t,e,n,s){hA(t.x,e.x,n.x,s),hA(t.y,e.y,n.y,s)}function xF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const vF={duration:.45,ease:[.4,0,.1,1]},fA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),mA=fA("applewebkit/")&&!fA("chrome/")?Math.round:Is;function pA(t){t.min=mA(t.min),t.max=mA(t.max)}function bF(t){pA(t.x),pA(t.y)}function gR(t,e,n){return t==="position"||t==="preserve-aspect"&&!AB(aA(e),aA(n),.2)}function wF(t){return t!==t.root&&t.scroll?.wasRoot}const _F=pR({attachResizeListener:(t,e)=>Md(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),g0={current:void 0},yR=pR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!g0.current){const t=new _F({});t.mount(window),t.setOptions({layoutScroll:!0}),g0.current=t}return g0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),EF={pan:{Feature:BB},drag:{Feature:zB,ProjectionNode:yR,MeasureLayout:cR}};function gA(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=s[i];o&&Rt.postRender(()=>o(e,ah(e)))}class TF extends $a{mount(){const{current:e}=this.node;e&&(this.unmount=Qz(e,(n,s)=>(gA(this.node,s,"Start"),i=>gA(this.node,i,"End"))))}unmount(){}}class NF extends $a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sh(Md(this.node.current,"focus",()=>this.onFocus()),Md(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yA(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=s[i];o&&Rt.postRender(()=>o(e,ah(e)))}class AF extends $a{mount(){const{current:e}=this.node;e&&(this.unmount=e7(e,(n,s)=>(yA(this.node,s,"Start"),(i,{success:o})=>yA(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jx=new WeakMap,y0=new WeakMap,SF=t=>{const e=jx.get(t.target);e&&e(t)},CF=t=>{t.forEach(SF)};function jF({root:t,...e}){const n=t||document;y0.has(n)||y0.set(n,{});const s=y0.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(CF,{root:t,...e})),s[i]}function RF(t,e,n){const s=jF(e);return jx.set(t,n),s.observe(t),()=>{jx.delete(t),s.unobserve(t)}}const IF={some:0,all:1};class DF extends $a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:IF[i]},h=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,o&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),b=m?y:v;b&&b(f)};return RF(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MF(e,n))&&this.startObserver()}unmount(){}}function MF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kF={inView:{Feature:DF},tap:{Feature:AF},focus:{Feature:NF},hover:{Feature:TF}},PF={layout:{ProjectionNode:yR,MeasureLayout:cR}},OF={...bB,...kF,...EF,...PF},Wf=O7(OF,X7),Oe=({children:t,className:e,padding:n="md"})=>{const s={sm:"p-4",md:"p-6",lg:"p-8"};return c.jsx("div",{className:Do("bg-white rounded-lg shadow-md border border-gray-200",s[n],e),children:t})};class VF{collectionName="clientSelections";async getClientSelections(){const e=ve(re,this.collectionName),n=Ie(e,it("submittedAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data(),submittedAt:i.data().submittedAt?.toDate?.()?.toISOString()||i.data().submittedAt,reviewedAt:i.data().reviewedAt?.toDate?.()?.toISOString()||i.data().reviewedAt,createdAt:i.data().createdAt?.toDate?.()?.toISOString()||i.data().createdAt,updatedAt:i.data().updatedAt?.toDate?.()?.toISOString()||i.data().updatedAt}))}async getPendingSelections(){const e=ve(re,this.collectionName),n=Ie(e,Ge("status","==","submitted"),it("submittedAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data(),submittedAt:i.data().submittedAt?.toDate?.()?.toISOString()||i.data().submittedAt,reviewedAt:i.data().reviewedAt?.toDate?.()?.toISOString()||i.data().reviewedAt,createdAt:i.data().createdAt?.toDate?.()?.toISOString()||i.data().createdAt,updatedAt:i.data().updatedAt?.toDate?.()?.toISOString()||i.data().updatedAt}))}async updateSelectionStatus(e,n,s,i){const o=Ne(re,this.collectionName,e),u={status:n,reviewedAt:fe.now(),reviewedBy:s,updatedAt:fe.now()};i&&(u.notes=i),await _t(o,u)}subscribeToClientSelections(e){const n=ve(re,this.collectionName),s=Ie(n,it("submittedAt","desc"));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data(),submittedAt:u.data().submittedAt?.toDate?.()?.toISOString()||u.data().submittedAt,reviewedAt:u.data().reviewedAt?.toDate?.()?.toISOString()||u.data().reviewedAt,createdAt:u.data().createdAt?.toDate?.()?.toISOString()||u.data().createdAt,updatedAt:u.data().updatedAt?.toDate?.()?.toISOString()||u.data().updatedAt}));e(o)})}subscribeToPendingSelections(e){const n=ve(re,this.collectionName),s=Ie(n,Ge("status","==","submitted"),it("submittedAt","desc"));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data(),submittedAt:u.data().submittedAt?.toDate?.()?.toISOString()||u.data().submittedAt,reviewedAt:u.data().reviewedAt?.toDate?.()?.toISOString()||u.data().reviewedAt,createdAt:u.data().createdAt?.toDate?.()?.toISOString()||u.data().createdAt,updatedAt:u.data().updatedAt?.toDate?.()?.toISOString()||u.data().updatedAt}));e(o)})}}const xA=new VF,LF=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),[i,o]=S.useState(null);return S.useEffect(()=>{let h=null;return(()=>{try{h=xA.subscribeToClientSelections(async m=>{const y=await Promise.all(m.map(async v=>{try{console.log("Enriching selection for clientId:",v.clientId);const b=await ga.getClients();console.log("All clients:",b.map(M=>({id:M.id,userId:M.userId,email:M.email,nom:M.nom,prenom:M.prenom})));let T=b.find(M=>M.userId===v.clientId);console.log("Client found by userId:",T),T||(console.log("No client found by userId, trying to find user by UID and then client by email..."),T=b.find(M=>M.id===v.clientId),console.log("Client found by id:",T));const R=T?`${T.prenom} ${T.nom}`:`Client ${v.clientId.substring(0,8)}...`;return console.log("Final client name:",R),{...v,clientName:R}}catch(b){return console.error("Error enriching selection with client name:",b),{...v,clientName:`Client ${v.clientId.substring(0,8)}...`}}}));e(y),s(!1),o(null)})}catch(m){console.error("Error setting up client selections subscription:",m),o("Erreur lors du chargement des slections clients"),s(!1)}})(),()=>{h&&h()}},[]),{clientSelections:t,loading:n,error:i,updateSelectionStatus:async(h,f,m)=>{try{await xA.updateSelectionStatus(h,f,"admin",m)}catch(y){throw console.error("Error updating selection status:",y),new Error("Erreur lors de la mise  jour du statut")}}}},Ao=[{name:"Approvisionnement",description:"Commande et rception des matriaux ncessaires",status:"pending",progress:0,category:"main",order:1,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:3,photos:[],notes:""},{name:"Fondation",description:"Travaux de fondation complets",status:"pending",progress:0,category:"gros_oeuvre",order:2,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:10,photos:[],notes:"",steps:[{id:"implantation",name:"Implantation",description:"Marquage et positionnement des fondations",status:"pending",progress:0,estimatedDuration:1,notes:""},{id:"terrassement",name:"Terrassement",description:"Excavation et prparation du terrain",status:"pending",progress:0,estimatedDuration:4,notes:""},{id:"fondation",name:"Fondation",description:"Coulage des fondations",status:"pending",progress:0,estimatedDuration:5,notes:""}]},{name:"lvation",description:"Construction des murs et structures verticales",status:"pending",progress:0,category:"gros_oeuvre",order:3,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:15,photos:[],notes:"",steps:[{id:"maconnerie",name:"Maonnerie",description:"Construction des murs en maonnerie",status:"pending",progress:0,estimatedDuration:10,notes:""},{id:"beton_arme",name:"lments bton arm",description:"Mise en place des lments en bton arm",status:"pending",progress:0,estimatedDuration:5,notes:""}]},{name:"Coulage",description:"Coulage des dalles",status:"pending",progress:0,category:"gros_oeuvre",order:4,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:3,photos:[],notes:"",steps:[{id:"coulage_dalle",name:"Coulage dalle",description:"Coulage de la dalle de plancher",status:"pending",progress:0,estimatedDuration:3,notes:""}]},{name:"Vrification gros uvre",description:"Contrle qualit du gros uvre",status:"pending",progress:0,category:"gros_oeuvre",order:5,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:2,photos:[],notes:""},{name:"Plomberie",description:"Installation complte de la plomberie",status:"pending",progress:0,category:"second_oeuvre",order:6,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:8,photos:[],notes:"",steps:[{id:"alimentation",name:"Alimentation",description:"Installation du rseau d'alimentation en eau",status:"pending",progress:0,estimatedDuration:3,notes:""},{id:"appareillage_plomberie",name:"Appareillage",description:"Installation des appareils sanitaires",status:"pending",progress:0,estimatedDuration:3,notes:""},{id:"evacuation",name:"vacuation",description:"Installation du rseau d'vacuation",status:"pending",progress:0,estimatedDuration:2,notes:""}]},{name:"lectricit",description:"Installation lectrique complte",status:"pending",progress:0,category:"second_oeuvre",order:7,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:7,photos:[],notes:"",steps:[{id:"fourretage",name:"Fourretage",description:"Passage des gaines lectriques",status:"pending",progress:0,estimatedDuration:2,notes:""},{id:"cablage",name:"Cblage",description:"Installation des cbles lectriques",status:"pending",progress:0,estimatedDuration:3,notes:""},{id:"appareillage_electrique",name:"Appareillage",description:"Installation des prises et interrupteurs",status:"pending",progress:0,estimatedDuration:2,notes:""}]},{name:"Carrelage",description:"Pose du carrelage",status:"pending",progress:0,category:"second_oeuvre",order:8,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:6,photos:[],notes:""},{name:"tanchit",description:"Travaux d'tanchit",status:"pending",progress:0,category:"second_oeuvre",order:9,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:3,photos:[],notes:""},{name:"Menuiserie",description:"Installation des menuiseries",status:"pending",progress:0,category:"second_oeuvre",order:10,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:5,photos:[],notes:""},{name:"Faux plafond",description:"Installation des faux plafonds",status:"pending",progress:0,category:"second_oeuvre",order:11,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:4,photos:[],notes:""},{name:"Peinture",description:"Travaux de peinture complets",status:"pending",progress:0,category:"second_oeuvre",order:12,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:8,photos:[],notes:"",steps:[{id:"grattage",name:"Grattage",description:"Prparation des surfaces",status:"pending",progress:0,estimatedDuration:2,notes:""},{id:"couche_primaire",name:"Application couche primaire",description:"Application de la sous-couche",status:"pending",progress:0,estimatedDuration:3,notes:""},{id:"couche_secondaire",name:"Application couche secondaire",description:"Application de la couche de finition",status:"pending",progress:0,estimatedDuration:3,notes:""}]},{name:"Vrification second uvre",description:"Contrle qualit du second uvre",status:"pending",progress:0,category:"second_oeuvre",order:13,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:2,photos:[],notes:""},{name:"Clef en main",description:"Livraison finale du projet",status:"pending",progress:0,category:"main",order:14,assignedTeamMembers:[],requiredMaterials:[],estimatedDuration:1,photos:[],notes:""}],jb=t=>{if(!t.steps||t.steps.length===0)return t.progress;const e=t.steps.reduce((n,s)=>n+s.progress,0);return Math.round(e/t.steps.length)},xc=t=>{if(t.length===0)return 0;const e=t.reduce((n,s)=>"steps"in s&&s.steps&&s.steps.length>0?n+jb(s):n+s.progress,0);return Math.round(e/t.length)},kd=(t,e)=>{const n=xc(t),s=new Date,i=e.toDate();return n===100?"Termin":n===0?"En attente":s>i&&n<100?"En retard":"En cours"},gm=t=>t===0?"pending":t===100?"completed":"in-progress",UF=Object.freeze(Object.defineProperty({__proto__:null,KATOS_STANDARD_PHASES:Ao,calculateGlobalProgress:xc,calculatePhaseProgress:jb,getChantierStatus:kd,getPhaseStatus:gm},Symbol.toStringTag,{value:"Module"})),vn=[];for(let t=0;t<256;++t)vn.push((t+256).toString(16).slice(1));function zF(t,e=0){return(vn[t[e+0]]+vn[t[e+1]]+vn[t[e+2]]+vn[t[e+3]]+"-"+vn[t[e+4]]+vn[t[e+5]]+"-"+vn[t[e+6]]+vn[t[e+7]]+"-"+vn[t[e+8]]+vn[t[e+9]]+"-"+vn[t[e+10]]+vn[t[e+11]]+vn[t[e+12]]+vn[t[e+13]]+vn[t[e+14]]+vn[t[e+15]]).toLowerCase()}let x0;const BF=new Uint8Array(16);function FF(){if(!x0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");x0=crypto.getRandomValues.bind(crypto)}return x0(BF)}const qF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vA={randomUUID:qF};function $F(t,e,n){t=t||{};const s=t.random??t.rng?.()??FF();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,zF(s)}function xa(t,e,n){return vA.randomUUID&&!t?vA.randomUUID():$F(t)}class HF{COLLECTION_NAME="chantiers";async createChantierFromTemplate(e,n,s,i){try{const{KATOS_STANDARD_PHASES:o}=await ac(async()=>{const{KATOS_STANDARD_PHASES:y}=await Promise.resolve().then(()=>UF);return{KATOS_STANDARD_PHASES:y}},void 0),u=o.map(y=>{const v={id:xa(),name:y.name,description:y.description,status:y.status,progress:y.progress,category:y.category,order:y.order,assignedTeamMembers:y.assignedTeamMembers,requiredMaterials:y.requiredMaterials,estimatedDuration:y.estimatedDuration,photos:y.photos,notes:y.notes||"",lastUpdated:fe.now(),updatedBy:i,plannedStartDate:null,plannedEndDate:null,actualStartDate:null,actualEndDate:null};return y.steps&&y.steps.length>0&&(v.steps=y.steps.map(b=>({id:xa(),name:b.name,description:b.description,status:b.status,progress:b.progress,estimatedDuration:b.estimatedDuration,notes:b.notes||"",actualStartDate:null,actualEndDate:null}))),v}),h={clientId:e,projectTemplateId:n,name:s.name,address:s.address,status:"En attente",globalProgress:0,startDate:fe.fromDate(s.startDate),plannedEndDate:fe.fromDate(s.plannedEndDate),phases:u,assignedChefId:s.assignedChefId,team:[],gallery:[],updates:[],createdAt:fe.now(),updatedAt:fe.now(),createdBy:i,coverImage:s.coverImage||null,actualEndDate:null},f=ve(re,this.COLLECTION_NAME),m=await Bn(f,h);return console.log("Chantier cr avec succs:",m.id),m.id}catch(o){throw console.error("Erreur lors de la cration du chantier:",o),o}}async getChantierById(e){try{const n=Ne(re,this.COLLECTION_NAME,e),s=await Pn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){return console.error("Erreur lors de la rcupration du chantier:",n),null}}async getClientChantier(e){try{const n=ve(re,this.COLLECTION_NAME),s=Ie(n,Ge("clientId","==",e)),i=await Ue(s);if(i.empty)return null;const o=i.docs[0];return{id:o.id,...o.data()}}catch(n){return console.error("Erreur lors de la rcupration du chantier client:",n),null}}async getChefChantiers(e){try{const n=ve(re,this.COLLECTION_NAME),s=Ie(n,Ge("assignedChefId","==",e),it("updatedAt","desc"));return(await Ue(s)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){return console.error("Erreur lors de la rcupration des chantiers du chef:",n),[]}}async getAllChantiers(){try{const e=ve(re,this.COLLECTION_NAME),n=Ie(e,it("updatedAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){return console.error("Erreur lors de la rcupration de tous les chantiers:",e),[]}}async updatePhaseProgress(e,n,s,i,o){try{const u=await this.getChantierById(e);if(!u)throw new Error("Chantier non trouv");const h=u.phases.map(y=>y.id===n?{...y,progress:Math.max(0,Math.min(100,s)),status:gm(s),notes:i||y.notes,lastUpdated:fe.now(),updatedBy:o||"system"}:y),f=xc(h),m=kd(h,u.plannedEndDate);await this.updateChantier(e,{phases:h,globalProgress:f,status:m,updatedAt:fe.now()})}catch(u){throw console.error("Erreur lors de la mise  jour de la phase:",u),u}}async updateStepProgress(e,n,s,i,o,u){try{const h=await this.getChantierById(e);if(!h)throw new Error("Chantier non trouv");const f=h.phases.map(v=>{if(v.id===n&&"steps"in v&&v.steps){const b=v.steps.map(R=>{if(R.id===s){const M=Math.max(0,Math.min(100,i)),j=fe.now();return{...R,progress:M,status:gm(M),notes:o||R.notes,updatedBy:u||"system",actualStartDate:R.actualStartDate||(M>0?j:null),actualEndDate:M>=100?j:M<100?null:R.actualEndDate}}return R}),T=jb({...v,steps:b});return{...v,steps:b,progress:T,status:gm(T),lastUpdated:fe.now(),updatedBy:u||"system"}}return v}),m=xc(f),y=kd(f,h.plannedEndDate);await this.updateChantier(e,{phases:f,globalProgress:m,status:y,updatedAt:fe.now()})}catch(h){throw console.error("Erreur lors de la mise  jour de la sous-tape:",h),h}}async addPhasePhoto(e,n,s,i,o,u){try{const h=await this.getChantierById(e);if(!h)throw new Error("Chantier non trouv");let f=h.phases.map(y=>y.id===n?{...y,photos:[...y.photos,s],lastUpdated:fe.now(),updatedBy:o||"system"}:y);u&&(f=f.map(y=>{if(y.id===n&&y.steps){const v=y.steps.map(b=>b.id===u?{...b,photos:[...b.photos||[],s]}:b);return{...y,steps:v}}return y}));const m={id:xa(),url:s,type:"image",phaseId:n,stepId:u,description:i,uploadedAt:fe.now(),uploadedBy:o||"system"};await this.updateChantier(e,{phases:f,gallery:[...h.gallery,m],updatedAt:fe.now()})}catch(h){throw console.error("Erreur lors de l'ajout de la photo:",h),h}}async addTeamMember(e,n,s){try{const i=await this.getChantierById(e);if(!i)throw new Error("Chantier non trouv");const o={...n,id:xa(),addedAt:fe.now(),addedBy:s};await this.updateChantier(e,{team:[...i.team,o],updatedAt:fe.now()})}catch(i){throw console.error("Erreur lors de l'ajout du membre d'quipe:",i),i}}async removeTeamMember(e,n){try{const s=await this.getChantierById(e);if(!s)throw new Error("Chantier non trouv");const i=s.team.filter(o=>o.id!==n);await this.updateChantier(e,{team:i,updatedAt:fe.now()})}catch(s){throw console.error("Erreur lors de la suppression du membre d'quipe:",s),s}}async addProgressUpdate(e,n,s){try{const i=await this.getChantierById(e);if(!i)throw new Error("Chantier non trouv");const o={...n,id:xa(),createdAt:fe.now(),createdBy:s};await this.updateChantier(e,{updates:[o,...i.updates],updatedAt:fe.now()})}catch(i){throw console.error("Erreur lors de l'ajout de la mise  jour:",i),i}}async updateChantier(e,n){try{const s=Ne(re,this.COLLECTION_NAME,e);await _t(s,{...n,updatedAt:fe.now()})}catch(s){throw console.error("Erreur lors de la mise  jour du chantier:",s),s}}async deleteChantier(e){try{const n=Ne(re,this.COLLECTION_NAME,e);await us(n)}catch(n){throw console.error("Erreur lors de la suppression du chantier:",n),n}}subscribeToChantier(e,n){const s=Ne(re,this.COLLECTION_NAME,e);return Vn(s,i=>{i.exists()?n({id:i.id,...i.data()}):n(null)},i=>{console.error("Erreur lors de l'coute du chantier:",i),n(null)})}subscribeToChefChantiers(e,n){const s=ve(re,this.COLLECTION_NAME),i=Ie(s,Ge("assignedChefId","==",e),it("updatedAt","desc"));return Vn(i,o=>{const u=o.docs.map(h=>({id:h.id,...h.data()}));n(u)},o=>{console.error("Erreur lors de l'coute des chantiers du chef:",o),n([])})}subscribeToClientChantier(e,n){const s=ve(re,this.COLLECTION_NAME),i=Ie(s,Ge("clientId","==",e));return Vn(i,o=>{if(o.empty)n(null);else{const u=o.docs[0];n({id:u.id,...u.data()})}},o=>{console.error("Erreur lors de l'coute du chantier client:",o),n(null)})}subscribeToAllChantiers(e){const n=ve(re,this.COLLECTION_NAME),s=Ie(n,it("updatedAt","desc"));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));console.log(` Mise  jour temps rel: ${o.length} chantiers reus`),e(o)},i=>{console.error("Erreur lors de l'coute de tous les chantiers:",i),e([])})}}const Ua=new HF,xR=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),[i,o]=S.useState(null),{isAuthenticated:u}=Fn();return S.useEffect(()=>{if(!u){console.log(" Hook useRealtimeChantiers: En attente d'authentification..."),s(!1);return}console.log(" Hook useRealtimeChantiers: Initialisation de l'coute temps rel"),s(!0),o(null);const h=Ua.subscribeToAllChantiers(f=>{console.log(` Hook useRealtimeChantiers: ${f.length} chantiers reus`),e(f),s(!1),o(null)});return()=>{console.log(" Hook useRealtimeChantiers: Dconnexion"),h()}},[u]),{chantiers:t,loading:n,error:i,totalChantiers:t.length,chantiersActifs:t.filter(h=>h.status==="En cours").length,chantiersTermines:t.filter(h=>h.status==="Termin").length,chantiersEnRetard:t.filter(h=>h.status==="En retard").length,chantiersEnAttente:t.filter(h=>h.status==="En attente").length}};class GF{documentsCollection="documents";notificationsCollection="documentNotifications";async createDocumentForClient(e,n,s,i,o){try{const u=await Bv.uploadFile(n,n.type.includes("video")||n.name.match(/\.(mp4|mov|avi)$/i)?"video":"image"),h=ve(re,this.documentsCollection),f={clientId:e,chantierId:o||s.chantierId,name:s.name||n.name,originalName:n.name,type:s.type||"other",mimeType:n.type,size:n.size,url:u,description:s.description,source:"admin_upload",visibility:s.visibility||"both",status:"active",isVisible:!0,isDeleted:!1,isReadOnly:!0,allowClientDownload:!0,requiresApproval:!1,version:1,uploadedAt:fe.now(),uploadedBy:i,...s},m=await Bn(h,f);return await this.createDocumentNotification(m.id,e,"new_document","Nouveau document reu",`Un nouveau document "${f.name}" vous a t envoy.`,{documentName:f.name,documentType:f.type,senderName:"quipe KATOS"}),m.id}catch(u){throw console.error("Erreur lors de la cration du document:",u),u}}async getClientDocuments(e){try{const n=Ie(ve(re,this.documentsCollection),Ge("clientId","==",e),Ge("status","==","active"),it("uploadedAt","desc")),i=(await Ue(n)).docs.map(o=>({id:o.id,...o.data()}));try{const o=await Ua.getClientChantier(e);if(o&&o.gallery&&o.gallery.length>0){const u=o.gallery.map(f=>({id:f.id,clientId:e,chantierId:o.id,name:f.description||(f.type==="video"?"Vido chantier":"Photo chantier"),originalName:f.url.split("/").pop()||"media",type:f.type==="image"?"photo":"video",mimeType:f.type==="video"?"video/mp4":"image/jpeg",size:0,url:f.url,thumbnailUrl:f.thumbnailUrl,description:f.description,source:"chef_upload",visibility:"both",status:"active",isVisible:!0,isDeleted:!1,isReadOnly:!0,allowClientDownload:!0,requiresApproval:!1,version:1,uploadedAt:f.uploadedAt,uploadedBy:f.uploadedBy}));return[...i,...u].sort((f,m)=>{const y=f.uploadedAt?.toDate?.()||new Date;return(m.uploadedAt?.toDate?.()||new Date).getTime()-y.getTime()})}}catch(o){console.warn("Could not fetch chantier gallery for documents:",o)}return i}catch(n){throw console.error("Erreur lors de la rcupration des documents:",n),n}}async getClientVisibleDocuments(e){try{const n=Ie(ve(re,this.documentsCollection),Ge("clientId","==",e),Ge("status","==","active"),Ge("visibility","in",["client_only","both"]),it("uploadedAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Erreur lors de la rcupration des documents visibles:",n),n}}subscribeToClientDocuments(e,n,s=!1){const i=[Ge("clientId","==",e),Ge("status","==","active")];s||i.push(Ge("visibility","in",["client_only","both"]));const o=Ie(ve(re,this.documentsCollection),...i,it("uploadedAt","desc"));return Vn(o,u=>{const h=u.docs.map(f=>({id:f.id,...f.data()}));n(h)})}async migrateClientDocument(e,n){const s=ve(re,this.documentsCollection),i={clientId:n,name:e.name,originalName:e.name,type:e.type||"other",mimeType:e.mimeType,size:e.size,url:e.url,description:e.description,source:"client_upload",visibility:"both",status:"active",isReadOnly:!1,allowClientDownload:!0,requiresApproval:!0,isApproved:!0,version:1,uploadedAt:e.uploadedAt||fe.now(),uploadedBy:n};return(await Bn(s,i)).id}async approveDocument(e,n){const s=Ne(re,this.documentsCollection,e);await _t(s,{isApproved:!0,approvedBy:n,approvedAt:fe.now(),updatedAt:fe.now()});const i=await Pn(s);if(i.exists()){const o=i.data();await this.createDocumentNotification(e,o.clientId,"document_approved","Document approuv",`Votre document "${o.name}" a t approuv.`,{documentName:o.name,documentType:o.type})}}async deleteDocument(e,n,s){const i=Ne(re,this.documentsCollection,e);await _t(i,{status:"deleted",deletedAt:fe.now(),deletedBy:n,deleteReason:s,updatedAt:fe.now()})}async createDocumentNotification(e,n,s,i,o,u){const h=ve(re,this.notificationsCollection),f={documentId:e,clientId:n,type:s,title:i,message:o,isRead:!1,createdAt:fe.now(),metadata:u};await Bn(h,f)}async getClientDocumentNotifications(e){try{const n=Ie(ve(re,this.notificationsCollection),Ge("clientId","==",e),it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Erreur lors de la rcupration des notifications:",n),n}}async markNotificationsAsRead(e,n){const s=Ad(re);if(n&&n.length>0)n.forEach(i=>{const o=Ne(re,this.notificationsCollection,i);s.update(o,{isRead:!0})});else{const i=Ie(ve(re,this.notificationsCollection),Ge("clientId","==",e),Ge("isRead","==",!1));(await Ue(i)).docs.forEach(u=>{s.update(u.ref,{isRead:!0})})}await s.commit()}async getClientDocumentStats(e){const n=await this.getClientDocuments(e),s={clientId:e,totalDocuments:n.length,documentsByType:{},documentsBySource:{},pendingApproval:0,approved:0,rejected:0,totalStorageUsed:0,documentsThisWeek:0,documentsThisMonth:0,lastUpdated:fe.now()},i=new Date,o=new Date(i.getTime()-10080*60*1e3),u=new Date(i.getTime()-720*60*60*1e3);return n.forEach(h=>{s.documentsByType[h.type]=(s.documentsByType[h.type]||0)+1,s.documentsBySource[h.source]=(s.documentsBySource[h.source]||0)+1,h.requiresApproval&&(h.isApproved?s.approved++:s.pendingApproval++),s.totalStorageUsed+=h.size;const f=h.uploadedAt.toDate();f>o&&s.documentsThisWeek++,f>u&&s.documentsThisMonth++}),s}getDocumentIcon(e){const n={plan:"",contract:"",invoice:"",photo:"",report:"",permit:"",progress_update:"",video:"",other:""};return n[e]||n.other}getDocumentColor(e){const n={plan:"bg-blue-100 text-blue-800",contract:"bg-green-100 text-green-800",invoice:"bg-yellow-100 text-yellow-800",photo:"bg-purple-100 text-purple-800",report:"bg-orange-100 text-orange-800",permit:"bg-red-100 text-red-800",progress_update:"bg-indigo-100 text-indigo-800",video:"bg-pink-100 text-pink-800",other:"bg-gray-100 text-gray-800"};return n[e]||n.other}getDocumentTypeLabel(e){const n={plan:"Plan",contract:"Contrat",invoice:"Facture",photo:"Photo",report:"Rapport",permit:"Permis",progress_update:"Suivi",video:"Vido",other:"Autre"};return n[e]||n.other}formatFileSize(e){if(e===0)return"0 B";const n=1024,s=["B","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(2))+" "+s[i]}}const Kl=new GF,KF=()=>{const t=_c(),{clients:e}=Zo(),{clientSelections:n}=LF(),{projects:s}=Ci(),{totalChantiers:i,chantiersActifs:o}=xR(),[u,h]=S.useState(0);S.useEffect(()=>{const T=async()=>{try{const R=e.map(k=>Kl.getClientDocuments(k.id)),j=(await Promise.all(R)).reduce((k,U)=>k+U.length,0);h(j)}catch(R){console.error("Error fetching document count:",R)}};e.length>0&&T()},[e]);const f=[{name:"Clients",value:e.length,icon:Ws,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-100",path:"/clients",trend:`${e.filter(T=>T.status==="En cours").length} actifs`,trendColor:"text-blue-600"},{name:"Villas",value:s.length,icon:dm,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-100",path:"/projects",trend:"Modles disponibles",trendColor:"text-emerald-600"},{name:"Projets",value:i,icon:ld,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-100",path:"/chantiers",trend:`${o} en cours`,trendColor:"text-orange-600"},{name:"Documents",value:u,icon:Ho,color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-100",path:"/documents",trend:"Totalfichiers",trendColor:"text-indigo-600"}],m=e.slice(-5).reverse(),y=n.filter(T=>T.status==="submitted"),v={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},b={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return c.jsxs("div",{className:"space-y-8 p-2",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Tableau de bord"}),c.jsx("p",{className:"text-gray-500 mt-2",children:"Vue d'ensemble de votre activit Katos."})]}),c.jsx("div",{className:"hidden sm:block",children:c.jsx("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),c.jsx(Wf.div,{variants:v,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(T=>c.jsx(Wf.div,{variants:b,whileHover:{y:-5,transition:{duration:.2}},onClick:()=>t(T.path),className:`
              relative overflow-hidden rounded-2xl bg-white p-6 shadow-sm border ${T.borderColor}
              cursor-pointer hover:shadow-md transition-shadow group
            `,children:c.jsxs("div",{className:"flex flex-col h-full justify-between",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("div",{className:`p-3 rounded-xl ${T.bgColor} group-hover:scale-110 transition-transform duration-300`,children:c.jsx(T.icon,{className:`w-6 h-6 ${T.color}`})}),T.trend&&c.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full bg-opacity-10 ${T.bgColor} ${T.trendColor}`,children:T.trend})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:T.name}),c.jsx("div",{className:"flex items-baseline mt-1",children:c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.value})})]}),c.jsx("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 rounded-full opacity-5 bg-gradient-to-br from-gray-900 to-transparent pointer-events-none"})]})},T.name))}),y.length>0&&c.jsxs(Wf.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-2xl p-6 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:c.jsx(dm,{className:"w-32 h-32 text-orange-600"})}),c.jsxs("div",{className:"flex items-center relative z-10 flex-wrap gap-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-3 bg-white rounded-full shadow-sm mr-4",children:c.jsx(Oa,{className:"w-6 h-6 text-orange-600"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-orange-900",children:["Action requise : ",y.length," slection(s) en attente"]}),c.jsx("p",{className:"text-orange-700 mt-1",children:"Des clients ont soumis leurs slections de matriaux."})]})]}),c.jsx("button",{onClick:()=>t("/clients"),className:"ml-auto px-4 py-2 bg-white text-orange-700 text-sm font-bold rounded-lg shadow-sm hover:bg-orange-50 transition-colors",children:"Voir les slections"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsxs(Oe,{className:"border-gray-100 shadow-sm overflow-hidden h-full",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Clients Rcents"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Derniers clients ajouts"})]}),c.jsxs("button",{onClick:()=>t("/clients"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 flex items-center transition-colors",children:["Voir tout ",c.jsx(ex,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-50",children:m.length>0?m.map((T,R)=>c.jsxs(Wf.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:R*.05},className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between group cursor-pointer",onClick:()=>t("/clients"),children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 font-bold text-sm",children:[T.prenom[0],T.nom[0]]}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-gray-900",children:[T.nom," ",T.prenom]}),c.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-0.5",children:[c.jsx(dm,{className:"w-3 h-3 mr-1"}),T.projetAdhere||"Non assign"]})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${T.status==="En cours"?"bg-blue-50 text-blue-700 border-blue-100":T.status==="Termin"?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-amber-50 text-amber-700 border-amber-100"}`,children:[T.status==="En cours"&&c.jsx(OL,{className:"w-3 h-3 mr-1"}),T.status]}),c.jsx(ex,{className:"w-4 h-4 text-gray-300 ml-4 group-hover:text-gray-500 transition-colors"})]})]},T.id)):c.jsxs("div",{className:"p-8 text-center text-gray-500 bg-gray-50 m-4 rounded-xl border border-dashed border-gray-200",children:[c.jsx(Ws,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),c.jsx("p",{children:"Aucun client enregistr pour le moment"}),c.jsx("button",{onClick:()=>t("/clients"),className:"mt-4 text-blue-600 font-medium hover:underline",children:"Ajouter un client"})]})})]})}),c.jsx("div",{className:"lg:col-span-1",children:c.jsxs(Oe,{className:"border-gray-100 shadow-sm h-full bg-gradient-to-b from-gray-900 to-gray-800 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-y-1/2 translate-x-1/2 blur-2xl"}),c.jsxs("div",{className:"relative z-10 p-6 flex flex-col h-full justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-2",children:"Aperu Rapide"}),c.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Rsum de la performance globale."}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[c.jsx("span",{className:"text-gray-300",children:"Total Projets"}),c.jsx("span",{className:"font-bold",children:e.length})]}),c.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"100%"}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[c.jsx("span",{className:"text-gray-300",children:"Actifs"}),c.jsx("span",{className:"font-bold",children:e.filter(T=>T.status==="En cours").length})]}),c.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:c.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${e.length>0?e.filter(T=>T.status==="En cours").length/e.length*100:0}%`}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[c.jsx("span",{className:"text-gray-300",children:"Termins"}),c.jsx("span",{className:"font-bold",children:e.filter(T=>T.status==="Termin").length})]}),c.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:c.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${e.length>0?e.filter(T=>T.status==="Termin").length/e.length*100:0}%`}})})]})]})]}),c.jsxs("button",{onClick:()=>t("/chantiers"),className:"mt-8 w-full py-3 bg-white text-gray-900 rounded-xl font-bold hover:bg-gray-100 transition-colors flex items-center justify-center",children:[c.jsx(Cj,{className:"w-4 h-4 mr-2"}),"Voir les statistiques"]})]})]})})]})]})},Hr=({isOpen:t,onClose:e,onConfirm:n,title:s="Supprimer",message:i="tes-vous sr de vouloir supprimer cet lment ? Cette action est irrversible.",confirmText:o="Supprimer",cancelText:u="Annuler",type:h="danger",loading:f=!1})=>{if(!t)return null;const m=()=>{switch(h){case"danger":return c.jsx($r,{className:"w-5 h-5"});case"warning":return c.jsx(ix,{className:"w-5 h-5"});default:return c.jsx(ix,{className:"w-5 h-5"})}},y=()=>{switch(h){case"danger":return"bg-red-50 text-red-600";case"warning":return"bg-orange-50 text-orange-600";default:return"bg-blue-50 text-blue-600"}},v=()=>{switch(h){case"danger":return"bg-red-600 hover:bg-red-700 focus:ring-red-500";case"warning":return"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500";default:return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}},b=()=>{n()};return c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm transition-opacity duration-300 ease-out",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative transform overflow-hidden rounded-xl bg-white shadow-2xl transition-all duration-300 ease-out max-w-sm w-full",children:[c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:`mx-auto flex h-12 w-12 items-center justify-center rounded-full ${y()} mb-4`,children:m()}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s}),c.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:i})]}),c.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row gap-3",children:[c.jsx(ge,{variant:"outline",onClick:e,disabled:f,className:"flex-1 h-10 text-sm font-medium",children:u}),c.jsx(ge,{onClick:b,disabled:f,className:`flex-1 h-10 text-sm font-medium text-white transition-colors ${v()} focus:outline-none focus:ring-2 focus:ring-offset-2`,children:f?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Suppression..."]}):c.jsxs("div",{className:"flex items-center justify-center",children:[m(),c.jsx("span",{className:"ml-2",children:o})]})})]})]})})]})},Ds=({isOpen:t,onClose:e,title:n,children:s,size:i="md"})=>{if(!t)return null;const o={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 transition-opacity backdrop-blur-sm cursor-pointer",onClick:e,children:c.jsx("div",{className:"absolute inset-0 bg-black/60"})}),c.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[c.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),c.jsx("div",{className:Do("inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full border border-gray-200 relative z-10",o[i]),children:c.jsxs("div",{className:"bg-white px-6 pt-6 pb-6 sm:p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:n}),c.jsx(ge,{variant:"outline",size:"sm",onClick:e,className:"p-2 h-10 w-10 rounded-full hover:bg-gray-100 transition-colors",children:c.jsx(Js,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"bg-gray-50/50 -mx-6 -mb-6 sm:-mx-8 sm:-mb-8 px-6 py-6 sm:px-8 sm:py-8 rounded-b-lg",children:s})]})})]})]})},Rb=({images:t,alt:e="",className:n="",aspectRatio:s="video",showDots:i=!0,showArrows:o=!0})=>{const[u,h]=S.useState(0),[f,m]=S.useState(!1),y=S.useRef(0),v=S.useRef(0),b=S.useRef(null);S.useEffect(()=>{m(!0)},[]);const T=()=>{h($=>($+1)%t.length)},R=()=>{h($=>($-1+t.length)%t.length)},M=$=>{h($)},j=$=>{y.current=$.targetTouches[0].clientX},k=$=>{v.current=$.targetTouches[0].clientX},U=()=>{const Y=y.current-v.current;Math.abs(Y)>50&&(Y>0?T():R())};if(!t||t.length===0)return c.jsx("div",{className:`bg-gray-200 rounded-lg flex items-center justify-center min-h-[200px] ${n}`,children:c.jsx("span",{className:"text-gray-500 text-sm sm:text-base",children:"Aucune image"})});const V={video:"aspect-video",square:"aspect-square",wide:"aspect-[21/9] sm:aspect-[21/9] aspect-[16/9]"};return c.jsxs("div",{ref:b,className:`relative overflow-hidden rounded-lg group touch-pan-y ${n}`,onTouchStart:j,onTouchMove:k,onTouchEnd:U,children:[c.jsx("div",{className:`${V[s]} w-full`,children:c.jsx("img",{src:t[u],alt:e,className:"w-full h-full object-cover transition-opacity duration-300 select-none",draggable:!1})}),o&&t.length>1&&f&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:R,className:"absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-1.5 rounded-full transition-all opacity-70 sm:opacity-0 sm:group-hover:opacity-100 touch-manipulation cursor-pointer","aria-label":"Image prcdente",children:c.jsx(WL,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),c.jsx("button",{onClick:T,className:"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-1.5 rounded-full transition-all opacity-70 sm:opacity-0 sm:group-hover:opacity-100 touch-manipulation cursor-pointer","aria-label":"Image suivante",children:c.jsx(ex,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),i&&t.length>1&&c.jsx("div",{className:"absolute bottom-1 sm:bottom-2 left-1/2 -translate-x-1/2 flex gap-1 sm:gap-1.5",children:t.map(($,Y)=>c.jsx("button",{onClick:()=>M(Y),className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all touch-manipulation cursor-pointer ${Y===u?"bg-white scale-110":"bg-white/60 hover:bg-white/80"}`,"aria-label":`Aller  l'image ${Y+1}`},Y))}),t.length>1&&c.jsxs("div",{className:"absolute top-1 sm:top-2 right-1 sm:right-2 bg-black/50 text-white text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full",children:[u+1," / ",t.length]}),t.length>1&&c.jsx("div",{className:"absolute bottom-1 left-1 sm:hidden bg-black/50 text-white text-xs px-1.5 py-0.5 rounded-full",children:" Glissez"})]})},YF=({isOpen:t,onClose:e,onSubmit:n,client:s})=>{const[i,o]=S.useState({nom:"",prenom:"",email:"",telephone:"",adresse:"",localisationSite:"",projetAdhere:"",typePaiement:"comptant",status:"En attente"}),[u,h]=S.useState({});S.useEffect(()=>{o(s?{nom:s.nom||"",prenom:s.prenom||"",email:s.email||"",telephone:s.telephone||"",adresse:s.adresse||"",localisationSite:s.localisationSite||"",projetAdhere:s.projetAdhere||"",typePaiement:s.typePaiement||"comptant",status:s.status||"En attente"}:{nom:"",prenom:"",email:"",telephone:"",adresse:"",localisationSite:"",projetAdhere:"",typePaiement:"comptant",status:"En attente"}),h({})},[s,t]);const{projects:f}=Ci(),m=f.find(b=>b.name===i.projetAdhere),y=b=>{b.preventDefault();const T={};if(i.nom||(T.nom="Le nom est requis"),i.prenom||(T.prenom="Le prnom est requis"),i.email||(T.email="L'email est requis"),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(T.email="L'email n'est pas valide"),i.localisationSite||(T.localisationSite="La localisation du site est requise"),i.projetAdhere||(T.projetAdhere="Le projet adhr est requis"),Object.keys(T).length>0){h(T);return}n({...i,invitationStatus:"pending",isActive:i.status!=="Termin"}),v()},v=()=>{o({nom:"",prenom:"",email:"",telephone:"",adresse:"",localisationSite:"",projetAdhere:"",typePaiement:"comptant",status:"En attente"}),h({}),e()};return c.jsx(Ds,{isOpen:t,onClose:v,title:s?"Modifier le client":"Nouveau client",size:"lg",children:c.jsx("div",{className:"space-y-6",children:c.jsxs("form",{onSubmit:y,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[c.jsx(Be,{label:"Prnom",value:i.prenom,onChange:b=>o({...i,prenom:b.target.value}),error:u.prenom,placeholder:"Amadou"}),c.jsx(Be,{label:"Nom",value:i.nom,onChange:b=>o({...i,nom:b.target.value}),error:u.nom,placeholder:"Diallo"})]}),c.jsx(Be,{label:"Email",type:"email",value:i.email,onChange:b=>o({...i,email:b.target.value}),error:u.email,placeholder:"amadou.diallo@example.com"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[c.jsx(Be,{label:"Tlphone",value:i.telephone,onChange:b=>o({...i,telephone:b.target.value}),error:u.telephone,placeholder:"+221 77 123 45 67"}),c.jsx(Be,{label:"Adresse",value:i.adresse,onChange:b=>o({...i,adresse:b.target.value}),error:u.adresse,placeholder:"Rue 10, Cit Keur Gorgui"})]}),c.jsx(Be,{label:"Localisation du site",value:i.localisationSite,onChange:b=>o({...i,localisationSite:b.target.value}),error:u.localisationSite,placeholder:"Cit Keur Gorgui, Lot 25, Dakar"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Projet adhr"}),c.jsxs("select",{value:i.projetAdhere,onChange:b=>o({...i,projetAdhere:b.target.value}),className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none",children:[c.jsx("option",{value:"",children:"Slectionner un projet"}),f.map(b=>c.jsxs("option",{value:`${b.name} ${b.type}`,children:[b.name," ",b.type]},b.id))]}),u.projetAdhere&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.projetAdhere})]}),m&&c.jsxs("div",{className:"mt-4 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Aperu du projet"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Rb,{images:m.images,alt:m.name,aspectRatio:"wide",className:"h-24 sm:h-32",showDots:!0,showArrows:!0}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-gray-900 text-sm sm:text-base",children:m.name}),c.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2 sm:line-clamp-3",children:m.description}),m.price&&c.jsxs("p",{className:"text-sm font-semibold text-blue-600 mt-1",children:[new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(m.price)," FCFA"]})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Type de paiement"}),c.jsxs("select",{value:i.typePaiement,onChange:b=>o({...i,typePaiement:b.target.value}),className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none",children:[c.jsx("option",{value:"comptant",children:"Paiement comptant"}),c.jsx("option",{value:"echeancier",children:"chancier de paiement"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:i.typePaiement==="comptant"?"Le client paiera la totalit en une fois":"Le client paiera en plusieurs chances selon le montant du projet"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Statut"}),c.jsxs("select",{value:i.status,onChange:b=>o({...i,status:b.target.value}),className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none",children:[c.jsx("option",{value:"En attente",children:"En attente"}),c.jsx("option",{value:"En cours",children:"En cours"}),c.jsx("option",{value:"Termin",children:"Termin"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 pt-6 border-t border-gray-200",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:v,className:"w-full sm:w-auto order-2 sm:order-1",children:"Annuler"}),c.jsx(ge,{type:"submit",className:"w-full sm:w-auto order-1 sm:order-2",children:s?"Modifier":"Crer"})]})]})})})},vR=({isOpen:t,onClose:e,onSuccess:n,chantier:s})=>{const{clients:i}=Zo(),{projects:o}=Ci(),{userData:u}=Fn(),[h,f]=S.useState([]),[m,y]=S.useState(!1),[v,b]=S.useState(null),[T,R]=S.useState(null),[M,j]=S.useState({clientId:"",projectTemplateId:"",name:"",address:"",assignedChefId:"",startDate:"",plannedEndDate:""}),[k,U]=S.useState({});S.useEffect(()=>{t&&(async()=>{try{console.log(" Chargement des chefs disponibles...");const N=await Fo.getAvailableChefs();console.log(` ${N.length} chefs chargs:`,N),f(N)}catch(N){console.error(" Erreur lors du chargement des chefs:",N),se.error("Erreur lors du chargement des chefs de chantier")}})()},[t]);const V=A=>{if(A.target.files&&A.target.files[0]){const N=A.target.files[0];try{Br.validateImageFile(N),b(N);const C=URL.createObjectURL(N);R(C)}catch(C){se.error(C.message)}}};S.useEffect(()=>{s&&t?j({clientId:s.clientId||"",projectTemplateId:s.projectTemplateId||"",name:s.name||"",address:s.address||"",assignedChefId:s.assignedChefId||"",startDate:s.startDate?s.startDate.toDate().toISOString().split("T")[0]:"",plannedEndDate:s.plannedEndDate?s.plannedEndDate.toDate().toISOString().split("T")[0]:""}):!s&&t&&j({clientId:"",projectTemplateId:"",name:"",address:"",assignedChefId:"",startDate:"",plannedEndDate:""}),U({})},[s,t]),S.useEffect(()=>{if(M.clientId&&M.projectTemplateId&&!s){const A=i.find(C=>C.id===M.clientId),N=o.find(C=>C.id===M.projectTemplateId);if(A&&N){const L=o.find(z=>z.id===A.projetAdhere||z.name===A.projetAdhere||A.projetAdhere.toLowerCase().includes(z.name.toLowerCase()))?.id;if(L&&L!==M.projectTemplateId){const z=`Chantier ${A.prenom} ${A.nom} - ${N.name}`;j(B=>({...B,name:z}))}}}},[M.clientId,M.projectTemplateId,i,o,s]),S.useEffect(()=>{if(M.clientId&&!s){const A=i.find(N=>N.id===M.clientId);if(A&&A.projetAdhere){let N=o.find(C=>C.id===A.projetAdhere);if(N||(N=o.find(C=>C.name===A.projetAdhere)),N||(N=o.find(C=>A.projetAdhere.toLowerCase().includes(C.name.toLowerCase())||C.name.toLowerCase().includes(A.projetAdhere.toLowerCase()))),N){const C=`Chantier ${A.prenom} ${A.nom} - ${A.projetAdhere}`;j(L=>({...L,projectTemplateId:N.id,name:C,address:A.localisationSite}))}}}},[M.clientId,i,o,s]);const $=async A=>{A.preventDefault();const N={};if(s||(M.clientId||(N.clientId="Le client est requis"),M.projectTemplateId||(N.projectTemplateId="Le projet template est requis"),M.startDate||(N.startDate="La date de dbut est requise"),M.plannedEndDate||(N.plannedEndDate="La date de fin prvue est requise")),M.name||(N.name="Le nom du chantier est requis"),M.address||(N.address="L'adresse du chantier est requise"),M.assignedChefId||(N.assignedChefId="Le chef de chantier est requis"),M.startDate&&M.plannedEndDate){const C=new Date(M.startDate);new Date(M.plannedEndDate)<=C&&(N.plannedEndDate="La date de fin doit tre postrieure  la date de dbut")}if(Object.keys(N).length>0){U(N);return}try{y(!0);let C=s?.coverImage;if(v)try{C=await Br.uploadImage(v,"chantiers/covers")}catch(L){console.error("Erreur upload image:",L),se.error("Erreur lors de l'upload de l'image, le chantier sera cr sans image.")}if(s){console.log(" [ChantierModal] Mode dition - Mise  jour du chantier...",s.id);const L={name:M.name,address:M.address,assignedChefId:M.assignedChefId,coverImage:C||null,updatedAt:new Date};M.startDate&&(L.startDate=new Date(M.startDate)),M.plannedEndDate&&(L.plannedEndDate=new Date(M.plannedEndDate)),await Ua.updateChantier(s.id,L),console.log(" [ChantierModal] Chantier modifi avec succs!"),se.success("Chantier modifi avec succs!")}else console.log(" [ChantierModal] Mode cration - Nouveau chantier..."),await Ua.createChantierFromTemplate(M.clientId,M.projectTemplateId,{name:M.name,address:M.address,assignedChefId:M.assignedChefId,startDate:new Date(M.startDate),plannedEndDate:new Date(M.plannedEndDate),coverImage:C},u?.uid||"admin"),console.log(" [ChantierModal] Chantier cr avec succs!"),se.success("Chantier cr avec succs!");console.log(" [ChantierModal] Fermeture de la modal..."),n()}catch(C){console.error(" [ChantierModal] Erreur lors de la sauvegarde:",C),se.error(C.message||`Erreur lors de la ${s?"modification":"cration"} du chantier`)}finally{console.log(" [ChantierModal] Fin du chargement."),y(!1)}},Y=()=>{j({clientId:"",projectTemplateId:"",name:"",address:"",assignedChefId:"",startDate:"",plannedEndDate:""}),U({}),e()},oe=i.filter(A=>A.isActive);return c.jsx(Ds,{isOpen:t,onClose:Y,title:s?"Modifier le projet":"Nouveau projet",size:"lg",children:c.jsx("div",{className:"space-y-6",children:c.jsxs("form",{onSubmit:$,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Image de couverture"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-primary-500 transition-colors cursor-pointer relative",onClick:()=>document.getElementById("cover-image-upload")?.click(),children:T?c.jsxs("div",{className:"relative w-full h-48",children:[c.jsx("img",{src:T,alt:"Cover preview",className:"w-full h-full object-cover rounded-md"}),c.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),b(null),R(null)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:c.jsx(Js,{size:16})})]}):c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx(nh,{className:"mx-auto h-12 w-12 text-gray-400"}),c.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[c.jsxs("label",{htmlFor:"cover-image-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none",children:[c.jsx("span",{children:"Tlcharger une photo"}),c.jsx("input",{id:"cover-image-upload",name:"cover-image-upload",type:"file",className:"sr-only",accept:"image/*",onChange:V,onClick:A=>A.stopPropagation()})]}),c.jsx("p",{className:"pl-1",children:"ou glisser-dposer"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, WEBP jusqu' 5MB"})]})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Client *"}),c.jsxs("select",{value:M.clientId,onChange:A=>j({...M,clientId:A.target.value}),disabled:!!s,className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:"Slectionner un client"}),oe.map(A=>c.jsxs("option",{value:A.id,children:[A.prenom," ",A.nom," - ",A.email]},A.id))]}),k.clientId&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:k.clientId})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Villa *"}),c.jsxs("select",{value:M.projectTemplateId,onChange:A=>j({...M,projectTemplateId:A.target.value}),disabled:!!s,className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:"Slectionner une villa"}),o.map(A=>c.jsxs("option",{value:A.id,children:[A.name," ",A.type]},A.id))]}),k.projectTemplateId&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:k.projectTemplateId})]}),c.jsx(Be,{label:"Nom du projet *",value:M.name,onChange:A=>j({...M,name:A.target.value}),error:k.name,placeholder:"Projet Villa Fatima F6"}),c.jsx(Be,{label:"Adresse du projet *",value:M.address,onChange:A=>j({...M,address:A.target.value}),error:k.address,placeholder:"Cit Keur Gorgui, Lot 25, Dakar"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Chef de projet *"}),c.jsxs("select",{value:M.assignedChefId,onChange:A=>j({...M,assignedChefId:A.target.value}),className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none",children:[c.jsx("option",{value:"",children:"Slectionner un chef de projet"}),h.map(A=>{let N="";return A.role===$e.CHEF?N="Chef de chantier":A.role===$e.ADMIN&&A.isChef?N="Admin + Chef":A.role===$e.SUPER_ADMIN?N="Super Admin":N="Administrateur",c.jsxs("option",{value:A.uid,children:[A.displayName," - ",N]},A.uid)}),h.length===0&&c.jsx("option",{value:"",disabled:!0,children:"Aucun chef disponible (vrifiez les rles)"})]}),k.assignedChefId&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:k.assignedChefId})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Be,{label:"Date de dbut *",type:"date",value:M.startDate,onChange:A=>j({...M,startDate:A.target.value}),error:k.startDate,min:new Date().toISOString().split("T")[0]}),c.jsx(Be,{label:"Date de fin prvue *",type:"date",value:M.plannedEndDate,onChange:A=>j({...M,plannedEndDate:A.target.value}),error:k.plannedEndDate,min:M.startDate||new Date().toISOString().split("T")[0]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 pt-6 border-t border-gray-200",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:Y,className:"w-full sm:w-auto order-2 sm:order-1",disabled:m,children:"Annuler"}),c.jsx(ge,{type:"submit",className:"w-full sm:w-auto order-1 sm:order-2",disabled:m,children:m?s?"Modification...":"Cration...":s?"Modifier le projet":"Crer le projet"})]})]})})})},ji=()=>{const[t,e]=S.useState({isOpen:!1,loading:!1});return{confirmState:t,confirm:(o,u)=>{e({isOpen:!0,onConfirm:o,loading:!1,...u})},handleConfirm:async()=>{if(t.onConfirm){e(o=>({...o,loading:!0}));try{await t.onConfirm()}catch(o){console.error("Error during confirmation action:",o)}finally{e(o=>({...o,loading:!1,isOpen:!1}))}}},handleClose:()=>{t.loading||e(o=>({...o,isOpen:!1}))}}},bR=({client:t,onUpdate:e})=>{const[n,s]=S.useState([]),[i,o]=S.useState(!1),[u,h]=S.useState(!1),[f,m]=S.useState(null),[y,v]=S.useState(!1),[b,T]=S.useState(null),[R,M]=S.useState(!1),{confirmState:j,confirm:k,handleConfirm:U,handleClose:V}=ji(),$=async()=>{if(t.id){o(!0);try{const K=await Ys.getClientInvitations(t.id);s(K)}catch(K){console.error("Erreur lors du chargement des invitations:",K),se.error("Impossible de charger les invitations")}finally{o(!1)}}},Y=async()=>{if(t.id)try{const K=await Ua.getClientChantier(t.id);T(!!K)}catch(K){console.error("Erreur vrification chantier:",K)}},oe=async()=>{if(!t.id||!t.email){se.error("Client invalide - email requis");return}h(!0);try{const K=await Ys.createClientAccount(t.id,t.email);K.success?(console.log("Compte cr avec succs, credentials:",K.credentials),m(K.credentials||""),se.success("Compte cr",{autoClose:3e3}),await $(),e?.(),console.log("tat credentials aprs mise  jour:",K.credentials)):(console.error("Erreur lors de la cration:",K.error),se.error(K.error||"Erreur lors de la cration du compte"))}catch(K){console.error("Erreur lors de la cration du compte:",K),se.error("Erreur lors de la cration du compte")}finally{h(!1)}},A=async K=>{const Z=Ys.generateInvitationUrl(K);try{await navigator.clipboard.writeText(Z),se.success("Lien web copi dans le presse-papiers")}catch{const ye=document.createElement("textarea");ye.value=Z,document.body.appendChild(ye),ye.select(),document.execCommand("copy"),document.body.removeChild(ye),se.success("Lien web copi dans le presse-papiers")}},N=async K=>{try{await Ys.deleteInvitation(K),se.success("Invitation supprime"),await $(),e?.()}catch(Z){console.error("Erreur lors de la suppression:",Z),se.error("Erreur lors de la suppression")}},C=async()=>{if(!t.id){se.error("Client invalide");return}v(!0);try{const K=await Ys.regenerateClientAccess(t.id);K.success?(m(K.credentials||""),se.success("Accs rgnrs avec succs",{autoClose:3e3}),e?.()):se.error(K.error||"Erreur lors de la rgnration des accs")}catch(K){console.error("Erreur lors de la rgnration:",K),se.error("Erreur lors de la rgnration des accs")}finally{v(!1)}},L=K=>{k(()=>N(K.id),{title:"Supprimer l'invitation",message:`tes-vous sr de vouloir supprimer cette invitation envoye le ${K.createdAt.toDate().toLocaleDateString("fr-FR")} ?`,confirmText:"Supprimer",type:"danger"})},z=()=>{k(C,{title:"Rinitialiser les accs",message:`Cette action va crer un NOUVEAU compte de connexion pour ${t.prenom} ${t.nom}. Les anciens identifiants ne fonctionneront plus dfinitivement. Utile si le client n'arrive plus  se connecter.`,confirmText:"Rinitialiser",type:"warning"})};S.useEffect(()=>{$(),Y()},[t.id]),S.useEffect(()=>{t.id},[t.id]);const B=K=>{switch(K){case"pending":return c.jsx($o,{className:"w-4 h-4 text-yellow-500"});case"sent":return c.jsx(Sd,{className:"w-4 h-4 text-blue-500"});case"accepted":return c.jsx(Tj,{className:"w-4 h-4 text-green-500"});case"declined":return c.jsx(Js,{className:"w-4 h-4 text-red-500"});case"expired":return c.jsx(Oa,{className:"w-4 h-4 text-gray-500"});default:return c.jsx($o,{className:"w-4 h-4 text-gray-500"})}},D=K=>{switch(K){case"pending":return"En attente";case"sent":return"Envoye";case"accepted":return"Accepte";case"declined":return"Dcline";case"expired":return"Expire";default:return"Inconnue"}},_e=K=>{switch(K){case"pending":return"bg-yellow-100 text-yellow-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";case"expired":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},me=()=>t.email?!t.userId:!1,X=()=>t.email?t.userId?{status:"active",dot:"",color:"text-green-500",text:`Connect le ${t.acceptedAt?.toDate().toLocaleDateString("fr-FR")||""}`}:{status:"no-account",dot:"",color:"text-gray-400",text:"Aucun compte"}:{status:"no-email",dot:"",color:"text-gray-400",text:"Email requis"};return c.jsxs(Oe,{className:"p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Go,{className:"w-5 h-5 text-gray-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Compte App Mobile"})]}),c.jsx("div",{className:"flex items-center gap-2",children:me()&&c.jsxs(ge,{onClick:oe,disabled:u,size:"sm",className:"flex items-center gap-2",children:[u?c.jsx(Jy,{className:"w-4 h-4 animate-spin"}):c.jsx(Sd,{className:"w-4 h-4"}),u?"Cration...":"Crer le compte"]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Email"}),c.jsx("span",{className:"font-medium text-gray-900",children:t.email||"Non renseign"})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[c.jsx("span",{className:"text-gray-600",children:"Statut"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`${X().color} text-lg leading-none`,children:X().dot}),c.jsx("span",{className:"text-gray-900 text-xs",children:X().text})]})]})]}),!b&&b!==null&&c.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(ix,{className:"w-5 h-5 text-orange-500 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-sm font-bold text-orange-800",children:"Aucun projet de construction li"}),c.jsx("p",{className:"text-xs text-orange-700 mt-1",children:`Le client peut se connecter mais verra "Aucun chantier". Pour que son avancement s'affiche, vous devez crer un projet pour lui.`}),c.jsxs(ge,{onClick:()=>M(!0),size:"sm",className:"mt-3 bg-orange-600 hover:bg-orange-700 text-white flex items-center gap-2",children:[c.jsx(pU,{className:"w-4 h-4"}),"Crer le projet maintenant"]})]})]})}),t.username&&t.tempPassword&&!f&&c.jsxs("div",{className:"border border-blue-200 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"bg-blue-50 px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-blue-500 text-lg",children:""}),c.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Identifiants sauvegards"})]})}),c.jsxs("div",{className:"bg-white p-4 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Identifiant"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:t.username}),c.jsx(ge,{onClick:()=>{navigator.clipboard.writeText(t.username),se.success("Identifiant copi",{autoClose:1e3})},size:"sm",variant:"outline",className:"px-2 h-7",children:c.jsx(ya,{className:"w-3 h-3"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Mot de passe"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:t.tempPassword}),c.jsx(ge,{onClick:()=>{navigator.clipboard.writeText(t.tempPassword),se.success("Mot de passe copi",{autoClose:1e3})},size:"sm",variant:"outline",className:"px-2 h-7",children:c.jsx(ya,{className:"w-3 h-3"})})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ge,{onClick:()=>{const K=`Identifiant: ${t.username}
Mot de passe: ${t.tempPassword}`;navigator.clipboard.writeText(K),se.success("Identifiants copis",{autoClose:2e3})},size:"sm",className:"flex items-center gap-2",children:[c.jsx(ya,{className:"w-4 h-4"}),"Copier tout"]}),c.jsxs(ge,{onClick:z,disabled:y,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[c.jsx(Jy,{className:`w-4 h-4 ${y?"animate-spin":""}`}),y?"Rinitialisation...":"Rinitialiser"]})]})]})]}),f&&c.jsxs("div",{className:"border border-green-200 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"bg-green-50 px-4 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-green-500 text-lg",children:""}),c.jsx("span",{className:"text-sm font-medium text-green-900",children:t.username?"Nouveaux identifiants gnrs":"Compte cr"})]}),c.jsx(ge,{onClick:()=>m(null),size:"sm",variant:"outline",className:"text-gray-500 hover:text-gray-700 border-none",children:c.jsx(Js,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"bg-white p-4",children:[c.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-100",children:c.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:f})}),c.jsx("div",{className:"mt-3",children:c.jsxs(ge,{onClick:()=>{navigator.clipboard.writeText(f),se.success("Identifiants copis",{autoClose:2e3})},size:"sm",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[c.jsx(ya,{className:"w-4 h-4"}),"Copier"]})})]})]}),i?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx(Jy,{className:"w-6 h-6 animate-spin text-gray-400"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Chargement..."})]}):n.length>0?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Historique des invitations (",n.length,")"]}),n.map(K=>c.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-white",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[B(K.status),c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_e(K.status)}`,children:D(K.status)})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Cre le ",K.createdAt.toDate().toLocaleDateString("fr-FR")," "," ",K.createdAt.toDate().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),K.expiresAt&&c.jsxs("p",{className:"text-xs text-gray-500",children:["Expire le ",K.expiresAt.toDate().toLocaleDateString("fr-FR")]}),K.acceptedAt&&c.jsxs("p",{className:"text-xs text-green-600",children:["Accepte le ",K.acceptedAt.toDate().toLocaleDateString("fr-FR")]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[(K.status==="pending"||K.status==="sent")&&K.token&&c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>A(K.token),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Copier le lien d'invitation",children:c.jsx(ya,{className:"w-4 h-4"})}),K.status!=="accepted"&&c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>L(K),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer l'invitation",children:c.jsx(Js,{className:"w-4 h-4"})})]})]},K.id))]}):null,!t.email&&c.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-yellow-500",children:""}),c.jsx("span",{className:"text-yellow-800",children:"Un email est requis pour crer un compte mobile"})]})}),!me()&&t.email&&!t.username&&c.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-blue-500",children:""}),c.jsx("span",{className:"text-blue-800",children:"Compte dj cr"})]})}),me()&&!f&&!(t.username&&t.tempPassword)&&c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Aucun compte mobile"}),c.jsx("p",{className:"text-xs text-gray-600 mb-3",children:`Ce client n'a pas encore de compte pour l'application mobile. Cliquez sur "Crer le compte" pour gnrer les identifiants de connexion.`})]})})]}),c.jsx(Hr,{isOpen:j.isOpen,onClose:V,onConfirm:U,title:j.title,message:j.message,confirmText:j.confirmText,cancelText:j.cancelText,type:j.type,loading:j.loading}),c.jsx(vR,{isOpen:R,onClose:()=>M(!1),onSuccess:()=>{M(!1),Y(),e?.()}})]})};class XF{invoicesCollection="invoices";paymentsCollection="paymentHistory";schedulesCollection="paymentSchedules";async createInvoice(e){const n=ve(re,this.invoicesCollection),s={...e,createdAt:fe.now(),updatedAt:fe.now(),sentToClient:!1};return(await Bn(n,s)).id}async generateInvoiceNumber(){const e=new Date().getFullYear(),n=Ie(ve(re,this.invoicesCollection),Ge("invoiceNumber",">=",`INV-${e}-000`),Ge("invoiceNumber","<=",`INV-${e}-999`),it("invoiceNumber","desc"),cm(1)),s=await Ue(n);if(s.empty)return`INV-${e}-001`;const i=s.docs[0].data(),u=(parseInt(i.invoiceNumber.split("-")[2])+1).toString().padStart(3,"0");return`INV-${e}-${u}`}async getClientInvoices(e){try{const n=Ie(ve(re,this.invoicesCollection),Ge("clientId","==",e));return(await Ue(n)).docs.map(o=>({id:o.id,...o.data()})).sort((o,u)=>{const h=o.issueDate?.seconds||0;return(u.issueDate?.seconds||0)-h})}catch(n){return console.error("Erreur lors de la rcupration des factures:",n),[]}}subscribeToClientInvoices(e,n){const s=Ie(ve(re,this.invoicesCollection),Ge("clientId","==",e));return Vn(s,i=>{const o=i.docs.map(u=>({id:u.id,...u.data()}));o.sort((u,h)=>{const f=u.issueDate?.seconds||0;return(h.issueDate?.seconds||0)-f}),n(o)})}async updatePaymentStatus(e,n,s,i,o){const u=Ad(re),h=Ne(re,this.invoicesCollection,e),f=await Pn(h);if(!f.exists())throw new Error("Facture introuvable");const m=f.data(),y=(m.paidAmount||0)+n,v=m.totalAmount-y;let b,T=m.status;v<=0?(b="paid",T="paid"):y>0?b="partial":b="pending";const R={paidAmount:y,remainingAmount:v,paymentStatus:b,status:T,paidDate:v<=0?fe.now():m.paidDate,updatedAt:fe.now()};u.update(h,R);const M=ve(re,this.paymentsCollection),j={invoiceId:e,clientId:m.clientId,amount:n,method:s,reference:i,date:fe.now(),receivedBy:o||"",createdAt:fe.now()},k=Ne(M);u.set(k,j),await u.commit()}async getClientPaymentHistory(e){try{const n=Ie(ve(re,this.paymentsCollection),Ge("clientId","==",e));return(await Ue(n)).docs.map(o=>({id:o.id,...o.data()})).sort((o,u)=>{const h=o.date?.seconds||0;return(u.date?.seconds||0)-h})}catch(n){return console.error("Erreur lors de la rcupration de l'historique:",n),[]}}async getAllPaymentHistory(){try{const e=Ie(ve(re,this.paymentsCollection),it("date","desc"),cm(100));return(await Ue(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Erreur lors de la rcupration de l'historique global:",e),[]}}async createPaymentSchedule(e){const n=ve(re,this.schedulesCollection),s={...e,createdAt:fe.now(),updatedAt:fe.now()};return(await Bn(n,s)).id}async getClientPaymentSchedule(e){try{const n=Ie(ve(re,this.schedulesCollection),Ge("clientId","==",e),Ge("status","==","active"),cm(1)),s=await Ue(n);return s.empty?null:{id:s.docs[0].id,...s.docs[0].data()}}catch(n){return console.error("Erreur lors de la rcupration de l'chancier:",n),null}}async getClientPaymentDashboard(e){const[n,s,i]=await Promise.all([this.getClientInvoices(e),this.getClientPaymentHistory(e),this.getClientPaymentSchedule(e)]),o=i?i.totalAmount:n.reduce((v,b)=>v+b.totalAmount,0),u=s.reduce((v,b)=>v+b.amount,0),h=Math.max(0,o-u);let f,m;if(i){const v=new Date,b=i.installments.filter(T=>T.status==="pending");f=b.sort((T,R)=>T.dueDate.toDate().getTime()-R.dueDate.toDate().getTime())[0],m=b.filter(T=>T.dueDate.toDate()<v)}const y=m?m.reduce((v,b)=>v+b.amount,0):0;return{clientId:e,totalProjectCost:o,totalPaid:u,totalRemaining:h,totalOverdue:y,currentSchedule:i||void 0,nextPayment:f,overduePayments:m||[],recentInvoices:n.slice(0,5),totalInvoices:n.length,recentPayments:s.slice(0,5),lastUpdated:fe.now()}}async markInvoiceAsSent(e){const n=Ne(re,this.invoicesCollection,e);await _t(n,{sentToClient:!0,sentAt:fe.now(),updatedAt:fe.now()})}async deleteInvoice(e){const n=Ne(re,this.invoicesCollection,e);await _t(n,{status:"cancelled",updatedAt:fe.now()})}}const va=new XF;class QF{schedulesCollection="paymentSchedules";calculateDeposit(e){return Math.round(e*.2)}calculateRemainingAfterDeposit(e){return e-this.calculateDeposit(e)}generateSchedule(e,n,s,i,o){const u=e-(s?n:0),h=Math.ceil((e-n)/o),f=[];s||f.push({id:`inst_${Date.now()}_deposit`,scheduleId:"",installmentNumber:0,amount:n,dueDate:fe.fromDate(i),status:"pending",notes:"Acompte initial"});let m=u;for(let y=1;y<=o;y++){const v=new Date(i);v.setMonth(v.getMonth()+y);const b=y===o?m:h;m-=b,f.push({id:`inst_${Date.now()}_${y}`,scheduleId:"",installmentNumber:y,amount:b,dueDate:fe.fromDate(v),status:"pending",notes:`Mensualit ${y}/${o}`})}return{totalAmount:e,installments:f,status:"active"}}async initializeClientAccounting(e,n,s,i=12,o=0,u=new Date){try{const h=o>0?o:this.calculateDeposit(s),f=await va.generateInvoiceNumber(),m={clientId:e,projectId:n,invoiceNumber:f,type:"initial",status:"sent",paymentStatus:"pending",issueDate:fe.now(),dueDate:fe.fromDate(new Date(u.getTime()+10080*60*1e3)),description:"Acompte initial",notes:"Paiement requis pour dmarrer le chantier",items:[{id:`item_${Date.now()}`,description:"Acompte sur travaux",quantity:1,unitPrice:h,totalPrice:h,category:"other"}],totalAmount:h,paidAmount:0,remainingAmount:h,createdBy:"system",sentToClient:!0};await va.createInvoice(m);const y=this.generateSchedule(s,h,!1,u,i);return await va.createPaymentSchedule({clientId:e,projectId:n,...y,status:"active"})}catch(h){throw console.error("Erreur initialisation comptabilit:",h),h}}async resetClientAccounting(e){try{const n=Ad(re),s=await va.getClientPaymentSchedule(e);if(s){const f=Ne(re,this.schedulesCollection,s.id);n.delete(f)}const i=Ie(ve(re,"invoices"),Ge("clientId","==",e),Ge("type","==","initial"));(await Ue(i)).docs.forEach(f=>{n.delete(f.ref)});const u=Ie(ve(re,"paymentHistory"),Ge("clientId","==",e));(await Ue(u)).docs.forEach(f=>{n.delete(f.ref)}),await n.commit()}catch(n){throw console.error("Erreur lors de la rinitialisation:",n),n}}async processPayment(e,n,s,i,o,u=new Date){try{const h=await va.getClientPaymentSchedule(e);if(!h)throw new Error("Aucun chancier actif trouv pour ce client.");let f=n;const m=[...h.installments];let y=!1;m.sort((v,b)=>v.dueDate.toDate().getTime()-b.dueDate.toDate().getTime());for(const v of m){if(f<=0)break;if(v.status==="paid")continue;const b=v.paidAmount||0,T=v.amount-b;if(T>0){const R=Math.min(f,T);v.paidAmount=b+R,f-=R,v.paidAmount>=v.amount?(v.status="paid",v.paidDate=fe.fromDate(u)):v.status="pending",v.paymentMethod=s,v.reference=i,y=!0}}if(y){const v=Ad(re),b=Ne(re,this.schedulesCollection,h.id);v.update(b,{installments:m,updatedAt:fe.now()});try{const j=Ie(ve(re,"invoices"),Ge("clientId","==",e),Ge("paymentStatus","in",["pending","overdue"])),k=await Ue(j);if(!k.empty){let U=n;const V=k.docs.map($=>({id:$.id,...$.data()})).sort(($,Y)=>$.dueDate.toDate().getTime()-Y.dueDate.toDate().getTime());for(const $ of V){if(U<=0)break;const Y=$.paidAmount||0,oe=$.totalAmount-Y;if(oe>0){const A=Math.min(U,oe),N=Y+A,C=Math.max(0,$.totalAmount-N),L=Ne(re,"invoices",$.id);v.update(L,{paidAmount:N,remainingAmount:C,paymentStatus:C<=0?"paid":"pending",updatedAt:fe.now()}),U-=A}}}}catch(j){console.error("Erreur lors de la mise  jour des factures pendant le paiement:",j)}const T=ve(re,"paymentHistory"),R={clientId:e,amount:n,method:s,reference:i||"",date:fe.fromDate(u),receivedBy:o||"system",createdAt:fe.now(),notes:`Paiement reu (${n} FCFA)`},M=Ne(T);v.set(M,R),await v.commit()}}catch(h){throw console.error("Erreur lors du traitement du paiement:",h),h}}async checkPaymentReminders(){try{const e=Ie(ve(re,this.schedulesCollection),Ge("status","==","active")),n=await Ue(e),s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),o=new Date(i);o.setDate(i.getDate()+10);for(const u of n.docs){const h=u.data(),f=h.clientId;for(const m of h.installments){if(m.status==="paid")continue;const y=m.dueDate.toDate(),v=new Date(y.getFullYear(),y.getMonth(),y.getDate());v.getTime()===o.getTime()&&await ac(()=>Promise.resolve().then(()=>n0),void 0).then(b=>b.notificationService.sendPaymentReminder(f,m.amount,y,"upcoming")),v.getTime()===i.getTime()&&await ac(()=>Promise.resolve().then(()=>n0),void 0).then(b=>b.notificationService.sendPaymentReminder(f,m.amount,y,"due_today")),v<i&&m.status!=="overdue"&&await ac(()=>Promise.resolve().then(()=>n0),void 0).then(b=>b.notificationService.sendPaymentReminder(f,m.amount,y,"overdue"))}}}catch(e){console.error("Erreur lors de la vrification des rappels:",e)}}}const Km=new QF,WF=({isOpen:t,onClose:e,installment:n,client:s,onSuccess:i})=>{const[o,u]=S.useState(!1),[h,f]=S.useState(""),[m,y]=S.useState("virement"),[v,b]=S.useState(""),[T,R]=S.useState(new Date().toISOString().split("T")[0]),[M,j]=S.useState(!0);S.useEffect(()=>{if(t&&n){const V=n.amount-(n.paidAmount||0);f(V.toString()),y("virement"),b(""),R(new Date().toISOString().split("T")[0]),j(!0)}},[t,n]);const k=async V=>{if(V.preventDefault(),!n)return;const $=parseInt(h);if(isNaN($)||$<=0){se.error("Veuillez saisir un montant valide");return}u(!0);try{if(await Km.processPayment(s.id,$,m,v,"system",new Date(T)),M)try{await Cn.notifyPaymentReceived(s.id,$,n.notes||`chance N${n.installmentNumber}`)}catch(Y){console.warn("Failed to send notification:",Y)}se.success("Paiement enregistr avec succs"),i(),e()}catch(Y){console.error("Error recording payment:",Y),se.error("Erreur lors de l'enregistrement du paiement")}finally{u(!1)}};if(!n)return null;const U=V=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(V)+" FCFA";return c.jsx(Ds,{isOpen:t,onClose:e,title:"Enregistrer un paiement",size:"md",children:c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-blue-900",children:n.notes}),c.jsxs("p",{className:"text-sm text-blue-700",children:["chance du ",new Date(n.dueDate.seconds*1e3).toLocaleDateString("fr-FR")]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-lg font-bold text-blue-800",children:U(n.amount)}),(n.paidAmount||0)>0&&c.jsxs("span",{className:"text-xs text-blue-600",children:["Dj pay: ",U(n.paidAmount||0)]})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Be,{label:"Date du versement",type:"date",value:T,onChange:V=>R(V.target.value),required:!0,icon:c.jsx(Tp,{className:"w-4 h-4"})}),c.jsx(Be,{label:"Montant du versement (Vous pouvez modifier le montant)",type:"number",value:h,onChange:V=>f(V.target.value),min:"1",required:!0,icon:c.jsx(Ej,{className:"w-4 h-4"})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode de paiement"}),c.jsxs("select",{value:m,onChange:V=>y(V.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"virement",children:"Virement Bancaire"}),c.jsx("option",{value:"cheque",children:"Chque"}),c.jsx("option",{value:"especes",children:"Espces"}),c.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),c.jsx(Be,{label:"Rfrence (N Chque, Transaction ID)",value:v,onChange:V=>b(V.target.value),placeholder:"Ex: VIR-2024-001",icon:c.jsx(rc,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex items-center pt-2",children:[c.jsx("input",{type:"checkbox",id:"notifyClient",checked:M,onChange:V=>j(V.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"notifyClient",className:"ml-2 text-sm text-gray-700",children:"Envoyer un reu et une notification au client"})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:e,className:"flex-1",disabled:o,children:"Annuler"}),c.jsx(ge,{type:"submit",className:"flex-1",disabled:o,loading:o,children:"Valider le paiement"})]})]})})},wR=({payment:t,invoice:e,client:n,project:s,onClose:i})=>{const o=S.useRef(null),u=()=>{if(!o.current)return;const f=window.open("","","width=800,height=600");f&&(f.document.write(`
      <html>
        <head>
          <title>Reu de Paiement - ${t.id}</title>
          <style>
            body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; padding: 40px; color: #333; }
            .header { display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
            .company-info h1 { margin: 0; color: #1a56db; font-size: 24px; }
            .receipt-title { text-align: right; }
            .receipt-title h2 { margin: 0; font-size: 28px; color: #444; }
            .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px; }
            .label { font-size: 12px; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
            .value { font-size: 16px; font-weight: 500; }
            .amount-box { background: #f8fafc; padding: 20px; border-radius: 8px; text-align: center; margin-bottom: 40px; border: 1px solid #e2e8f0; }
            .amount-label { font-size: 14px; color: #64748b; margin-bottom: 8px; }
            .amount-value { font-size: 36px; font-weight: bold; color: #1a56db; }
            .footer { text-align: center; color: #94a3b8; font-size: 12px; margin-top: 60px; border-top: 1px solid #eee; padding-top: 20px; }
            @media print {
              body { padding: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-info">
              <h1>KATOS CONSTRUCTION</h1>
              <p>Abidjan, Cte d'Ivoire<br>Tel: +225 07 07 07 07 07<br>Email: contact@katos.ci</p>
            </div>
            <div class="receipt-title">
              <h2>REU DE PAIEMENT</h2>
              <p>N ${t.id?.substring(0,8).toUpperCase()||"REF"}</p>
              <p>Date: ${t.date?new Date(t.date.seconds*1e3).toLocaleDateString("fr-FR"):new Date().toLocaleDateString("fr-FR")}</p>
            </div>
          </div>

          <div class="info-grid">
            <div class="client-info">
              <div class="label">Reu de</div>
              <div class="value">${n.nom} ${n.prenom}</div>
              <div class="value">${n.email}</div>
              ${n.telephone?`<div class="value">${n.telephone}</div>`:""}
            </div>
            <div class="project-info">
              <div class="label">Pour le projet</div>
              <div class="value">${s?.name||"Projet"}</div>
              <div class="value">${s?.type||""}</div>
            </div>
          </div>

          <div class="amount-box">
             <div class="amount-label">MONTANT PAY</div>
             <div class="amount-value">${new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t.amount)} FCFA</div>
             <div class="amount-label" style="margin-top: 10px; font-size: 12px;">Mode de paiement: ${t.method}</div>
             ${t.reference?`<div class="amount-label" style="font-size: 12px;">Ref: ${t.reference}</div>`:""}
          </div>

          <div class="footer">
            <p>Ce reu est gnr lectroniquement et est valide sans signature.</p>
            <p>Merci pour votre confiance.</p>
          </div>
        </body>
      </html>
    `),f.document.close(),f.focus(),setTimeout(()=>{f.print(),f.close()},250))};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs(Oe,{className:"w-full max-w-2xl bg-white max-h-[90vh] overflow-y-auto flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"font-semibold text-lg",children:"Aperu du Reu"}),c.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:c.jsx(Js,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-8 flex-1 bg-white",ref:o,children:[c.jsxs("div",{className:"flex justify-between items-start mb-8 border-b pb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:"KATOS CONSTRUCTION"}),c.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[c.jsx("p",{children:"Abidjan, Cte d'Ivoire"}),c.jsx("p",{children:"Tel: +225 07 07 07 07 07"}),c.jsx("p",{children:"Email: contact@katos.ci"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"REU DE PAIEMENT"}),c.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[c.jsxs("p",{children:["N ",t.id?.substring(0,8).toUpperCase()||"REF"]}),c.jsxs("p",{children:["Date: ",t.date?new Date(t.date.seconds*1e3).toLocaleDateString("fr-FR"):new Date().toLocaleDateString("fr-FR")]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Reu de"}),c.jsxs("p",{className:"font-medium text-gray-900",children:[n.nom," ",n.prenom]}),c.jsx("p",{className:"text-gray-600",children:n.email}),n.telephone&&c.jsx("p",{className:"text-gray-600",children:n.telephone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Pour le projet"}),c.jsx("p",{className:"font-medium text-gray-900",children:s?.name||"Projet"}),c.jsx("p",{className:"text-gray-600",children:s?.type||""})]})]}),c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 text-center mb-8",children:[c.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"MONTANT PAY"}),c.jsxs("p",{className:"text-4xl font-bold text-blue-600",children:[new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(t.amount)," FCFA"]}),c.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-sm text-slate-500",children:[c.jsxs("span",{children:["Mode: ",c.jsx("span",{className:"font-medium text-slate-700 capitalize",children:t.method})]}),t.reference&&c.jsxs("span",{children:["Ref: ",c.jsx("span",{className:"font-medium text-slate-700",children:t.reference})]})]})]}),c.jsxs("div",{className:"text-center text-xs text-gray-400 mt-12 pt-4 border-t",children:[c.jsx("p",{children:"Ce reu est gnr lectroniquement et est valide sans signature."}),c.jsx("p",{children:"Merci pour votre confiance."})]})]}),c.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-3",children:[c.jsx(ge,{variant:"outline",onClick:i,children:"Fermer"}),c.jsxs(ge,{onClick:u,className:"flex items-center gap-2",children:[c.jsx(BU,{className:"w-4 h-4"}),"Imprimer / Tlcharger"]})]})]})})},ZF=({client:t})=>{const{projects:e}=Ci(),[n,s]=S.useState(!1),[i,o]=S.useState(null),[u,h]=S.useState(!0),[f,m]=S.useState(1),y=5,[v,b]=S.useState(!1),[T,R]=S.useState(null),[M,j]=S.useState(!1),[k,U]=S.useState(null),[V,$]=S.useState(null),[Y,oe]=S.useState(!1),[A,N]=S.useState({typePaiement:t.typePaiement||"comptant",nombreEcheances:3,premierePaiement:new Date().toISOString().split("T")[0],montantComptant:"",montantTotal:"",montantAcompte:"",montantParEcheance:"",useCustomAmount:!1}),C=e.find(q=>`${q.name} ${q.type}`===t.projetAdhere),L=async()=>{try{const q=await va.getClientPaymentDashboard(t.id);o(q)}catch(q){console.error("Erreur chargement dashboard paiement:",q)}finally{h(!1)}};S.useEffect(()=>{L()},[t.id]),S.useEffect(()=>{Y&&!A.montantAcompte&&C?.price&&N(q=>({...q,montantAcompte:Math.round(C.price*.2).toString()}))},[Y,C,A.montantAcompte]);const z=q=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(q)+" FCFA",B=()=>{if(A.typePaiement!=="echeancier")return[];const q=A.useCustomAmount?parseInt(A.montantTotal)||0:C?.price||0,ye=parseInt(A.montantAcompte)||0;if(q<=0)return[];const O=q-ye,te=Math.ceil(O/A.nombreEcheances),H=[];H.push({numeroEcheance:0,montant:ye,dateEcheance:new Date().toISOString().split("T")[0],status:"pending",label:"Acompte initial"});let le=O;for(let be=0;be<A.nombreEcheances;be++){const ke=new Date(A.premierePaiement);ke.setMonth(ke.getMonth()+be);const je=be===A.nombreEcheances-1?le:te;le-=je,H.push({numeroEcheance:be+1,montant:je,dateEcheance:ke.toISOString().split("T")[0],status:"en_attente",label:`Mensualit ${be+1}/${A.nombreEcheances}`})}return H},D=async()=>{const q=A.useCustomAmount?parseInt(A.montantTotal)||0:C?.price||0;if(q<=0){se.error("Le montant total doit tre suprieur  0");return}s(!0);try{if(A.typePaiement==="echeancier"){const ye=parseInt(A.montantAcompte)||0;await Km.initializeClientAccounting(t.id,C?.id||"",q,A.nombreEcheances,ye,new Date(A.premierePaiement)),se.success("Comptabilit initialise avec succs (Acompte + chancier)")}else se.info("Fonctionnalit paiement comptant  venir");oe(!1),L()}catch(ye){console.error("Erreur cration facturation:",ye),se.error("Erreur lors de la cration de la facturation"),s(!1)}},_e=async()=>{if(window.confirm("tes-vous sr de vouloir rinitialiser la comptabilit ? Cela supprimera l'chancier et les factures initiales.")){h(!0);try{await Km.resetClientAccounting(t.id),o(null),se.success("Comptabilit rinitialise")}catch(q){console.error("Erreur reset:",q),se.error("Erreur lors de la rinitialisation")}finally{h(!1)}}},me=q=>{switch(q){case"paid":case"active":return"text-green-600";case"overdue":return"text-red-600";case"partial":return"text-orange-600";default:return"text-blue-600"}},X=q=>{switch(q){case"paid":case"active":return c.jsx(qo,{className:"w-4 h-4"});case"overdue":return c.jsx(Oa,{className:"w-4 h-4"});default:return c.jsx($o,{className:"w-4 h-4"})}},K=q=>{if(!q)return!1;const ye=new Date(q.seconds*1e3),O=new Date(ye);return O.setDate(ye.getDate()+2),new Date>O},Z=q=>{if(!q)return!1;const ye=new Date(q.seconds*1e3),O=new Date,te=Math.ceil((ye.getTime()-O.getTime())/(1e3*60*60*24)),H=new Date(O.getFullYear(),O.getMonth()+1,0),le=Math.ceil((H.getTime()-O.getTime())/(1e3*60*60*24));return te>=0&&te<=10||le>=0&&le<=10};return C?c.jsxs("div",{className:"space-y-6",children:[c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:C.name}),c.jsx("p",{className:"text-sm text-gray-500",children:C.type}),c.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:z(C.price)})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:`flex items-center gap-2 ${t.typePaiement==="comptant"?"text-green-600":"text-blue-600"}`,children:[c.jsx(rc,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:t.typePaiement==="comptant"?"Paiement comptant":"chancier"})]})})]})}),u?c.jsx("div",{className:"text-center py-8",children:"Chargement..."}):i&&i.currentSchedule?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Suivi des Paiements"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:`flex items-center gap-2 ${me(i.currentSchedule.status)}`,children:[X(i.currentSchedule.status),c.jsx("span",{className:"text-sm font-medium capitalize",children:i.currentSchedule.status})]}),c.jsxs(ge,{variant:"outline",size:"sm",onClick:_e,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[c.jsx($r,{className:"w-4 h-4 mr-1"}),"Rinitialiser"]})]})]}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Projet"}),c.jsx("p",{className:"text-lg font-semibold",children:z(i.totalProjectCost)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Pay"}),c.jsx("p",{className:"text-lg font-semibold text-green-600",children:z(i.totalPaid)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reste  payer"}),c.jsx("p",{className:"text-lg font-semibold text-blue-600",children:z(i.totalRemaining)})]})]})}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50 text-xs text-gray-500 uppercase font-bold tracking-wider",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left",children:"N"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Date Prvue"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Montant"}),c.jsx("th",{className:"px-4 py-3 text-center",children:"Statut"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:i.currentSchedule.installments.slice((f-1)*y,f*y).map((q,ye)=>{const O=V===ye,te=q.status!=="paid"&&K(q.dueDate),H=q.status!=="paid"&&Z(q.dueDate);return c.jsxs(ot.Fragment,{children:[c.jsxs("tr",{className:`hover:bg-blue-50 cursor-pointer transition-colors ${O?"bg-blue-50/50":""}`,onClick:()=>$(O?null:ye),children:[c.jsx("td",{className:"px-4 py-4 text-sm font-medium text-gray-900",children:q.installmentNumber===0?"Acompte":q.installmentNumber}),c.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:q.dueDate?new Date(q.dueDate.seconds*1e3).toLocaleDateString("fr-FR"):"-"}),c.jsx("td",{className:"px-4 py-4 text-sm text-right font-semibold",children:z(q.amount)}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.status==="paid"?"bg-green-100 text-green-800":te?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:q.status==="paid"?"Pay":te?"Retard":"Attente"})})]}),O&&c.jsx("tr",{className:"bg-blue-50/30",children:c.jsx("td",{colSpan:4,className:"px-4 py-4",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.notes||"chance de paiement"}),c.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[c.jsxs("p",{children:["Montant total : ",z(q.amount)]}),c.jsxs("p",{children:["Dj pay : ",c.jsx("span",{className:"text-green-600 font-medium",children:z(q.paidAmount||0)})]}),c.jsxs("p",{children:["Reste  percevoir : ",c.jsx("span",{className:"text-blue-600 font-medium",children:z(q.amount-(q.paidAmount||0))})]})]}),q.paidDate&&c.jsxs("p",{className:"text-xs text-green-600 italic mt-2 flex items-center gap-1",children:[c.jsx(qo,{className:"w-3 h-3"}),"Rgl le ",new Date(q.paidDate.seconds*1e3).toLocaleDateString("fr-FR")]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[q.status!=="paid"&&c.jsxs(c.Fragment,{children:[c.jsx(ge,{size:"sm",onClick:le=>{le.stopPropagation(),R(q),b(!0)},children:"Enregistrer Paiement"}),H&&c.jsx(ge,{size:"sm",variant:"outline",className:"text-orange-600 border-orange-200 hover:bg-orange-50",onClick:async le=>{le.stopPropagation();try{const be=new Date(q.dueDate.seconds*1e3),ke=new Date,je=Math.ceil((be.getTime()-ke.getTime())/(1e3*60*60*24));let Et="upcoming";je<0?Et="overdue":je===0&&(Et="due_today"),await Cn.sendPaymentReminder(t.id,q.amount-(q.paidAmount||0),be,Et),se.success("Rappel envoy")}catch{se.error("Erreur rappel")}},children:"Rappel"})]}),(q.paidAmount||0)>0&&c.jsx(ge,{size:"sm",variant:"outline",onClick:le=>{le.stopPropagation(),U({amount:q.paidAmount,date:q.paidDate||fe.now(),method:q.paymentMethod||"virement",reference:q.reference||""}),j(!0)},children:"Voir Reu"})]})]})})})]},ye)})})]})}),i.currentSchedule.installments.length>y&&c.jsxs("div",{className:"flex items-center justify-between pt-4",children:[c.jsxs("p",{className:"text-sm text-gray-500",children:["Affichage de ",(f-1)*y+1,"  ",Math.min(f*y,i.currentSchedule.installments.length)," sur ",i.currentSchedule.installments.length]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ge,{size:"sm",variant:"outline",disabled:f===1,onClick:()=>m(q=>q-1),children:"Prcdent"}),c.jsx(ge,{size:"sm",variant:"outline",disabled:f*y>=i.currentSchedule.installments.length,onClick:()=>m(q=>q+1),children:"Suivant"})]})]}),c.jsxs("div",{className:"pt-6 border-t mt-6",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[c.jsx(Ho,{className:"w-5 h-5 text-gray-400"}),"Historique des Transactions"]}),c.jsx("div",{className:"space-y-3",children:i.recentPayments.length>0?i.recentPayments.map((q,ye)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-2 bg-white rounded-full",children:c.jsx(Ej,{className:"w-4 h-4 text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:z(q.amount)}),c.jsxs("p",{className:"text-xs text-gray-500",children:[q.date?new Date(q.date.seconds*1e3).toLocaleDateString("fr-FR"):"","  ",q.method]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ge,{size:"sm",variant:"ghost",className:"h-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{U(q),j(!0)},children:[c.jsx(Ho,{className:"w-4 h-4 mr-1"}),"Reu"]}),c.jsxs(ge,{size:"sm",variant:"ghost",className:"h-8 text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:async()=>{try{await Cn.notifyPaymentReceived(t.id,q.amount,`Paiement du ${new Date(q.date.seconds*1e3).toLocaleDateString("fr-FR")}`),se.success("Notification envoye au mobile du client")}catch{se.error("Erreur lors de l'envoi de la notification")}},children:[c.jsx(Aa,{className:"w-4 h-4 mr-1"}),"Notifier"]})]})]},ye)):c.jsx("p",{className:"text-sm text-gray-500 text-center py-4 bg-gray-50 rounded-lg italic",children:"Aucune transaction enregistre."})})]})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(qv,{className:"w-8 h-8 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune facturation active"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Initialisez la comptabilit pour ce client."}),c.jsx(ge,{onClick:()=>oe(!0),children:"Initialiser la comptabilit"})]}),c.jsx(Ds,{isOpen:Y,onClose:()=>oe(!1),title:"Initialiser la comptabilit",size:"lg",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[c.jsx(rc,{className:"w-4 h-4"}),c.jsxs("span",{className:"font-medium",children:["Projet: ",C?.name||"Non dfini",C?.price?` - ${z(C.price)}`:""]})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"useCustomAmount",checked:A.useCustomAmount,onChange:q=>N(ye=>({...ye,useCustomAmount:q.target.checked,montantTotal:q.target.checked&&(ye.montantTotal||C?.price?.toString())||""})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"useCustomAmount",className:"ml-2 text-sm font-medium text-gray-700",children:"Utiliser un montant personnalis"})]}),A.useCustomAmount&&c.jsx(Be,{label:"Montant total du projet",type:"number",value:A.montantTotal,onChange:q=>{const ye=parseInt(q.target.value)||0;N(O=>({...O,montantTotal:q.target.value,montantAcompte:Math.round(ye*.2).toString()}))},placeholder:"0",min:"1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de paiement"}),c.jsxs("select",{value:A.typePaiement,onChange:q=>{const ye=q.target.value,O=A.useCustomAmount?parseInt(A.montantTotal)||0:C?.price||0;N(te=>({...te,typePaiement:ye,montantAcompte:ye==="echeancier"?Math.round(O*.2).toString():""}))},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"echeancier",children:"chancier (Acompte + Mensualits)"}),c.jsx("option",{value:"comptant",children:"Paiement comptant"})]})]}),A.typePaiement==="comptant"?c.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-800 rounded",children:"Le paiement comptant gnre une facture pour la totalit du montant."}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Be,{label:"Montant de l'acompte (Apport)",type:"number",value:A.montantAcompte,onChange:q=>N(ye=>({...ye,montantAcompte:q.target.value})),min:"0"}),c.jsx(Be,{label:"Nombre de mensualits",type:"number",value:A.nombreEcheances,onChange:q=>N(ye=>({...ye,nombreEcheances:parseInt(q.target.value)||1})),min:"1",max:"60"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsx(Be,{label:"Date de dbut (Acompte immdiat)",type:"date",value:A.premierePaiement,onChange:q=>N(ye=>({...ye,premierePaiement:q.target.value})),min:new Date().toISOString().split("T")[0]})}),c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Aperu de l'chancier prvisionnel :"}),c.jsx("div",{className:"text-sm space-y-1 max-h-40 overflow-y-auto",children:B().map((q,ye)=>c.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1 last:border-0",children:[c.jsx("span",{children:q.label}),c.jsx("span",{className:"font-medium",children:z(q.montant||0)})]},ye))})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(ge,{variant:"outline",onClick:()=>oe(!1),disabled:n,className:"flex-1",children:"Annuler"}),c.jsx(ge,{onClick:D,disabled:n,className:"flex-1",children:n?"Traitement...":"Valider et Initialiser"})]})]})}),v&&T&&c.jsx(WF,{isOpen:v,onClose:()=>{b(!1),R(null)},installment:T,client:t,onSuccess:()=>{L(),b(!1)}}),M&&k&&C&&c.jsx(wR,{payment:k,client:t,project:C,onClose:()=>{j(!0),U(null)}})]}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx(rc,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Projet non trouv"}),c.jsxs("p",{className:"text-gray-500",children:['Aucun projet correspondant trouv pour "',t.projetAdhere,'"']})]})},_R=({isOpen:t,onClose:e,client:n,onUpdate:s,initialTab:i="infos"})=>{const[o,u]=S.useState(i);S.useEffect(()=>{t&&u(i)},[t,i]);const h=y=>({id:y.id,nom:y.nom,prenom:y.prenom,email:y.email,telephone:y.telephone||"",adresse:y.adresse||"",localisationSite:y.localisationSite,projetAdhere:y.projetAdhere,status:y.status,invitationStatus:y.invitationStatus,invitationToken:y.invitationToken,userId:y.userId,username:y.username,tempPassword:y.tempPassword,typePaiement:y.typePaiement,createdAt:fe.fromDate(new Date(y.createdAt)),invitedAt:y.invitedAt?fe.fromDate(new Date(y.invitedAt)):void 0,acceptedAt:y.acceptedAt?fe.fromDate(new Date(y.acceptedAt)):void 0}),f=y=>{switch(y){case"En cours":return"bg-green-100 text-green-800";case"Termin":return"bg-purple-100 text-purple-800";case"En attente":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},m=[{key:"infos",label:"Informations",icon:Ei},{key:"billing",label:"Facturation & Paiements",icon:rc},{key:"access",label:"Accs App",icon:Kv}];return c.jsx(Ds,{isOpen:t,onClose:e,title:"",size:"xl",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"border-b border-gray-200 pb-6",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(Ei,{className:"w-8 h-8 text-blue-600"})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[n.prenom," ",n.nom]}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[c.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${f(n.status)}`,children:n.status}),c.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[c.jsx(Tp,{className:"w-4 h-4 mr-1"}),"Client depuis ",new Date(n.createdAt).toLocaleDateString("fr-FR")]})]})]})]})}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex space-x-8",children:m.map(({key:y,label:v,icon:b})=>c.jsxs("button",{onClick:()=>u(y),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors ${o===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(b,{className:"w-4 h-4"}),c.jsx("span",{children:v})]},y))})}),c.jsxs("div",{className:"min-h-[400px]",children:[o==="infos"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Informations personnelles"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx(Go,{className:"w-5 h-5 text-gray-400"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Email"}),c.jsx("div",{className:"text-sm text-gray-600",children:n.email||"Non renseign"})]})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx(Ap,{className:"w-5 h-5 text-gray-400"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Tlphone"}),c.jsx("div",{className:"text-sm text-gray-600",children:n.telephone||"Non renseign"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx(Np,{className:"w-5 h-5 text-gray-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Adresse"}),c.jsx("div",{className:"text-sm text-gray-600",children:n.adresse||"Non renseigne"})]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Projet"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Projet adhr"}),c.jsx("div",{className:"text-sm text-gray-600",children:n.projetAdhere})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Localisation du site"}),c.jsx("div",{className:"text-sm text-gray-600",children:n.localisationSite})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Statut du projet"}),c.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${f(n.status)}`,children:n.status})]})]})]})]}),o==="access"&&c.jsx(bR,{client:h(n)}),o==="billing"&&c.jsx(ZF,{client:n})]})]})})},JF=()=>{const{clients:t,addClient:e,updateClient:n,deleteClient:s,initializeClients:i,toggleClientStatus:o}=Zo(),{userData:u}=Fn(),[h,f]=S.useState(!1),[m,y]=S.useState("all"),[v,b]=S.useState(),[T,R]=S.useState(!1),[M,j]=S.useState(),[k,U]=S.useState(!1),[V,$]=S.useState(),{confirmState:Y,confirm:oe,handleConfirm:A,handleClose:N}=ji(),C=u?.role?bj(u.role,"canDeleteUsers"):!1;S.useEffect(()=>{i()},[i]);const L=q=>({id:q.id,nom:q.nom,prenom:q.prenom,email:q.email,telephone:q.telephone||"",adresse:q.adresse||"",localisationSite:q.localisationSite,projetAdhere:q.projetAdhere,status:q.status,isActive:q.isActive,invitationStatus:q.invitationStatus,typePaiement:q.typePaiement,invitationToken:q.invitationToken,userId:q.userId,username:q.username,tempPassword:q.tempPassword,createdAt:fe.fromDate(new Date(q.createdAt)),invitedAt:q.invitedAt?fe.fromDate(new Date(q.invitedAt)):void 0,acceptedAt:q.acceptedAt?fe.fromDate(new Date(q.acceptedAt)):void 0}),z=async q=>{const ye={...q,telephone:q.telephone||"",adresse:q.adresse||""};await e(ye)?(se.success("Profil client cr avec succs"),K()):se.error("Erreur lors de la cration du client")},B=q=>{b(q),f(!0)},D=async q=>{v&&(await n(v.id,q)?(se.success("Client modifi avec succs"),K()):se.error("Erreur lors de la modification du client"))},_e=q=>{if(!C){se.error("Vous n'avez pas les permissions ncessaires pour supprimer un client");return}oe(async()=>{await s(q.id)?se.success("Client supprim avec succs"):se.error("Erreur lors de la suppression du client")},{title:"Supprimer le client",message:`tes-vous sr de vouloir supprimer dfinitivement le client "${q.prenom} ${q.nom}" ? Cette action est irrversible et supprimera toutes ses donnes associes.`,confirmText:"Supprimer",type:"danger"})},me=async q=>{const ye=q.isActive?"dsactiver":"activer";oe(async()=>{await o(q)?se.success(`Client ${ye} avec succs`):se.error(`Erreur lors de l'${ye==="activer"?"activation":"dsactivation"} du client`)},{title:`${q.isActive?"Dsactiver":"Activer"} le client`,message:`tes-vous sr de vouloir ${ye} le client "${q.prenom} ${q.nom}" ? ${q.isActive?"Il ne pourra plus accder  l'application.":"Il pourra de nouveau accder  l'application."}`,confirmText:q.isActive?"Dsactiver":"Activer",type:q.isActive?"danger":"info"})},X=t.filter(q=>m==="active"?q.isActive:m==="inactive"?!q.isActive:!0),K=()=>{f(!1),b(void 0)},Z=q=>{switch(q){case"En cours":return"bg-green-100 text-green-800";case"Termin":return"bg-purple-100 text-purple-800";case"En attente":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return c.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Clients"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Grez vos clients et leurs projets"})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:m,onChange:q=>y(q.target.value),className:"appearance-none bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[c.jsx("option",{value:"all",children:"Tous les clients"}),c.jsx("option",{value:"active",children:"Actifs"}),c.jsx("option",{value:"inactive",children:"Inactifs"})]}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:c.jsx($v,{className:"h-4 w-4"})})]}),c.jsxs(ge,{onClick:()=>f(!0),className:"flex-1 sm:flex-none",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nouveau client"]})]})]}),c.jsx(Oe,{className:"p-0 sm:p-6",children:X.length>0?c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),c.jsx("th",{className:"hidden sm:table-cell px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),c.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projet"}),c.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),c.jsx("th",{className:"hidden lg:table-cell px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"App Mobile"}),c.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X.map(q=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:c.jsxs("div",{children:[c.jsxs("div",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:[q.nom," ",q.prenom]}),c.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 flex items-center mt-1 sm:hidden",children:[c.jsx(Ap,{className:"w-3 h-3 mr-1 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:q.localisationSite})]}),c.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 items-center mt-1 hidden sm:flex",children:[c.jsx(Np,{className:"w-3 h-3 mr-1 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:q.localisationSite})]})]})}),c.jsx("td",{className:"hidden sm:table-cell px-3 sm:px-6 py-3 sm:py-4",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"text-xs sm:text-sm text-gray-900 truncate",children:q.email||"Aucun email"}),c.jsx("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"Contact principal"})]})}),c.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:c.jsx("div",{children:c.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:q.projetAdhere})})}),c.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("span",{className:`inline-flex px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-medium rounded-full w-fit ${Z(q.status)}`,children:[c.jsx("span",{className:"hidden sm:inline",children:q.status}),c.jsx("span",{className:"sm:hidden",children:q.status==="En cours"?"EC":q.status==="Termin"?"T":"EA"})]}),!q.isActive&&c.jsx("span",{className:"inline-flex px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 w-fit",children:"Inactif"})]})}),c.jsx("td",{className:"hidden lg:table-cell px-3 sm:px-6 py-3 sm:py-4",children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${q.userId?"bg-green-500":q.email?"bg-yellow-500":"bg-gray-300"}`}),c.jsx("span",{className:"text-xs text-gray-600 font-medium",children:q.userId?"Connect":q.email?"Compte cr":"Pas de compte"})]}),(q.username||q.tempPassword)&&c.jsxs("div",{className:"mt-1.5 p-1.5 bg-blue-50 border border-blue-100 rounded text-[10px] space-y-0.5 shadow-sm",children:[q.username&&c.jsxs("div",{className:"flex justify-between items-center gap-2",children:[c.jsx("span",{className:"text-blue-700 font-bold",children:"ID:"}),c.jsx("span",{className:"font-mono text-gray-700 select-all",children:q.username})]}),q.tempPassword&&c.jsxs("div",{className:"flex justify-between items-center gap-2",children:[c.jsx("span",{className:"text-blue-700 font-bold",children:"Pass:"}),c.jsx("span",{className:"font-mono text-gray-700 select-all",children:q.tempPassword})]})]})]})}),c.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:c.jsxs("div",{className:"flex space-x-1 sm:space-x-2",children:[c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>{j(q),R(!0)},className:"p-1 sm:p-2",title:"Voir dtails",children:c.jsx(Sa,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>{$(q),U(!0)},className:"p-1 sm:p-2",title:"Grer invitations",children:c.jsx(Go,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>B(q),className:"p-1 sm:p-2",title:"Modifier",children:c.jsx(Sp,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),c.jsx(ge,{variant:(q.isActive,"outline"),size:"sm",onClick:()=>me(q),className:`p-1 sm:p-2 ${q.isActive?"text-red-500 hover:text-red-700":"text-gray-400"}`,title:q.isActive?"Dsactiver":"Activer",children:c.jsx(UU,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),C&&c.jsx(ge,{variant:"danger",size:"sm",onClick:()=>_e(q),className:"p-1 sm:p-2",title:"Supprimer dfinitivement",children:c.jsx($r,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},q.id))})]})}):c.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-3 sm:mb-4",children:c.jsx(Ws,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),c.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"Aucun client enregistr"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-500 mb-4",children:"Commencez par ajouter votre premier client"}),c.jsxs(ge,{onClick:()=>f(!0),className:"w-full sm:w-auto",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nouveau client"]})]})}),c.jsx(YF,{isOpen:h,onClose:K,onSubmit:v?D:z,client:v}),c.jsx(Hr,{isOpen:Y.isOpen,onClose:N,onConfirm:A,title:Y.title,message:Y.message,confirmText:Y.confirmText,cancelText:Y.cancelText,type:Y.type,loading:Y.loading}),M&&c.jsx(_R,{isOpen:T,onClose:()=>{R(!1),j(void 0)},client:M,onUpdate:()=>{}}),V&&c.jsx(Ds,{isOpen:k,onClose:()=>{U(!1),$(void 0)},title:`Invitations - ${V.prenom} ${V.nom}`,size:"lg",children:c.jsx(bR,{client:L(V),onUpdate:()=>{}})})]})},eq=({images:t,onChange:e,maxImages:n=10,label:s="Images",error:i})=>{const[o,u]=S.useState(!1),[h,f]=S.useState(""),m=async b=>{const T=Array.from(b.target.files||[]);if(T.length){if(t.length+T.length>n){alert(`Maximum ${n} images autorises`);return}u(!0);try{const R=T.map(async j=>(Br.validateImageFile(j),await Br.uploadImage(j,"projects/temp"))),M=await Promise.all(R);e([...t,...M])}catch(R){alert(R.message||"Erreur lors de l'upload")}finally{u(!1),b.target.value=""}}},y=()=>{if(h.trim()){if(t.length>=n){alert(`Maximum ${n} images autorises`);return}e([...t,h.trim()]),f("")}},v=b=>{e(t.filter((T,R)=>R!==b))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"block text-sm font-semibold text-gray-900",children:[s," (",t.length,"/",n,")"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:m,className:"hidden",id:"multiple-image-upload",disabled:o||t.length>=n}),c.jsxs("label",{htmlFor:"multiple-image-upload",className:`flex flex-col items-center justify-center h-24 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${o||t.length>=n?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 bg-gray-50 hover:bg-gray-100"}`,children:[c.jsx(nh,{className:"w-6 h-6 text-gray-400 mb-1"}),c.jsx("p",{className:"text-xs text-gray-600",children:o?"Upload...":"Slectionner images"}),c.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG, WebP"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{value:h,onChange:b=>f(b.target.value),placeholder:"https://example.com/image.jpg",disabled:t.length>=n}),c.jsxs(ge,{type:"button",onClick:y,variant:"outline",size:"sm",disabled:!h.trim()||t.length>=n,className:"w-full",children:[c.jsx(Zs,{className:"w-4 h-4 mr-1"}),"Ajouter URL"]})]})]}),i&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:i}),t.length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Aperu des images :"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.map((b,T)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:b,alt:`Image ${T+1}`,className:"w-full h-20 object-cover rounded-lg border-2 border-gray-200"}),c.jsx("button",{type:"button",onClick:()=>v(T),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-md cursor-pointer",children:c.jsx(Js,{className:"w-3 h-3"})}),c.jsx("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded",children:T+1})]},T))})]}),t.length===0&&c.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-gray-200 rounded-lg",children:[c.jsx(Hv,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Aucune image ajoute"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Utilisez l'upload ou ajoutez une URL"})]})]})},tq=({isOpen:t,onClose:e,onSubmit:n,project:s})=>{const[i,o]=S.useState({name:"",type:"",description:"",images:[],price:"",currency:"FCFA",surface:"",bedrooms:"",bathrooms:""}),[u,h]=S.useState({});S.useEffect(()=>{o(s?{name:s.name||"",type:s.type||"",description:s.description||"",images:s.images||[],price:s.price?s.price.toString():"",currency:s.currency||"FCFA",surface:s.surface?s.surface.toString():"",bedrooms:s.bedrooms?s.bedrooms.toString():"",bathrooms:s.bathrooms?s.bathrooms.toString():""}:{name:"",type:"",description:"",images:[],price:"",currency:"FCFA",surface:"",bedrooms:"",bathrooms:""}),h({})},[s,t]);const f=y=>{y.preventDefault();const v={};i.name||(v.name="Le nom est requis"),i.type||(v.type="Le type est requis"),i.description||(v.description="La description est requise"),(!i.images||i.images.length===0)&&(v.images="Au moins une image est requise");const b=parseInt(i.price);if((!i.price||isNaN(b)||b<=0)&&(v.price="Le prix doit tre suprieur  0"),Object.keys(v).length>0){h(v);return}n({...i,price:parseInt(i.price)||0,surface:i.surface?parseInt(i.surface):void 0,bedrooms:i.bedrooms?parseInt(i.bedrooms):void 0,bathrooms:i.bathrooms?parseInt(i.bathrooms):void 0}),m()},m=()=>{o({name:"",type:"",description:"",images:[],price:"",currency:"FCFA",surface:"",bedrooms:"",bathrooms:""}),h({}),e()};return c.jsx(Ds,{isOpen:t,onClose:m,title:s?"Modifier le projet":"Nouveau projet",size:"lg",children:c.jsx("div",{className:"space-y-6",children:c.jsxs("form",{onSubmit:f,className:"space-y-6",noValidate:!0,children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[c.jsx(Be,{label:"Nom du projet",value:i.name,onChange:y=>o({...i,name:y.target.value}),error:u.name,placeholder:"Villa Kenza F3"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Type de projet"}),c.jsxs("select",{value:i.type,onChange:y=>o({...i,type:y.target.value}),className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none",children:[c.jsx("option",{value:"",children:"Slectionner un type"}),c.jsx("option",{value:"F1",children:"F1"}),c.jsx("option",{value:"F2",children:"F2"}),c.jsx("option",{value:"F3",children:"F3"}),c.jsx("option",{value:"F4",children:"F4"}),c.jsx("option",{value:"F5",children:"F5"}),c.jsx("option",{value:"F6",children:"F6"}),c.jsx("option",{value:"F7+",children:"F7+"})]}),u.type&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.type})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Prix du projet"}),c.jsxs("div",{className:"relative",children:[c.jsx(Be,{type:"number",value:i.price,onChange:y=>o({...i,price:y.target.value}),error:u.price,placeholder:"Prix du projet",min:"1",step:"1000",inputMode:"numeric"}),c.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:c.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"FCFA"})})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Prix total du projet en francs CFA. Ce montant sera utilis pour calculer les chances de paiement."})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[c.jsx(Be,{label:"Surface (m)",type:"number",value:i.surface,onChange:y=>o({...i,surface:y.target.value}),placeholder:"ex: 150"}),c.jsx(Be,{label:"Chambres",type:"number",value:i.bedrooms,onChange:y=>o({...i,bedrooms:y.target.value}),placeholder:"ex: 4"}),c.jsx(Be,{label:"Toilettes",type:"number",value:i.bathrooms,onChange:y=>o({...i,bathrooms:y.target.value}),placeholder:"ex: 3"})]}),c.jsx(eq,{images:i.images,onChange:y=>o({...i,images:y}),maxImages:8,label:"Images du projet",error:u.images}),i.images.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Aperu du projet"}),c.jsx(Rb,{images:i.images,alt:"Aperu du projet",aspectRatio:"video",className:"h-48",showDots:!0,showArrows:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Description"}),c.jsx("textarea",{value:i.description,onChange:y=>o({...i,description:y.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium resize-none",rows:4,placeholder:"Description dtaille du projet..."}),u.description&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.description})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 pt-6 border-t border-gray-200",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:m,className:"w-full sm:w-auto order-2 sm:order-1",children:"Annuler"}),c.jsx(ge,{type:"submit",className:"w-full sm:w-auto order-1 sm:order-2",children:s?"Modifier":"Crer"})]})]})})})},nq=()=>{const{projects:t,addProject:e,updateProject:n,deleteProject:s,error:i}=Ci(),[o,u]=S.useState(!1),[h,f]=S.useState(),{confirmState:m,confirm:y,handleConfirm:v,handleClose:b}=ji(),T=()=>{f(void 0),u(!0)},R=k=>{f(k),u(!0)},M=k=>{y(()=>s(k.id),{title:"Supprimer",message:`tes-vous sr de vouloir supprimer le projet "${k.name} ${k.type}" ? Cette action est irrversible et supprimera galement toutes les images associes.`,confirmText:"Supprimer le projet",type:"danger"})},j=async k=>{try{h?await n(h.id,k)?se.success("Projet mis  jour avec succs"):se.error(i||"Erreur lors de la mise  jour du projet"):await e(k)?se.success("Projet cr avec succs"):se.error(i||"Erreur lors de la cration du projet")}catch{se.error("Une erreur inattendue est survenue")}};return c.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Villas"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2",children:"Grez vos villas"})]}),c.jsxs(ge,{onClick:T,className:"w-full sm:w-auto",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nouvelle Villa"]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-4",children:t.map(k=>c.jsxs(Oe,{className:"overflow-hidden flex flex-col",children:[c.jsx(Rb,{images:k.images,alt:`${k.name} ${k.type}`,aspectRatio:"video",showDots:!0,showArrows:!0,className:"flex-shrink-0"}),c.jsxs("div",{className:"p-4 sm:p-6 flex-1 flex flex-col",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 gap-2",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 leading-tight break-words",children:[k.name," ",k.type]})}),c.jsxs("div",{className:"flex space-x-1 sm:space-x-2 flex-shrink-0",children:[c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>R(k),className:"p-2",children:c.jsx(Sp,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>M(k),className:"text-red-600 hover:text-red-700 hover:bg-red-50 p-2",children:c.jsx($r,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),c.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-3 flex-1",children:k.description})]})]},k.id))}),t.length===0&&c.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[c.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:c.jsx(Zs,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),c.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"Aucun projet"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Commencez par crer votre premier projet"}),c.jsxs(ge,{onClick:T,className:"w-full sm:w-auto",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Crer un projet"]})]}),c.jsx(tq,{isOpen:o,onClose:()=>u(!1),onSubmit:j,project:h}),c.jsx(Hr,{isOpen:m.isOpen,onClose:b,onConfirm:v,title:m.title,message:m.message,confirmText:m.confirmText,cancelText:m.cancelText,type:m.type,loading:m.loading})]})},ER=t=>{const[e,n]=S.useState({}),[s,i]=S.useState(!0);return S.useEffect(()=>{if(t.length===0){i(!1);return}(async()=>{i(!0);const h={...e},f=t.filter(m=>!h[m]);if(f.length>0)try{const m=f.map(v=>Fo.getUserByUid(v));(await Promise.all(m)).forEach((v,b)=>{const T=f[b];v&&v.displayName?h[T]=v.displayName:h[T]=`Utilisateur (${T.substring(0,8)}...)`})}catch(m){console.error("Erreur lors de la rcupration des noms d'utilisateurs:",m),f.forEach(y=>{h[y]=`Utilisateur (${y.substring(0,8)}...)`})}n(h),i(!1)})()},[t.join(",")]),{userNames:e,loading:s,getUserName:u=>e[u]||`Utilisateur (${u.substring(0,8)}...)`}},sq=()=>{const[t,e]=S.useState(""),[n,s]=S.useState("Tous"),[i,o]=S.useState(!1),[u,h]=S.useState(null),f=_c(),{chantiers:m,loading:y,error:v,totalChantiers:b,chantiersActifs:T,chantiersTermines:R,chantiersEnRetard:M,chantiersEnAttente:j}=xR(),k=ot.useMemo(()=>{const D=new Set;return m.forEach(_e=>{_e.assignedChefId&&D.add(_e.assignedChefId)}),Array.from(D)},[m]),{getUserName:U}=ER(k),{confirmState:V,confirm:$,handleConfirm:Y,handleClose:oe}=ji(),A=D=>{h(D),o(!0)},N=D=>{$(async()=>{try{await Ua.deleteChantier(D.id),se.success("Chantier supprim avec succs")}catch(_e){console.error("Erreur lors de la suppression:",_e),se.error("Erreur lors de la suppression du chantier")}},{title:"Supprimer le chantier",message:`tes-vous sr de vouloir supprimer le chantier "${D.name}" ? Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger"})},C=()=>{o(!1),h(null)},L=m.filter(D=>{const _e=D.name.toLowerCase().includes(t.toLowerCase())||D.address.toLowerCase().includes(t.toLowerCase()),me=n==="Tous"||D.status===n;return _e&&me}),z=D=>{switch(D){case"En cours":return"bg-blue-100 text-blue-800";case"Termin":return"bg-green-100 text-green-800";case"En attente":return"bg-yellow-100 text-yellow-800";case"En retard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=D=>D>=75?"bg-green-500":D>=50?"bg-blue-500":D>=25?"bg-yellow-500":"bg-gray-300";return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Projets"})}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Gestion des projets de construction"})]}),c.jsxs(ge,{onClick:()=>o(!0),className:"w-full sm:w-auto",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nouveau projet"]})]}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx(Gv,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),c.jsx(Be,{placeholder:"Rechercher par nom ou adresse...",value:t,onChange:D=>e(D.target.value),className:"pl-10"})]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($v,{className:"w-5 h-5 text-gray-400"}),c.jsxs("select",{value:n,onChange:D=>s(D.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"Tous",children:"Tous les statuts"}),c.jsx("option",{value:"En attente",children:"En attente"}),c.jsx("option",{value:"En cours",children:"En cours"}),c.jsx("option",{value:"Termin",children:"Termin"}),c.jsx("option",{value:"En retard",children:"En retard"})]})]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[{label:"Tous",count:b,color:"text-gray-900"},{label:"En attente",count:j,color:"text-yellow-600"},{label:"En cours",count:T,color:"text-blue-600"},{label:"Termin",count:R,color:"text-green-600"},{label:"En retard",count:M,color:"text-red-600"}].map(D=>c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:`text-2xl font-bold ${D.color}`,children:D.count}),c.jsx("div",{className:"text-sm text-gray-600",children:D.label})]})},D.label))}),y?c.jsx(Oe,{className:"p-8",children:c.jsx("div",{className:"text-center text-gray-500",children:"Chargement des projets en temps rel..."})}):v?c.jsx(Oe,{className:"p-8",children:c.jsxs("div",{className:"text-center text-red-500",children:["Erreur de connexion: ",v,c.jsx("br",{}),c.jsx("span",{className:"text-sm text-gray-500",children:"La synchronisation temps rel sera rtablie automatiquement"})]})}):L.length>0?c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:L.map(D=>c.jsxs(Oe,{className:"p-0 hover:shadow-md transition-shadow overflow-hidden",children:[D.coverImage&&c.jsxs("div",{className:"h-48 w-full relative",children:[c.jsx("img",{src:D.coverImage,alt:`Cover ${D.name}`,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full shadow-sm ${z(D.status)}`,children:D.status})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.name}),c.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mt-1",children:[c.jsx(Np,{className:"w-4 h-4"}),c.jsx("span",{children:D.address})]})]}),!D.coverImage&&c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z(D.status)}`,children:D.status})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-gray-600",children:"Progression"}),c.jsxs("span",{className:"font-medium",children:[D.globalProgress,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all ${B(D.globalProgress)}`,style:{width:`${D.globalProgress}%`}})})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ei,{className:"w-4 h-4"}),c.jsxs("span",{children:["Chef: ",D.assignedChefId?U(D.assignedChefId):"Non assign"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Tp,{className:"w-4 h-4"}),c.jsxs("span",{children:["Fin prvue: ",D.plannedEndDate.toDate().toLocaleDateString("fr-FR")]})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Phases en cours:"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.phases.filter(_e=>_e.status==="in-progress").slice(0,3).map(_e=>c.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:_e.name},_e.id)),D.phases.filter(_e=>_e.status==="in-progress").length>3&&c.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:["+",D.phases.filter(_e=>_e.status==="in-progress").length-3]})]})]}),c.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-100",children:[c.jsxs(ge,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>f(`/chantiers/${D.id}`),children:[c.jsx(Fv,{className:"w-4 h-4 mr-1"}),"Voir dtails"]}),c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>A(D),className:"px-3",title:"Modifier",children:c.jsx(Sp,{className:"w-4 h-4"})}),c.jsx(ge,{variant:"danger",size:"sm",onClick:()=>N(D),className:"px-3",title:"Supprimer",children:c.jsx($r,{className:"w-4 h-4"})})]})]})]},D.id))}):c.jsx(Oe,{className:"p-8",children:c.jsx("div",{className:"text-center text-gray-500",children:t||n!=="Tous"?"Aucun chantier ne correspond aux critres de recherche.":"Aucun chantier cr pour le moment."})}),c.jsx(vR,{isOpen:i,onClose:C,chantier:u,onSuccess:()=>{console.log(" Projet cr/modifi - mise  jour automatique en cours..."),C()}}),c.jsx(Hr,{isOpen:V.isOpen,onClose:oe,onConfirm:Y,title:V.title,message:V.message,confirmText:V.confirmText,cancelText:V.cancelText,type:V.type,loading:V.loading})]})},rq=t=>{const[e,n]=S.useState(null),[s,i]=S.useState(!0),[o,u]=S.useState(null);return S.useEffect(()=>{if(!t){n(null),i(!1),u(null);return}console.log(` Hook useRealtimeChantier: coute du chantier ${t}`),i(!0),u(null);const h=Ua.subscribeToChantier(t,f=>{console.log(` Hook useRealtimeChantier: Chantier ${t} mis  jour`,f?.name),n(f),i(!1),u(f===null?"Chantier non trouv":null)});return()=>{console.log(` Hook useRealtimeChantier: Dconnexion du chantier ${t}`),h()}},[t]),{chantier:e,loading:s,error:o,hasChantier:!!e,globalProgress:e?.globalProgress||0,status:e?.status||"En attente",phasesActives:e?.phases?.filter(h=>h.status==="in-progress")||[],phasesTerminees:e?.phases?.filter(h=>h.status==="completed")||[],totalPhases:e?.phases?.length||0,totalEquipe:e?.team?.length||0,totalPhotos:e?.gallery?.length||0,totalUpdates:e?.updates?.length||0}},Gu="feedbacks",Ku="chantiers",v0={uploadAudioFile:async t=>{try{return await Bv.uploadFile(t,"video")}catch(e){throw console.error("Error uploading audio file:",e),e}},createVoiceNote:async(t,e,n,s,i,o)=>{try{const u={chantierId:t,phaseId:e,clientId:n,type:"audio",audioUrl:s,duration:i,createdAt:J0(),status:"unread",readBy:[]};o&&(u.stepId=o);const h=ve(re,Ku,t,Gu);return(await Bn(h,u)).id}catch(u){throw console.error("Error creating voice note:",u),u}},createTextMessage:async(t,e,n,s,i)=>{try{const o={chantierId:t,phaseId:e,clientId:n,type:"text",text:s,audioUrl:"",duration:0,createdAt:J0(),status:"unread",readBy:[]};i&&(o.stepId=i);const u=ve(re,Ku,t,Gu);return(await Bn(u,o)).id}catch(o){throw console.error("Error creating text message:",o),o}},subscribeToStepFeedbacks:(t,e,n,s)=>{const i=ve(re,Ku,t,Gu),o=Ie(i,Ge("phaseId","==",e),it("createdAt","asc"));return Vn(o,h=>{let f=h.docs.map(m=>({id:m.id,...m.data()}));s?f=f.filter(m=>m.stepId===s):f=f.filter(m=>!m.stepId),n(f)},h=>{console.error("Error creating feedback listener:",h)})},markAsRead:async(t,e,n)=>{try{const s=Ne(re,Ku,t,Gu,e);await _t(s,{readBy:jV(n)})}catch(s){console.error("Error marking feedback as read:",s)}},deleteVoiceNote:async(t,e)=>{try{const n=Ne(re,Ku,t,Gu,e);await us(n)}catch(n){throw console.error("Error deleting voice note:",n),n}}},bA=({chantierId:t,phaseId:e,stepId:n})=>{const{userData:s}=Fn(),[i,o]=S.useState([]),[u,h]=S.useState(null),f=S.useRef(null),[m,y]=S.useState({}),[v,b]=S.useState(""),[T,R]=S.useState(!1),[M,j]=S.useState(null),[k,U]=S.useState(!1),V=s?.role==="admin"||s?.role==="super_admin";S.useEffect(()=>{const C=v0.subscribeToStepFeedbacks(t,e,L=>{o(L);const z=Array.from(new Set(L.map(B=>B.clientId)));$(z)},n);return()=>C()},[t,e,n]);const $=async C=>{const L={...m};for(const z of C)if(!L[z])try{const B=await Fo.getUserByUid(z);if(B){let D="Utilisateur";B.role===$e.CLIENT?D="Client":B.role===$e.CHEF||B.isChef?D="Chef":(B.role===$e.ADMIN||B.role===$e.SUPER_ADMIN)&&(D="Admin"),L[z]={name:B.displayName,roleLabel:D}}else L[z]={name:"Utilisateur",roleLabel:""}}catch{L[z]={name:"Utilisateur",roleLabel:""}}y(L)},Y=(C,L)=>{if(u===L)f.current?.pause(),h(null);else{f.current&&f.current.pause();const z=new Audio(C);f.current=z,z.play(),h(L),z.onended=()=>h(null)}},oe=C=>{V&&(j(C),R(!0))},A=async()=>{if(M){U(!0);try{await v0.deleteVoiceNote(M.chantierId,M.id),R(!1),j(null)}catch(C){console.error("Erreur lors de la suppression:",C),alert("Erreur lors de la suppression")}finally{U(!1)}}},N=async()=>{if(!v.trim()||!s)return;const C=v.trim();b("");try{await v0.createTextMessage(t,e,s.uid,C,n)}catch(L){console.error("Failed to send text",L),b(C)}};return i.length===0&&!s?null:c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Messages & Notes vocales"}),c.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:i.map(C=>{const L=u===C.id,z=m[C.clientId]||{name:"Chargement...",roleLabel:""},B=s?.uid===C.clientId,D=C.type==="text";return c.jsx("div",{className:`flex items-start space-x-3 ${B?"flex-row-reverse space-x-reverse":""}`,children:c.jsxs("div",{className:`flex flex-col ${B?"items-end":"items-start"} max-w-[85%]`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-xs font-medium text-gray-500",children:z.name}),z.roleLabel&&!B&&c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${z.roleLabel==="Chef"?"bg-purple-100 text-purple-700":z.roleLabel==="Client"?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:z.roleLabel})]}),c.jsx("div",{className:`relative p-3 rounded-2xl ${B?"bg-blue-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:D?c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:C.text}):c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:()=>Y(C.audioUrl,C.id),className:`flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full transition-colors ${B?"bg-white text-blue-600 hover:bg-gray-100":"bg-blue-600 text-white hover:bg-blue-700"}`,children:L?c.jsx(DU,{size:14}):c.jsx(Aj,{size:14})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:`h-1 w-16 rounded-full overflow-hidden ${B?"bg-blue-400":"bg-gray-300"}`,children:c.jsx("div",{className:`h-full rounded-full ${B?"bg-white":"bg-blue-500"} ${L?"animate-pulse":""}`,style:{width:L?"100%":"0%"}})}),c.jsxs("span",{className:`text-xs font-mono ${B?"text-blue-100":"text-gray-500"}`,children:[Math.round(C.duration),"s"]})]})]})}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-[10px] text-gray-400",children:C.createdAt?.seconds?new Date(C.createdAt.seconds*1e3).toLocaleDateString():""}),V&&c.jsx("button",{onClick:()=>oe(C),className:"text-gray-400 hover:text-red-500 p-0.5",title:"Supprimer",children:c.jsx($r,{size:12})})]})]})},C.id)})}),c.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("input",{type:"text",value:v,onChange:C=>b(C.target.value),placeholder:"crire un message...",className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),N())}}),c.jsx("button",{onClick:N,disabled:!v.trim(),className:`p-2 rounded-full ${v.trim()?"bg-blue-600 text-white hover:bg-blue-700 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"} transition-all duration-200`,children:c.jsx(Sd,{size:18})})]}),c.jsx(Hr,{isOpen:T,onClose:()=>{k||(R(!1),j(null))},onConfirm:A,title:"Supprimer le message",message:"tes-vous sr de vouloir supprimer ce message ? Cette action est irrversible.",confirmText:"Supprimer",loading:k})]})},wA=()=>{const{id:t}=$D(),e=_c(),{chantier:n,loading:s,error:i,hasChantier:o,globalProgress:u,status:h,phasesActives:f,totalEquipe:m,totalPhotos:y}=rq(t||null),v=ot.useMemo(()=>{if(!n)return[];const j=new Set;return n.assignedChefId&&j.add(n.assignedChefId),n.phases.forEach(k=>{k.updatedBy&&j.add(k.updatedBy)}),n.updates.forEach(k=>{k.createdBy&&j.add(k.createdBy)}),n.team.forEach(k=>{k.userId&&j.add(k.userId)}),n.gallery.forEach(k=>{k.uploadedBy&&j.add(k.uploadedBy)}),Array.from(j)},[n]),{getUserName:b,loading:T}=ER(v),R=j=>{switch(j){case"En cours":return"bg-blue-100 text-blue-800";case"Termin":return"bg-green-100 text-green-800";case"En attente":return"bg-yellow-100 text-yellow-800";case"En retard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=j=>j>=75?"bg-green-500":j>=50?"bg-blue-500":j>=25?"bg-yellow-500":"bg-gray-300";return s?c.jsx("div",{className:"space-y-6",children:c.jsx(Oe,{className:"p-8",children:c.jsx("div",{className:"text-center text-gray-500",children:"Chargement du chantier en temps rel..."})})}):i||!o||!n?c.jsx("div",{className:"space-y-6",children:c.jsx(Oe,{className:"p-8",children:c.jsx("div",{className:"text-center text-red-500",children:i||"Chantier non trouv"})})}):c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(ge,{variant:"outline",onClick:()=>e("/chantiers"),children:c.jsx(_j,{className:"w-4 h-4"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:n.name}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(h)}`,children:h})]}),c.jsxs("div",{className:"space-y-1 text-gray-600 mt-1",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Np,{className:"w-4 h-4"}),c.jsx("span",{children:n.address})]}),n.assignedChefId&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ei,{className:"w-4 h-4"}),c.jsxs("span",{children:["Chef: ",T?"Chargement...":b(n.assignedChefId)]})]})]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Fv,{className:"w-8 h-8 text-blue-600"}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[u,"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Progression"})]})]})}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx($o,{className:"w-8 h-8 text-yellow-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Phases actives"})]})]})}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ws,{className:"w-8 h-8 text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m}),c.jsx("div",{className:"text-sm text-gray-600",children:"Membres quipe"})]})]})}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(HL,{className:"w-8 h-8 text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y}),c.jsx("div",{className:"text-sm text-gray-600",children:"Photos"})]})]})})]}),c.jsxs(Oe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progression gnrale"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Progression"}),c.jsxs("span",{className:"font-medium",children:[u,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:c.jsx("div",{className:`h-3 rounded-full transition-all ${M(u)}`,style:{width:`${u}%`}})})]})]}),c.jsxs(Oe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Phases du projet"}),c.jsx("div",{className:"space-y-4",children:n.phases.map(j=>{const k=j,U=k.steps&&k.steps.length>0;return c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),k.category&&c.jsx("span",{className:`px-2 py-1 text-xs rounded ${k.category==="gros_oeuvre"?"bg-orange-100 text-orange-700":k.category==="second_oeuvre"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:k.category==="gros_oeuvre"?"Gros uvre":k.category==="second_oeuvre"?"Second uvre":"Principal"})]}),c.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="completed"?"bg-green-100 text-green-800":j.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:j.status==="completed"?"Termine":j.status==="in-progress"?"En cours":"En attente"})]}),j.description&&c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:j.description}),c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Progression globale"}),c.jsxs("span",{className:"font-medium",children:[j.progress,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all ${M(j.progress)}`,style:{width:`${j.progress}%`}})})]}),U&&c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Dtail des tapes:"}),c.jsx("div",{className:"space-y-2 ml-4",children:k.steps.map(V=>c.jsxs("div",{className:"py-2 border-b border-gray-100 last:border-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${V.status==="completed"?"bg-teal-500":V.status==="in-progress"?"bg-indigo-500":"bg-slate-300"}`}),c.jsx("span",{className:"text-sm text-gray-700",children:V.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1.5",children:c.jsx("div",{className:`h-1.5 rounded-full ${V.progress===100?"bg-teal-500":V.progress>=50?"bg-indigo-500":V.progress>0?"bg-indigo-400":"bg-slate-300"}`,style:{width:`${V.progress}%`}})}),c.jsxs("span",{className:"text-xs text-gray-500 w-8",children:[V.progress,"%"]})]})]}),c.jsx(bA,{chantierId:n.id||"",phaseId:j.id,stepId:V.id})]},V.id))})]}),j.notes&&!j.notes.includes("Progression mise  jour via l'application mobile")&&c.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[c.jsx("strong",{children:"Notes:"})," ",j.notes]}),j.lastUpdated&&c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Dernire mise  jour: ",j.lastUpdated.toDate().toLocaleString("fr-FR"),j.updatedBy&&` par ${b(j.updatedBy)}`]}),c.jsxs("div",{className:"mt-6 border-t pt-4",children:[c.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:U?"Discussion gnrale de la phase":"Messages et notes vocales"}),c.jsx(bA,{chantierId:n.id||"",phaseId:j.id})]})]},j.id)})})]}),n.team.length>0&&c.jsxs(Oe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"quipe"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.team.map(j=>c.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[c.jsx(Ei,{className:"w-8 h-8 text-gray-400"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:j.name}),c.jsx("div",{className:"text-sm text-gray-600",children:j.role}),j.phoneNumber&&c.jsx("div",{className:"text-xs text-gray-500",children:j.phoneNumber})]})]},j.id))})]}),n.updates.length>0&&c.jsxs(Oe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dernires mises  jour"}),c.jsx("div",{className:"space-y-3",children:n.updates.slice(0,5).map(j=>c.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[c.jsx("div",{className:"font-medium text-gray-900",children:j.title}),j.description&&c.jsx("div",{className:"text-sm text-gray-600 mt-1",children:j.description}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[j.createdAt.toDate().toLocaleString("fr-FR")," par ",b(j.createdBy)]})]},j.id))})]})]})},iq=({isOpen:t,onClose:e,onSubmit:n,material:s})=>{const[i,o]=S.useState({name:"",category:"",price:"",image:"",supplier:"",description:""}),[u,h]=S.useState({}),[f,m]=S.useState(null),[y,v]=S.useState(!1),[b,T]=S.useState("");S.useEffect(()=>{s?(o({name:s.name||"",category:s.category||"",price:s.price||0,image:s.image||"",supplier:s.supplier||"",description:s.description||""}),T(s.image||"")):(o({name:"",category:"",price:"",image:"",supplier:"",description:""}),T("")),h({}),m(null),v(!1)},[s,t]);const R=["Carrelage et Grs","Peinture et Enduits","Plomberie et Sanitaires","lectricit et clairage","Menuiserie Bois/Alu","Quincaillerie","Revtement sol","Isolation thermique","Matriaux de construction","Outillage","Autre"],M=V=>{const $=V.target.files?.[0];if($)try{Br.validateImageFile($),m($),h({...u,image:""});const Y=new FileReader;Y.onload=oe=>{T(oe.target?.result)},Y.readAsDataURL($)}catch(Y){h({...u,image:Y.message})}},j=()=>{m(null),T(""),o({...i,image:""})},k=async V=>{V.preventDefault(),v(!0);try{const $={};if(i.name||($.name="Le nom est requis"),i.category||($.category="La catgorie est requise"),(!i.price||Number(i.price)<=0)&&($.price="Le prix doit tre suprieur  0"),i.supplier||($.supplier="Le fournisseur est requis"),i.description||($.description="La description est requise"),Object.keys($).length>0){h($),v(!1);return}let Y=i.image;f&&(Y=await Br.uploadMaterialImage(f));const oe={...i,price:Number(i.price),image:Y};n(oe),U()}catch($){h({...u,image:$.message||"Erreur lors de l'upload"})}finally{v(!1)}},U=()=>{o({name:"",category:"",price:"",image:"",supplier:"",description:""}),h({}),m(null),T(""),v(!1),e()};return c.jsx(Ds,{isOpen:t,onClose:U,title:s?"Modifier le matriau":"Nouveau matriau",size:"lg",children:c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Be,{label:"Nom du matriau",value:i.name,onChange:V=>o({...i,name:V.target.value}),error:u.name,placeholder:"Carrelage Sngalais Premium"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Catgorie"}),c.jsxs("select",{value:i.category,onChange:V=>o({...i,category:V.target.value}),className:"block w-full h-12 px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium appearance-none",children:[c.jsx("option",{value:"",children:"Slectionner une catgorie"}),R.map(V=>c.jsx("option",{value:V,children:V},V))]}),u.category&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.category})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Be,{label:"Prix (FCFA)",type:"number",value:i.price,onChange:V=>o({...i,price:V.target.value?Number(V.target.value):""}),error:u.price,placeholder:"25000",min:"0",step:"0.01"}),c.jsx(Be,{label:"Fournisseur",value:i.supplier,onChange:V=>o({...i,supplier:V.target.value}),error:u.supplier,placeholder:"SOCAREX Sngal"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Image du matriau"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",id:"image-upload"}),b?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:b,alt:"Aperu",className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:j,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors cursor-pointer",children:c.jsx(Js,{className:"w-4 h-4"})})]}):c.jsxs("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[c.jsx(nh,{className:"w-8 h-8 text-gray-400 mb-2"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Cliquez pour slectionner une image"}),c.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG, WebP (max 5MB)"})]})]}),u.image&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.image}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"ou"}),c.jsx(Be,{label:"URL d'image externe",value:i.image,onChange:V=>{o({...i,image:V.target.value}),V.target.value&&!f&&T(V.target.value)},placeholder:"https://images.unsplash.com/photo-...",size:12})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Description"}),c.jsx("textarea",{value:i.description,onChange:V=>o({...i,description:V.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-300 rounded-lg shadow-sm bg-white text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors font-medium resize-none",rows:4,placeholder:"Description dtaille du matriau..."}),u.description&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:u.description})]}),c.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:U,children:"Annuler"}),c.jsx(ge,{type:"submit",disabled:y,children:y?"Upload en cours...":s?"Modifier":"Crer"})]})]})})},aq=()=>{const{materials:t,addMaterial:e,updateMaterial:n,deleteMaterial:s,initializeMaterials:i}=zv(),[o,u]=S.useState(!1),[h,f]=S.useState(),{confirmState:m,confirm:y,handleConfirm:v,handleClose:b}=ji();S.useEffect(()=>{i()},[i]);const T=async U=>{await e(U)?(se.success("Matriau ajout avec succs  la vitrine"),k()):se.error("Erreur lors de l'ajout du matriau")},R=U=>{f(U),u(!0)},M=async U=>{h&&(await n(h.id,U)?(se.success("Matriau modifi avec succs"),k()):se.error("Erreur lors de la modification du matriau"))},j=U=>{y(async()=>{await s(U.id)?se.success("Matriau supprim avec succs"):se.error("Erreur lors de la suppression du matriau")},{title:"Supprimer",message:`tes-vous sr de vouloir supprimer le matriau "${U.name}" ? Cette action est irrversible et supprimera galement l'image associe.`,confirmText:"Supprimer le matriau",type:"danger"})},k=()=>{u(!1),f(void 0)};return c.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Boutique"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Grez la vitrine des matriaux de second uvre"})]}),c.jsxs(ge,{onClick:()=>u(!0),className:"w-full sm:w-auto",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nouveau produit"]})]}),t.length>0?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:t.map(U=>c.jsx(Oe,{className:"hover:shadow-lg transition-shadow flex flex-col p-4 sm:p-6",children:c.jsxs("div",{className:"flex flex-col h-full space-y-3 sm:space-y-4",children:[c.jsx("div",{className:"aspect-video w-full",children:c.jsx("img",{src:U.image,alt:U.name,className:"w-full h-32 sm:h-40 object-cover rounded-lg",onError:V=>{V.target.src="https://images.unsplash.com/photo-1604079628040-94301bb21b91?w=400"}})}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base line-clamp-2 flex-1",children:U.name}),c.jsxs("span",{className:"text-sm sm:text-base font-bold text-gold-600 whitespace-nowrap",children:[U.price.toLocaleString("fr-FR")," FCFA"]})]}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:U.category})}),c.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2",children:U.description}),c.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["Fournisseur: ",U.supplier]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2 mt-auto",children:[c.jsxs(ge,{variant:"outline",size:"sm",className:"flex-1 text-xs sm:text-sm",onClick:()=>R(U),children:[c.jsx(Sp,{className:"w-3 h-3 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),c.jsx("span",{className:"sm:hidden",children:"Mod"})]}),c.jsxs(ge,{variant:"danger",size:"sm",onClick:()=>j(U),className:"sm:w-auto w-full text-xs sm:text-sm",children:[c.jsx($r,{className:"w-3 h-3 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline ml-1",children:"Supprimer"})]})]})]})},U.id))}):c.jsx(Oe,{className:"p-4 sm:p-6",children:c.jsxs("div",{className:"text-center py-8 sm:py-12",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-3 sm:mb-4",children:c.jsx(Sj,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),c.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"Aucun matriau disponible"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-500 mb-4",children:"Commencez par ajouter des matriaux  votre vitrine"}),c.jsxs(ge,{onClick:()=>u(!0),className:"w-full sm:w-auto",children:[c.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nouveau produit"]})]})}),c.jsx(iq,{isOpen:o,onClose:k,onSubmit:h?M:T,material:h}),c.jsx(Hr,{isOpen:m.isOpen,onClose:b,onConfirm:v,title:m.title,message:m.message,confirmText:m.confirmText,cancelText:m.cancelText,type:m.type,loading:m.loading})]})};function oq(){const[t,e]=S.useState([]),[n,s]=S.useState([]),[i,o]=S.useState(!0),[u,h]=S.useState(!1),[f,m]=S.useState(!1),[y,v]=S.useState(""),[b,T]=S.useState("all"),[R,M]=S.useState("all"),[j,k]=S.useState({}),[U,V]=S.useState(null),{clients:$}=Zo(),{userData:Y}=Fn(),{confirmState:oe,confirm:A,handleConfirm:N,handleClose:C}=ji(),[L,z]=S.useState({file:null,clientId:"",type:"other",description:"",allowDownload:!0});S.useEffect(()=>{B(),D()},[]),S.useEffect(()=>{_e()},[t,y,b,R]);const B=async()=>{o(!0);try{const H=[];for(const le of $){const be=await Kl.getClientDocuments(le.id);H.push(...be)}e(H)}catch(H){console.error("Erreur lors du chargement:",H),se.error("Erreur lors du chargement des documents")}finally{o(!1)}},D=async()=>{try{const H=ve(re,"users"),le=await Ue(H),be={};le.forEach(ke=>{const je=ke.data();be[ke.id]=je.displayName||je.email||"Utilisateur inconnu"}),k(be)}catch(H){console.error("Error loading users:",H)}},_e=()=>{let H=t;y&&(H=H.filter(le=>le.name.toLowerCase().includes(y.toLowerCase())||le.description?.toLowerCase().includes(y.toLowerCase())||me(le.clientId).toLowerCase().includes(y.toLowerCase()))),b!=="all"&&(H=H.filter(le=>le.type===b)),R!=="all"&&(H=H.filter(le=>le.clientId===R)),s(H)},me=H=>{const le=$.find(be=>be.id===H);return le?`${le.prenom} ${le.nom}`:"Client inconnu"},X=H=>{switch(H){case"client_upload":return"Reu (Client)";case"chef_upload":return"Reu (Chantier)";case"admin_upload":return"Envoy";default:return"Inconnu"}},K=H=>{switch(H){case"client_upload":return"bg-orange-100 text-orange-800";case"chef_upload":return"bg-purple-100 text-purple-800";case"admin_upload":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},Z=H=>{const le=H.target.files?.[0];if(le){if(le.size>10*1024*1024){se.error("Le fichier ne peut pas dpasser 10MB");return}z({...L,file:le,description:L.description||le.name})}},q=async()=>{if(!L.file||!L.clientId){se.error("Veuillez slectionner un fichier et un client");return}m(!0);try{const H=await Ua.getClientChantier(L.clientId);if(!H){se.error("Impossible de trouver un chantier actif pour ce client. Le document ne peut pas tre li."),m(!1);return}const le={type:L.type,description:L.description,visibility:"both",allowClientDownload:L.allowDownload,chantierId:H.id};await Kl.createDocumentForClient(L.clientId,L.file,le,Y?.uid||"admin",H.id),se.success("Document envoy avec succs au client"),h(!1),O(),B()}catch(H){console.error("Erreur lors de l'upload:",H),se.error("Erreur lors de l'envoi du document")}finally{m(!1)}},ye=H=>{A(async()=>{try{await Kl.deleteDocument(H.id,Y?.uid||"admin","Suppression par l'administrateur"),se.success("Document supprim avec succs"),B()}catch(le){console.error("Erreur lors de la suppression:",le),se.error("Erreur lors de la suppression du document")}},{title:"Supprimer le document",message:`tes-vous sr de vouloir supprimer "${H.name}" ? Cette action est irrversible.`,confirmText:"Supprimer",type:"danger"})},O=()=>{z({file:null,clientId:"",type:"other",description:"",allowDownload:!0})},te=H=>{H.type==="video"||H.mimeType?.startsWith("video/")?V(H.url):window.open(H.url,"_blank")};return i?c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des documents..."})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Documents"}),c.jsx("p",{className:"text-gray-600",children:"Envoyez des documents aux clients et grez les envois"})]}),c.jsxs(ge,{onClick:()=>h(!0),children:[c.jsx(Sd,{className:"w-4 h-4 mr-2"}),"Envoyer un document"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(Ho,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Total documents"}),c.jsx("p",{className:"text-xl font-bold text-blue-600",children:t.length})]})]})}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx(Sd,{className:"w-5 h-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Envoys aujourd'hui"}),c.jsx("p",{className:"text-xl font-bold text-green-600",children:t.filter(H=>{const le=new Date().toDateString();return H.uploadedAt.toDate().toDateString()===le}).length})]})]})}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(Ei,{className:"w-5 h-5 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Clients concerns"}),c.jsx("p",{className:"text-xl font-bold text-purple-600",children:new Set(t.map(H=>H.clientId)).size})]})]})}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:c.jsx(Tp,{className:"w-5 h-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Cette semaine"}),c.jsx("p",{className:"text-xl font-bold text-orange-600",children:t.filter(H=>{const le=new Date;return le.setDate(le.getDate()-7),H.uploadedAt.toDate()>=le}).length})]})]})})]}),c.jsx(Oe,{className:"p-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Gv,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),c.jsx(Be,{placeholder:"Rechercher...",value:y,onChange:H=>v(H.target.value),className:"pl-10"})]}),c.jsxs("select",{value:b,onChange:H=>T(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[c.jsx("option",{value:"all",children:"Tous les types"}),c.jsx("option",{value:"plan",children:"Plans"}),c.jsx("option",{value:"contract",children:"Contrats"}),c.jsx("option",{value:"invoice",children:"Factures"}),c.jsx("option",{value:"photo",children:"Photos"}),c.jsx("option",{value:"report",children:"Rapports"}),c.jsx("option",{value:"permit",children:"Permis"}),c.jsx("option",{value:"progress_update",children:"Suivi"}),c.jsx("option",{value:"video",children:"Vido"}),c.jsx("option",{value:"other",children:"Autres"})]}),c.jsxs("select",{value:R,onChange:H=>M(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[c.jsx("option",{value:"all",children:"Tous les clients"}),$.map(H=>c.jsxs("option",{value:H.id,children:[H.prenom," ",H.nom]},H.id))]})]})}),c.jsxs(Oe,{className:"p-6",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Documents envoys (",n.length,")"]}),n.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Ho,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),c.jsx("p",{className:"text-gray-500",children:"Aucun document trouv"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(H=>c.jsx(Oe,{className:"p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"justify-between items-center",children:[c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex items-start space-x-3 w-full",children:[c.jsx("div",{className:"text-2xl mt-1",children:Kl.getDocumentIcon(H.type)}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h5",{className:"font-medium text-gray-900 text-sm wrap min-h-12 uppercase overflow-hidden mb-1 flex-1 pr-2",children:H.name}),c.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full whitespace-nowrap ${K(H.source)}`,children:X(H.source)})]})})]})}),c.jsxs("div",{className:"text-xs text-gray-600 min-h-22",children:[c.jsxs("p",{className:"font-medium",children:["Client: ",me(H.clientId)]}),H.source==="chef_upload"&&c.jsxs("p",{className:"font-medium text-purple-700",children:["Par: ",j[H.uploadedBy]||"Chef inconnu"]}),H.description&&c.jsx("p",{className:"mt-1 line-clamp-2",children:H.description})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsx("span",{children:H.size>0?Kl.formatFileSize(H.size):""}),c.jsx("span",{children:H.uploadedAt.toDate().toLocaleDateString("fr-FR")})]}),c.jsxs("div",{className:"flex space-x-2 pt-2",children:[c.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>te(H),className:"flex-1",children:[H.type==="video"?c.jsx(Aj,{className:"w-3 h-3 mr-1"}):c.jsx(Sa,{className:"w-3 h-3 mr-1"}),H.type==="video"?"Lire":"Voir"]}),c.jsx(ge,{variant:"danger",size:"sm",onClick:()=>ye(H),className:"p-2",children:c.jsx($r,{className:"w-3 h-3"})})]})]})},H.id))})]}),c.jsx(Ds,{isOpen:u,onClose:()=>h(!1),title:"Envoyer un document",size:"lg",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client destinataire *"}),c.jsxs("select",{value:L.clientId,onChange:H=>z({...L,clientId:H.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[c.jsx("option",{value:"",children:"Slectionner un client"}),$.map(H=>c.jsxs("option",{value:H.id,children:[H.prenom," ",H.nom," - ",H.email]},H.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fichier  envoyer *"}),c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[c.jsx("input",{type:"file",onChange:Z,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif",className:"hidden",id:"file-upload"}),c.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[c.jsx(nh,{className:"w-8 h-8 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:L.file?L.file.name:"Cliquez pour slectionner un fichier"}),c.jsx("span",{className:"text-xs text-gray-500",children:"PDF, Word, Image (max 10MB)"})]})]})]}),L.file&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de document"}),c.jsxs("select",{value:L.type,onChange:H=>z({...L,type:H.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[c.jsx("option",{value:"contract",children:"Contrat"}),c.jsx("option",{value:"plan",children:"Plan"}),c.jsx("option",{value:"permit",children:"Permis"}),c.jsx("option",{value:"report",children:"Rapport"}),c.jsx("option",{value:"progress_update",children:"Suivi d'avancement"}),c.jsx("option",{value:"other",children:"Autre"})]})]})}),c.jsx(Be,{label:"Description (optionnelle)",value:L.description,onChange:H=>z({...L,description:H.target.value}),placeholder:"Description du document"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(ge,{variant:"outline",onClick:()=>h(!1),disabled:f,className:"flex-1",children:"Annuler"}),c.jsx(ge,{onClick:q,disabled:f||!L.file||!L.clientId,className:"flex-1",children:f?"Envoi...":"Envoyer au client"})]})]})}),c.jsx(Hr,{isOpen:oe.isOpen,onClose:C,onConfirm:N,title:oe.title,message:oe.message,confirmText:oe.confirmText,cancelText:oe.cancelText,type:oe.type,loading:oe.loading}),c.jsxs(Ds,{isOpen:!!U,onClose:()=>V(null),title:"Lecture vido",size:"xl",children:[c.jsx("div",{className:"flex justify-center bg-black rounded-lg overflow-hidden",children:U&&c.jsx("video",{src:U,controls:!0,autoPlay:!0,className:"w-full max-h-[70vh]",style:{maxWidth:"100%"},children:"Votre navigateur ne supporte pas la lecture de vidos."})}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx(ge,{onClick:()=>V(null),children:"Fermer"})})]})]})}const lq=()=>{const[t,e]=S.useState(!1),[n,s]=S.useState(null),[i,o]=S.useState([]),[u,h]=S.useState([]),[f,m]=S.useState(!1),[y,v]=S.useState(!1),[b,T]=S.useState(!1),[R,M]=S.useState("codes"),[j,k]=S.useState(null),[U,V]=S.useState(!1),{userData:$}=Fn(),{confirmState:Y,confirm:oe,handleConfirm:A,handleClose:N}=ji();S.useEffect(()=>{C(),L()},[]);const C=async()=>{m(!0);try{const O=await Ys.getAllInvitationCodes();o(O)}catch{se.error("Erreur lors du chargement des codes")}finally{m(!1)}},L=async()=>{v(!0);try{const O=await js.getAllUsers();h(O)}catch{se.error("Erreur lors du chargement des utilisateurs")}finally{v(!1)}},z=async()=>{if(!$){se.error("Vous devez tre connect");return}try{T(!0);const O=await Ys.createInvitationCode($.uid);O?(s(O.code),e(!0),await C(),se.success("Code d'invitation gnr avec succs")):se.error("Erreur lors de la gnration du code")}catch{se.error("Erreur lors de la gnration du code")}finally{T(!1)}},B=O=>{$&&oe(async()=>{try{await Ys.deleteInvitationCode(O.id)?(se.success("Code supprim avec succs"),await C()):se.error("Erreur lors de la suppression du code")}catch{se.error("Erreur lors de la suppression du code")}},{title:"Supprimer le code",message:`tes-vous sr de vouloir supprimer le code "${O.code}" ? Cette action est irrversible.`,confirmText:"Supprimer",type:"danger"})},D=async O=>{try{await navigator.clipboard.writeText(O),se.success("Code copi dans le presse-papiers")}catch{const H=document.createElement("textarea");H.value=O,document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H),se.success("Code copi dans le presse-papiers")}},_e=O=>{switch(O){case"active":return"bg-green-100 text-green-800 border-green-200";case"used":return"bg-blue-100 text-blue-800 border-blue-200";case"expired":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},me=O=>{switch(O){case"active":return"Actif";case"used":return"Utilis";case"expired":return"Expir";default:return"Inconnu"}},X=O=>{if(!$)return;const te=O.isBlocked||!1,H=te?"dbloquer":"bloquer",le=te?"Dbloquer":"Bloquer";oe(async()=>{try{const be=await js.toggleUserStatus(O.uid);be.success?(se.success(`Utilisateur ${H} avec succs`),await L()):se.error(be.error||`Erreur lors du ${H}age`)}catch{se.error(`Erreur lors du ${H}age`)}},{title:`${le} l'utilisateur`,message:`tes-vous sr de vouloir ${H} l'utilisateur "${O.displayName}" ? ${te?"Il pourra  nouveau se connecter.":"Il ne pourra plus se connecter."}`,confirmText:le,type:te?"info":"warning"})},K=O=>{switch(O){case $e.SUPER_ADMIN:return"Super Admin";case $e.ADMIN:return"Admin";case $e.CHEF:return"Chef de chantier";case $e.CLIENT:return"Client";default:return"Inconnu"}},Z=O=>{switch(O){case $e.SUPER_ADMIN:return"bg-purple-100 text-purple-800 border-purple-200";case $e.ADMIN:return"bg-blue-100 text-blue-800 border-blue-200";case $e.CHEF:return"bg-orange-100 text-orange-800 border-orange-200";case $e.CLIENT:return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},q=O=>{!$||O.role!==$e.CLIENT||oe(async()=>{try{const te=await js.regenerateClientAccess(O.uid);if(te.success){const H=` NOUVEAUX IDENTIFIANTS

Identifiant: ${te.username}
Mot de passe: ${te.tempPassword}

 Instructions:
1. Utilisez le nouvel identifiant
2. Entrez le nouveau mot de passe
3. Changez le mot de passe  la premire connexion

 Les anciens identifiants ne fonctionnent plus`;k(H),V(!0),await L(),se.success("Nouveaux identifiants gnrs avec succs")}else se.error(te.error||"Erreur lors de la rgnration")}catch{se.error("Erreur lors de la rgnration des accs")}},{title:"Rgnrer les accs",message:`tes-vous sr de vouloir gnrer de nouveaux identifiants pour "${O.displayName}" ? Les anciens identifiants ne fonctionneront plus.`,confirmText:"Rgnrer",type:"warning"})},ye=O=>{if(!$)return;const te=O.isChef||!1,H=te?"retirer le rle chef":"attribuer le rle chef",le=te?"Retirer le rle chef":"Attribuer le rle chef";oe(async()=>{try{const be=await Fo.updateChefStatus(O.uid,!te);be.success?(se.success(`Rle chef ${te?"retir":"attribu"} avec succs`),await L()):se.error(be.error||`Erreur lors de ${H}`)}catch{se.error(`Erreur lors de ${H}`)}},{title:le,message:`tes-vous sr de vouloir ${H}  "${O.displayName}" ? ${te?"Il ne pourra plus tre assign aux nouveaux chantiers.":"Il pourra tre assign aux chantiers."}`,confirmText:le,type:te?"warning":"info"})};return f&&R==="codes"?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):y&&R==="users"?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Ws,{className:"w-8 h-8 text-primary-600"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des utilisateurs"}),c.jsx("p",{className:"text-gray-600",children:"Grez les codes d'invitation et les utilisateurs"})]})]}),R==="codes"&&c.jsx(Gl,{requiredPermission:"canManageUsers",children:c.jsx(ge,{onClick:z,loading:b,icon:c.jsx(Zs,{className:"w-4 h-4"}),children:"Gnrer un code"})})]}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsxs("button",{onClick:()=>M("codes"),className:`py-2 px-1 border-b-2 font-medium text-sm cursor-pointer ${R==="codes"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(Wy,{className:"w-4 h-4 inline mr-2"}),"Codes d'invitation (",i.length,")"]}),c.jsx(Gl,{requiredPermission:"canManageUsers",children:c.jsxs("button",{onClick:()=>M("users"),className:`py-2 px-1 border-b-2 font-medium text-sm cursor-pointer ${R==="users"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(Ws,{className:"w-4 h-4 inline mr-2"}),"Utilisateurs (",u.length,")"]})})]})}),R==="codes"&&c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Codes d'invitation (",i.length,")"]})}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cr le"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expire le"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(O=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"flex items-center space-x-3",children:c.jsx("div",{className:"text-sm font-mono font-medium text-gray-900 bg-gray-100 px-2 py-1 rounded",children:O.code})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${_e(O.status)}`,children:me(O.status)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.createdAt.toDate().toLocaleDateString("fr-FR")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.expiresAt.toDate().toLocaleDateString("fr-FR")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[O.status==="active"&&c.jsx(ge,{size:"sm",variant:"ghost",onClick:()=>D(O.code),icon:c.jsx(ya,{className:"w-4 h-4"}),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"Copier"}),c.jsx(Gl,{requiredPermission:"canDeleteUsers",children:c.jsx(ge,{size:"sm",variant:"ghost",onClick:()=>B(O),icon:c.jsx($r,{className:"w-4 h-4"}),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Supprimer"})})]})})]},O.id))})]}),i.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Wy,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun code d'invitation"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Gnrez votre premier code d'invitation"}),c.jsx(Gl,{requiredPermission:"canManageUsers",children:c.jsx(ge,{onClick:z,loading:b,icon:c.jsx(Zs,{className:"w-4 h-4"}),children:"Gnrer un code"})})]})]})]}),R==="users"&&c.jsx(Gl,{requiredPermission:"canManageUsers",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Utilisateurs (",u.length,")"]})}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Chef de chantier"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cr le"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(O=>{const te=O.uid===$?.uid,H=O.role===$e.SUPER_ADMIN,le=$?.role===$e.SUPER_ADMIN&&!te;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:c.jsx(Ws,{className:"w-5 h-5 text-gray-600"})})}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center space-x-2",children:[c.jsx("span",{children:O.displayName}),te&&c.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Vous"})]}),c.jsx("div",{className:"text-sm text-gray-500",children:O.role===$e.CLIENT&&O.username?`ID: ${O.username}  ${O.email}`:O.email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Z(O.role)}`,children:K(O.role)}),O.role===$e.ADMIN&&O.isChef&&c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border bg-orange-100 text-orange-800 border-orange-200",children:[c.jsx(ld,{className:"w-3 h-3 mr-1"}),"Chef"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.role===$e.ADMIN||O.role===$e.CHEF||O.role===$e.SUPER_ADMIN?c.jsx("div",{className:"flex items-center space-x-2",children:O.role===$e.CHEF||O.isChef||O.role===$e.SUPER_ADMIN?c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-green-100 text-green-800 border-green-200",children:[c.jsx(ld,{className:"w-3 h-3 mr-1"}),"Peut grer les chantiers"]}):c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-gray-100 text-gray-800 border-gray-200",children:"Admin uniquement"})}):c.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"flex items-center space-x-2",children:O.isBlocked?c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-red-100 text-red-800 border-red-200",children:[c.jsx(eN,{className:"w-3 h-3 mr-1"}),"Bloqu"]}):c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-green-100 text-green-800 border-green-200",children:[c.jsx(qo,{className:"w-3 h-3 mr-1"}),"Actif"]})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.createdAt.toDate().toLocaleDateString("fr-FR")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[le&&O.role===$e.CLIENT&&c.jsx(ge,{size:"sm",variant:"ghost",onClick:()=>q(O),icon:c.jsx(tN,{className:"w-4 h-4"}),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"Nouveaux accs"}),le&&O.role===$e.ADMIN&&c.jsx(ge,{size:"sm",variant:"ghost",onClick:()=>ye(O),icon:c.jsx(ld,{className:"w-4 h-4"}),className:O.isChef?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-green-600 hover:text-green-700 hover:bg-green-50",children:O.isChef?"Retirer chef":"Rendre chef"}),le&&!H&&c.jsx(ge,{size:"sm",variant:"ghost",onClick:()=>X(O),icon:O.isBlocked?c.jsx(qo,{className:"w-4 h-4"}):c.jsx(eN,{className:"w-4 h-4"}),className:O.isBlocked?"text-green-600 hover:text-green-700 hover:bg-green-50":"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:O.isBlocked?"Dbloquer":"Bloquer"}),H&&!te&&c.jsx("span",{className:"text-xs text-gray-400 italic",children:"Super Admin protg"})]})})]},O.uid)})})]}),u.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Ws,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun utilisateur"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Les utilisateurs apparatront ici"})]})]})]})}),c.jsx(Ds,{isOpen:t,onClose:()=>{e(!1),s(null)},title:"Code d'invitation gnr",children:n&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(Wy,{className:"w-5 h-5 text-green-600"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Code d'invitation"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Valable 7 jours"})]})]})}),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code  transmettre"}),c.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md text-center",children:c.jsx("code",{className:"text-2xl font-mono text-gray-800 tracking-wider font-bold",children:n})})]})}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(rx,{className:"w-5 h-5 text-blue-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Instructions"}),c.jsxs("ul",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[c.jsx("li",{children:" Transmettez ce code  l'administrateur"}),c.jsx("li",{children:" Il devra s'inscrire sur la page d'inscription"}),c.jsx("li",{children:" Le code expire dans 7 jours"}),c.jsx("li",{children:" Un code ne peut tre utilis qu'une seule fois"})]})]})]})}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(ge,{variant:"outline",onClick:()=>{e(!1),s(null)},children:"Fermer"}),c.jsxs(ge,{onClick:()=>D(n),children:[c.jsx(ya,{className:"w-4 h-4 mr-2"}),"Copier le code"]})]})]})}),c.jsx(Ds,{isOpen:U,onClose:()=>{V(!1),k(null)},title:"Nouveaux identifiants gnrs",children:j&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(tN,{className:"w-5 h-5 text-blue-600"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Identifiants rgnrs"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Transmettez ces informations au client"})]})]})}),c.jsx("div",{className:"space-y-3",children:c.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md",children:c.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:j})})}),c.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(rx,{className:"w-5 h-5 text-orange-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-orange-800",children:"Important"}),c.jsxs("ul",{className:"mt-2 text-sm text-orange-700 space-y-1",children:[c.jsx("li",{children:" Les anciens identifiants ne fonctionnent plus"}),c.jsx("li",{children:" Le client devra changer son mot de passe"}),c.jsx("li",{children:" Transmettez ces informations de manire scurise"}),c.jsx("li",{children:" Ne partagez jamais ces informations par email non scuris"})]})]})]})}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(ge,{variant:"outline",onClick:()=>{V(!1),k(null)},children:"Fermer"}),c.jsxs(ge,{onClick:()=>navigator.clipboard.writeText(j),children:[c.jsx(ya,{className:"w-4 h-4 mr-2"}),"Copier les identifiants"]})]})]})}),c.jsx(Hr,{isOpen:Y.isOpen,onClose:N,onConfirm:A,title:Y.title,message:Y.message,confirmText:Y.confirmText,type:Y.type})]})};class cq{collectionName="prospects";async getProspects(){const e=ve(re,this.collectionName),n=Ie(e,it("createdAt","desc"));return(await Ue(n)).docs.map(i=>({id:i.id,...i.data()}))}async updateProspectStatus(e,n){const s=Ne(re,this.collectionName,e);await _t(s,{status:n})}async deleteProspect(e){await us(Ne(re,this.collectionName,e))}subscribeToProspects(e){const n=ve(re,this.collectionName),s=Ie(n,it("createdAt","desc"));return Vn(s,i=>{e(i.docs.map(o=>({id:o.id,...o.data()})))})}}const b0=new cq;class TR{generateTemporaryPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let s=0;s<8;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}generateClientUsername(){const n=Date.now().toString().slice(-6),s=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`CLI${n}${s}`}async createClientAccount(e,n,s){try{const i=this.generateTemporaryPassword(),o=this.generateClientUsername();console.log("Cration compte client avec instance spare pour:",e);const h=(await xd(YT,e,i)).user;console.log("Compte client cr sur instance spare:",h.email),await lc(h,{displayName:n});const f={uid:h.uid,email:h.email,displayName:n,username:o,role:$e.CLIENT,createdAt:fe.now(),clientId:s,isTemporaryPassword:!0};return console.log("Sauvegarde avec admin auth:",bn.currentUser?.email),await Cs(Ne(re,"users",h.uid),f),await sd(YT),console.log("Compte client cr et instance spare dconnecte"),console.log("Admin reste connect sur instance principale "),{success:!0,tempPassword:i,username:o,uid:h.uid}}catch(i){console.error("Erreur lors de la cration du compte client:",i),console.error("Code erreur:",i.code),console.error("Message erreur:",i.message),console.error("Dtails complets:",JSON.stringify(i,null,2));let o="Erreur lors de la cration du compte";return i.code==="auth/email-already-in-use"?o="Un compte existe dj avec cet email":i.code==="auth/weak-password"?o="Le mot de passe gnr est trop faible":i.code==="auth/invalid-email"?o="Email invalide":i.code==="auth/network-request-failed"?o="Problme de rseau - vrifiez votre connexion":i.code==="auth/too-many-requests"?o="Trop de tentatives - ressayez plus tard":i.code==="auth/operation-not-allowed"?o="Cration de compte non autorise - vrifiez la configuration Firebase":o=`Erreur Firebase: ${i.code||"inconnue"} - ${i.message||"Pas de dtails"}`,{success:!1,error:o}}}}const NR=new TR,_A=Object.freeze(Object.defineProperty({__proto__:null,ClientAccountService:TR,clientAccountService:NR},Symbol.toStringTag,{value:"Module"})),uq=()=>{const[t,e]=S.useState([]),[n,s]=S.useState("all"),[i,o]=S.useState(!0),{confirmState:u,confirm:h,handleConfirm:f,handleClose:m}=ji();S.useEffect(()=>{const R=b0.subscribeToProspects(M=>{e(M),o(!1)});return()=>R()},[]);const y=R=>{h(async()=>{try{await b0.deleteProspect(R.id),se.success("Prospect supprim avec succs")}catch{se.error("Erreur lors de la suppression")}},{title:"Supprimer le prospect",message:`tes-vous sr de vouloir supprimer "${R.firstName} ${R.lastName}" ?`,confirmText:"Supprimer",type:"danger"})},v=R=>{h(async()=>{try{const M=await ga.addClient({nom:R.lastName,prenom:R.firstName,email:R.email,telephone:R.phone,adresse:"",localisationSite:"",projetAdhere:R.project||"Non spcifi",status:"En attente",isActive:!0,invitationStatus:"pending",typePaiement:"echeancier"}),j=await NR.createClientAccount(R.email,`${R.firstName} ${R.lastName}`,M);j.success&&await ga.updateClient(M,{userId:j.uid,username:j.username,tempPassword:j.tempPassword,invitationStatus:"accepted"}),await b0.updateProspectStatus(R.id,"validated"),j.success?se.success(c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-green-700 mb-1",children:"Prospect valid et compte cr !"}),c.jsxs("p",{className:"text-sm text-gray-700",children:["Identifiant : ",c.jsx("span",{className:"font-mono font-bold",children:j.username})]}),c.jsxs("p",{className:"text-sm text-gray-700",children:["Mot de passe : ",c.jsx("span",{className:"font-mono font-bold",children:j.tempPassword})]})]}),{autoClose:!1}):se.success("Prospect valid (profil cr), mais erreur lors de la cration du compte auto : "+j.error)}catch{se.error("Erreur lors de la validation")}},{title:"Valider le prospect",message:`Voulez-vous valider "${R.firstName} ${R.lastName}" et le convertir en client ?`,confirmText:"Valider",type:"info"})},b=t.filter(R=>n==="all"?!0:R.status===n),T=R=>{switch(R){case"pending":return c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[c.jsx($o,{className:"w-3 h-3 mr-1"})," En attente"]});case"validated":return c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[c.jsx(qo,{className:"w-3 h-3 mr-1"})," Valid"]});case"rejected":return c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[c.jsx(rU,{className:"w-3 h-3 mr-1"})," Refus"]});default:return null}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Prospects"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Grez les demandes d'adhsion depuis l'application mobile"})]}),c.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:n,onChange:R=>s(R.target.value),className:"appearance-none bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[c.jsx("option",{value:"all",children:"Tous les prospects"}),c.jsx("option",{value:"pending",children:"En attente"}),c.jsx("option",{value:"validated",children:"Valids"}),c.jsx("option",{value:"rejected",children:"Refuss"})]}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:c.jsx($v,{className:"h-4 w-4"})})]})})]}),c.jsx(Oe,{className:"p-0",children:i?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Chargement des prospects..."}):b.length>0?c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prospect"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projet souhait"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(R=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"font-medium text-gray-900",children:[R.firstName," ",R.lastName]})}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsxs("div",{className:"text-sm text-gray-900 flex items-center mb-1",children:[c.jsx(Go,{className:"w-3 h-3 mr-2 text-gray-400"})," ",R.email]}),c.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[c.jsx(Ap,{className:"w-3 h-3 mr-2 text-gray-400"})," ",R.phone]})]}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("div",{className:"text-sm text-gray-900",children:R.project||"-"})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:R.createdAt?.toDate?R.createdAt.toDate().toLocaleDateString():"N/A"}),c.jsx("td",{className:"px-6 py-4",children:T(R.status)}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex space-x-2",children:[R.status==="pending"&&c.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>v(R),className:"bg-green-50 text-green-600 hover:bg-green-100 border-green-200",children:[c.jsx(Yv,{className:"w-4 h-4 mr-1"})," Valider"]}),c.jsx(ge,{variant:"outline",size:"sm",onClick:()=>y(R),className:"text-red-500 hover:text-red-700",children:c.jsx($r,{className:"w-4 h-4"})})]})})]},R.id))})]})}):c.jsxs("div",{className:"text-center py-12 px-4",children:[c.jsx(Ws,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Aucun prospect"}),c.jsx("p",{className:"text-gray-500",children:"Les demandes de l'application mobile apparatront ici."})]})}),c.jsx(Hr,{isOpen:u.isOpen,onClose:m,onConfirm:f,title:u.title,message:u.message,confirmText:u.confirmText,cancelText:u.cancelText,type:u.type,loading:u.loading})]})},dq=({value:t,onChange:e,label:n="Image",error:s,aspectRatio:i="video"})=>{const[o,u]=S.useState(!1),h=async y=>{const v=y.target.files?.[0];if(v){u(!0);try{Br.validateImageFile(v);const b=await Br.uploadImage(v);e(b)}catch(b){alert(b.message||"Erreur lors de l'upload")}finally{u(!1),y.target.value=""}}},f=()=>{e("")},m=()=>{switch(i){case"square":return"aspect-square";case"video":return"aspect-video";case"portrait":return"aspect-[3/4]";default:return"aspect-auto min-h-[150px]"}};return c.jsxs("div",{className:"space-y-2",children:[n&&c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:n}),t?c.jsxs("div",{className:`relative group border-2 border-gray-200 rounded-lg overflow-hidden bg-gray-50 ${m()}`,children:[c.jsx("img",{src:t,alt:"Uploaded",className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:o}),c.jsx(ge,{type:"button",variant:"primary",size:"sm",children:o?"Upload...":"Changer"})]}),c.jsx(ge,{type:"button",variant:"outline",size:"sm",onClick:f,className:"bg-white hover:bg-red-50 text-red-600 border-red-200",children:c.jsx(Js,{className:"w-4 h-4"})})]})]}):c.jsxs("label",{className:`flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors ${m()}`,children:[c.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:o}),o?c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(nh,{className:"w-8 h-8 text-primary-600 animate-bounce mb-2"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload en cours..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Hv,{className:"w-10 h-10 text-gray-400 mb-2"}),c.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Cliquer pour envoyer"}),c.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG ou WebP (max 5MB)"})]})]}),s&&c.jsx("p",{className:"text-red-600 text-xs mt-1",children:s})]})};class hq{collectionName="settings";docName="showcase";async getShowcaseContent(){try{const e=Ne(re,this.collectionName,this.docName),n=await Pn(e);return n.exists()?n.data():null}catch(e){return console.error("Erreur lors de la rcupration du showcase:",e),null}}async updateShowcaseContent(e){try{const n=Ne(re,this.collectionName,this.docName);await Cs(n,{...e,updatedAt:fe.now()},{merge:!0})}catch(n){throw console.error("Erreur lors de la mise  jour du showcase:",n),n}}}const EA=new hq,fq=()=>{const{projects:t}=Ci(),[e,n]=S.useState(!0),[s,i]=S.useState(!1),[o,u]=S.useState({heroProject:{title:"AS SALAM SA KEUR",subtitle:"Nouveau programme rsidentiel",description:"Une cit moderne alliant confort et scurit.",imageUrl:"https://images.unsplash.com/photo-1600585154340-be6199f7d009?q=80&w=2070&auto=format&fit=crop"},promo:{active:!0,title:"Offre Spciale",subtitle:"-10% sur les frais de dossier ce mois-ci"},featuredVillas:[],updatedAt:null});S.useEffect(()=>{(async()=>{try{const y=await EA.getShowcaseContent();y&&u(y)}catch(y){console.error("Error fetching showcase content:",y)}finally{n(!1)}})()},[]);const h=async()=>{i(!0);try{await EA.updateShowcaseContent(o),se.success("Contenu du Showcase mis  jour avec succs")}catch{se.error("Erreur lors de la mise  jour")}finally{i(!1)}},f=m=>{u(y=>{const v=[...y.featuredVillas],b=v.indexOf(m);return b>-1?v.splice(b,1):v.push(m),{...y,featuredVillas:v}})};return e?c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Showcase Mobile"}),c.jsx("p",{className:"text-gray-600",children:"Grez le contenu public de l'application mobile"})]}),c.jsxs(ge,{onClick:h,loading:s,children:[c.jsx(sx,{className:"w-4 h-4 mr-2"}),"Enregistrer les modifications"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(Oe,{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 border-b pb-4 mb-4",children:[c.jsx(Nj,{className:"w-5 h-5 text-primary-600"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Section Hero (Projet Phare)"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Projet Phare (Titre)"}),c.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white",value:o.heroProject.title,onChange:m=>{u({...o,heroProject:{...o.heroProject,title:m.target.value}})},children:[c.jsx("option",{value:"",children:"Slectionnez un projet"}),t.map(m=>c.jsx("option",{value:m.name,children:m.name},m.id))]})]}),c.jsx(Be,{label:"Sous-titre",value:o.heroProject.subtitle,onChange:m=>u({...o,heroProject:{...o.heroProject,subtitle:m.target.value}})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),c.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 min-h-[100px]",value:o.heroProject.description,onChange:m=>u({...o,heroProject:{...o.heroProject,description:m.target.value}})})]}),c.jsx(dq,{label:"Image du Projet Phare",value:o.heroProject.imageUrl,onChange:m=>u({...o,heroProject:{...o.heroProject,imageUrl:m}}),aspectRatio:"video"})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Oe,{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(s9,{className:"w-5 h-5 text-primary-600"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Offre Promotionnelle"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.promo.active,onChange:m=>u({...o,promo:{...o.promo,active:m.target.checked}})}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Be,{label:"Titre de l'offre",value:o.promo.title,onChange:m=>u({...o,promo:{...o.promo,title:m.target.value}}),disabled:!o.promo.active}),c.jsx(Be,{label:"Description courte",value:o.promo.subtitle,onChange:m=>u({...o,promo:{...o.promo,subtitle:m.target.value}}),disabled:!o.promo.active})]})]}),c.jsxs(Oe,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 border-b pb-4 mb-4",children:[c.jsx(t9,{className:"w-5 h-5 text-primary-600"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Villas  la une"})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Slectionnez les villas qui apparatront dans le catalogue du showcase mobile."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-[300px] overflow-y-auto pr-2",children:t.map(m=>c.jsxs("button",{onClick:()=>f(m.id),className:`flex items-center gap-3 p-3 rounded-lg border text-left transition-all ${o.featuredVillas.includes(m.id)?"border-primary-600 bg-primary-50 ring-1 ring-primary-600":"border-gray-200 hover:border-primary-300"}`,children:[c.jsx("div",{className:"w-12 h-12 rounded bg-gray-100 overflow-hidden flex-shrink-0",children:m.images?.[0]?c.jsx("img",{src:m.images[0],alt:"",className:"w-full h-full object-cover"}):c.jsx(Hv,{className:"w-full h-full p-2 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.name}),c.jsx("p",{className:"text-xs text-gray-500 truncate",children:m.type})]}),o.featuredVillas.includes(m.id)&&c.jsx(nU,{className:"w-5 h-5 text-primary-600 flex-shrink-0"})]},m.id))}),t.length===0&&c.jsxs("div",{className:"text-center py-6 text-gray-500 text-sm",children:[c.jsx(Oa,{className:"w-6 h-6 mx-auto mb-2 opacity-20"}),"Aucun projet disponible. Crez-en dans la section Villas."]})]})]})]})]})};class mq{COLLECTION_NAME="chantiers";mapLegacyPhaseToKatos(e){const n=e.name.toLowerCase();let s=Ao.find(o=>o.name.toLowerCase().includes(n)||n.includes(o.name.toLowerCase()));return s||(n.includes("fondation")||n.includes("terrassement")?s=Ao.find(o=>o.name==="Fondation"):n.includes("gros")&&n.includes("uvre")?s=Ao.find(o=>o.name==="lvation"):n.includes("toiture")||n.includes("couverture")?s=Ao.find(o=>o.name==="Coulage"):n.includes("finition")&&(s=Ao.find(o=>o.name==="Peinture"))),s?{...s,id:e.id,progress:e.progress,status:e.status,notes:e.notes,photos:e.photos,lastUpdated:e.lastUpdated,updatedBy:e.updatedBy,assignedTeamMembers:e.assignedTeamMembers,requiredMaterials:e.requiredMaterials,plannedStartDate:e.plannedStartDate,plannedEndDate:e.plannedEndDate,actualStartDate:e.actualStartDate,actualEndDate:e.actualEndDate,steps:s.steps?.map(o=>({...o,id:xa(),progress:e.progress}))}:(console.warn(`Aucune correspondance trouve pour la phase: ${e.name}`),null)}addMissingKatosPhases(e){const n=new Set(e.map(i=>i.name)),s=[];return Ao.forEach(i=>{if(!n.has(i.name)){const o={...i,id:xa(),lastUpdated:fe.now(),updatedBy:"system_migration",steps:i.steps?.map(u=>({...u,id:xa()}))};s.push(o)}}),s}async migrateChantier(e){try{console.log(` Migration du chantier ${e}...`);const n=Ne(re,this.COLLECTION_NAME,e),i=(await Ue(ve(re,this.COLLECTION_NAME))).docs.find(b=>b.id===e);if(!i||!i.exists())return console.error(` Chantier ${e} non trouv`),!1;const o={id:i.id,...i.data()},u=[];o.phases.forEach(b=>{const T=this.mapLegacyPhaseToKatos(b);T&&u.push(T)});const h=this.addMissingKatosPhases(u),f=[...u,...h];f.sort((b,T)=>b.order-T.order);const m=xc(f),y=kd(f,o.plannedEndDate),v=f.map(b=>({...b,lastUpdated:b.lastUpdated||fe.now(),updatedBy:b.updatedBy||"system_migration"}));return await _t(n,{phases:v,globalProgress:m,status:y,updatedAt:fe.now(),migratedToKatosPhases:!0,migrationDate:fe.now()}),console.log(` Chantier ${e} migr avec succs (${f.length} phases)`),!0}catch(n){return console.error(` Erreur lors de la migration du chantier ${e}:`,n),!1}}async migrateAllChantiers(){try{console.log(" Dbut de la migration de tous les chantiers...");const e=ve(re,this.COLLECTION_NAME),n=await Ue(e),s={success:0,failed:0},i=Ad(re);let o=0;const u=500;for(const h of n.docs){const f=h.data();if(f.migratedToKatosPhases){console.log(` Chantier ${h.id} dj migr, ignor`);continue}try{const m={id:h.id,...f},y=[];m.phases?.forEach(k=>{const U=this.mapLegacyPhaseToKatos(k);U&&y.push(U)});const v=this.addMissingKatosPhases(y),b=[...y,...v];b.sort((k,U)=>k.order-U.order);const T=xc(b),R=kd(b,m.plannedEndDate),M=b.map(k=>({...k,lastUpdated:k.lastUpdated||fe.now(),updatedBy:k.updatedBy||"system_migration"})),j=Ne(re,this.COLLECTION_NAME,h.id);i.update(j,{phases:M,globalProgress:T,status:R,updatedAt:fe.now(),migratedToKatosPhases:!0,migrationDate:fe.now()}),o++,o>=u&&(await i.commit(),console.log(` Batch de ${o} chantiers trait`),o=0),s.success++}catch(m){console.error(` Erreur migration chantier ${h.id}:`,m),s.failed++}}return o>0&&(await i.commit(),console.log(` Dernier batch de ${o} chantiers trait`)),console.log(` Migration termine: ${s.success} russies, ${s.failed} choues`),s}catch(e){throw console.error(" Erreur lors de la migration gnrale:",e),e}}async checkMigrationStatus(){try{const e=ve(re,this.COLLECTION_NAME),n=await Ue(e);let s=0;const i=n.docs.length;return n.docs.forEach(o=>{o.data().migratedToKatosPhases&&s++}),{total:i,migrated:s,pending:i-s}}catch(e){throw console.error(" Erreur lors de la vrification du statut:",e),e}}}const Rx=new mq;typeof window>"u"&&(console.log(" Lancement de la migration des chantiers..."),Rx.migrateAllChantiers().then(t=>{console.log(" Migration termine:",t),process.exit(0)}).catch(t=>{console.error(" chec de la migration:",t),process.exit(1)}));const pq=()=>{const[t,e]=S.useState(null),[n,s]=S.useState(!1),[i,o]=S.useState(!1),[u,h]=S.useState(null),f=async()=>{s(!0);try{const y=await Rx.checkMigrationStatus();e(y)}catch(y){console.error("Erreur lors de la vrification:",y)}finally{s(!1)}},m=async()=>{if(confirm("tes-vous sr de vouloir migrer tous les chantiers vers la nouvelle structure Katos ?")){o(!0),h(null);try{const y=await Rx.migrateAllChantiers();h(y),await f()}catch(y){console.error("Erreur lors de la migration:",y),alert("Erreur lors de la migration. Consultez la console pour plus de dtails.")}finally{o(!1)}}};return ot.useEffect(()=>{f()},[]),c.jsx("div",{className:"space-y-6",children:c.jsxs(Oe,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(tx,{className:"w-6 h-6 text-blue-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Migration vers les phases Katos"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Oa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-900",children:" propos de cette migration"}),c.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"Cette migration met  jour tous les chantiers existants pour utiliser la nouvelle structure de phases Katos avec 14 phases dtailles et leurs sous-tapes."})]})]})}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Statut de la migration"}),c.jsxs(ge,{onClick:f,disabled:n,size:"sm",variant:"outline",children:[n?c.jsx(Zy,{className:"w-4 h-4 animate-spin mr-2"}):c.jsx(Zy,{className:"w-4 h-4 mr-2"}),"Actualiser"]})]}),t?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.total}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total chantiers"})]}),c.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.migrated}),c.jsx("div",{className:"text-sm text-gray-600",children:"Migrs"})]}),c.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.pending}),c.jsx("div",{className:"text-sm text-gray-600",children:"En attente"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Progression"}),c.jsxs("span",{children:[t.total>0?Math.round(t.migrated/t.total*100):0,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${t.total>0?t.migrated/t.total*100:0}%`}})})]}),c.jsx("div",{className:"flex items-center gap-2",children:t.pending===0?c.jsxs(c.Fragment,{children:[c.jsx(qo,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"text-green-600 font-medium",children:"Tous les chantiers sont migrs"})]}):c.jsxs(c.Fragment,{children:[c.jsx($o,{className:"w-5 h-5 text-yellow-600"}),c.jsxs("span",{className:"text-yellow-600 font-medium",children:[t.pending," chantier(s)  migrer"]})]})})]}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:n?"Vrification en cours...":'Cliquez sur "Actualiser" pour vrifier le statut'})]}),u&&c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Rsultats de la dernire migration"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[c.jsx("div",{className:"text-xl font-bold text-green-600",children:u.success}),c.jsx("div",{className:"text-sm text-gray-600",children:"Russies"})]}),c.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[c.jsx("div",{className:"text-xl font-bold text-red-600",children:u.failed}),c.jsx("div",{className:"text-sm text-gray-600",children:"choues"})]})]})]}),c.jsx("div",{className:"flex gap-3",children:c.jsx(ge,{onClick:m,disabled:i||t?.pending===0,className:"flex-1",children:i?c.jsxs(c.Fragment,{children:[c.jsx(Zy,{className:"w-4 h-4 animate-spin mr-2"}),"Migration en cours..."]}):c.jsxs(c.Fragment,{children:[c.jsx(tx,{className:"w-4 h-4 mr-2"}),t?.pending===0?"Migration termine":"Dmarrer la migration"]})})}),t&&t.pending>0&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Oa,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-yellow-900",children:"Important"}),c.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Cette opration modifiera dfinitivement la structure des donnes. Assurez-vous d'avoir une sauvegarde avant de continuer."})]})]})})]})]})})},gq={async triggerDocumentUpload(t,e,n,s){const i={plan:"un plan",contract:"un contrat",photo:"une photo",other:"un document"};await Cn.createNotification({type:"document_upload",title:"Nouveau document upload",message:`${e} a upload ${i[s]} : "${n}"`,clientId:t,clientName:e,isRead:!1,data:{documentName:n,documentType:s}})},async triggerMaterialSelection(t,e,n,s,i){const o=i?` (${i} unit${i>1?"s":""})`:"";await Cn.createNotification({type:"material_selection",title:"Matriau slectionn",message:`${e} a slectionn le matriau "${n}"${o} depuis la boutique`,clientId:t,clientName:e,isRead:!1,data:{materialName:n,materialId:s,quantity:i}})},async triggerClientUpdate(t,e,n){const s={profile:"son profil",project:"les dtails de son projet",preferences:"ses prfrences"};await Cn.createNotification({type:"client_update",title:"Profil client mis  jour",message:`${e} a modifi ${s[n]}`,clientId:t,clientName:e,isRead:!1,data:{updateType:n}})},async createTestNotifications(){const t=[{id:"client1",name:"Jean Dupont"},{id:"client2",name:"Marie Martin"},{id:"client3",name:"Pierre Durand"}];await this.triggerDocumentUpload(t[0].id,t[0].name,"Plan-Villa-Zeyna-F4.pdf","plan"),await this.triggerMaterialSelection(t[1].id,t[1].name,"Carrelage blanc brillant 60x60","mat_001",25),await this.triggerClientUpdate(t[2].id,t[2].name,"project"),console.log("Notifications de test cres avec succs !")}},yq=()=>{const{user:t,userData:e,setUser:n,setUserData:s}=Fn(),{clients:i}=Zo(),{materials:o}=zv(),{projects:u}=Ci(),{confirmState:h,confirm:f,handleConfirm:m,handleClose:y}=ji(),[v,b]=S.useState(!1),[T,R]=S.useState({name:e?.displayName||t?.displayName||"",email:t?.email||"",phoneNumber:e?.phoneNumber||""}),[M,j]=S.useState(!1),[k,U]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[V,$]=S.useState(!1),[Y,oe]=S.useState(!1),[A,N]=S.useState(!1),C=async()=>{if(!k.currentPassword||!k.newPassword){se.error("Veuillez remplir tous les champs");return}if(k.newPassword!==k.confirmPassword){se.error("Les nouveaux mots de passe ne correspondent pas");return}if(k.newPassword.length<6){se.error("Le nouveau mot de passe doit contenir au moins 6 caractres");return}j(!0);try{const D=await js.changePassword(k.currentPassword,k.newPassword);D.success?(se.success("Mot de passe chang avec succs"),U({currentPassword:"",newPassword:"",confirmPassword:""})):se.error(D.error||"Erreur lors du changement de mot de passe")}catch(D){console.error("Erreur complte:",D);let _e="Erreur lors du changement de mot de passe";D.code==="auth/wrong-password"||D.code==="auth/invalid-credential"?_e="Mot de passe actuel incorrect. Veuillez vrifier votre mot de passe.":D.code==="auth/weak-password"?_e="Le nouveau mot de passe est trop faible":D.code==="auth/requires-recent-login"?_e="Veuillez vous reconnecter avant de changer votre mot de passe":D.message&&(_e=D.message),se.error(_e)}finally{j(!1)}},L=()=>{f(()=>z(),{title:"Exporter les donnes",message:"Voulez-vous vraiment exporter toutes les donnes en format CSV ? Cette action crera plusieurs fichiers de tlchargement.",confirmText:"Exporter",type:"info"})},z=()=>{const D=me=>{if(me.length===0)return"";const X=Object.keys(me[0]),K=X.join(","),Z=me.map(q=>X.map(ye=>{const O=q[ye];return typeof O=="string"&&(O.includes(",")||O.includes('"'))?`"${O.replace(/"/g,'""')}"`:O}).join(","));return[K,...Z].join(`
`)},_e=new Date().toISOString().split("T")[0];if(i.length>0){const me=D(i),X=new Blob([me],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(X),Z=document.createElement("a");Z.href=K,Z.download=`katos-clients-${_e}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(K)}if(o.length>0){const me=D(o),X=new Blob([me],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(X),Z=document.createElement("a");Z.href=K,Z.download=`katos-materiaux-${_e}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(K)}if(u.length>0){const me=D(u),X=new Blob([me],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(X),Z=document.createElement("a");Z.href=K,Z.download=`katos-projets-${_e}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(K)}se.success(`Donnes exportes en CSV (${i.length+o.length+u.length} entres)`)},B=async()=>{if(t)try{await lc(t,{displayName:T.name}),e&&await Cs(Ne(re,"users",t.uid),{...e,displayName:T.name,phoneNumber:T.phoneNumber||null}),n({...t,displayName:T.name}),s(e?{...e,displayName:T.name,phoneNumber:T.phoneNumber||null}:null),b(!1),se.success("Profil mis  jour avec succs")}catch(D){console.error("Erreur lors de la mise  jour du profil:",D),se.error("Erreur lors de la mise  jour du profil")}};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100",children:[c.jsxs("div",{className:"max-w-6xl mx-auto p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6 lg:space-y-8",children:[c.jsxs("div",{className:"relative overflow-hidden rounded-xl sm:rounded-2xl shadow-lg sm:shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 via-primary-600 to-secondary-500"}),c.jsx("div",{className:"relative p-4 sm:p-6 lg:p-8 text-white",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[c.jsx("div",{className:"p-2 sm:p-3 lg:p-4 bg-white/15 rounded-xl sm:rounded-2xl backdrop-blur-sm border border-white/10",children:c.jsx(Kv,{className:"w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 text-black"})}),c.jsx("div",{children:c.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight text-black",children:"Paramtres"})})]}),c.jsx("div",{className:"hidden sm:block",children:c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:"Interface Katos"}),c.jsx("p",{className:"text-white font-semibold text-sm sm:text-base",children:"Version 1.0"})]})})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[c.jsx(Oe,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-gray-100 rounded-xl shadow-lg",children:c.jsx(Ei,{className:"w-6 h-6 text-primary-600"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Profil utilisateur"})]}),c.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>b(!v),children:[c.jsx(kU,{className:"w-4 h-4 mr-2"}),v?"Annuler":"Modifier"]})]}),c.jsx("div",{className:"space-y-4",children:v?c.jsxs(c.Fragment,{children:[c.jsx(Be,{label:"Nom complet",value:T.name,onChange:D=>R({...T,name:D.target.value})}),c.jsx(Be,{label:"Email",value:T.email,onChange:D=>R({...T,email:D.target.value}),disabled:!0}),c.jsx(Be,{label:"Tlphone",value:T.phoneNumber,onChange:D=>R({...T,phoneNumber:D.target.value}),placeholder:"+221 XX XXX XX XX"}),c.jsxs(ge,{onClick:B,className:"w-full",children:[c.jsx(sx,{className:"w-4 h-4 mr-2"}),"Sauvegarder"]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[c.jsx(Ei,{className:"w-5 h-5 text-gray-600"}),c.jsx("span",{className:"font-medium",children:T.name})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[c.jsx(Go,{className:"w-5 h-5 text-gray-600"}),c.jsx("span",{className:"font-medium",children:T.email})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[c.jsx(Ap,{className:"w-5 h-5 text-gray-600"}),c.jsx("span",{className:"font-medium",children:T.phoneNumber||"Non renseign"})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[c.jsx(rx,{className:"w-5 h-5 text-gray-600"}),c.jsx("span",{className:"font-medium",children:"Administrateur"})]})]})})]})}),c.jsx(Oe,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Changer le mot de passe"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Mot de passe actuel"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:V?"text":"password",value:k.currentPassword,onChange:D=>U({...k,currentPassword:D.target.value}),placeholder:"Votre mot de passe actuel",className:"w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm"}),c.jsx("button",{type:"button",onClick:()=>$(!V),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:V?c.jsx(ic,{className:"w-5 h-5"}):c.jsx(Sa,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Nouveau mot de passe"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:Y?"text":"password",value:k.newPassword,onChange:D=>U({...k,newPassword:D.target.value}),placeholder:"Nouveau mot de passe (min. 6 caractres)",className:"w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm"}),c.jsx("button",{type:"button",onClick:()=>oe(!Y),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:Y?c.jsx(ic,{className:"w-5 h-5"}):c.jsx(Sa,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Confirmer le nouveau mot de passe"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:A?"text":"password",value:k.confirmPassword,onChange:D=>U({...k,confirmPassword:D.target.value}),placeholder:"Confirmez le nouveau mot de passe",className:"w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm"}),c.jsx("button",{type:"button",onClick:()=>N(!A),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:A?c.jsx(ic,{className:"w-5 h-5"}):c.jsx(Sa,{className:"w-5 h-5"})})]})]}),c.jsxs(ge,{onClick:C,className:"w-full",loading:M,disabled:M,children:[c.jsx(sx,{className:"w-4 h-4 mr-2"}),M?"Changement en cours...":"Changer le mot de passe"]})]})]})}),c.jsx(Oe,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:c.jsx(Fv,{className:"w-6 h-6 text-white"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Statistiques des donnes"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),c.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Clients"})]}),c.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),c.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Matriaux"})]}),c.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u.length}),c.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"Projets"})]})]})]})}),c.jsx(Oe,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg",children:c.jsx(nx,{className:"w-6 h-6 text-white"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Export des donnes"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-600 text-sm",children:"Exportez toutes vos donnes au format CSV pour Excel et autres tableurs."}),c.jsxs(ge,{className:"w-full justify-start bg-green-600 hover:bg-green-700",onClick:L,children:[c.jsx(nx,{className:"w-4 h-4 mr-3"}),"Exporter en CSV"]}),c.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Gnre 3 fichiers CSV : clients, matriaux et projets"})]})]})}),c.jsx(Oe,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:c.jsx(Aa,{className:"w-6 h-6 text-white"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Notifications"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-600 text-sm",children:"Recevez des notifications pour les nouvelles commandes et mises  jour."}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Aa,{className:"w-5 h-5 text-gray-600"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium block",children:"Notifications actives"}),c.jsx("span",{className:"text-sm text-gray-500",children:"Alertes temps rel"})]})]}),c.jsx("div",{className:"w-14 h-7 bg-primary-500 rounded-full relative cursor-pointer",children:c.jsx("div",{className:"w-6 h-6 bg-white rounded-full absolute top-0.5 right-0.5 transition-transform shadow-sm"})})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Test des notifications"}),c.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Testez le systme de notifications en simulant des actions clients"}),c.jsx(ge,{onClick:async()=>{try{await gq.createTestNotifications(),se.success("Notifications de test cres !")}catch{se.error("Erreur lors de la cration des notifications")}},className:"w-full",size:"sm",children:"Crer des notifications de test"})]})]})]})}),e?.role==="super_admin"&&c.jsx(Oe,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg",children:c.jsx(tx,{className:"w-6 h-6 text-white"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Migration des donnes"})]}),c.jsx(pq,{})]})})]})]}),c.jsx(Hr,{isOpen:h.isOpen,onClose:y,onConfirm:m,title:h.title,message:h.message,confirmText:h.confirmText,type:h.type})]})},xq=()=>{const{clients:t}=Zo(),[e,n]=S.useState(!0),[s,i]=S.useState({totalExpected:0,totalCollected:0,totalOverdue:0,collectionRate:0}),[o,u]=S.useState([]),[h,f]=S.useState(""),[m,y]=S.useState("all"),[v,b]=S.useState("clients"),[T,R]=S.useState([]),{projects:M}=Ci(),[j,k]=S.useState(null),[U,V]=S.useState(!1),[$,Y]=S.useState(null),[oe,A]=S.useState(!1);S.useEffect(()=>{N()},[t]);const N=async()=>{n(!0);try{const me=await Promise.all(t.map(async Z=>{const q=await va.getClientPaymentDashboard(Z.id);return{...Z,dashboard:q}}));u(me);const X=me.reduce((Z,q)=>({totalExpected:Z.totalExpected+q.dashboard.totalProjectCost,totalCollected:Z.totalCollected+q.dashboard.totalPaid,totalOverdue:Z.totalOverdue+q.dashboard.totalOverdue}),{totalExpected:0,totalCollected:0,totalOverdue:0});i({...X,collectionRate:X.totalExpected>0?X.totalCollected/X.totalExpected*100:0});const K=await va.getAllPaymentHistory();R(K)}catch(me){console.error("Error loading financial data:",me),se.error("Erreur lors du chargement des donnes financires")}finally{n(!1)}},C=me=>{const X=t.find(K=>K.id===me);return X?`${X.nom} ${X.prenom}`:"Client inconnu"},L=me=>{const X=t.find(K=>K.id===me);return X?M.find(K=>K.id===X.projetAdhere||K.name===X.projetAdhere):null},z=async(me,X)=>{try{await Cn.sendPaymentReminder(me.id,X,new Date,"overdue"),se.success(`Rappel envoy  ${me.nom} ${me.prenom}`)}catch(K){console.error("Error sending reminder:",K),se.error("Erreur lors de l'envoi du rappel")}},B=me=>{k(me),V(!0)},D=me=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0}).format(me)+" FCFA",_e=o.filter(me=>{const X=me.nom.toLowerCase().includes(h.toLowerCase())||me.prenom.toLowerCase().includes(h.toLowerCase());return m==="overdue"?X&&me.dashboard.totalOverdue>0:m==="up_to_date"?X&&me.dashboard.totalOverdue===0:X});return e?c.jsxs("div",{className:"flex items-center justify-center h-screen",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des finances..."})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de Bord Comptable"}),c.jsx("div",{className:"flex gap-2",children:c.jsxs(ge,{onClick:()=>Km.checkPaymentReminders(),variant:"outline",children:[c.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Vrifier les chances"]})})]}),c.jsxs("div",{className:"flex border-b border-gray-200",children:[c.jsx("button",{className:`px-6 py-3 text-sm font-medium ${v==="clients"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>b("clients"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ws,{className:"w-4 h-4"}),"Suivi par Client"]})}),c.jsx("button",{className:`px-6 py-3 text-sm font-medium ${v==="transactions"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>b("transactions"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qU,{className:"w-4 h-4"}),"Historique des Reus"]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(Oe,{className:"p-4 border-l-4 border-blue-500",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'Affaires Total"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:D(s.totalExpected)})]}),c.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:c.jsx(qv,{className:"w-5 h-5 text-blue-600"})})]})}),c.jsx(Oe,{className:"p-4 border-l-4 border-green-500",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Encaiss"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:D(s.totalCollected)}),c.jsxs("p",{className:"text-sm text-green-600 mt-1 flex items-center",children:[c.jsx(Cj,{className:"w-3 h-3 mr-1"}),s.collectionRate.toFixed(1),"%"]})]}),c.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:c.jsx(qo,{className:"w-5 h-5 text-green-600"})})]})}),c.jsx(Oe,{className:"p-4 border-l-4 border-red-500",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total En Retard"}),c.jsx("h3",{className:"text-2xl font-bold text-red-600 mt-2",children:D(s.totalOverdue)})]}),c.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:c.jsx(Oa,{className:"w-5 h-5 text-red-600"})})]})}),c.jsx(Oe,{className:"p-4 border-l-4 border-orange-500",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Reste  Recouvrer"}),c.jsx("h3",{className:"text-2xl font-bold text-orange-600 mt-2",children:D(s.totalExpected-s.totalCollected)})]}),c.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:c.jsx($o,{className:"w-5 h-5 text-orange-600"})})]})})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[c.jsxs("div",{className:"relative w-full md:w-96",children:[c.jsx(Gv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx(Be,{placeholder:"Rechercher un client...",className:"pl-10",value:h,onChange:me=>f(me.target.value)})]}),c.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[c.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-blue-500",value:m,onChange:me=>y(me.target.value),children:[c.jsx("option",{value:"all",children:"Tous les statuts"}),c.jsx("option",{value:"overdue",children:"En retard"}),c.jsx("option",{value:"up_to_date",children:" jour"})]}),c.jsxs(ge,{variant:"outline",children:[c.jsx(nx,{className:"w-4 h-4 mr-2"}),"Exporter"]})]})]}),v==="clients"?c.jsx(Oe,{className:"overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projet"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pay"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reste"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_e.map(me=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:me.nom[0]}),c.jsxs("div",{className:"ml-3",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[me.nom," ",me.prenom]}),c.jsx("div",{className:"text-sm text-gray-500",children:me.email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:me.projetAdhere}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:D(me.dashboard.totalProjectCost)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:D(me.dashboard.totalPaid)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600",children:D(me.dashboard.totalRemaining)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:me.dashboard.totalOverdue>0?c.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:["En retard (",D(me.dashboard.totalOverdue),")"]}):me.dashboard.totalRemaining===0?c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Sold"}):c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:" jour"})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[me.dashboard.totalOverdue>0&&c.jsxs(ge,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-900",onClick:()=>z(me,me.dashboard.totalOverdue),children:[c.jsx(Aa,{className:"w-4 h-4 mr-1"}),"Relancer"]}),c.jsxs(ge,{size:"sm",variant:"outline",onClick:()=>B(me),className:"ml-2",children:[c.jsx(rc,{className:"w-4 h-4 mr-1"}),"Grer"]})]})]},me.id))})]})})}):c.jsx(Oe,{className:"overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mthode"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(me=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(me.date.seconds*1e3).toLocaleDateString("fr-FR")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:C(me.clientId)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:D(me.amount)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:me.method.replace("_"," ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsxs(ge,{size:"sm",variant:"ghost",className:"text-blue-600 hover:text-blue-900",onClick:()=>{Y(me),A(!0)},children:[c.jsx(Ho,{className:"w-4 h-4 mr-1"}),"Voir Reu"]}),c.jsxs(ge,{size:"sm",variant:"ghost",className:"text-orange-600 hover:text-orange-900",onClick:async()=>{const X=t.find(K=>K.id===me.clientId);if(X)try{await Cn.notifyPaymentReceived(X.id,me.amount,`Paiement du ${new Date(me.date.seconds*1e3).toLocaleDateString("fr-FR")}`),se.success("Notification envoye")}catch{se.error("Erreur notification")}},children:[c.jsx(Aa,{className:"w-4 h-4 mr-1"}),"Notifier"]})]})})]},me.id))})]})})}),j&&c.jsx(_R,{isOpen:U,onClose:()=>{V(!1),k(null),N()},client:j,initialTab:"billing"}),oe&&$&&c.jsx(wR,{payment:$,client:t.find(me=>me.id===$.clientId),project:L($.clientId),onClose:()=>{A(!1),Y(null)}})]})};function vq(){return c.jsx(j4,{children:c.jsx(dL,{children:c.jsx(CL,{children:c.jsxs("div",{className:"App",children:[c.jsxs(a4,{children:[c.jsx(on,{path:"/login",element:c.jsx(e8,{})}),c.jsx(on,{path:"/register",element:c.jsx(r8,{})}),c.jsxs(on,{path:"/",element:c.jsx(jL,{children:c.jsx(J9,{})}),children:[c.jsx(on,{index:!0,element:c.jsx(xm,{to:"/dashboard",replace:!0})}),c.jsx(on,{path:"dashboard",element:c.jsx(KF,{})}),c.jsx(on,{path:"prospects",element:c.jsx(uq,{})}),c.jsx(on,{path:"clients",element:c.jsx(JF,{})}),c.jsx(on,{path:"projects",element:c.jsx(nq,{})}),c.jsx(on,{path:"chantiers",element:c.jsx(sq,{})}),c.jsx(on,{path:"chantiers/:id",element:c.jsx(wA,{})}),c.jsx(on,{path:"chantiers/:id",element:c.jsx(wA,{})}),c.jsx(on,{path:"boutique",element:c.jsx(aq,{})}),c.jsx(on,{path:"accounting",element:c.jsx(xq,{})}),c.jsx(on,{path:"documents",element:c.jsx(oq,{})}),c.jsx(on,{path:"users",element:c.jsx(lq,{})}),c.jsx(on,{path:"showcase",element:c.jsx(fq,{})}),c.jsx(on,{path:"settings",element:c.jsx(yq,{})})]}),c.jsx(on,{path:"*",element:c.jsx(xm,{to:"/dashboard",replace:!0})})]}),c.jsx(xM,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})})})}hD.createRoot(document.getElementById("root")).render(c.jsx(S.StrictMode,{children:c.jsx(vq,{})}));
